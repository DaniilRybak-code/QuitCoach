(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ix(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ny={exports:{}},Xl={},ry={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),Nx=Symbol.for("react.portal"),Cx=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),Ax=Symbol.for("react.forward_ref"),Dx=Symbol.for("react.suspense"),Ox=Symbol.for("react.memo"),jx=Symbol.for("react.lazy"),bp=Symbol.iterator;function Lx(t){return t===null||typeof t!="object"?null:(t=bp&&t[bp]||t["@@iterator"],typeof t=="function"?t:null)}var sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iy=Object.assign,oy={};function gi(t,e,n){this.props=t,this.context=e,this.refs=oy,this.updater=n||sy}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ay(){}ay.prototype=gi.prototype;function hh(t,e,n){this.props=t,this.context=e,this.refs=oy,this.updater=n||sy}var fh=hh.prototype=new ay;fh.constructor=hh;iy(fh,gi.prototype);fh.isPureReactComponent=!0;var Ep=Array.isArray,ly=Object.prototype.hasOwnProperty,ph={current:null},cy={key:!0,ref:!0,__self:!0,__source:!0};function uy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ly.call(e,r)&&!cy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Go,type:t,key:i,ref:o,props:s,_owner:ph.current}}function Mx(t,e){return{$$typeof:Go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Go}function Fx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ip=/\/+/g;function Qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fx(""+t.key):e.toString(36)}function Va(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Go:case Nx:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Qc(o,0):r,Ep(s)?(n="",t!=null&&(n=t.replace(Ip,"$&/")+"/"),Va(s,e,n,"",function(u){return u})):s!=null&&(mh(s)&&(s=Mx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ip,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ep(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Qc(i,l);o+=Va(i,e,n,c,s)}else if(c=Lx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Qc(i,l++),o+=Va(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ya(t,e,n){if(t==null)return t;var r=[],s=0;return Va(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ux(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Ba={transition:null},$x={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Ba,ReactCurrentOwner:ph};function dy(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:ya,forEach:function(t,e,n){ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ya(t,function(){e++}),e},toArray:function(t){return ya(t,function(e){return e})||[]},only:function(t){if(!mh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=gi;ne.Fragment=Cx;ne.Profiler=kx;ne.PureComponent=hh;ne.StrictMode=Tx;ne.Suspense=Dx;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$x;ne.act=dy;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ph.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ly.call(e,c)&&!cy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Go,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:Px,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rx,_context:t},t.Consumer=t};ne.createElement=uy;ne.createFactory=function(t){var e=uy.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:Ax,render:t}};ne.isValidElement=mh;ne.lazy=function(t){return{$$typeof:jx,_payload:{_status:-1,_result:t},_init:Ux}};ne.memo=function(t,e){return{$$typeof:Ox,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Ba.transition;Ba.transition={};try{t()}finally{Ba.transition=e}};ne.unstable_act=dy;ne.useCallback=function(t,e){return It.current.useCallback(t,e)};ne.useContext=function(t){return It.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ne.useEffect=function(t,e){return It.current.useEffect(t,e)};ne.useId=function(){return It.current.useId()};ne.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return It.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ne.useRef=function(t){return It.current.useRef(t)};ne.useState=function(t){return It.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return It.current.useTransition()};ne.version="18.3.1";ry.exports=ne;var N=ry.exports;const Vx=Ix(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=N,Wx=Symbol.for("react.element"),zx=Symbol.for("react.fragment"),Hx=Object.prototype.hasOwnProperty,Gx=Bx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qx={key:!0,ref:!0,__self:!0,__source:!0};function hy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Hx.call(e,r)&&!qx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Wx,type:t,key:i,ref:o,props:s,_owner:Gx.current}}Xl.Fragment=zx;Xl.jsx=hy;Xl.jsxs=hy;ny.exports=Xl;var a=ny.exports,zu={},fy={exports:{}},Kt={},py={exports:{}},my={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,W){var H=P.length;P.push(W);e:for(;0<H;){var re=H-1>>>1,ee=P[re];if(0<s(ee,W))P[re]=W,P[H]=ee,H=re;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var W=P[0],H=P.pop();if(H!==W){P[0]=H;e:for(var re=0,ee=P.length,ct=ee>>>1;re<ct;){var ze=2*(re+1)-1,te=P[ze],he=ze+1,ut=P[he];if(0>s(te,H))he<ee&&0>s(ut,te)?(P[re]=ut,P[he]=H,re=he):(P[re]=te,P[ze]=H,re=ze);else if(he<ee&&0>s(ut,H))P[re]=ut,P[he]=H,re=he;else break e}}return W}function s(P,W){var H=P.sortIndex-W.sortIndex;return H!==0?H:P.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,v=!1,w=!1,L=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=P)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function S(P){if(w=!1,y(P),!v)if(n(c)!==null)v=!0,q(k);else{var W=n(u);W!==null&&ce(S,W.startTime-P)}}function k(P,W){v=!1,w&&(w=!1,m(T),T=-1),g=!0;var H=f;try{for(y(W),h=n(c);h!==null&&(!(h.expirationTime>W)||P&&!E());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var ee=re(h.expirationTime<=W);W=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(c)&&r(c),y(W)}else r(c);h=n(c)}if(h!==null)var ct=!0;else{var ze=n(u);ze!==null&&ce(S,ze.startTime-W),ct=!1}return ct}finally{h=null,f=H,g=!1}}var C=!1,R=null,T=-1,j=5,_=-1;function E(){return!(t.unstable_now()-_<j)}function x(){if(R!==null){var P=t.unstable_now();_=P;var W=!0;try{W=R(!0,P)}finally{W?I():(C=!1,R=null)}}else C=!1}var I;if(typeof p=="function")I=function(){p(x)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=x,I=function(){B.postMessage(null)}}else I=function(){L(x,0)};function q(P){R=P,C||(C=!0,I())}function ce(P,W){T=L(function(){P(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,q(k))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var H=f;f=W;try{return P()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=f;f=P;try{return W()}finally{f=H}},t.unstable_scheduleCallback=function(P,W,H){var re=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?re+H:re):H=re,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=H+ee,P={id:d++,callback:W,priorityLevel:P,startTime:H,expirationTime:ee,sortIndex:-1},H>re?(P.sortIndex=H,e(u,P),n(c)===null&&P===n(u)&&(w?(m(T),T=-1):w=!0,ce(S,H-re))):(P.sortIndex=ee,e(c,P),v||g||(v=!0,q(k))),P},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(P){var W=f;return function(){var H=f;f=W;try{return P.apply(this,arguments)}finally{f=H}}}})(my);py.exports=my;var Kx=py.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=N,Ht=Kx;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gy=new Set,fo={};function ws(t,e){ri(t,e),ri(t+"Capture",e)}function ri(t,e){for(fo[t]=e,t=0;t<e.length;t++)gy.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,Qx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Np={},Cp={};function Jx(t){return Hu.call(Cp,t)?!0:Hu.call(Np,t)?!1:Qx.test(t)?Cp[t]=!0:(Np[t]=!0,!1)}function Xx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Zx(t,e,n,r){if(e===null||typeof e>"u"||Xx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gh=/[\-:]([a-z])/g;function yh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gh,yh);lt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gh,yh);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gh,yh);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vh(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Zx(e,n,s,r)&&(n=null),r||s===null?Jx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rr=Yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),Os=Symbol.for("react.fragment"),_h=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),yy=Symbol.for("react.provider"),vy=Symbol.for("react.context"),wh=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),Ku=Symbol.for("react.suspense_list"),xh=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),_y=Symbol.for("react.offscreen"),Tp=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=Tp&&t[Tp]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Jc;function Vi(t){if(Jc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jc=e&&e[1]||""}return`
`+Jc+t}var Xc=!1;function Zc(t,e){if(!t||Xc)return"";Xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Xc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vi(t):""}function eS(t){switch(t.tag){case 5:return Vi(t.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 2:case 15:return t=Zc(t.type,!1),t;case 11:return t=Zc(t.type.render,!1),t;case 1:return t=Zc(t.type,!0),t;default:return""}}function Yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Os:return"Fragment";case Ds:return"Portal";case Gu:return"Profiler";case _h:return"StrictMode";case qu:return"Suspense";case Ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vy:return(t.displayName||"Context")+".Consumer";case yy:return(t._context.displayName||"Context")+".Provider";case wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xh:return e=t.displayName||null,e!==null?e:Yu(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return Yu(t(e))}catch{}}return null}function tS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===_h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nS(t){var e=wy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){t._valueTracker||(t._valueTracker=nS(t))}function xy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qu(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sy(t,e){e=e.checked,e!=null&&vh(t,"checked",e,!1)}function Ju(t,e){Sy(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xu(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xu(t,e,n){(e!=="number"||sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bi=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(Bi(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function by(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ap(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ey(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ed(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ey(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,Iy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rS=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){rS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function Ny(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function Cy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ny(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var sS=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function td(t,e){if(e){if(sS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function nd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rd=null;function Sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sd=null,Gs=null,qs=null;function Dp(t){if(t=Yo(t)){if(typeof sd!="function")throw Error(A(280));var e=t.stateNode;e&&(e=rc(e),sd(t.stateNode,t.type,e))}}function Ty(t){Gs?qs?qs.push(t):qs=[t]:Gs=t}function ky(){if(Gs){var t=Gs,e=qs;if(qs=Gs=null,Dp(t),e)for(t=0;t<e.length;t++)Dp(e[t])}}function Ry(t,e){return t(e)}function Py(){}var eu=!1;function Ay(t,e,n){if(eu)return t(e,n);eu=!0;try{return Ry(t,e,n)}finally{eu=!1,(Gs!==null||qs!==null)&&(Py(),ky())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=rc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var id=!1;if(Kn)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){id=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{id=!1}function iS(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Yi=!1,il=null,ol=!1,od=null,oS={onError:function(t){Yi=!0,il=t}};function aS(t,e,n,r,s,i,o,l,c){Yi=!1,il=null,iS.apply(oS,arguments)}function lS(t,e,n,r,s,i,o,l,c){if(aS.apply(this,arguments),Yi){if(Yi){var u=il;Yi=!1,il=null}else throw Error(A(198));ol||(ol=!0,od=u)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Op(t){if(xs(t)!==t)throw Error(A(188))}function cS(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Op(s),t;if(i===r)return Op(s),e;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function Oy(t){return t=cS(t),t!==null?jy(t):null}function jy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jy(t);if(e!==null)return e;t=t.sibling}return null}var Ly=Ht.unstable_scheduleCallback,jp=Ht.unstable_cancelCallback,uS=Ht.unstable_shouldYield,dS=Ht.unstable_requestPaint,Ve=Ht.unstable_now,hS=Ht.unstable_getCurrentPriorityLevel,bh=Ht.unstable_ImmediatePriority,My=Ht.unstable_UserBlockingPriority,al=Ht.unstable_NormalPriority,fS=Ht.unstable_LowPriority,Fy=Ht.unstable_IdlePriority,Zl=null,kn=null;function pS(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:yS,mS=Math.log,gS=Math.LN2;function yS(t){return t>>>=0,t===0?32:31-(mS(t)/gS|0)|0}var xa=64,Sa=4194304;function Wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Wi(l):(i&=o,i!==0&&(r=Wi(i)))}else o=n&~s,o!==0?r=Wi(o):i!==0&&(r=Wi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function vS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _S(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=vS(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function ad(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uy(){var t=xa;return xa<<=1,!(xa&4194240)&&(xa=64),t}function tu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function wS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function $y(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vy,Ih,By,Wy,zy,ld=!1,ba=[],xr=null,Sr=null,br=null,go=new Map,yo=new Map,hr=[],xS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lp(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(e.pointerId)}}function Ri(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yo(e),e!==null&&Ih(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function SS(t,e,n,r,s){switch(e){case"focusin":return xr=Ri(xr,t,e,n,r,s),!0;case"dragenter":return Sr=Ri(Sr,t,e,n,r,s),!0;case"mouseover":return br=Ri(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return go.set(i,Ri(go.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,yo.set(i,Ri(yo.get(i)||null,t,e,n,r,s)),!0}return!1}function Hy(t){var e=Jr(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Dy(n),e!==null){t.blockedOn=e,zy(t.priority,function(){By(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rd=r,n.target.dispatchEvent(r),rd=null}else return e=Yo(n),e!==null&&Ih(e),t.blockedOn=n,!1;e.shift()}return!0}function Mp(t,e,n){Wa(t)&&n.delete(e)}function bS(){ld=!1,xr!==null&&Wa(xr)&&(xr=null),Sr!==null&&Wa(Sr)&&(Sr=null),br!==null&&Wa(br)&&(br=null),go.forEach(Mp),yo.forEach(Mp)}function Pi(t,e){t.blockedOn===e&&(t.blockedOn=null,ld||(ld=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,bS)))}function vo(t){function e(s){return Pi(s,t)}if(0<ba.length){Pi(ba[0],t);for(var n=1;n<ba.length;n++){var r=ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Pi(xr,t),Sr!==null&&Pi(Sr,t),br!==null&&Pi(br,t),go.forEach(e),yo.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)Hy(n),n.blockedOn===null&&hr.shift()}var Ks=rr.ReactCurrentBatchConfig,cl=!0;function ES(t,e,n,r){var s=de,i=Ks.transition;Ks.transition=null;try{de=1,Nh(t,e,n,r)}finally{de=s,Ks.transition=i}}function IS(t,e,n,r){var s=de,i=Ks.transition;Ks.transition=null;try{de=4,Nh(t,e,n,r)}finally{de=s,Ks.transition=i}}function Nh(t,e,n,r){if(cl){var s=cd(t,e,n,r);if(s===null)du(t,e,r,ul,n),Lp(t,r);else if(SS(s,t,e,n,r))r.stopPropagation();else if(Lp(t,r),e&4&&-1<xS.indexOf(t)){for(;s!==null;){var i=Yo(s);if(i!==null&&Vy(i),i=cd(t,e,n,r),i===null&&du(t,e,r,ul,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else du(t,e,r,null,n)}}var ul=null;function cd(t,e,n,r){if(ul=null,t=Sh(r),t=Jr(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ul=t,null}function Gy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hS()){case bh:return 1;case My:return 4;case al:case fS:return 16;case Fy:return 536870912;default:return 16}default:return 16}}var yr=null,Ch=null,za=null;function qy(){if(za)return za;var t,e=Ch,n=e.length,r,s="value"in yr?yr.value:yr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return za=s.slice(t,1<r?1-r:void 0)}function Ha(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ea(){return!0}function Fp(){return!1}function Yt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ea:Fp,this.isPropagationStopped=Fp,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),e}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=Yt(yi),Ko=Oe({},yi,{view:0,detail:0}),NS=Yt(Ko),nu,ru,Ai,ec=Oe({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(nu=t.screenX-Ai.screenX,ru=t.screenY-Ai.screenY):ru=nu=0,Ai=t),nu)},movementY:function(t){return"movementY"in t?t.movementY:ru}}),Up=Yt(ec),CS=Oe({},ec,{dataTransfer:0}),TS=Yt(CS),kS=Oe({},Ko,{relatedTarget:0}),su=Yt(kS),RS=Oe({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=Yt(RS),AS=Oe({},yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DS=Yt(AS),OS=Oe({},yi,{data:0}),$p=Yt(OS),jS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MS[t])?!!e[t]:!1}function kh(){return FS}var US=Oe({},Ko,{key:function(t){if(t.key){var e=jS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ha(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(t){return t.type==="keypress"?Ha(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ha(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$S=Yt(US),VS=Oe({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vp=Yt(VS),BS=Oe({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),WS=Yt(BS),zS=Oe({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),HS=Yt(zS),GS=Oe({},ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qS=Yt(GS),KS=[9,13,27,32],Rh=Kn&&"CompositionEvent"in window,Qi=null;Kn&&"documentMode"in document&&(Qi=document.documentMode);var YS=Kn&&"TextEvent"in window&&!Qi,Ky=Kn&&(!Rh||Qi&&8<Qi&&11>=Qi),Bp=String.fromCharCode(32),Wp=!1;function Yy(t,e){switch(t){case"keyup":return KS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function QS(t,e){switch(t){case"compositionend":return Qy(e);case"keypress":return e.which!==32?null:(Wp=!0,Bp);case"textInput":return t=e.data,t===Bp&&Wp?null:t;default:return null}}function JS(t,e){if(js)return t==="compositionend"||!Rh&&Yy(t,e)?(t=qy(),za=Ch=yr=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ky&&e.locale!=="ko"?null:e.data;default:return null}}var XS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XS[t.type]:e==="textarea"}function Jy(t,e,n,r){Ty(r),e=dl(e,"onChange"),0<e.length&&(n=new Th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ji=null,_o=null;function ZS(t){l0(t,0)}function tc(t){var e=Fs(t);if(xy(e))return t}function eb(t,e){if(t==="change")return e}var Xy=!1;if(Kn){var iu;if(Kn){var ou="oninput"in document;if(!ou){var Hp=document.createElement("div");Hp.setAttribute("oninput","return;"),ou=typeof Hp.oninput=="function"}iu=ou}else iu=!1;Xy=iu&&(!document.documentMode||9<document.documentMode)}function Gp(){Ji&&(Ji.detachEvent("onpropertychange",Zy),_o=Ji=null)}function Zy(t){if(t.propertyName==="value"&&tc(_o)){var e=[];Jy(e,_o,t,Sh(t)),Ay(ZS,e)}}function tb(t,e,n){t==="focusin"?(Gp(),Ji=e,_o=n,Ji.attachEvent("onpropertychange",Zy)):t==="focusout"&&Gp()}function nb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tc(_o)}function rb(t,e){if(t==="click")return tc(e)}function sb(t,e){if(t==="input"||t==="change")return tc(e)}function ib(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:ib;function wo(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hu.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kp(t,e){var n=qp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qp(n)}}function e0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?e0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function t0(){for(var t=window,e=sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sl(t.document)}return e}function Ph(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ob(t){var e=t0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&e0(n.ownerDocument.documentElement,n)){if(r!==null&&Ph(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Kp(n,i);var o=Kp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ab=Kn&&"documentMode"in document&&11>=document.documentMode,Ls=null,ud=null,Xi=null,dd=!1;function Yp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dd||Ls==null||Ls!==sl(r)||(r=Ls,"selectionStart"in r&&Ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xi&&wo(Xi,r)||(Xi=r,r=dl(ud,"onSelect"),0<r.length&&(e=new Th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ls)))}function Ia(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionend:Ia("Transition","TransitionEnd")},au={},n0={};Kn&&(n0=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function nc(t){if(au[t])return au[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in n0)return au[t]=e[n];return t}var r0=nc("animationend"),s0=nc("animationiteration"),i0=nc("animationstart"),o0=nc("transitionend"),a0=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){a0.set(t,e),ws(e,[t])}for(var lu=0;lu<Qp.length;lu++){var cu=Qp[lu],lb=cu.toLowerCase(),cb=cu[0].toUpperCase()+cu.slice(1);Br(lb,"on"+cb)}Br(r0,"onAnimationEnd");Br(s0,"onAnimationIteration");Br(i0,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(o0,"onTransitionEnd");ri("onMouseEnter",["mouseout","mouseover"]);ri("onMouseLeave",["mouseout","mouseover"]);ri("onPointerEnter",["pointerout","pointerover"]);ri("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ub=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function Jp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lS(r,e,void 0,t),t.currentTarget=null}function l0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Jp(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Jp(s,l,u),i=c}}}if(ol)throw t=od,ol=!1,od=null,t}function Se(t,e){var n=e[gd];n===void 0&&(n=e[gd]=new Set);var r=t+"__bubble";n.has(r)||(c0(e,t,2,!1),n.add(r))}function uu(t,e,n){var r=0;e&&(r|=4),c0(n,t,r,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Na]){t[Na]=!0,gy.forEach(function(n){n!=="selectionchange"&&(ub.has(n)||uu(n,!1,t),uu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,uu("selectionchange",!1,e))}}function c0(t,e,n,r){switch(Gy(e)){case 1:var s=ES;break;case 4:s=IS;break;default:s=Nh}n=s.bind(null,e,n,t),s=void 0,!id||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function du(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Jr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ay(function(){var u=i,d=Sh(n),h=[];e:{var f=a0.get(t);if(f!==void 0){var g=Th,v=t;switch(t){case"keypress":if(Ha(n)===0)break e;case"keydown":case"keyup":g=$S;break;case"focusin":v="focus",g=su;break;case"focusout":v="blur",g=su;break;case"beforeblur":case"afterblur":g=su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=TS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=WS;break;case r0:case s0:case i0:g=PS;break;case o0:g=HS;break;case"scroll":g=NS;break;case"wheel":g=qS;break;case"copy":case"cut":case"paste":g=DS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Vp}var w=(e&4)!==0,L=!w&&t==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,y;p!==null;){y=p;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,m!==null&&(S=mo(p,m),S!=null&&w.push(So(p,S,y)))),L)break;p=p.return}0<w.length&&(f=new g(f,v,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==rd&&(v=n.relatedTarget||n.fromElement)&&(Jr(v)||v[Yn]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Jr(v):null,v!==null&&(L=xs(v),v!==L||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=Up,S="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=Vp,S="onPointerLeave",m="onPointerEnter",p="pointer"),L=g==null?f:Fs(g),y=v==null?f:Fs(v),f=new w(S,p+"leave",g,n,d),f.target=L,f.relatedTarget=y,S=null,Jr(d)===u&&(w=new w(m,p+"enter",v,n,d),w.target=y,w.relatedTarget=L,S=w),L=S,g&&v)t:{for(w=g,m=v,p=0,y=w;y;y=Ps(y))p++;for(y=0,S=m;S;S=Ps(S))y++;for(;0<p-y;)w=Ps(w),p--;for(;0<y-p;)m=Ps(m),y--;for(;p--;){if(w===m||m!==null&&w===m.alternate)break t;w=Ps(w),m=Ps(m)}w=null}else w=null;g!==null&&Xp(h,f,g,w,!1),v!==null&&L!==null&&Xp(h,L,v,w,!0)}}e:{if(f=u?Fs(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=eb;else if(zp(f))if(Xy)k=sb;else{k=nb;var C=tb}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=rb);if(k&&(k=k(t,u))){Jy(h,k,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Xu(f,"number",f.value)}switch(C=u?Fs(u):window,t){case"focusin":(zp(C)||C.contentEditable==="true")&&(Ls=C,ud=u,Xi=null);break;case"focusout":Xi=ud=Ls=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,Yp(h,n,d);break;case"selectionchange":if(ab)break;case"keydown":case"keyup":Yp(h,n,d)}var R;if(Rh)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else js?Yy(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Ky&&n.locale!=="ko"&&(js||T!=="onCompositionStart"?T==="onCompositionEnd"&&js&&(R=qy()):(yr=d,Ch="value"in yr?yr.value:yr.textContent,js=!0)),C=dl(u,T),0<C.length&&(T=new $p(T,t,null,n,d),h.push({event:T,listeners:C}),R?T.data=R:(R=Qy(n),R!==null&&(T.data=R)))),(R=YS?QS(t,n):JS(t,n))&&(u=dl(u,"onBeforeInput"),0<u.length&&(d=new $p("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=R))}l0(h,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=mo(t,n),i!=null&&r.unshift(So(t,i,s)),i=mo(t,e),i!=null&&r.push(So(t,i,s))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=mo(n,i),c!=null&&o.unshift(So(n,c,l))):s||(c=mo(n,i),c!=null&&o.push(So(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var db=/\r\n?/g,hb=/\u0000|\uFFFD/g;function Zp(t){return(typeof t=="string"?t:""+t).replace(db,`
`).replace(hb,"")}function Ca(t,e,n){if(e=Zp(e),Zp(t)!==e&&n)throw Error(A(425))}function hl(){}var hd=null,fd=null;function pd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var md=typeof setTimeout=="function"?setTimeout:void 0,fb=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,pb=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(t){return em.resolve(null).then(t).catch(mb)}:md;function mb(t){setTimeout(function(){throw t})}function hu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vo(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Nn="__reactFiber$"+vi,bo="__reactProps$"+vi,Yn="__reactContainer$"+vi,gd="__reactEvents$"+vi,gb="__reactListeners$"+vi,yb="__reactHandles$"+vi;function Jr(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tm(t);t!==null;){if(n=t[Nn])return n;t=tm(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[Nn]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function rc(t){return t[bo]||null}var yd=[],Us=-1;function Wr(t){return{current:t}}function Ee(t){0>Us||(t.current=yd[Us],yd[Us]=null,Us--)}function _e(t,e){Us++,yd[Us]=t.current,t.current=e}var jr={},yt=Wr(jr),Dt=Wr(!1),ls=jr;function si(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(t){return t=t.childContextTypes,t!=null}function fl(){Ee(Dt),Ee(yt)}function nm(t,e,n){if(yt.current!==jr)throw Error(A(168));_e(yt,e),_e(Dt,n)}function u0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(A(108,tS(t)||"Unknown",s));return Oe({},n,r)}function pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,ls=yt.current,_e(yt,t),_e(Dt,Dt.current),!0}function rm(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=u0(t,e,ls),r.__reactInternalMemoizedMergedChildContext=t,Ee(Dt),Ee(yt),_e(yt,t)):Ee(Dt),_e(Dt,n)}var Un=null,sc=!1,fu=!1;function d0(t){Un===null?Un=[t]:Un.push(t)}function vb(t){sc=!0,d0(t)}function zr(){if(!fu&&Un!==null){fu=!0;var t=0,e=de;try{var n=Un;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Un=null,sc=!1}catch(s){throw Un!==null&&(Un=Un.slice(t+1)),Ly(bh,zr),s}finally{de=e,fu=!1}}return null}var $s=[],Vs=0,ml=null,gl=0,Xt=[],Zt=0,cs=null,Vn=1,Bn="";function qr(t,e){$s[Vs++]=gl,$s[Vs++]=ml,ml=t,gl=e}function h0(t,e,n){Xt[Zt++]=Vn,Xt[Zt++]=Bn,Xt[Zt++]=cs,cs=t;var r=Vn;t=Bn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vn=1<<32-yn(e)+s|n<<s|r,Bn=i+t}else Vn=1<<i|n<<s|r,Bn=t}function Ah(t){t.return!==null&&(qr(t,1),h0(t,1,0))}function Dh(t){for(;t===ml;)ml=$s[--Vs],$s[Vs]=null,gl=$s[--Vs],$s[Vs]=null;for(;t===cs;)cs=Xt[--Zt],Xt[Zt]=null,Bn=Xt[--Zt],Xt[Zt]=null,Vn=Xt[--Zt],Xt[Zt]=null}var Wt=null,Bt=null,Te=!1,pn=null;function f0(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:Vn,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Bt=null,!0):!1;default:return!1}}function vd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _d(t){if(Te){var e=Bt;if(e){var n=e;if(!sm(t,e)){if(vd(t))throw Error(A(418));e=Er(n.nextSibling);var r=Wt;e&&sm(t,e)?f0(r,n):(t.flags=t.flags&-4097|2,Te=!1,Wt=t)}}else{if(vd(t))throw Error(A(418));t.flags=t.flags&-4097|2,Te=!1,Wt=t}}}function im(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Ta(t){if(t!==Wt)return!1;if(!Te)return im(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pd(t.type,t.memoizedProps)),e&&(e=Bt)){if(vd(t))throw p0(),Error(A(418));for(;e;)f0(t,e),e=Er(e.nextSibling)}if(im(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Wt?Er(t.stateNode.nextSibling):null;return!0}function p0(){for(var t=Bt;t;)t=Er(t.nextSibling)}function ii(){Bt=Wt=null,Te=!1}function Oh(t){pn===null?pn=[t]:pn.push(t)}var _b=rr.ReactCurrentBatchConfig;function Di(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function ka(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function om(t){var e=t._init;return e(t._payload)}function m0(t){function e(m,p){if(t){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=Tr(m,p),m.index=0,m.sibling=null,m}function i(m,p,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,y,S){return p===null||p.tag!==6?(p=wu(y,m.mode,S),p.return=m,p):(p=s(p,y),p.return=m,p)}function c(m,p,y,S){var k=y.type;return k===Os?d(m,p,y.props.children,S,y.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cr&&om(k)===p.type)?(S=s(p,y.props),S.ref=Di(m,p,y),S.return=m,S):(S=Xa(y.type,y.key,y.props,null,m.mode,S),S.ref=Di(m,p,y),S.return=m,S)}function u(m,p,y,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=xu(y,m.mode,S),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function d(m,p,y,S,k){return p===null||p.tag!==7?(p=is(y,m.mode,S,k),p.return=m,p):(p=s(p,y),p.return=m,p)}function h(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=wu(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case va:return y=Xa(p.type,p.key,p.props,null,m.mode,y),y.ref=Di(m,null,p),y.return=m,y;case Ds:return p=xu(p,m.mode,y),p.return=m,p;case cr:var S=p._init;return h(m,S(p._payload),y)}if(Bi(p)||Ti(p))return p=is(p,m.mode,y,null),p.return=m,p;ka(m,p)}return null}function f(m,p,y,S){var k=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:l(m,p,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case va:return y.key===k?c(m,p,y,S):null;case Ds:return y.key===k?u(m,p,y,S):null;case cr:return k=y._init,f(m,p,k(y._payload),S)}if(Bi(y)||Ti(y))return k!==null?null:d(m,p,y,S,null);ka(m,y)}return null}function g(m,p,y,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(y)||null,l(p,m,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case va:return m=m.get(S.key===null?y:S.key)||null,c(p,m,S,k);case Ds:return m=m.get(S.key===null?y:S.key)||null,u(p,m,S,k);case cr:var C=S._init;return g(m,p,y,C(S._payload),k)}if(Bi(S)||Ti(S))return m=m.get(y)||null,d(p,m,S,k,null);ka(p,S)}return null}function v(m,p,y,S){for(var k=null,C=null,R=p,T=p=0,j=null;R!==null&&T<y.length;T++){R.index>T?(j=R,R=null):j=R.sibling;var _=f(m,R,y[T],S);if(_===null){R===null&&(R=j);break}t&&R&&_.alternate===null&&e(m,R),p=i(_,p,T),C===null?k=_:C.sibling=_,C=_,R=j}if(T===y.length)return n(m,R),Te&&qr(m,T),k;if(R===null){for(;T<y.length;T++)R=h(m,y[T],S),R!==null&&(p=i(R,p,T),C===null?k=R:C.sibling=R,C=R);return Te&&qr(m,T),k}for(R=r(m,R);T<y.length;T++)j=g(R,m,T,y[T],S),j!==null&&(t&&j.alternate!==null&&R.delete(j.key===null?T:j.key),p=i(j,p,T),C===null?k=j:C.sibling=j,C=j);return t&&R.forEach(function(E){return e(m,E)}),Te&&qr(m,T),k}function w(m,p,y,S){var k=Ti(y);if(typeof k!="function")throw Error(A(150));if(y=k.call(y),y==null)throw Error(A(151));for(var C=k=null,R=p,T=p=0,j=null,_=y.next();R!==null&&!_.done;T++,_=y.next()){R.index>T?(j=R,R=null):j=R.sibling;var E=f(m,R,_.value,S);if(E===null){R===null&&(R=j);break}t&&R&&E.alternate===null&&e(m,R),p=i(E,p,T),C===null?k=E:C.sibling=E,C=E,R=j}if(_.done)return n(m,R),Te&&qr(m,T),k;if(R===null){for(;!_.done;T++,_=y.next())_=h(m,_.value,S),_!==null&&(p=i(_,p,T),C===null?k=_:C.sibling=_,C=_);return Te&&qr(m,T),k}for(R=r(m,R);!_.done;T++,_=y.next())_=g(R,m,T,_.value,S),_!==null&&(t&&_.alternate!==null&&R.delete(_.key===null?T:_.key),p=i(_,p,T),C===null?k=_:C.sibling=_,C=_);return t&&R.forEach(function(x){return e(m,x)}),Te&&qr(m,T),k}function L(m,p,y,S){if(typeof y=="object"&&y!==null&&y.type===Os&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case va:e:{for(var k=y.key,C=p;C!==null;){if(C.key===k){if(k=y.type,k===Os){if(C.tag===7){n(m,C.sibling),p=s(C,y.props.children),p.return=m,m=p;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cr&&om(k)===C.type){n(m,C.sibling),p=s(C,y.props),p.ref=Di(m,C,y),p.return=m,m=p;break e}n(m,C);break}else e(m,C);C=C.sibling}y.type===Os?(p=is(y.props.children,m.mode,S,y.key),p.return=m,m=p):(S=Xa(y.type,y.key,y.props,null,m.mode,S),S.ref=Di(m,p,y),S.return=m,m=S)}return o(m);case Ds:e:{for(C=y.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=xu(y,m.mode,S),p.return=m,m=p}return o(m);case cr:return C=y._init,L(m,p,C(y._payload),S)}if(Bi(y))return v(m,p,y,S);if(Ti(y))return w(m,p,y,S);ka(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=wu(y,m.mode,S),p.return=m,m=p),o(m)):n(m,p)}return L}var oi=m0(!0),g0=m0(!1),yl=Wr(null),vl=null,Bs=null,jh=null;function Lh(){jh=Bs=vl=null}function Mh(t){var e=yl.current;Ee(yl),t._currentValue=e}function wd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ys(t,e){vl=t,jh=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function an(t){var e=t._currentValue;if(jh!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(vl===null)throw Error(A(308));Bs=t,vl.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var Xr=null;function Fh(t){Xr===null?Xr=[t]:Xr.push(t)}function y0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Fh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,Fh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function Ga(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}function am(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _l(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,w=l;switch(f=e,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(g,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(g,h,f):v,f==null)break e;h=Oe({},h,f);break e;case 2:ur=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=h}}function lm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var Qo={},Rn=Wr(Qo),Eo=Wr(Qo),Io=Wr(Qo);function Zr(t){if(t===Qo)throw Error(A(174));return t}function $h(t,e){switch(_e(Io,e),_e(Eo,t),_e(Rn,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ed(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ed(e,t)}Ee(Rn),_e(Rn,e)}function ai(){Ee(Rn),Ee(Eo),Ee(Io)}function _0(t){Zr(Io.current);var e=Zr(Rn.current),n=ed(e,t.type);e!==n&&(_e(Eo,t),_e(Rn,n))}function Vh(t){Eo.current===t&&(Ee(Rn),Ee(Eo))}var Re=Wr(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pu=[];function Bh(){for(var t=0;t<pu.length;t++)pu[t]._workInProgressVersionPrimary=null;pu.length=0}var qa=rr.ReactCurrentDispatcher,mu=rr.ReactCurrentBatchConfig,us=0,De=null,qe=null,et=null,xl=!1,Zi=!1,No=0,wb=0;function ft(){throw Error(A(321))}function Wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function zh(t,e,n,r,s,i){if(us=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qa.current=t===null||t.memoizedState===null?Eb:Ib,t=n(r,s),Zi){i=0;do{if(Zi=!1,No=0,25<=i)throw Error(A(301));i+=1,et=qe=null,e.updateQueue=null,qa.current=Nb,t=n(r,s)}while(Zi)}if(qa.current=Sl,e=qe!==null&&qe.next!==null,us=0,et=qe=De=null,xl=!1,e)throw Error(A(300));return t}function Hh(){var t=No!==0;return No=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=t:et=et.next=t,et}function ln(){if(qe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=et===null?De.memoizedState:et.next;if(e!==null)et=e,qe=t;else{if(t===null)throw Error(A(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},et===null?De.memoizedState=et=t:et=et.next=t}return et}function Co(t,e){return typeof e=="function"?e(t):e}function gu(t){var e=ln(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((us&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,De.lanes|=d,ds|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,wn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,ds|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yu(t){var e=ln(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function w0(){}function x0(t,e){var n=De,r=ln(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Gh(E0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,To(9,b0.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(A(349));us&30||S0(n,e,s)}return s}function S0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b0(t,e,n,r){e.value=n,e.getSnapshot=r,I0(e)&&N0(t)}function E0(t,e,n){return n(function(){I0(e)&&N0(t)})}function I0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function N0(t){var e=Qn(t,1);e!==null&&vn(e,t,1,-1)}function cm(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=bb.bind(null,De,t),[e.memoizedState,t]}function To(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function C0(){return ln().memoizedState}function Ka(t,e,n,r){var s=In();De.flags|=t,s.memoizedState=To(1|e,n,void 0,r===void 0?null:r)}function ic(t,e,n,r){var s=ln();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Wh(r,o.deps)){s.memoizedState=To(e,n,i,r);return}}De.flags|=t,s.memoizedState=To(1|e,n,i,r)}function um(t,e){return Ka(8390656,8,t,e)}function Gh(t,e){return ic(2048,8,t,e)}function T0(t,e){return ic(4,2,t,e)}function k0(t,e){return ic(4,4,t,e)}function R0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P0(t,e,n){return n=n!=null?n.concat([t]):null,ic(4,4,R0.bind(null,e,t),n)}function qh(){}function A0(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D0(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function O0(t,e,n){return us&21?(wn(n,e)||(n=Uy(),De.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function xb(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=mu.transition;mu.transition={};try{t(!1),e()}finally{de=n,mu.transition=r}}function j0(){return ln().memoizedState}function Sb(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},L0(t))M0(e,n);else if(n=y0(t,e,n,r),n!==null){var s=St();vn(n,t,r,s),F0(n,e,r)}}function bb(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(L0(t))M0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,wn(l,o)){var c=e.interleaved;c===null?(s.next=s,Fh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=y0(t,e,s,r),n!==null&&(s=St(),vn(n,t,r,s),F0(n,e,r))}}function L0(t){var e=t.alternate;return t===De||e!==null&&e===De}function M0(t,e){Zi=xl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function F0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}var Sl={readContext:an,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Eb={readContext:an,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:an,useEffect:um,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ka(4194308,4,R0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ka(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ka(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sb.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:cm,useDebugValue:qh,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=cm(!1),e=t[0];return t=xb.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=In();if(Te){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),rt===null)throw Error(A(349));us&30||S0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,um(E0.bind(null,r,i,t),[t]),r.flags|=2048,To(9,b0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=rt.identifierPrefix;if(Te){var n=Bn,r=Vn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ib={readContext:an,useCallback:A0,useContext:an,useEffect:Gh,useImperativeHandle:P0,useInsertionEffect:T0,useLayoutEffect:k0,useMemo:D0,useReducer:gu,useRef:C0,useState:function(){return gu(Co)},useDebugValue:qh,useDeferredValue:function(t){var e=ln();return O0(e,qe.memoizedState,t)},useTransition:function(){var t=gu(Co)[0],e=ln().memoizedState;return[t,e]},useMutableSource:w0,useSyncExternalStore:x0,useId:j0,unstable_isNewReconciler:!1},Nb={readContext:an,useCallback:A0,useContext:an,useEffect:Gh,useImperativeHandle:P0,useInsertionEffect:T0,useLayoutEffect:k0,useMemo:D0,useReducer:yu,useRef:C0,useState:function(){return yu(Co)},useDebugValue:qh,useDeferredValue:function(t){var e=ln();return qe===null?e.memoizedState=t:O0(e,qe.memoizedState,t)},useTransition:function(){var t=yu(Co)[0],e=ln().memoizedState;return[t,e]},useMutableSource:w0,useSyncExternalStore:x0,useId:j0,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oc={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),s=Cr(t),i=Gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(vn(e,t,s,r),Ga(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),s=Cr(t),i=Gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(vn(e,t,s,r),Ga(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=Cr(t),s=Gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(vn(e,t,r,n),Ga(e,t,r))}};function dm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(s,i):!0}function U0(t,e,n){var r=!1,s=jr,i=e.contextType;return typeof i=="object"&&i!==null?i=an(i):(s=Ot(e)?ls:yt.current,r=e.contextTypes,i=(r=r!=null)?si(t,s):jr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&oc.enqueueReplaceState(e,e.state,null)}function Sd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Uh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=an(i):(i=Ot(e)?ls:yt.current,s.context=si(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&oc.enqueueReplaceState(s,s.state,null),_l(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function li(t,e){try{var n="",r=e;do n+=eS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cb=typeof WeakMap=="function"?WeakMap:Map;function $0(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){El||(El=!0,Dd=r),bd(t,e)},n}function V0(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bd(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Cb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Vb.bind(null,t,e,n),e.then(t,t))}function pm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var Tb=rr.ReactCurrentOwner,Pt=!1;function wt(t,e,n,r){e.child=t===null?g0(e,null,n,r):oi(e,t.child,n,r)}function gm(t,e,n,r,s){n=n.render;var i=e.ref;return Ys(e,s),r=zh(t,e,n,r,i,s),n=Hh(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jn(t,e,s)):(Te&&n&&Ah(e),e.flags|=1,wt(t,e,r,s),e.child)}function ym(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!tf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,B0(t,e,i,r,s)):(t=Xa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return Jn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function B0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wo(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Jn(t,e,s)}return Ed(t,e,n,r,s)}function W0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(zs,$t),$t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(zs,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(zs,$t),$t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(zs,$t),$t|=r;return wt(t,e,s,n),e.child}function z0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ed(t,e,n,r,s){var i=Ot(n)?ls:yt.current;return i=si(e,i),Ys(e,s),n=zh(t,e,n,r,i,s),r=Hh(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jn(t,e,s)):(Te&&r&&Ah(e),e.flags|=1,wt(t,e,n,s),e.child)}function vm(t,e,n,r,s){if(Ot(n)){var i=!0;pl(e)}else i=!1;if(Ys(e,s),e.stateNode===null)Ya(t,e),U0(e,n,r),Sd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=an(u):(u=Ot(n)?ls:yt.current,u=si(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&hm(e,o,r,u),ur=!1;var f=e.memoizedState;o.state=f,_l(e,r,o,s),c=e.memoizedState,l!==r||f!==c||Dt.current||ur?(typeof d=="function"&&(xd(e,n,d,r),c=e.memoizedState),(l=ur||dm(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,v0(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:hn(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=an(c):(c=Ot(n)?ls:yt.current,c=si(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&hm(e,o,r,c),ur=!1,f=e.memoizedState,o.state=f,_l(e,r,o,s);var v=e.memoizedState;l!==h||f!==v||Dt.current||ur?(typeof g=="function"&&(xd(e,n,g,r),v=e.memoizedState),(u=ur||dm(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Id(t,e,n,r,i,s)}function Id(t,e,n,r,s,i){z0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&rm(e,n,!1),Jn(t,e,i);r=e.stateNode,Tb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oi(e,t.child,null,i),e.child=oi(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&rm(e,n,!0),e.child}function H0(t){var e=t.stateNode;e.pendingContext?nm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nm(t,e.context,!1),$h(t,e.containerInfo)}function _m(t,e,n,r,s){return ii(),Oh(s),e.flags|=256,wt(t,e,n,r),e.child}var Nd={dehydrated:null,treeContext:null,retryLane:0};function Cd(t){return{baseLanes:t,cachePool:null,transitions:null}}function G0(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Re,s&1),t===null)return _d(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cc(o,r,0,null),t=is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Cd(n),e.memoizedState=Nd,t):Kh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kb(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Tr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Tr(l,i):(i=is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Cd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nd,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kh(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ra(t,e,n,r){return r!==null&&Oh(r),oi(e,t.child,null,n),t=Kh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kb(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vu(Error(A(422))),Ra(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cc({mode:"visible",children:r.children},s,0,null),i=is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oi(e,t.child,null,o),e.child.memoizedState=Cd(o),e.memoizedState=Nd,i);if(!(e.mode&1))return Ra(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(A(419)),r=vu(i,r,void 0),Ra(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pt||l){if(r=rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),vn(r,t,s,-1))}return ef(),r=vu(Error(A(421))),Ra(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Bb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=Er(s.nextSibling),Wt=e,Te=!0,pn=null,t!==null&&(Xt[Zt++]=Vn,Xt[Zt++]=Bn,Xt[Zt++]=cs,Vn=t.id,Bn=t.overflow,cs=e),e=Kh(e,r.children),e.flags|=4096,e)}function wm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wd(t.return,e,n)}function _u(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function q0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wm(t,n,e);else if(t.tag===19)wm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_u(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_u(e,!0,n,null,i);break;case"together":_u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rb(t,e,n){switch(e.tag){case 3:H0(e),ii();break;case 5:_0(e);break;case 1:Ot(e.type)&&pl(e);break;case 4:$h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(yl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?G0(t,e,n):(_e(Re,Re.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);_e(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return q0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,W0(t,e,n)}return Jn(t,e,n)}var K0,Td,Y0,Q0;K0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Td=function(){};Y0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zr(Rn.current);var i=null;switch(n){case"input":s=Qu(t,s),r=Qu(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=Zu(t,s),r=Zu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hl)}td(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Se("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Q0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oi(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pb(t,e,n){var r=e.pendingProps;switch(Dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Ot(e.type)&&fl(),pt(e),null;case 3:return r=e.stateNode,ai(),Ee(Dt),Ee(yt),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Ld(pn),pn=null))),Td(t,e),pt(e),null;case 5:Vh(e);var s=Zr(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)Y0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return pt(e),null}if(t=Zr(Rn.current),Ta(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nn]=e,r[bo]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<zi.length;s++)Se(zi[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":kp(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":Pp(r,i),Se("invalid",r)}td(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ca(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ca(r.textContent,l,t),s=["children",""+l]):fo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":_a(r),Rp(r,i,!0);break;case"textarea":_a(r),Ap(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ey(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[bo]=r,K0(t,e,!1,!1),e.stateNode=t;e:{switch(o=nd(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<zi.length;s++)Se(zi[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":kp(t,r),s=Qu(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Pp(t,r),s=Zu(t,r),Se("invalid",t);break;default:s=r}td(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Cy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Iy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&po(t,c):typeof c=="number"&&po(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Se("scroll",t):c!=null&&vh(t,i,c,o))}switch(n){case"input":_a(t),Rp(t,r,!1);break;case"textarea":_a(t),Ap(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)Q0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=Zr(Io.current),Zr(Rn.current),Ta(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Ca(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return pt(e),null;case 13:if(Ee(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Bt!==null&&e.mode&1&&!(e.flags&128))p0(),ii(),e.flags|=98560,i=!1;else if(i=Ta(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(A(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[Nn]=e}else ii(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else pn!==null&&(Ld(pn),pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ye===0&&(Ye=3):ef())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return ai(),Td(t,e),t===null&&xo(e.stateNode.containerInfo),pt(e),null;case 10:return Mh(e.type._context),pt(e),null;case 17:return Ot(e.type)&&fl(),pt(e),null;case 19:if(Ee(Re),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Oi(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wl(t),o!==null){for(e.flags|=128,Oi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>ci&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304)}else{if(!r)if(t=wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return pt(e),null}else 2*Ve()-i.renderingStartTime>ci&&n!==1073741824&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Re.current,_e(Re,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Zh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function Ab(t,e){switch(Dh(e),e.tag){case 1:return Ot(e.type)&&fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ai(),Ee(Dt),Ee(yt),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vh(e),null;case 13:if(Ee(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));ii()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Re),null;case 4:return ai(),null;case 10:return Mh(e.type._context),null;case 22:case 23:return Zh(),null;case 24:return null;default:return null}}var Pa=!1,mt=!1,Db=typeof WeakSet=="function"?WeakSet:Set,$=null;function Ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function kd(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var xm=!1;function Ob(t,e){if(hd=cl,t=t0(),Ph(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fd={focusedElem:t,selectionRange:n},cl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,L=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:hn(e.type,w),L);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(S){Fe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return v=xm,xm=!1,v}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kd(e,n,i)}s=s.next}while(s!==r)}}function ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J0(t){var e=t.alternate;e!==null&&(t.alternate=null,J0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[bo],delete e[gd],delete e[gb],delete e[yb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X0(t){return t.tag===5||t.tag===3||t.tag===4}function Sm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hl));else if(r!==4&&(t=t.child,t!==null))for(Pd(t,e,n),t=t.sibling;t!==null;)Pd(t,e,n),t=t.sibling}function Ad(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ad(t,e,n),t=t.sibling;t!==null;)Ad(t,e,n),t=t.sibling}var ot=null,fn=!1;function ar(t,e,n){for(n=n.child;n!==null;)Z0(t,e,n),n=n.sibling}function Z0(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:mt||Ws(n,e);case 6:var r=ot,s=fn;ot=null,ar(t,e,n),ot=r,fn=s,ot!==null&&(fn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(fn?(t=ot,n=n.stateNode,t.nodeType===8?hu(t.parentNode,n):t.nodeType===1&&hu(t,n),vo(t)):hu(ot,n.stateNode));break;case 4:r=ot,s=fn,ot=n.stateNode.containerInfo,fn=!0,ar(t,e,n),ot=r,fn=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kd(n,e,o),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!mt&&(Ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,ar(t,e,n),mt=r):ar(t,e,n);break;default:ar(t,e,n)}}function bm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Db),e.forEach(function(r){var s=Wb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,fn=!1;break e;case 3:ot=l.stateNode.containerInfo,fn=!0;break e;case 4:ot=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(ot===null)throw Error(A(160));Z0(i,o,s),ot=null,fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Fe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ev(e,t),e=e.sibling}function ev(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),En(t),r&4){try{eo(3,t,t.return),ac(3,t)}catch(w){Fe(t,t.return,w)}try{eo(5,t,t.return)}catch(w){Fe(t,t.return,w)}}break;case 1:dn(e,t),En(t),r&512&&n!==null&&Ws(n,n.return);break;case 5:if(dn(e,t),En(t),r&512&&n!==null&&Ws(n,n.return),t.flags&32){var s=t.stateNode;try{po(s,"")}catch(w){Fe(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Sy(s,i),nd(l,o);var u=nd(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Cy(s,h):d==="dangerouslySetInnerHTML"?Iy(s,h):d==="children"?po(s,h):vh(s,d,h,u)}switch(l){case"input":Ju(s,i);break;case"textarea":by(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Hs(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hs(s,!!i.multiple,i.defaultValue,!0):Hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[bo]=i}catch(w){Fe(t,t.return,w)}}break;case 6:if(dn(e,t),En(t),r&4){if(t.stateNode===null)throw Error(A(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Fe(t,t.return,w)}}break;case 3:if(dn(e,t),En(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(e.containerInfo)}catch(w){Fe(t,t.return,w)}break;case 4:dn(e,t),En(t);break;case 13:dn(e,t),En(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Jh=Ve())),r&4&&bm(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(u=mt)||d,dn(e,t),mt=u):dn(e,t),En(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(f=$,g=f.child,f.tag){case 0:case 11:case 14:case 15:eo(4,f,f.return);break;case 1:Ws(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Fe(r,n,w)}}break;case 5:Ws(f,f.return);break;case 22:if(f.memoizedState!==null){Im(h);continue}}g!==null?(g.return=f,$=g):Im(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ny("display",o))}catch(w){Fe(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Fe(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dn(e,t),En(t),r&4&&bm(t);break;case 21:break;default:dn(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(X0(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(po(s,""),r.flags&=-33);var i=Sm(t);Ad(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Sm(t);Pd(t,l,o);break;default:throw Error(A(161))}}catch(c){Fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jb(t,e,n){$=t,tv(t)}function tv(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pa;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||mt;l=Pa;var u=mt;if(Pa=o,(mt=c)&&!u)for($=s;$!==null;)o=$,c=o.child,o.tag===22&&o.memoizedState!==null?Nm(s):c!==null?(c.return=o,$=c):Nm(s);for(;i!==null;)$=i,tv(i),i=i.sibling;$=s,Pa=l,mt=u}Em(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):Em(t)}}function Em(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&vo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}mt||e.flags&512&&Rd(e)}catch(f){Fe(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Im(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Nm(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ac(4,e)}catch(c){Fe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Fe(e,s,c)}}var i=e.return;try{Rd(e)}catch(c){Fe(e,i,c)}break;case 5:var o=e.return;try{Rd(e)}catch(c){Fe(e,o,c)}}}catch(c){Fe(e,e.return,c)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Lb=Math.ceil,bl=rr.ReactCurrentDispatcher,Yh=rr.ReactCurrentOwner,rn=rr.ReactCurrentBatchConfig,ae=0,rt=null,We=null,at=0,$t=0,zs=Wr(0),Ye=0,ko=null,ds=0,lc=0,Qh=0,to=null,Rt=null,Jh=0,ci=1/0,Fn=null,El=!1,Dd=null,Nr=null,Aa=!1,vr=null,Il=0,no=0,Od=null,Qa=-1,Ja=0;function St(){return ae&6?Ve():Qa!==-1?Qa:Qa=Ve()}function Cr(t){return t.mode&1?ae&2&&at!==0?at&-at:_b.transition!==null?(Ja===0&&(Ja=Uy()),Ja):(t=de,t!==0||(t=window.event,t=t===void 0?16:Gy(t.type)),t):1}function vn(t,e,n,r){if(50<no)throw no=0,Od=null,Error(A(185));qo(t,n,r),(!(ae&2)||t!==rt)&&(t===rt&&(!(ae&2)&&(lc|=n),Ye===4&&fr(t,at)),jt(t,r),n===1&&ae===0&&!(e.mode&1)&&(ci=Ve()+500,sc&&zr()))}function jt(t,e){var n=t.callbackNode;_S(t,e);var r=ll(t,t===rt?at:0);if(r===0)n!==null&&jp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jp(n),e===1)t.tag===0?vb(Cm.bind(null,t)):d0(Cm.bind(null,t)),pb(function(){!(ae&6)&&zr()}),n=null;else{switch($y(r)){case 1:n=bh;break;case 4:n=My;break;case 16:n=al;break;case 536870912:n=Fy;break;default:n=al}n=cv(n,nv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nv(t,e){if(Qa=-1,Ja=0,ae&6)throw Error(A(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=ll(t,t===rt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nl(t,r);else{e=r;var s=ae;ae|=2;var i=sv();(rt!==t||at!==e)&&(Fn=null,ci=Ve()+500,ss(t,e));do try{Ub();break}catch(l){rv(t,l)}while(1);Lh(),bl.current=i,ae=s,We!==null?e=0:(rt=null,at=0,e=Ye)}if(e!==0){if(e===2&&(s=ad(t),s!==0&&(r=s,e=jd(t,s))),e===1)throw n=ko,ss(t,0),fr(t,r),jt(t,Ve()),n;if(e===6)fr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Mb(s)&&(e=Nl(t,r),e===2&&(i=ad(t),i!==0&&(r=i,e=jd(t,i))),e===1))throw n=ko,ss(t,0),fr(t,r),jt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:Kr(t,Rt,Fn);break;case 3:if(fr(t,r),(r&130023424)===r&&(e=Jh+500-Ve(),10<e)){if(ll(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=md(Kr.bind(null,t,Rt,Fn),e);break}Kr(t,Rt,Fn);break;case 4:if(fr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lb(r/1960))-r,10<r){t.timeoutHandle=md(Kr.bind(null,t,Rt,Fn),r);break}Kr(t,Rt,Fn);break;case 5:Kr(t,Rt,Fn);break;default:throw Error(A(329))}}}return jt(t,Ve()),t.callbackNode===n?nv.bind(null,t):null}function jd(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=Nl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Ld(e)),t}function Ld(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function Mb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~Qh,e&=~lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Cm(t){if(ae&6)throw Error(A(327));Qs();var e=ll(t,0);if(!(e&1))return jt(t,Ve()),null;var n=Nl(t,e);if(t.tag!==0&&n===2){var r=ad(t);r!==0&&(e=r,n=jd(t,r))}if(n===1)throw n=ko,ss(t,0),fr(t,e),jt(t,Ve()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,Rt,Fn),jt(t,Ve()),null}function Xh(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ci=Ve()+500,sc&&zr())}}function hs(t){vr!==null&&vr.tag===0&&!(ae&6)&&Qs();var e=ae;ae|=1;var n=rn.transition,r=de;try{if(rn.transition=null,de=1,t)return t()}finally{de=r,rn.transition=n,ae=e,!(ae&6)&&zr()}}function Zh(){$t=zs.current,Ee(zs)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fb(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fl();break;case 3:ai(),Ee(Dt),Ee(yt),Bh();break;case 5:Vh(r);break;case 4:ai();break;case 13:Ee(Re);break;case 19:Ee(Re);break;case 10:Mh(r.type._context);break;case 22:case 23:Zh()}n=n.return}if(rt=t,We=t=Tr(t.current,null),at=$t=e,Ye=0,ko=null,Qh=lc=ds=0,Rt=to=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xr=null}return t}function rv(t,e){do{var n=We;try{if(Lh(),qa.current=Sl,xl){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xl=!1}if(us=0,et=qe=De=null,Zi=!1,No=0,Yh.current=null,n===null||n.return===null){Ye=1,ko=e,We=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=at,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=pm(o);if(g!==null){g.flags&=-257,mm(g,o,l,i,e),g.mode&1&&fm(i,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){fm(i,u,e),ef();break e}c=Error(A(426))}}else if(Te&&l.mode&1){var L=pm(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),mm(L,o,l,i,e),Oh(li(c,l));break e}}i=c=li(c,l),Ye!==4&&(Ye=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=$0(i,c,e);am(i,m);break e;case 1:l=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Nr===null||!Nr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=V0(i,l,e);am(i,S);break e}}i=i.return}while(i!==null)}ov(n)}catch(k){e=k,We===n&&n!==null&&(We=n=n.return);continue}break}while(1)}function sv(){var t=bl.current;return bl.current=Sl,t===null?Sl:t}function ef(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),rt===null||!(ds&268435455)&&!(lc&268435455)||fr(rt,at)}function Nl(t,e){var n=ae;ae|=2;var r=sv();(rt!==t||at!==e)&&(Fn=null,ss(t,e));do try{Fb();break}catch(s){rv(t,s)}while(1);if(Lh(),ae=n,bl.current=r,We!==null)throw Error(A(261));return rt=null,at=0,Ye}function Fb(){for(;We!==null;)iv(We)}function Ub(){for(;We!==null&&!uS();)iv(We)}function iv(t){var e=lv(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?ov(t):We=e,Yh.current=null}function ov(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ab(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,We=null;return}}else if(n=Pb(n,e,$t),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ye===0&&(Ye=5)}function Kr(t,e,n){var r=de,s=rn.transition;try{rn.transition=null,de=1,$b(t,e,n,r)}finally{rn.transition=s,de=r}return null}function $b(t,e,n,r){do Qs();while(vr!==null);if(ae&6)throw Error(A(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(wS(t,i),t===rt&&(We=rt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Aa||(Aa=!0,cv(al,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rn.transition,rn.transition=null;var o=de;de=1;var l=ae;ae|=4,Yh.current=null,Ob(t,n),ev(n,t),ob(fd),cl=!!hd,fd=hd=null,t.current=n,jb(n),dS(),ae=l,de=o,rn.transition=i}else t.current=n;if(Aa&&(Aa=!1,vr=t,Il=s),i=t.pendingLanes,i===0&&(Nr=null),pS(n.stateNode),jt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(El)throw El=!1,t=Dd,Dd=null,t;return Il&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===Od?no++:(no=0,Od=t):no=0,zr(),null}function Qs(){if(vr!==null){var t=$y(Il),e=rn.transition,n=de;try{if(rn.transition=null,de=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,Il=0,ae&6)throw Error(A(331));var s=ae;for(ae|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:eo(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var f=d.sibling,g=d.return;if(J0(d),d===u){$=null;break}if(f!==null){f.return=g,$=f;break}$=g}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var L=w.sibling;w.sibling=null,w=L}while(w!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,$=m;break e}$=i.return}}var p=t.current;for($=p;$!==null;){o=$;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,$=y;else e:for(o=p;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ac(9,l)}}catch(k){Fe(l,l.return,k)}if(l===o){$=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,$=S;break e}$=l.return}}if(ae=s,zr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{de=n,rn.transition=e}}return!1}function Tm(t,e,n){e=li(n,e),e=$0(t,e,1),t=Ir(t,e,1),e=St(),t!==null&&(qo(t,1,e),jt(t,e))}function Fe(t,e,n){if(t.tag===3)Tm(t,t,n);else for(;e!==null;){if(e.tag===3){Tm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=li(n,t),t=V0(e,t,1),e=Ir(e,t,1),t=St(),e!==null&&(qo(e,1,t),jt(e,t));break}}e=e.return}}function Vb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>Ve()-Jh?ss(t,0):Qh|=n),jt(t,e)}function av(t,e){e===0&&(t.mode&1?(e=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):e=1);var n=St();t=Qn(t,e),t!==null&&(qo(t,e,n),jt(t,n))}function Bb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),av(t,n)}function Wb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),av(t,n)}var lv;lv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,Rb(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Te&&e.flags&1048576&&h0(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ya(t,e),t=e.pendingProps;var s=si(e,yt.current);Ys(e,n),s=zh(null,e,r,t,s,n);var i=Hh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(i=!0,pl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uh(e),s.updater=oc,e.stateNode=s,s._reactInternals=e,Sd(e,r,t,n),e=Id(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&Ah(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ya(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Hb(r),t=hn(r,t),s){case 0:e=Ed(null,e,r,t,n);break e;case 1:e=vm(null,e,r,t,n);break e;case 11:e=gm(null,e,r,t,n);break e;case 14:e=ym(null,e,r,hn(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Ed(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),vm(t,e,r,s,n);case 3:e:{if(H0(e),t===null)throw Error(A(387));r=e.pendingProps,i=e.memoizedState,s=i.element,v0(t,e),_l(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=li(Error(A(423)),e),e=_m(t,e,r,n,s);break e}else if(r!==s){s=li(Error(A(424)),e),e=_m(t,e,r,n,s);break e}else for(Bt=Er(e.stateNode.containerInfo.firstChild),Wt=e,Te=!0,pn=null,n=g0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ii(),r===s){e=Jn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return _0(e),t===null&&_d(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,pd(r,s)?o=null:i!==null&&pd(r,i)&&(e.flags|=32),z0(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&_d(e),null;case 13:return G0(t,e,n);case 4:return $h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oi(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),gm(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(yl,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Dt.current){e=Jn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Gn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),wd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),wd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ys(e,n),s=an(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),ym(t,e,r,s,n);case 15:return B0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Ya(t,e),e.tag=1,Ot(r)?(t=!0,pl(e)):t=!1,Ys(e,n),U0(e,r,s),Sd(e,r,s,n),Id(null,e,r,!0,t,n);case 19:return q0(t,e,n);case 22:return W0(t,e,n)}throw Error(A(156,e.tag))};function cv(t,e){return Ly(t,e)}function zb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new zb(t,e,n,r)}function tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hb(t){if(typeof t=="function")return tf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wh)return 11;if(t===xh)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xa(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")tf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Os:return is(n.children,s,i,e);case _h:o=8,s|=8;break;case Gu:return t=tn(12,n,e,s|2),t.elementType=Gu,t.lanes=i,t;case qu:return t=tn(13,n,e,s),t.elementType=qu,t.lanes=i,t;case Ku:return t=tn(19,n,e,s),t.elementType=Ku,t.lanes=i,t;case _y:return cc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yy:o=10;break e;case vy:o=9;break e;case wh:o=11;break e;case xh:o=14;break e;case cr:o=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=tn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function is(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function cc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=_y,t.lanes=n,t.stateNode={isHidden:!1},t}function wu(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function xu(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tu(0),this.expirationTimes=tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nf(t,e,n,r,s,i,o,l,c){return t=new Gb(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(i),t}function qb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uv(t){if(!t)return jr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(Ot(n))return u0(t,n,e)}return e}function dv(t,e,n,r,s,i,o,l,c){return t=nf(n,r,!0,t,s,i,o,l,c),t.context=uv(null),n=t.current,r=St(),s=Cr(n),i=Gn(r,s),i.callback=e??null,Ir(n,i,s),t.current.lanes=s,qo(t,s,r),jt(t,r),t}function uc(t,e,n,r){var s=e.current,i=St(),o=Cr(s);return n=uv(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(vn(t,s,o,i),Ga(t,s,o)),o}function Cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function km(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rf(t,e){km(t,e),(t=t.alternate)&&km(t,e)}function Kb(){return null}var hv=typeof reportError=="function"?reportError:function(t){console.error(t)};function sf(t){this._internalRoot=t}dc.prototype.render=sf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));uc(t,e,null,null)};dc.prototype.unmount=sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){uc(null,t,null,null)}),e[Yn]=null}};function dc(t){this._internalRoot=t}dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&Hy(t)}};function of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rm(){}function Yb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Cl(o);i.call(u)}}var o=dv(e,r,t,0,null,!1,!1,"",Rm);return t._reactRootContainer=o,t[Yn]=o.current,xo(t.nodeType===8?t.parentNode:t),hs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Cl(c);l.call(u)}}var c=nf(t,0,!1,null,null,!1,!1,"",Rm);return t._reactRootContainer=c,t[Yn]=c.current,xo(t.nodeType===8?t.parentNode:t),hs(function(){uc(e,c,n,r)}),c}function fc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Cl(o);l.call(c)}}uc(e,o,t,s)}else o=Yb(n,e,t,s,r);return Cl(o)}Vy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wi(e.pendingLanes);n!==0&&(Eh(e,n|1),jt(e,Ve()),!(ae&6)&&(ci=Ve()+500,zr()))}break;case 13:hs(function(){var r=Qn(t,1);if(r!==null){var s=St();vn(r,t,1,s)}}),rf(t,1)}};Ih=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=St();vn(e,t,134217728,n)}rf(t,134217728)}};By=function(t){if(t.tag===13){var e=Cr(t),n=Qn(t,e);if(n!==null){var r=St();vn(n,t,e,r)}rf(t,e)}};Wy=function(){return de};zy=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};sd=function(t,e,n){switch(e){case"input":if(Ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rc(r);if(!s)throw Error(A(90));xy(r),Ju(r,s)}}}break;case"textarea":by(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};Ry=Xh;Py=hs;var Qb={usingClientEntryPoint:!1,Events:[Yo,Fs,rc,Ty,ky,Xh]},ji={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jb={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oy(t),t===null?null:t.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||Kb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{Zl=Da.inject(Jb),kn=Da}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qb;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(e))throw Error(A(200));return qb(t,e,null,n)};Kt.createRoot=function(t,e){if(!of(t))throw Error(A(299));var n=!1,r="",s=hv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=nf(t,1,!1,null,null,n,!1,r,s),t[Yn]=e.current,xo(t.nodeType===8?t.parentNode:t),new sf(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=Oy(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return hs(t)};Kt.hydrate=function(t,e,n){if(!hc(e))throw Error(A(200));return fc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!of(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dv(e,null,t,1,n??null,s,!1,i,o),t[Yn]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dc(e)};Kt.render=function(t,e,n){if(!hc(e))throw Error(A(200));return fc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!hc(t))throw Error(A(40));return t._reactRootContainer?(hs(function(){fc(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Xh;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hc(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return fc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fv)}catch(t){console.error(t)}}fv(),fy.exports=Kt;var Xb=fy.exports,Pm=Xb;zu.createRoot=Pm.createRoot,zu.hydrateRoot=Pm.hydrateRoot;const Zb="modulepreload",eE=function(t){return"/"+t},Am={},be=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=eE(i),i in Am)return;Am[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Zb,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},tE=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(t,e){if(!t)throw _i(e)},_i=function(t){return new Error("Firebase Database ("+pv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},af={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new rE;const f=i<<2|l>>4;if(r.push(f),u!==64){const g=l<<4&240|u>>2;if(r.push(g),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gv=function(t){const e=mv(t);return af.encodeByteArray(e,!0)},Tl=function(t){return gv(t).replace(/\./g,"")},kl=function(t){try{return af.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){return yv(void 0,t)}function yv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!iE(n)||(t[n]=yv(t[n],e[n]));return t}function iE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=()=>oE().__FIREBASE_DEFAULTS__,lE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kl(t[1]);return e&&JSON.parse(e)},lf=()=>{try{return tE()||aE()||lE()||cE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vv=t=>{var e,n;return(n=(e=lf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},uE=t=>{const e=vv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_v=()=>{var t;return(t=lf())==null?void 0:t.config},wv=t=>{var e;return(e=lf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Tl(JSON.stringify(n)),Tl(JSON.stringify(o)),l].join(".")}const ro={};function hE(){const t={prod:[],emulator:[]};for(const e of Object.keys(ro))ro[e]?t.emulator.push(e):t.prod.push(e);return t}function fE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dm=!1;function Sv(t,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||ro[t]===e||ro[t]||Dm)return;ro[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=hE().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Dm=!0,o()},f}function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=fE(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),L=document.getElementById(w)||document.createElement("a"),m=n("preprendIcon"),p=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const y=f.element;l(y),d(L,w);const S=u();c(p,m),y.append(p,v,L,S),document.body.appendChild(y)}i?(v.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function pE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uf(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mE(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ev(){return pv.NODE_ADMIN===!0}function df(){try{return typeof indexedDB=="object"}catch{return!1}}function hf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function Iv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gE,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ss.prototype.create)}}class Ss{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yE(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new jn(s,l,r)}}function yE(t,e){return t.replace(vE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){return JSON.parse(t)}function Ke(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ro(kl(i[0])||""),n=Ro(kl(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},_E=function(t){const e=Nv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},wE=function(t){const e=Nv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Rl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pl(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Om(i)&&Om(o)){if(!Lr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Om(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=l^i&(o^l),d=1518500249):(u=i^o^l,d=1859775393):h<60?(u=i&o|l&(i|o),d=2400959708):(u=i^o^l,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function SE(t,e){const n=new bE(t,e);return n.subscribe.bind(n)}class bE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EE(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Su),s.error===void 0&&(s.error=Su),s.complete===void 0&&(s.complete=Su);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Su(){}function ps(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,O(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pc=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=1e3,CE=2,TE=4*60*60*1e3,kE=.5;function jm(t,e=NE,n=CE){const r=e*Math.pow(n,t),s=Math.round(kE*r*(Math.random()-.5)*2);return Math.min(TE,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PE(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RE(t){return t===Yr?void 0:t}function PE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Md(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const AE={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},DE=pe.INFO,OE={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},jE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mc{constructor(e){this.name=e,this._logLevel=DE,this._logHandler=jE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const LE=(t,e)=>e.some(n=>t instanceof n);let Lm,Mm;function ME(){return Lm||(Lm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FE(){return Mm||(Mm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tv=new WeakMap,Fd=new WeakMap,kv=new WeakMap,bu=new WeakMap,ff=new WeakMap;function UE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(kr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Tv.set(n,t)}).catch(()=>{}),ff.set(e,t),e}function $E(t){if(Fd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fd.set(t,e)}let Ud={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VE(t){Ud=t(Ud)}function BE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eu(this),e,...n);return kv.set(r,e.sort?e.sort():[e]),kr(r)}:FE().includes(t)?function(...e){return t.apply(Eu(this),e),kr(Tv.get(this))}:function(...e){return kr(t.apply(Eu(this),e))}}function WE(t){return typeof t=="function"?BE(t):(t instanceof IDBTransaction&&$E(t),LE(t,ME())?new Proxy(t,Ud):t)}function kr(t){if(t instanceof IDBRequest)return UE(t);if(bu.has(t))return bu.get(t);const e=WE(t);return e!==t&&(bu.set(t,e),ff.set(e,t)),e}const Eu=t=>ff.get(t);function Rv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=kr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(kr(o.result),c.oldVersion,c.newVersion,kr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const zE=["get","getKey","getAll","getAllKeys","count"],HE=["put","add","delete","clear"],Iu=new Map;function Fm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Iu.get(e))return Iu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zE.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Iu.set(e,i),i}VE(t=>({...t,get:(e,n,r)=>Fm(e,n)||t.get(e,n,r),has:(e,n)=>!!Fm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $d="@firebase/app",Um="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new mc("@firebase/app"),KE="@firebase/app-compat",YE="@firebase/analytics-compat",QE="@firebase/analytics",JE="@firebase/app-check-compat",XE="@firebase/app-check",ZE="@firebase/auth",eI="@firebase/auth-compat",tI="@firebase/database",nI="@firebase/data-connect",rI="@firebase/database-compat",sI="@firebase/functions",iI="@firebase/functions-compat",oI="@firebase/installations",aI="@firebase/installations-compat",lI="@firebase/messaging",cI="@firebase/messaging-compat",uI="@firebase/performance",dI="@firebase/performance-compat",hI="@firebase/remote-config",fI="@firebase/remote-config-compat",pI="@firebase/storage",mI="@firebase/storage-compat",gI="@firebase/firestore",yI="@firebase/ai",vI="@firebase/firestore-compat",_I="firebase",wI="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="[DEFAULT]",xI={[$d]:"fire-core",[KE]:"fire-core-compat",[QE]:"fire-analytics",[YE]:"fire-analytics-compat",[XE]:"fire-app-check",[JE]:"fire-app-check-compat",[ZE]:"fire-auth",[eI]:"fire-auth-compat",[tI]:"fire-rtdb",[nI]:"fire-data-connect",[rI]:"fire-rtdb-compat",[sI]:"fire-fn",[iI]:"fire-fn-compat",[oI]:"fire-iid",[aI]:"fire-iid-compat",[lI]:"fire-fcm",[cI]:"fire-fcm-compat",[uI]:"fire-perf",[dI]:"fire-perf-compat",[hI]:"fire-rc",[fI]:"fire-rc-compat",[pI]:"fire-gcs",[mI]:"fire-gcs-compat",[gI]:"fire-fst",[vI]:"fire-fst-compat",[yI]:"fire-vertex","fire-js":"fire-js",[_I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Map,SI=new Map,Bd=new Map;function $m(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function An(t){const e=t.name;if(Bd.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Bd.set(e,t);for(const n of Po.values())$m(n,t);for(const n of SI.values())$m(n,t);return!0}function Es(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ae(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Ss("app","Firebase",bI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=wI;function Pv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Vd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=_v()),!n)throw Rr.create("no-options");const i=Po.get(s);if(i){if(Lr(n,i.options)&&Lr(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new Cv(s);for(const c of Bd.values())o.addComponent(c);const l=new EI(n,r,o);return Po.set(s,l),l}function gc(t=Vd){const e=Po.get(t);if(!e&&t===Vd&&_v())return Pv();if(!e)throw Rr.create("no-app",{appName:t});return e}function II(){return Array.from(Po.values())}function sn(t,e,n){let r=xI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(o.join(" "));return}An(new Gt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="firebase-heartbeat-database",CI=1,Ao="firebase-heartbeat-store";let Nu=null;function Av(){return Nu||(Nu=Rv(NI,CI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Nu}async function TI(t){try{const n=(await Av()).transaction(Ao),r=await n.objectStore(Ao).get(Dv(t));return await n.done,r}catch(e){if(e instanceof jn)Xn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function Vm(t,e){try{const r=(await Av()).transaction(Ao,"readwrite");await r.objectStore(Ao).put(e,Dv(t)),await r.done}catch(n){if(n instanceof jn)Xn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function Dv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1024,RI=30;class PI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Bm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>RI){const o=OI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bm(),{heartbeatsToSend:r,unsentEntries:s}=AI(this._heartbeatsCache.heartbeats),i=Tl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xn.warn(n),""}}}function Bm(){return new Date().toISOString().substring(0,10)}function AI(t,e=kI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return df()?hf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wm(t){return Tl(JSON.stringify({version:2,heartbeats:t})).length}function OI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){An(new Gt("platform-logger",e=>new GE(e),"PRIVATE")),An(new Gt("heartbeat",e=>new PI(e),"PRIVATE")),sn($d,Um,t),sn($d,Um,"esm2020"),sn("fire-js","")}jI("");var LI="firebase",MI="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(LI,MI,"app");const zm="@firebase/database",Hm="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ov="";function jv(t){Ov=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ro(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FI(e)}}catch{}return new UI},es=Lv("localStorage"),Wd=Lv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new mc("@firebase/database"),Mv=function(){let t=1;return function(){return t++}}(),Fv=function(t){const e=IE(t),n=new xE;n.update(e);const r=n.digest();return af.encodeByteArray(r)},Jo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jo.apply(null,r):typeof r=="object"?e+=Ke(r):e+=r,e+=" "}return e};let os=null,Gm=!0;const Uv=function(t,e){O(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Js.logLevel=pe.VERBOSE,os=Js.log.bind(Js),e&&Wd.set("logging_enabled",!0)):typeof t=="function"?os=t:(os=null,Wd.remove("logging_enabled"))},nt=function(...t){if(Gm===!0&&(Gm=!1,os===null&&Wd.get("logging_enabled")===!0&&Uv(!0)),os){const e=Jo.apply(null,t);os(e)}},Xo=function(t){return function(...e){nt(t,...e)}},zd=function(...t){const e="FIREBASE INTERNAL ERROR: "+Jo(...t);Js.error(e)},Dn=function(...t){const e=`FIREBASE FATAL ERROR: ${Jo(...t)}`;throw Js.error(e),new Error(e)},gt=function(...t){const e="FIREBASE WARNING: "+Jo(...t);Js.warn(e)},$I=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},VI=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Mr="[MIN_NAME]",Zn="[MAX_NAME]",Is=function(t,e){if(t===e)return 0;if(t===Mr||e===Zn)return-1;if(e===Mr||t===Zn)return 1;{const n=qm(t),r=qm(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},BI=function(t,e){return t===e?0:t<e?-1:1},Li=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ke(e))},pf=function(t){if(typeof t!="object"||t===null)return Ke(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ke(e[r]),n+=":",n+=pf(t[e[r]]);return n+="}",n},$v=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function it(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Vv=function(t){O(!yc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},WI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function HI(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const GI=new RegExp("^-?(0*)\\d{1,10}$"),qI=-2147483648,KI=2147483647,qm=function(t){if(GI.test(t)){const e=Number(t);if(e>=qI&&e<=KI)return e}return null},Si=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gt("Exception was thrown by user callback.",n),e},Math.floor(0))}},YI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},so=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ae(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gt(e)}}class Xs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="5",Bv="v",Wv="s",zv="r",Hv="f",Gv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qv="ls",Kv="p",Hd="ac",Yv="websocket",Qv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,s,i=!1,o="",l=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=es.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&es.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function XI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Xv(t,e,n){O(typeof e=="string","typeof type must == string"),O(typeof n=="object","typeof params must == object");let r;if(e===Yv)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Qv)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);XI(t)&&(n.ns=t.namespace);const s=[];return it(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.counters_={}}incrementCounter(e,n=1){xn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return sE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu={},Tu={};function gf(t){const e=t.toString();return Cu[e]||(Cu[e]=new ZI),Cu[e]}function eN(t,e){const n=t.toString();return Tu[n]||(Tu[n]=e()),Tu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Si(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="start",nN="close",rN="pLPCommand",sN="pRTLPCB",Zv="id",e_="pw",t_="ser",iN="cb",oN="seg",aN="ts",lN="d",cN="dframe",n_=1870,r_=30,uN=n_-r_,dN=25e3,hN=3e4;class _r{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xo(e),this.stats_=gf(n),this.urlFn=c=>(this.appCheckToken&&(c[Hd]=this.appCheckToken),Xv(n,Qv,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new tN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hN)),VI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yf((...i)=>{const[o,l,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Km)this.id=l,this.password=c;else if(o===nN)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Km]="t",r[t_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[iN]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Bv]=mf,this.transportSessionId&&(r[Wv]=this.transportSessionId),this.lastSessionId&&(r[qv]=this.lastSessionId),this.applicationId&&(r[Kv]=this.applicationId),this.appCheckToken&&(r[Hd]=this.appCheckToken),typeof location<"u"&&location.hostname&&Gv.test(location.hostname)&&(r[zv]=Hv);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_r.forceAllow_=!0}static forceDisallow(){_r.forceDisallow_=!0}static isAvailable(){return _r.forceAllow_?!0:!_r.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WI()&&!zI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=gv(n),s=$v(r,uN);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[cN]="t",r[Zv]=e,r[e_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ke(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class yf{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Mv(),window[rN+this.uniqueCallbackIdentifier]=e,window[sN+this.uniqueCallbackIdentifier]=n,this.myIFrame=yf.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){nt("frame writing exception"),l.stack&&nt(l.stack),nt(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Zv]=this.myID,e[e_]=this.myPW,e[t_]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+r_+r.length<=n_;){const o=this.pendingSegs.shift();r=r+"&"+oN+s+"="+o.seg+"&"+aN+s+"="+o.ts+"&"+lN+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(dN)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=16384,pN=45e3;let Al=null;typeof MozWebSocket<"u"?Al=MozWebSocket:typeof WebSocket<"u"&&(Al=WebSocket);class en{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xo(this.connId),this.stats_=gf(n),this.connURL=en.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Bv]=mf,typeof location<"u"&&location.hostname&&Gv.test(location.hostname)&&(o[zv]=Hv),n&&(o[Wv]=n),r&&(o[qv]=r),s&&(o[Hd]=s),i&&(o[Kv]=i),Xv(e,Yv,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,es.set("previous_websocket_failure",!0);try{let r;Ev(),this.mySock=new Al(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Al!==null&&!en.forceDisallow_}static previouslyFailed(){return es.isInMemoryStorage||es.get("previous_websocket_failure")===!0}markConnectionHealthy(){es.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ro(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(O(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$v(n,fN);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(pN))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{static get ALL_TRANSPORTS(){return[_r,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=en&&en.isAvailable();let r=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[en];else{const s=this.transports_=[];for(const i of ui.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ui.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ui.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=6e4,gN=5e3,yN=10*1024,vN=100*1024,ku="t",Ym="d",_N="s",Qm="r",wN="e",Jm="o",Xm="a",Zm="n",eg="p",xN="h";class SN{constructor(e,n,r,s,i,o,l,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xo("c:"+this.id+":"),this.transportManager_=new ui(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=so(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>vN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>yN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ku in e){const n=e[ku];n===Xm?this.upgradeIfSecondaryHealthy_():n===Qm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Jm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Li("t",e),r=Li("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:eg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Li("t",e),r=Li("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Li(ku,e);if(Ym in e){const r=e[Ym];if(n===xN){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Zm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===_N?this.onConnectionShutdown_(r):n===Qm?this.onReset_(r):n===wN?zd("Server Error: "+r):n===Jm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),mf!==r&&gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),so(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):so(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(gN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:eg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(es.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){O(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends i_{static getInstance(){return new Dl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=32,ng=768;class ue{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function le(){return new ue("")}function J(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Fr(t){return t.pieces_.length-t.pieceNum_}function ge(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ue(t.pieces_,e)}function vf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bN(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Do(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function o_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ue(e,0)}function ke(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ue)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ue(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function xt(t,e){const n=J(t),r=J(e);if(n===null)return e;if(n===r)return xt(ge(t),ge(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function EN(t,e){const n=Do(t,0),r=Do(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Is(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function _f(t,e){if(Fr(t)!==Fr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function nn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Fr(t)>Fr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class IN{constructor(e,n){this.errorPrefix_=n,this.parts_=Do(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pc(this.parts_[r]);a_(this)}}function NN(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=pc(e),a_(t)}function CN(t){const e=t.parts_.pop();t.byteLength_-=pc(e),t.parts_.length>0&&(t.byteLength_-=1)}function a_(t){if(t.byteLength_>ng)throw new Error(t.errorPrefix_+"has a key path longer than "+ng+" bytes ("+t.byteLength_+").");if(t.parts_.length>tg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tg+") or object contains a cycle "+Qr(t))}function Qr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends i_{static getInstance(){return new wf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=1e3,TN=60*5*1e3,rg=30*1e3,kN=1.3,RN=3e4,PN="server_kill",sg=3;class on extends s_{constructor(e,n,r,s,i,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=on.nextPersistentConnectionId_++,this.log_=Xo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mi,this.maxReconnectDelay_=TN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ev())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Dl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ke(i)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Vt,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;on.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xn(e,"w")){const r=fs(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||wE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=_E(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):zd("Unrecognized action received from server: "+Ke(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RN&&(this.reconnectDelay_=Mi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*kN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+on.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,r())},u=function(h){O(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?nt("getToken() completed but was canceled"):(nt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new SN(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{gt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(PN)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&gt(h),c())}}}interrupt(e){nt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Rl(this.interruptReasons_)&&(this.reconnectDelay_=Mi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>pf(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ue(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){nt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sg&&(this.reconnectDelay_=rg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ov.replace(/\./g,"-")]=1,cf()?e["framework.cordova"]=1:bv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dl.getInstance().currentlyOnline();return Rl(this.interruptReasons_)&&e}}on.nextPersistentConnectionId_=0;on.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Z(Mr,e),s=new Z(Mr,n);return this.compare(r,s)!==0}minPost(){return Z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa;class l_ extends vc{static get __EMPTY_NODE(){return Oa}static set __EMPTY_NODE(e){Oa=e}compare(e,n){return Is(e.name,n.name)}isDefinedOn(e){throw _i("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Z.MIN}maxPost(){return new Z(Zn,Oa)}makePost(e,n){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new Z(e,Oa)}toString(){return".key"}}const Pn=new l_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??At.EMPTY_NODE,this.right=i??At.EMPTY_NODE}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return At.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}tt.RED=!0;tt.BLACK=!1;class AN{copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class At{constructor(e,n=At.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new At(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tt.BLACK,null,null))}remove(e){return new At(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ja(this.root_,null,this.comparator_,!0,e)}}At.EMPTY_NODE=new AN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){return Is(t.name,e.name)}function xf(t,e){return Is(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;function ON(t){Gd=t}const c_=function(t){return typeof t=="number"?"number:"+Vv(t):"string:"+t},u_=function(t){if(t.isLeafNode()){const e=t.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xn(e,".sv"),"Priority must be a string or number.")}else O(t===Gd||t.isEmpty(),"priority of unexpected type.");O(t===Gd||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig;class Xe{static set __childrenNodeConstructor(e){ig=e}static get __childrenNodeConstructor(){return ig}constructor(e,n=Xe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),u_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return X(e)?this:J(e)===".priority"?this.priorityNode_:Xe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Xe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=J(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(O(r!==".priority"||Fr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Xe.__childrenNodeConstructor.EMPTY_NODE.updateChild(ge(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+c_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Vv(this.value_):e+=this.value_,this.lazyHash_=Fv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xe.__childrenNodeConstructor?-1:(O(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Xe.VALUE_TYPE_ORDER.indexOf(n),i=Xe.VALUE_TYPE_ORDER.indexOf(r);return O(s>=0,"Unknown leaf type: "+n),O(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Xe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_,h_;function jN(t){d_=t}function LN(t){h_=t}class MN extends vc{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Is(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(Zn,new Xe("[PRIORITY-POST]",h_))}makePost(e,n){const r=d_(e);return new Z(n,new Xe("[PRIORITY-POST]",r))}toString(){return".priority"}}const we=new MN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=Math.log(2);class UN{constructor(e){const n=i=>parseInt(Math.log(i)/FN,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ol=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new tt(f,h.node,tt.BLACK,null,null);{const g=parseInt(d/2,10)+c,v=s(c,g),w=s(g+1,u);return h=t[g],f=n?n(h):h,new tt(f,h.node,tt.BLACK,v,w)}},i=function(c){let u=null,d=null,h=t.length;const f=function(v,w){const L=h-v,m=h;h-=v;const p=s(L+1,m),y=t[L],S=n?n(y):y;g(new tt(S,y.node,w,null,p))},g=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<c.count;++v){const w=c.nextBitIsOne(),L=Math.pow(2,c.count-(v+1));w?f(L,tt.BLACK):(f(L,tt.BLACK),f(L,tt.RED))}return d},o=new UN(t.length),l=i(o);return new At(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru;const As={};class Wn{static get Default(){return O(As&&we,"ChildrenNode.ts has not been loaded"),Ru=Ru||new Wn({".priority":As},{".priority":we}),Ru}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=fs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof At?n:null}hasIndex(e){return xn(this.indexSet_,e.toString())}addIndex(e,n){O(e!==Pn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Z.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=Ol(r,e.getCompare()):l=As;const c=e.toString(),u={...this.indexSet_};u[c]=e;const d={...this.indexes_};return d[c]=l,new Wn(d,u)}addToIndexes(e,n){const r=Pl(this.indexes_,(s,i)=>{const o=fs(this.indexSet_,i);if(O(o,"Missing index implementation for "+i),s===As)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(Z.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),Ol(l,o.getCompare())}else return As;else{const l=n.get(e.name);let c=s;return l&&(c=c.remove(new Z(e.name,l))),c.insert(e,e.node)}});return new Wn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Pl(this.indexes_,s=>{if(s===As)return s;{const i=n.get(e.name);return i?s.remove(new Z(e.name,i)):s}});return new Wn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fi;class G{static get EMPTY_NODE(){return Fi||(Fi=new G(new At(xf),null,Wn.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&u_(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fi}updatePriority(e){return this.children_.isEmpty()?this:new G(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fi:n}}getChild(e){const n=J(e);return n===null?this:this.getImmediateChild(n).getChild(ge(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(O(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Z(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Fi:this.priorityNode_;return new G(s,o,i)}}updateChild(e,n){const r=J(e);if(r===null)return n;{O(J(e)!==".priority"||Fr(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ge(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(we,(o,l)=>{n[o]=l.val(e),r++,i&&G.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+c_(this.getPriority().val())+":"),this.forEachChild(we,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Fv(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Z(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Z(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Zo?-1:0}withIndex(e){if(e===Pn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new G(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Pn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(we),s=n.getIterator(we);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Pn?null:this.indexMap_.get(e.toString())}}G.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class $N extends G{constructor(){super(new At(xf),G.EMPTY_NODE,Wn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return G.EMPTY_NODE}isEmpty(){return!1}}const Zo=new $N;Object.defineProperties(Z,{MIN:{value:new Z(Mr,G.EMPTY_NODE)},MAX:{value:new Z(Zn,Zo)}});l_.__EMPTY_NODE=G.EMPTY_NODE;Xe.__childrenNodeConstructor=G;ON(Zo);LN(Zo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=!0;function Pe(t,e=null){if(t===null)return G.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Xe(n,Pe(e))}if(!(t instanceof Array)&&VN){const n=[];let r=!1;if(it(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=Pe(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Z(o,c)))}}),n.length===0)return G.EMPTY_NODE;const i=Ol(n,DN,o=>o.name,xf);if(r){const o=Ol(n,we.getCompare());return new G(i,Pe(e),new Wn({".priority":o},{".priority":we}))}else return new G(i,Pe(e),Wn.Default)}else{let n=G.EMPTY_NODE;return it(t,(r,s)=>{if(xn(t,r)&&r.substring(0,1)!=="."){const i=Pe(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Pe(e))}}jN(Pe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends vc{constructor(e){super(),this.indexPath_=e,O(!X(e)&&J(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Is(e.name,n.name):i}makePost(e,n){const r=Pe(e),s=G.EMPTY_NODE.updateChild(this.indexPath_,r);return new Z(n,s)}maxPost(){const e=G.EMPTY_NODE.updateChild(this.indexPath_,Zo);return new Z(Zn,e)}toString(){return Do(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends vc{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Is(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(e,n){const r=Pe(e);return new Z(n,r)}toString(){return".value"}}const bf=new BN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){return{type:"value",snapshotNode:t}}function di(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Oo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function WN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){O(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Oo(n,l)):O(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(di(n,r)):o.trackChildChange(jo(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(we,(s,i)=>{n.hasChild(s)||r.trackChildChange(Oo(s,i))}),n.isLeafNode()||n.forEachChild(we,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(jo(s,i,o))}else r.trackChildChange(di(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?G.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.indexedFilter_=new Ef(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Lo.getStartPost_(e),this.endPost_=Lo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Z(n,r))||(r=G.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=G.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(G.EMPTY_NODE);const i=this;return n.forEachChild(we,(o,l)=>{i.matches(new Z(o,l))||(s=s.updateImmediateChild(o,G.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Lo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Z(n,r))||(r=G.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=G.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=G.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(G.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,G.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,g)=>h(g,f)}else o=this.index_.getCompare();const l=e;O(l.numChildren()===this.limit_,"");const c=new Z(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(n)){const h=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,c);if(d&&!r.isEmpty()&&g>=0)return i!=null&&i.trackChildChange(jo(n,r,h)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Oo(n,h));const w=l.updateImmediateChild(n,G.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(di(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(Oo(u.name,u.node)),i.trackChildChange(di(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,G.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=we}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mr}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===we}copy(){const e=new If;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function HN(t){return t.loadsAllData()?new Ef(t.getIndex()):t.hasLimit()?new zN(t):new Lo(t)}function GN(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function qN(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function qd(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function KN(t,e,n){let r;return t.index_===Pn||n?r=qd(t,e,n):r=qd(t,e,Zn),r.startAfterSet_=!0,r}function Kd(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function YN(t,e,n){let r;return t.index_===Pn||n?r=Kd(t,e,n):r=Kd(t,e,Mr),r.endBeforeSet_=!0,r}function _c(t,e){const n=t.copy();return n.index_=e,n}function og(t){const e={};if(t.isDefault())return e;let n;if(t.index_===we?n="$priority":t.index_===bf?n="$value":t.index_===Pn?n="$key":(O(t.index_ instanceof Sf,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ke(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ke(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ke(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ke(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ke(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ag(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==we&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends s_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Xo("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=jl.getListenId_(e,r),l={};this.listens_[o]=l;const c=og(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),fs(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=jl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=og(e._queryParams),r=e._path.toString(),s=new Vt;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bs(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Ro(l.responseText)}catch{gt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&gt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.rootNode_=G.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return{value:null,children:new Map}}function bi(t,e,n){if(X(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=J(e);t.children.has(r)||t.children.set(r,Ll());const s=t.children.get(r);e=ge(e),bi(s,e,n)}}function Yd(t,e){if(X(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(we,(r,s)=>{bi(t,new ue(r),s)}),Yd(t,e)}}else if(t.children.size>0){const n=J(e);return e=ge(e),t.children.has(n)&&Yd(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Qd(t,e,n){t.value!==null?n(e,t.value):JN(t,(r,s)=>{const i=new ue(e.toString()+"/"+r);Qd(s,i,n)})}function JN(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&it(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=10*1e3,ZN=30*1e3,e1=5*60*1e3;class t1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new XN(e);const r=lg+(ZN-lg)*Math.random();so(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;it(e,(s,i)=>{i>0&&xn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),so(this.reportStats_.bind(this),Math.floor(Math.random()*2*e1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mn||(mn={}));function Nf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Cf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Tf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mn.ACK_USER_WRITE,this.source=Nf()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ue(e));return new Ml(le(),n,this.revert)}}else return O(J(this.path)===e,"operationForChild called for unrelated child."),new Ml(ge(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.source=e,this.path=n,this.type=mn.LISTEN_COMPLETE}operationForChild(e){return X(this.path)?new Mo(this.source,le()):new Mo(this.source,ge(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mn.OVERWRITE}operationForChild(e){return X(this.path)?new ms(this.source,le(),this.snap.getImmediateChild(e)):new ms(this.source,ge(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mn.MERGE}operationForChild(e){if(X(this.path)){const n=this.children.subtree(new ue(e));return n.isEmpty()?null:n.value?new ms(this.source,le(),n.value):new hi(this.source,le(),n)}else return O(J(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hi(this.source,ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;const n=J(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function r1(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(WN(o.childName,o.snapshotNode))}),Ui(t,s,"child_removed",e,r,n),Ui(t,s,"child_added",e,r,n),Ui(t,s,"child_moved",i,r,n),Ui(t,s,"child_changed",e,r,n),Ui(t,s,"value",e,r,n),s}function Ui(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,c)=>i1(t,l,c)),o.forEach(l=>{const c=s1(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function s1(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function i1(t,e,n){if(e.childName==null||n.childName==null)throw _i("Should only compare child_ events.");const r=new Z(e.childName,e.snapshotNode),s=new Z(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e){return{eventCache:t,serverCache:e}}function io(t,e,n,r){return wc(new Ur(e,n,r),t.serverCache)}function p_(t,e,n,r){return wc(t.eventCache,new Ur(e,n,r))}function Fl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function gs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu;const o1=()=>(Pu||(Pu=new At(BI)),Pu);class ve{static fromObject(e){let n=new ve(null);return it(e,(r,s)=>{n=n.set(new ue(r),s)}),n}constructor(e,n=o1()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:le(),value:this.value};if(X(e))return null;{const r=J(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ge(e),n);return i!=null?{path:ke(new ue(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{const n=J(e),r=this.children.get(n);return r!==null?r.subtree(ge(e)):new ve(null)}}set(e,n){if(X(e))return new ve(n,this.children);{const r=J(e),i=(this.children.get(r)||new ve(null)).set(ge(e),n),o=this.children.insert(r,i);return new ve(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new ve(null):new ve(null,this.children);{const n=J(e),r=this.children.get(n);if(r){const s=r.remove(ge(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ve(null):new ve(this.value,i)}else return this}}get(e){if(X(e))return this.value;{const n=J(e),r=this.children.get(n);return r?r.get(ge(e)):null}}setTree(e,n){if(X(e))return n;{const r=J(e),i=(this.children.get(r)||new ve(null)).setTree(ge(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ve(this.value,o)}}fold(e){return this.fold_(le(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(ke(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,le(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(X(e))return null;{const i=J(e),o=this.children.get(i);return o?o.findOnPath_(ge(e),ke(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,le(),n)}foreachOnPath_(e,n,r){if(X(e))return this;{this.value&&r(n,this.value);const s=J(e),i=this.children.get(s);return i?i.foreachOnPath_(ge(e),ke(n,s),r):new ve(null)}}foreach(e){this.foreach_(le(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(ke(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.writeTree_=e}static empty(){return new _n(new ve(null))}}function oo(t,e,n){if(X(e))return new _n(new ve(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=xt(s,e);return i=i.updateChild(o,n),new _n(t.writeTree_.set(s,i))}else{const s=new ve(n),i=t.writeTree_.setTree(e,s);return new _n(i)}}}function Jd(t,e,n){let r=t;return it(n,(s,i)=>{r=oo(r,ke(e,s),i)}),r}function cg(t,e){if(X(e))return _n.empty();{const n=t.writeTree_.setTree(e,new ve(null));return new _n(n)}}function Xd(t,e){return Ns(t,e)!=null}function Ns(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xt(n.path,e)):null}function ug(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(we,(r,s)=>{e.push(new Z(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Z(r,s.value))}),e}function Pr(t,e){if(X(e))return t;{const n=Ns(t,e);return n!=null?new _n(new ve(n)):new _n(t.writeTree_.subtree(e))}}function Zd(t){return t.writeTree_.isEmpty()}function fi(t,e){return m_(le(),t.writeTree_,e)}function m_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(O(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=m_(ke(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ke(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e){return __(e,t)}function a1(t,e,n,r,s){O(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=oo(t.visibleWrites,e,n)),t.lastWriteId=r}function l1(t,e,n,r){O(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Jd(t.visibleWrites,e,n),t.lastWriteId=r}function c1(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function u1(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);O(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&d1(l,r.path)?s=!1:nn(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return h1(t),!0;if(r.snap)t.visibleWrites=cg(t.visibleWrites,r.path);else{const l=r.children;it(l,c=>{t.visibleWrites=cg(t.visibleWrites,ke(r.path,c))})}return!0}else return!1}function d1(t,e){if(t.snap)return nn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&nn(ke(t.path,n),e))return!0;return!1}function h1(t){t.visibleWrites=g_(t.allWrites,f1,le()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function f1(t){return t.visible}function g_(t,e,n){let r=_n.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)nn(n,o)?(l=xt(n,o),r=oo(r,l,i.snap)):nn(o,n)&&(l=xt(o,n),r=oo(r,le(),i.snap.getChild(l)));else if(i.children){if(nn(n,o))l=xt(n,o),r=Jd(r,l,i.children);else if(nn(o,n))if(l=xt(o,n),X(l))r=Jd(r,le(),i.children);else{const c=fs(i.children,J(l));if(c){const u=c.getChild(ge(l));r=oo(r,le(),u)}}}else throw _i("WriteRecord should have .snap or .children")}}return r}function y_(t,e,n,r,s){if(!r&&!s){const i=Ns(t.visibleWrites,e);if(i!=null)return i;{const o=Pr(t.visibleWrites,e);if(Zd(o))return n;if(n==null&&!Xd(o,le()))return null;{const l=n||G.EMPTY_NODE;return fi(o,l)}}}else{const i=Pr(t.visibleWrites,e);if(!s&&Zd(i))return n;if(!s&&n==null&&!Xd(i,le()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(nn(u.path,e)||nn(e,u.path))},l=g_(t.allWrites,o,e),c=n||G.EMPTY_NODE;return fi(l,c)}}}function p1(t,e,n){let r=G.EMPTY_NODE;const s=Ns(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(we,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Pr(t.visibleWrites,e);return n.forEachChild(we,(o,l)=>{const c=fi(Pr(i,new ue(o)),l);r=r.updateImmediateChild(o,c)}),ug(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Pr(t.visibleWrites,e);return ug(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function m1(t,e,n,r,s){O(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=ke(e,n);if(Xd(t.visibleWrites,i))return null;{const o=Pr(t.visibleWrites,i);return Zd(o)?s.getChild(n):fi(o,s.getChild(n))}}function g1(t,e,n,r){const s=ke(e,n),i=Ns(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Pr(t.visibleWrites,s);return fi(o,r.getNode().getImmediateChild(n))}else return null}function y1(t,e){return Ns(t.visibleWrites,e)}function v1(t,e,n,r,s,i,o){let l;const c=Pr(t.visibleWrites,e),u=Ns(c,le());if(u!=null)l=u;else if(n!=null)l=fi(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let g=f.getNext();for(;g&&d.length<s;)h(g,r)!==0&&d.push(g),g=f.getNext();return d}else return[]}function _1(){return{visibleWrites:_n.empty(),allWrites:[],lastWriteId:-1}}function Ul(t,e,n,r){return y_(t.writeTree,t.treePath,e,n,r)}function kf(t,e){return p1(t.writeTree,t.treePath,e)}function dg(t,e,n,r){return m1(t.writeTree,t.treePath,e,n,r)}function $l(t,e){return y1(t.writeTree,ke(t.treePath,e))}function w1(t,e,n,r,s,i){return v1(t.writeTree,t.treePath,e,n,r,s,i)}function Rf(t,e,n){return g1(t.writeTree,t.treePath,e,n)}function v_(t,e){return __(ke(t.treePath,e),t.writeTree)}function __(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;O(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),O(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,jo(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Oo(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,di(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,jo(r,e.snapshotNode,s.oldSnap));else throw _i("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const w_=new S1;class Pf{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ur(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rf(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gs(this.viewCache_),i=w1(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){return{filter:t}}function E1(t,e){O(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function I1(t,e,n,r,s){const i=new x1;let o,l;if(n.type===mn.OVERWRITE){const u=n;u.source.fromUser?o=eh(t,e,u.path,u.snap,r,s,i):(O(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!X(u.path),o=Vl(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===mn.MERGE){const u=n;u.source.fromUser?o=C1(t,e,u.path,u.children,r,s,i):(O(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=th(t,e,u.path,u.children,r,s,l,i))}else if(n.type===mn.ACK_USER_WRITE){const u=n;u.revert?o=R1(t,e,u.path,r,s,i):o=T1(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===mn.LISTEN_COMPLETE)o=k1(t,e,n.path,r,i);else throw _i("Unknown operation type: "+n.type);const c=i.getChanges();return N1(e,o,c),{viewCache:o,changes:c}}function N1(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Fl(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(f_(Fl(e)))}}function x_(t,e,n,r,s,i){const o=e.eventCache;if($l(r,n)!=null)return e;{let l,c;if(X(n))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=gs(e),d=u instanceof G?u:G.EMPTY_NODE,h=kf(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=Ul(r,gs(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=J(n);if(u===".priority"){O(Fr(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=dg(r,n,d,c);h!=null?l=t.filter.updatePriority(d,h):l=o.getNode()}else{const d=ge(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=dg(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Rf(r,u,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),u,h,d,s,i):l=o.getNode()}}return io(e,l,o.isFullyInitialized()||X(n),t.filter.filtersNodes())}}function Vl(t,e,n,r,s,i,o,l){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(X(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const g=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),g,null)}else{const g=J(n);if(!c.isCompleteForPath(n)&&Fr(n)>1)return e;const v=ge(n),L=c.getNode().getImmediateChild(g).updateChild(v,r);g===".priority"?u=d.updatePriority(c.getNode(),L):u=d.updateChild(c.getNode(),g,L,v,w_,null)}const h=p_(e,u,c.isFullyInitialized()||X(n),d.filtersNodes()),f=new Pf(s,h,i);return x_(t,h,n,s,f,l)}function eh(t,e,n,r,s,i,o){const l=e.eventCache;let c,u;const d=new Pf(s,e,i);if(X(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=io(e,u,!0,t.filter.filtersNodes());else{const h=J(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=io(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=ge(n),g=l.getNode().getImmediateChild(h);let v;if(X(f))v=r;else{const w=d.getCompleteChild(h);w!=null?vf(f)===".priority"&&w.getChild(o_(f)).isEmpty()?v=w:v=w.updateChild(f,r):v=G.EMPTY_NODE}if(g.equals(v))c=e;else{const w=t.filter.updateChild(l.getNode(),h,v,f,d,o);c=io(e,w,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function hg(t,e){return t.eventCache.isCompleteForChild(e)}function C1(t,e,n,r,s,i,o){let l=e;return r.foreach((c,u)=>{const d=ke(n,c);hg(e,J(d))&&(l=eh(t,l,d,u,s,i,o))}),r.foreach((c,u)=>{const d=ke(n,c);hg(e,J(d))||(l=eh(t,l,d,u,s,i,o))}),l}function fg(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function th(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;X(n)?u=r:u=new ve(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),v=fg(t,g,f);c=Vl(t,c,new ue(h),v,s,i,o,l)}}),u.children.inorderTraversal((h,f)=>{const g=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!g){const v=e.serverCache.getNode().getImmediateChild(h),w=fg(t,v,f);c=Vl(t,c,new ue(h),w,s,i,o,l)}}),c}function T1(t,e,n,r,s,i,o){if($l(s,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(X(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Vl(t,e,n,c.getNode().getChild(n),s,i,l,o);if(X(n)){let u=new ve(null);return c.getNode().forEachChild(Pn,(d,h)=>{u=u.set(new ue(d),h)}),th(t,e,n,u,s,i,l,o)}else return e}else{let u=new ve(null);return r.foreach((d,h)=>{const f=ke(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),th(t,e,n,u,s,i,l,o)}}function k1(t,e,n,r,s){const i=e.serverCache,o=p_(e,i.getNode(),i.isFullyInitialized()||X(n),i.isFiltered());return x_(t,o,n,r,w_,s)}function R1(t,e,n,r,s,i){let o;if($l(r,n)!=null)return e;{const l=new Pf(r,e,s),c=e.eventCache.getNode();let u;if(X(n)||J(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ul(r,gs(e));else{const h=e.serverCache.getNode();O(h instanceof G,"serverChildren would be complete if leaf node"),d=kf(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=J(n);let h=Rf(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,ge(n),l,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,G.EMPTY_NODE,ge(n),l,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ul(r,gs(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||$l(r,le())!=null,io(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Ef(r.getIndex()),i=HN(r);this.processor_=b1(i);const o=n.serverCache,l=n.eventCache,c=s.updateFullNode(G.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(G.EMPTY_NODE,l.getNode(),null),d=new Ur(c,o.isFullyInitialized(),s.filtersNodes()),h=new Ur(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=wc(h,d),this.eventGenerator_=new n1(this.query_)}get query(){return this.query_}}function A1(t){return t.viewCache_.serverCache.getNode()}function D1(t){return Fl(t.viewCache_)}function O1(t,e){const n=gs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!X(e)&&!n.getImmediateChild(J(e)).isEmpty())?n.getChild(e):null}function pg(t){return t.eventRegistrations_.length===0}function j1(t,e){t.eventRegistrations_.push(e)}function mg(t,e,n){const r=[];if(n){O(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function gg(t,e,n,r){e.type===mn.MERGE&&e.source.queryId!==null&&(O(gs(t.viewCache_),"We should always have a full cache before handling merges"),O(Fl(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=I1(t.processor_,s,e,n,r);return E1(t.processor_,i.viewCache),O(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,S_(t,i.changes,i.viewCache.eventCache.getNode(),null)}function L1(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(we,(i,o)=>{r.push(di(i,o))}),n.isFullyInitialized()&&r.push(f_(n.getNode())),S_(t,r,n.getNode(),e)}function S_(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return r1(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl;class b_{constructor(){this.views=new Map}}function M1(t){O(!Bl,"__referenceConstructor has already been defined"),Bl=t}function F1(){return O(Bl,"Reference.ts has not been loaded"),Bl}function U1(t){return t.views.size===0}function Af(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return O(i!=null,"SyncTree gave us an op for an invalid query."),gg(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(gg(o,e,n,r));return i}}function E_(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=Ul(n,s?r:null),c=!1;l?c=!0:r instanceof G?(l=kf(n,r),c=!1):(l=G.EMPTY_NODE,c=!1);const u=wc(new Ur(l,c,!1),new Ur(r,s,!1));return new P1(e,u)}return o}function $1(t,e,n,r,s,i){const o=E_(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),j1(o,n),L1(o,n)}function V1(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=$r(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(mg(u,n,r)),pg(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(mg(c,n,r)),pg(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!$r(t)&&i.push(new(F1())(e._repo,e._path)),{removed:i,events:o}}function I_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ar(t,e){let n=null;for(const r of t.views.values())n=n||O1(r,e);return n}function N_(t,e){if(e._queryParams.loadsAllData())return Sc(t);{const r=e._queryIdentifier;return t.views.get(r)}}function C_(t,e){return N_(t,e)!=null}function $r(t){return Sc(t)!=null}function Sc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;function B1(t){O(!Wl,"__referenceConstructor has already been defined"),Wl=t}function W1(){return O(Wl,"Reference.ts has not been loaded"),Wl}let z1=1;class yg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ve(null),this.pendingWriteTree_=_1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Df(t,e,n,r,s){return a1(t.pendingWriteTree_,e,n,r,s),s?Ei(t,new ms(Nf(),e,n)):[]}function H1(t,e,n,r){l1(t.pendingWriteTree_,e,n,r);const s=ve.fromObject(n);return Ei(t,new hi(Nf(),e,s))}function wr(t,e,n=!1){const r=c1(t.pendingWriteTree_,e);if(u1(t.pendingWriteTree_,e)){let i=new ve(null);return r.snap!=null?i=i.set(le(),!0):it(r.children,o=>{i=i.set(new ue(o),!0)}),Ei(t,new Ml(r.path,i,n))}else return[]}function ea(t,e,n){return Ei(t,new ms(Cf(),e,n))}function G1(t,e,n){const r=ve.fromObject(n);return Ei(t,new hi(Cf(),e,r))}function q1(t,e){return Ei(t,new Mo(Cf(),e))}function K1(t,e,n){const r=Of(t,n);if(r){const s=jf(r),i=s.path,o=s.queryId,l=xt(i,e),c=new Mo(Tf(o),l);return Lf(t,i,c)}else return[]}function zl(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||C_(o,e))){const c=V1(o,e,n,r);U1(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,g)=>$r(g));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const g=J1(f);for(let v=0;v<g.length;++v){const w=g[v],L=w.query,m=P_(t,w);t.listenProvider_.startListening(ao(L),Fo(t,L),m.hashFn,m.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(ao(e),null):u.forEach(f=>{const g=t.queryToTagMap.get(Ec(f));t.listenProvider_.stopListening(ao(f),g)}))}X1(t,u)}return l}function T_(t,e,n,r){const s=Of(t,r);if(s!=null){const i=jf(s),o=i.path,l=i.queryId,c=xt(o,e),u=new ms(Tf(l),c,n);return Lf(t,o,u)}else return[]}function Y1(t,e,n,r){const s=Of(t,r);if(s){const i=jf(s),o=i.path,l=i.queryId,c=xt(o,e),u=ve.fromObject(n),d=new hi(Tf(l),c,u);return Lf(t,o,d)}else return[]}function nh(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,g)=>{const v=xt(f,s);i=i||Ar(g,v),o=o||$r(g)});let l=t.syncPointTree_.get(s);l?(o=o||$r(l),i=i||Ar(l,le())):(l=new b_,t.syncPointTree_=t.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=G.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((g,v)=>{const w=Ar(v,le());w&&(i=i.updateImmediateChild(g,w))}));const u=C_(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=Ec(e);O(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=Z1();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const d=xc(t.pendingWriteTree_,s);let h=$1(l,e,n,d,i,c);if(!u&&!o&&!r){const f=N_(l,e);h=h.concat(eC(t,e,f))}return h}function bc(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=xt(o,e),u=Ar(l,c);if(u)return u});return y_(s,e,i,n,!0)}function Q1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=xt(u,n);r=r||Ar(d,h)});let s=t.syncPointTree_.get(n);s?r=r||Ar(s,le()):(s=new b_,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Ur(r,!0,!1):null,l=xc(t.pendingWriteTree_,e._path),c=E_(s,e,l,i?o.getNode():G.EMPTY_NODE,i);return D1(c)}function Ei(t,e){return k_(e,t.syncPointTree_,null,xc(t.pendingWriteTree_,le()))}function k_(t,e,n,r){if(X(t.path))return R_(t,e,n,r);{const s=e.get(le());n==null&&s!=null&&(n=Ar(s,le()));let i=[];const o=J(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const u=n?n.getImmediateChild(o):null,d=v_(r,o);i=i.concat(k_(l,c,u,d))}return s&&(i=i.concat(Af(s,t,r,n))),i}}function R_(t,e,n,r){const s=e.get(le());n==null&&s!=null&&(n=Ar(s,le()));let i=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,u=v_(r,o),d=t.operationForChild(o);d&&(i=i.concat(R_(d,l,c,u)))}),s&&(i=i.concat(Af(s,t,r,n))),i}function P_(t,e){const n=e.query,r=Fo(t,n);return{hashFn:()=>(A1(e)||G.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?K1(t,n._path,r):q1(t,n._path);{const i=HI(s,n);return zl(t,n,null,i)}}}}function Fo(t,e){const n=Ec(e);return t.queryToTagMap.get(n)}function Ec(t){return t._path.toString()+"$"+t._queryIdentifier}function Of(t,e){return t.tagToQueryMap.get(e)}function jf(t){const e=t.indexOf("$");return O(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ue(t.substr(0,e))}}function Lf(t,e,n){const r=t.syncPointTree_.get(e);O(r,"Missing sync point for query tag that we're tracking");const s=xc(t.pendingWriteTree_,e);return Af(r,n,s,null)}function J1(t){return t.fold((e,n,r)=>{if(n&&$r(n))return[Sc(n)];{let s=[];return n&&(s=I_(n)),it(r,(i,o)=>{s=s.concat(o)}),s}})}function ao(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(W1())(t._repo,t._path):t}function X1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Ec(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Z1(){return z1++}function eC(t,e,n){const r=e._path,s=Fo(t,e),i=P_(t,n),o=t.listenProvider_.startListening(ao(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)O(!$r(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!X(u)&&d&&$r(d))return[Sc(d).query];{let f=[];return d&&(f=f.concat(I_(d).map(g=>g.query))),it(h,(g,v)=>{f=f.concat(v)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(ao(d),Fo(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Mf(n)}node(){return this.node_}}class Ff{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ke(this.path_,e);return new Ff(this.syncTree_,n)}node(){return bc(this.syncTree_,this.path_)}}const tC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vg=function(t,e,n){if(!t||typeof t!="object")return t;if(O(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return nC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return rC(t[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},nC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:O(!1,"Unexpected server value: "+t)}},rC=function(t,e,n){t.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&O(!1,"Unexpected increment value: "+r);const s=e.node();if(O(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},A_=function(t,e,n,r){return $f(e,new Ff(n,t),r)},Uf=function(t,e,n){return $f(t,new Mf(e),n)};function $f(t,e,n){const r=t.getPriority().val(),s=vg(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=vg(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new Xe(l,Pe(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Xe(s))),o.forEachChild(we,(l,c)=>{const u=$f(c,e.getImmediateChild(l),n);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ic(t,e){let n=e instanceof ue?e:new ue(e),r=t,s=J(n);for(;s!==null;){const i=fs(r.node.children,s)||{children:{},childCount:0};r=new Vf(s,r,i),n=ge(n),s=J(n)}return r}function Cs(t){return t.node.value}function Bf(t,e){t.node.value=e,rh(t)}function D_(t){return t.node.childCount>0}function sC(t){return Cs(t)===void 0&&!D_(t)}function Nc(t,e){it(t.node.children,(n,r)=>{e(new Vf(n,t,r))})}function O_(t,e,n,r){n&&!r&&e(t),Nc(t,s=>{O_(s,e,!0,r)}),n&&r&&e(t)}function iC(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ta(t){return new ue(t.parent===null?t.name:ta(t.parent)+"/"+t.name)}function rh(t){t.parent!==null&&oC(t.parent,t.name,t)}function oC(t,e,n){const r=sC(n),s=xn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,rh(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,rh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=/[\[\].#$\/\u0000-\u001F\u007F]/,lC=/[\[\].#$\u0000-\u001F\u007F]/,Au=10*1024*1024,Cc=function(t){return typeof t=="string"&&t.length!==0&&!aC.test(t)},j_=function(t){return typeof t=="string"&&t.length!==0&&!lC.test(t)},cC=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),j_(t)},Uo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!yc(t)||t&&typeof t=="object"&&xn(t,".sv")},On=function(t,e,n,r){r&&e===void 0||na(ps(t,"value"),e,n)},na=function(t,e,n){const r=n instanceof ue?new IN(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Qr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Qr(r)+" with contents = "+e.toString());if(yc(e))throw new Error(t+"contains "+e.toString()+" "+Qr(r));if(typeof e=="string"&&e.length>Au/3&&pc(e)>Au)throw new Error(t+"contains a string greater than "+Au+" utf8 bytes "+Qr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(it(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Cc(o)))throw new Error(t+" contains an invalid key ("+o+") "+Qr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);NN(r,o),na(t,l,r),CN(r)}),s&&i)throw new Error(t+' contains ".value" child '+Qr(r)+" in addition to actual children.")}},uC=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Do(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Cc(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(EN);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&nn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},L_=function(t,e,n,r){if(r&&e===void 0)return;const s=ps(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];it(e,(o,l)=>{const c=new ue(o);if(na(s,l,ke(n,c)),vf(c)===".priority"&&!Uo(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),uC(s,i)},Wf=function(t,e,n){if(!(n&&e===void 0)){if(yc(e))throw new Error(ps(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Uo(e))throw new Error(ps(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ra=function(t,e,n,r){if(!(r&&n===void 0)&&!Cc(n))throw new Error(ps(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},zf=function(t,e,n,r){if(!(r&&n===void 0)&&!j_(n))throw new Error(ps(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},dC=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zf(t,e,n,r)},Cn=function(t,e){if(J(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},M_=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!cC(n))throw new Error(ps(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tc(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!_f(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function F_(t,e,n){Tc(t,n),U_(t,r=>_f(r,e))}function qt(t,e,n){Tc(t,n),U_(t,r=>nn(r,e)||nn(e,r))}function U_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(fC(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();os&&nt("event: "+n.toString()),Si(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="repo_interrupt",pC=25;class mC{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ll(),this.transactionQueueTree_=new Vf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gC(t,e,n){if(t.stats_=gf(t.repoInfo_),t.forceRestClient_||YI())t.server_=new jl(t.repoInfo_,(r,s,i,o)=>{_g(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>wg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new on(t.repoInfo_,e,(r,s,i,o)=>{_g(t,r,s,i,o)},r=>{wg(t,r)},r=>{yC(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=eN(t.repoInfo_,()=>new t1(t.stats_,t.server_)),t.infoData_=new QN,t.infoSyncTree_=new yg({startListening:(r,s,i,o)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=ea(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Hf(t,"connected",!1),t.serverSyncTree_=new yg({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,c)=>{const u=o(l,c);qt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function V_(t){const n=t.infoData_.getNode(new ue(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function sa(t){return tC({timestamp:V_(t)})}function _g(t,e,n,r,s){t.dataUpdateCount++;const i=new ue(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Pl(n,u=>Pe(u));o=Y1(t.serverSyncTree_,i,c,s)}else{const c=Pe(n);o=T_(t.serverSyncTree_,i,c,s)}else if(r){const c=Pl(n,u=>Pe(u));o=G1(t.serverSyncTree_,i,c)}else{const c=Pe(n);o=ea(t.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=pi(t,i)),qt(t.eventQueue_,l,o)}function wg(t,e){Hf(t,"connected",e),e===!1&&wC(t)}function yC(t,e){it(e,(n,r)=>{Hf(t,n,r)})}function Hf(t,e,n){const r=new ue("/.info/"+e),s=Pe(n);t.infoData_.updateSnapshot(r,s);const i=ea(t.infoSyncTree_,r,s);qt(t.eventQueue_,r,i)}function kc(t){return t.nextWriteId_++}function vC(t,e,n){const r=Q1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Pe(s).withIndex(e._queryParams.getIndex());nh(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ea(t.serverSyncTree_,e._path,i);else{const l=Fo(t.serverSyncTree_,e);o=T_(t.serverSyncTree_,e._path,i,l)}return qt(t.eventQueue_,e._path,o),zl(t.serverSyncTree_,e,n,null,!0),i},s=>(Ii(t,"get for query "+Ke(e)+" failed: "+s),Promise.reject(new Error(s))))}function Gf(t,e,n,r,s){Ii(t,"set",{path:e.toString(),value:n,priority:r});const i=sa(t),o=Pe(n,r),l=bc(t.serverSyncTree_,e),c=Uf(o,l,i),u=kc(t),d=Df(t.serverSyncTree_,e,c,u,!0);Tc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,g)=>{const v=f==="ok";v||gt("set at "+e+" failed: "+f);const w=wr(t.serverSyncTree_,u,!v);qt(t.eventQueue_,e,w),Vr(t,s,f,g)});const h=Kf(t,e);pi(t,h),qt(t.eventQueue_,h,[])}function _C(t,e,n,r){Ii(t,"update",{path:e.toString(),value:n});let s=!0;const i=sa(t),o={};if(it(n,(l,c)=>{s=!1,o[l]=A_(ke(e,l),Pe(c),t.serverSyncTree_,i)}),s)nt("update() called with empty data.  Don't do anything."),Vr(t,r,"ok",void 0);else{const l=kc(t),c=H1(t.serverSyncTree_,e,o,l);Tc(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||gt("update at "+e+" failed: "+u);const f=wr(t.serverSyncTree_,l,!h),g=f.length>0?pi(t,e):e;qt(t.eventQueue_,g,f),Vr(t,r,u,d)}),it(n,u=>{const d=Kf(t,ke(e,u));pi(t,d)}),qt(t.eventQueue_,e,[])}}function wC(t){Ii(t,"onDisconnectEvents");const e=sa(t),n=Ll();Qd(t.onDisconnect_,le(),(s,i)=>{const o=A_(s,i,t.serverSyncTree_,e);bi(n,s,o)});let r=[];Qd(n,le(),(s,i)=>{r=r.concat(ea(t.serverSyncTree_,s,i));const o=Kf(t,s);pi(t,o)}),t.onDisconnect_=Ll(),qt(t.eventQueue_,le(),r)}function xC(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&Yd(t.onDisconnect_,e),Vr(t,n,r,s)})}function xg(t,e,n,r){const s=Pe(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(i,o)=>{i==="ok"&&bi(t.onDisconnect_,e,s),Vr(t,r,i,o)})}function SC(t,e,n,r,s){const i=Pe(n,r);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{o==="ok"&&bi(t.onDisconnect_,e,i),Vr(t,s,o,l)})}function bC(t,e,n,r){if(Rl(n)){nt("onDisconnect().update() called with empty data.  Don't do anything."),Vr(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,i)=>{s==="ok"&&it(n,(o,l)=>{const c=Pe(l);bi(t.onDisconnect_,ke(e,o),c)}),Vr(t,r,s,i)})}function EC(t,e,n){let r;J(e._path)===".info"?r=nh(t.infoSyncTree_,e,n):r=nh(t.serverSyncTree_,e,n),F_(t.eventQueue_,e._path,r)}function sh(t,e,n){let r;J(e._path)===".info"?r=zl(t.infoSyncTree_,e,n):r=zl(t.serverSyncTree_,e,n),F_(t.eventQueue_,e._path,r)}function B_(t){t.persistentConnection_&&t.persistentConnection_.interrupt($_)}function IC(t){t.persistentConnection_&&t.persistentConnection_.resume($_)}function Ii(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nt(n,...e)}function Vr(t,e,n,r){e&&Si(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function NC(t,e,n,r,s,i){Ii(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:Mv(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=qf(t,e,void 0);o.currentInputSnapshot=l;const c=o.update(l.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{na("transaction failed: Data returned ",c,o.path),o.status=0;const u=Ic(t.transactionQueueTree_,e),d=Cs(u)||[];d.push(o),Bf(u,d);let h;typeof c=="object"&&c!==null&&xn(c,".priority")?(h=fs(c,".priority"),O(Uo(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(bc(t.serverSyncTree_,e)||G.EMPTY_NODE).getPriority().val();const f=sa(t),g=Pe(c,h),v=Uf(g,l,f);o.currentOutputSnapshotRaw=g,o.currentOutputSnapshotResolved=v,o.currentWriteId=kc(t);const w=Df(t.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);qt(t.eventQueue_,e,w),Rc(t,t.transactionQueueTree_)}}function qf(t,e,n){return bc(t.serverSyncTree_,e,n)||G.EMPTY_NODE}function Rc(t,e=t.transactionQueueTree_){if(e||Pc(t,e),Cs(e)){const n=z_(t,e);O(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&CC(t,ta(e),n)}else D_(e)&&Nc(e,n=>{Rc(t,n)})}function CC(t,e,n){const r=n.map(u=>u.currentWriteId),s=qf(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];O(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=xt(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),c=e;t.server_.put(c.toString(),l,u=>{Ii(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(wr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Pc(t,Ic(t.transactionQueueTree_,e)),Rc(t,t.transactionQueueTree_),qt(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Si(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{gt("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}pi(t,e)}},o)}function pi(t,e){const n=W_(t,e),r=ta(n),s=z_(t,n);return TC(t,s,r),r}function TC(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=xt(n,c.path);let d=!1,h;if(O(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(wr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=pC)d=!0,h="maxretry",s=s.concat(wr(t.serverSyncTree_,c.currentWriteId,!0));else{const f=qf(t,c.path,o);c.currentInputSnapshot=f;const g=e[l].update(f.val());if(g!==void 0){na("transaction failed: Data returned ",g,c.path);let v=Pe(g);typeof g=="object"&&g!=null&&xn(g,".priority")||(v=v.updatePriority(f.getPriority()));const L=c.currentWriteId,m=sa(t),p=Uf(v,f,m);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=p,c.currentWriteId=kc(t),o.splice(o.indexOf(L),1),s=s.concat(Df(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),s=s.concat(wr(t.serverSyncTree_,L,!0))}else d=!0,h="nodata",s=s.concat(wr(t.serverSyncTree_,c.currentWriteId,!0))}qt(t.eventQueue_,n,s),s=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(h),!1,null))))}Pc(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Si(r[l]);Rc(t,t.transactionQueueTree_)}function W_(t,e){let n,r=t.transactionQueueTree_;for(n=J(e);n!==null&&Cs(r)===void 0;)r=Ic(r,n),e=ge(e),n=J(e);return r}function z_(t,e){const n=[];return H_(t,e,n),n.sort((r,s)=>r.order-s.order),n}function H_(t,e,n){const r=Cs(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Nc(e,s=>{H_(t,s,n)})}function Pc(t,e){const n=Cs(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Bf(e,n.length>0?n:void 0)}Nc(e,r=>{Pc(t,r)})}function Kf(t,e){const n=ta(W_(t,e)),r=Ic(t.transactionQueueTree_,e);return iC(r,s=>{Du(t,s)}),Du(t,r),O_(r,s=>{Du(t,s)}),n}function Du(t,e){const n=Cs(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(O(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(O(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(wr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Bf(e,void 0):n.length=i+1,qt(t.eventQueue_,ta(e),s);for(let o=0;o<r.length;o++)Si(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function RC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gt(`Invalid query segment '${n}' in query '${t}'`)}return e}const ih=function(t,e){const n=PC(t),r=n.namespace;n.domain==="firebase.com"&&Dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$I();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jv(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ue(n.pathString)}},PC=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=kC(t.substring(d,h)));const f=RC(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",AC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Sg.charAt(n%64),n=Math.floor(n/64);O(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Sg.charAt(e[s]);return O(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class q_{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Vt;return xC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Cn("OnDisconnect.remove",this._path);const e=new Vt;return xg(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Cn("OnDisconnect.set",this._path),On("OnDisconnect.set",e,this._path,!1);const n=new Vt;return xg(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Cn("OnDisconnect.setWithPriority",this._path),On("OnDisconnect.setWithPriority",e,this._path,!1),Wf("OnDisconnect.setWithPriority",n,!1);const r=new Vt;return SC(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Cn("OnDisconnect.update",this._path),L_("OnDisconnect.update",e,this._path,!1);const n=new Vt;return bC(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return X(this._path)?null:vf(this._path)}get ref(){return new Sn(this._repo,this._path)}get _queryIdentifier(){const e=ag(this._queryParams),n=pf(e);return n==="{}"?"default":n}get _queryObject(){return ag(this._queryParams)}isEqual(e){if(e=z(e),!(e instanceof Qt))return!1;const n=this._repo===e._repo,r=_f(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+bN(this._path)}}function Ac(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hr(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Pn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Mr)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Zn)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===we){if(e!=null&&!Uo(e)||n!=null&&!Uo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(O(t.getIndex()instanceof Sf||t.getIndex()===bf,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Dc(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Sn extends Qt{constructor(e,n){super(e,n,new If,!1)}get parent(){const e=o_(this._path);return e===null?null:new Sn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ys{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ue(e),r=mi(this.ref,e);return new ys(this._node.getChild(n),r,we)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ys(s,mi(this.ref,r),we)))}hasChild(e){const n=new ue(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Q(t,e){return t=z(t),t._checkNotDeleted("ref"),e!==void 0?mi(t._root,e):t._root}function JA(t,e){t=z(t),t._checkNotDeleted("refFromURL");const n=ih(e,t._repo.repoInfo_.nodeAdmin);M_("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Dn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Q(t,n.path.toString())}function mi(t,e){return t=z(t),J(t._path)===null?dC("child","path",e,!1):zf("child","path",e,!1),new Sn(t._repo,ke(t._path,e))}function XA(t){return t=z(t),new DC(t._repo,t._path)}function K_(t,e){t=z(t),Cn("push",t._path),On("push",e,t._path,!0);const n=V_(t._repo),r=AC(n),s=mi(t,r),i=mi(t,r);let o;return e!=null?o=Ze(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function OC(t){return Cn("remove",t._path),Ze(t,null)}function Ze(t,e){t=z(t),Cn("set",t._path),On("set",e,t._path,!1);const n=new Vt;return Gf(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ZA(t,e){t=z(t),Cn("setPriority",t._path),Wf("setPriority",e,!1);const n=new Vt;return Gf(t._repo,ke(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function eD(t,e,n){if(Cn("setWithPriority",t._path),On("setWithPriority",e,t._path,!1),Wf("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Vt;return Gf(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function tD(t,e){L_("update",e,t._path,!1);const n=new Vt;return _C(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Me(t){t=z(t);const e=new Yf(()=>{}),n=new ia(e);return vC(t._repo,t,n).then(r=>new ys(r,new Sn(t._repo,t._path),t._queryParams.getIndex()))}class ia{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new G_("value",this,new ys(e.snapshotNode,new Sn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new q_(this,e,n):null}matches(e){return e instanceof ia?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Oc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new q_(this,e,n):null}createEvent(e,n){O(e.childName!=null,"Child events should have a childName.");const r=mi(new Sn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new G_(e.type,this,new ys(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Oc?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function oa(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const c=n,u=(d,h)=>{sh(t._repo,t,l),c(d,h)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Yf(n,i||void 0),l=e==="value"?new ia(o):new Oc(e,o);return EC(t._repo,t,l),()=>sh(t._repo,t,l)}function oh(t,e,n,r){return oa(t,"value",e,n,r)}function nD(t,e,n,r){return oa(t,"child_added",e,n,r)}function rD(t,e,n,r){return oa(t,"child_changed",e,n,r)}function sD(t,e,n,r){return oa(t,"child_moved",e,n,r)}function iD(t,e,n,r){return oa(t,"child_removed",e,n,r)}function oD(t,e,n){let r=null;const s=n?new Yf(n):null;e==="value"?r=new ia(s):e&&(r=new Oc(e,s)),sh(t._repo,t,r)}class bn{}class Y_ extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){On("endAt",this._value,e._path,!0);const n=Kd(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function aD(t,e){return ra("endAt","key",e,!0),new Y_(t,e)}class jC extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){On("endBefore",this._value,e._path,!1);const n=YN(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function lD(t,e){return ra("endBefore","key",e,!0),new jC(t,e)}class Q_ extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){On("startAt",this._value,e._path,!0);const n=qd(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function cD(t=null,e){return ra("startAt","key",e,!0),new Q_(t,e)}class LC extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){On("startAfter",this._value,e._path,!1);const n=KN(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function uD(t,e){return ra("startAfter","key",e,!0),new LC(t,e)}class MC extends bn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qt(e._repo,e._path,GN(e._queryParams,this._limit),e._orderByCalled)}}function dD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new MC(t)}class FC extends bn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qt(e._repo,e._path,qN(e._queryParams,this._limit),e._orderByCalled)}}function hD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new FC(t)}class UC extends bn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ac(e,"orderByChild");const n=new ue(this._path);if(X(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Sf(n),s=_c(e._queryParams,r);return Hr(s),new Qt(e._repo,e._path,s,!0)}}function fD(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zf("orderByChild","path",t,!1),new UC(t)}class $C extends bn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Ac(e,"orderByKey");const n=_c(e._queryParams,Pn);return Hr(n),new Qt(e._repo,e._path,n,!0)}}function pD(){return new $C}class VC extends bn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Ac(e,"orderByPriority");const n=_c(e._queryParams,we);return Hr(n),new Qt(e._repo,e._path,n,!0)}}function mD(){return new VC}class BC extends bn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Ac(e,"orderByValue");const n=_c(e._queryParams,bf);return Hr(n),new Qt(e._repo,e._path,n,!0)}}function gD(){return new BC}class WC extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(On("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Y_(this._value,this._key)._apply(new Q_(this._value,this._key)._apply(e))}}function yD(t,e){return ra("equalTo","key",e,!0),new WC(t,e)}function vD(t,...e){let n=z(t);for(const r of e)n=r._apply(n);return n}M1(Sn);B1(Sn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="FIREBASE_DATABASE_EMULATOR_HOST",ah={};let J_=!1;function HC(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=wi(i);t.repoInfo_=new Jv(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function X_(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ih(i,s),l=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[zC]),u?(c=!0,i=`http://${u}?ns=${l.namespace}`,o=ih(i,s),l=o.repoInfo):c=!o.repoInfo.secure;const d=s&&c?new Xs(Xs.OWNER):new JI(t.name,t.options,e);M_("Invalid Firebase Database URL",o),X(o.path)||Dn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=qC(l,t,d,new QI(t,n));return new YC(h,t)}function GC(t,e){const n=ah[e];(!n||n[t.key]!==t)&&Dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),B_(t),delete n[t.key]}function qC(t,e,n,r){let s=ah[e.name];s||(s={},ah[e.name]=s);let i=s[t.toURLString()];return i&&Dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new mC(t,J_,n,r),s[t.toURLString()]=i,i}function KC(t){J_=t}class YC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sn(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(GC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Dn("Cannot call "+e+" on a deleted database.")}}function Z_(){ui.IS_TRANSPORT_INITIALIZED&&gt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _D(){Z_(),_r.forceDisallow()}function wD(){Z_(),en.forceDisallow(),_r.forceAllow()}function QC(t=gc(),e){const n=Es(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=uE("database");r&&JC(n,...r)}return n}function JC(t,e,n,r={}){t=z(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Lr(r,i.repoInfo_.emulatorOptions))return;Dn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Xs(Xs.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:dE(r.mockUserToken,t.app.options.projectId);o=new Xs(l)}wi(e)&&(xv(e),Sv("Database",!0)),HC(i,s,r,o)}function xD(t){t=z(t),t._checkNotDeleted("goOffline"),B_(t._repo)}function SD(t){t=z(t),t._checkNotDeleted("goOnline"),IC(t._repo)}function bD(t,e){Uv(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){jv(xi),An(new Gt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return X_(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),sn(zm,Hm,t),sn(zm,Hm,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={".sv":"timestamp"};function ED(){return ZC}function ID(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function ND(t,e,n){if(t=z(t),Cn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=(n==null?void 0:n.applyLocally)??!0,s=new Vt,i=(l,c,u)=>{let d=null;l?s.reject(l):(d=new ys(u,new Sn(t._repo,t._path),we),s.resolve(new eT(c,d)))},o=oh(t,()=>{});return NC(t._repo,t._path,e,i,o,r),s.promise}on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const CD=function(t){const e=on.prototype.put;return on.prototype.put=function(n,r,s,i){i!==void 0&&(i=t()),e.call(this,n,r,s,i)},function(){on.prototype.put=e}},TD=function(t){KC(t)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:s,nodeAdmin:i=!1}){jv(n);const o=new Cv("database-standalone"),l=new Md("auth-internal",o);let c;return s&&(c=new Md("app-check-internal",o),c.setComponent(new Gt("app-check-internal",()=>s,"PRIVATE"))),l.setComponent(new Gt("auth-internal",()=>r,"PRIVATE")),X_(t,l,c,e,i)}XC();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={PHONE:"phone",TOTP:"totp"},PD={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},AD={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},DD={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},OD={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jD=tT,nT=ew,tw=new Ss("auth","Firebase",ew()),LD={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new mc("@firebase/auth");function rT(t,...e){Hl.logLevel<=pe.WARN&&Hl.warn(`Auth (${xi}): ${t}`,...e)}function Za(t,...e){Hl.logLevel<=pe.ERROR&&Hl.error(`Auth (${xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t,...e){throw Jf(t,...e)}function bt(t,...e){return Jf(t,...e)}function Qf(t,e,n){const r={...nT(),[e]:n};return new Ss("auth","Firebase",r).create(e,{appName:t.name})}function st(t){return Qf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ni(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mt(t,"argument-error"),Qf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tw.create(t,...e)}function D(t,e,...n){if(!t)throw Jf(e,...n)}function Tn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Za(e),new Error(e)}function er(t,e){t||Tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Xf(){return bg()==="http:"||bg()==="https:"}function bg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xf()||uf()||"connection"in navigator)?navigator.onLine:!0}function iT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=cf()||bv()}get(){return sT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lT=new aa(3e4,6e4);function Ie(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ne(t,e,n,r,s={}){return rw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=bs({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return pE()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&wi(t.emulatorConfig.host)&&(u.credentials="include"),nw.fetch()(await sw(t,t.config.apiHost,n,l),u)})}async function rw(t,e,n){t._canInitEmulator=!1;const r={...oT,...e};try{const s=new uT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qi(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qi(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qi(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qi(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qf(t,d,u);Mt(t,d)}}catch(s){if(s instanceof jn)throw s;Mt(t,"network-request-failed",{message:String(s)})}}async function sr(t,e,n,r,s={}){const i=await Ne(t,e,n,r,s);return"mfaPendingCredential"in i&&Mt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function sw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Zf(t.config,s):`${t.config.apiScheme}://${s}`;return aT.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function cT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bt(this.auth,"network-request-failed")),lT.get())})}}function qi(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){return t!==void 0&&t.getResponse!==void 0}function Ig(t){return t!==void 0&&t.enterprise!==void 0}class iw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t){return(await Ne(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ow(t,e){return Ne(t,"GET","/v2/recaptchaConfig",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t,e){return Ne(t,"POST","/v1/accounts:delete",e)}async function fT(t,e){return Ne(t,"POST","/v1/accounts:update",e)}async function Gl(t,e){return Ne(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e=!1){return z(t).getIdToken(e)}async function pT(t,e=!1){const n=z(t),r=await n.getIdToken(e),s=jc(r);D(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:lo(Ou(s.auth_time)),issuedAtTime:lo(Ou(s.iat)),expirationTime:lo(Ou(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ou(t){return Number(t)*1e3}function jc(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Za("JWT malformed, contained fewer than 3 sections"),null;try{const s=kl(n);return s?JSON.parse(s):(Za("Failed to decode base64 JWT payload"),null)}catch(s){return Za("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ng(t){const e=jc(t);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&mT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t){var h;const e=t.auth,n=await t.getIdToken(),r=await tr(t,Gl(e,{idToken:n}));D(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?aw(s.providerUserInfo):[],o=vT(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lh(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function yT(t){const e=z(t);await Vo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t,e){const n=await rw(t,{},async()=>{const r=bs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await sw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&wi(t.emulatorConfig.host)&&(c.credentials="include"),nw.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wT(t,e){return Ne(t,"POST","/v2/accounts:revokeToken",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ng(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){D(e.length!==0,"internal-error");const n=Ng(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await _T(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zs;return r&&(D(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(D(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(D(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){D(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new gT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tr(this,this.stsTokenManager.getToken(this.auth,e));return D(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pT(this,e)}reload(){return yT(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ae(this.auth.app))return Promise.reject(st(this.auth));const e=await this.getIdToken();return await tr(this,hT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:v,stsTokenManager:w}=n;D(h&&w,e,"internal-error");const L=Zs.fromJSON(this.name,w);D(typeof h=="string",e,"internal-error"),lr(r,e.name),lr(s,e.name),D(typeof f=="boolean",e,"internal-error"),D(typeof g=="boolean",e,"internal-error"),lr(i,e.name),lr(o,e.name),lr(l,e.name),lr(c,e.name),lr(u,e.name),lr(d,e.name);const m=new gn({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:L,createdAt:u,lastLoginAt:d});return v&&Array.isArray(v)&&(m.providerData=v.map(p=>({...p}))),c&&(m._redirectEventId=c),m}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zs;s.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vo(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];D(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?aw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Zs;l.updateFromIdToken(r);const c=new gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=new Map;function zn(t){er(t instanceof Function,"Expected a class definition");let e=Cg.get(t);return e?(er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lw.type="NONE";const Tg=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t,e,n){return`firebase:${t}:${e}:${n}`}class ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=el(this.userKey,s.apiKey,i),this.fullPersistenceKey=el("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gl(this.auth,{idToken:e}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ei(zn(Tg),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||zn(Tg);const o=el(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await Gl(e,{idToken:d}).catch(()=>{});if(!f)break;h=await gn._fromGetAccountInfoResponse(e,f,d)}else h=gn._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ei(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cw(t=Et()){return/firefox\//i.test(t)}function uw(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(t=Et()){return/crios\//i.test(t)}function hw(t=Et()){return/iemobile/i.test(t)}function fw(t=Et()){return/android/i.test(t)}function pw(t=Et()){return/blackberry/i.test(t)}function mw(t=Et()){return/webos/i.test(t)}function ep(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xT(t=Et()){var e;return ep(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ST(){return mE()&&document.documentMode===10}function gw(t=Et()){return ep(t)||fw(t)||mw(t)||pw(t)||/windows phone/i.test(t)||hw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e=[]){let n;switch(t){case"Browser":n=kg(Et());break;case"Worker":n=`${kg(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t,e={}){return Ne(t,"GET","/v2/passwordPolicy",Ie(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=6;class NT{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rg(this),this.idTokenSubscription=new Rg(this),this.beforeStateQueue=new bT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ei.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gl(this,{idToken:e}),r=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ae(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ae(this.app))return Promise.reject(st(this));const n=e?z(e):null;return n&&D(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ae(this.app)?Promise.reject(st(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ae(this.app)?Promise.reject(st(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ET(this),n=new NT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ss("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;D(n,this,"argument-error"),this.redirectPersistenceManager=await ei.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ae(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&rT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ue(t){return z(t)}class Rg{constructor(e){this.auth=e,this.observer=null,this.addObserver=SE(n=>this.observer=n)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TT(t){la=t}function tp(t){return la.loadJS(t)}function kT(){return la.recaptchaV2Script}function RT(){return la.recaptchaEnterpriseScript}function PT(){return la.gapiScript}function vw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=500,DT=6e4,La=1e12;class OT{constructor(e){this.auth=e,this.counter=La,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new MT(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||La;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||La;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||La;return(r=this._widgets.get(n))==null||r.execute(),""}}class jT{constructor(){this.enterprise=new LT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MT{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;D(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=FT(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},DT)},AT))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function FT(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const UT="recaptcha-enterprise",co="NO_RECAPTCHA";class _w{constructor(e){this.type=UT,this.auth=Ue(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{ow(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new iw(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Ig(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(co)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jT().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Ig(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=RT();c.length!==0&&(c+=l),tp(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function $i(t,e,n,r=!1,s=!1){const i=new _w(t);let o;if(s)o=co;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Dr(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await $i(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await $i(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(s==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await $i(t,e,n);return r(t,l).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await $i(t,e,n,!1,!0);return r(t,d)}return Promise.reject(c)})}else{const l=await $i(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(s+" provider is not supported.")}async function ww(t){const e=Ue(t),n=await ow(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new iw(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new _w(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e){const n=Es(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Lr(i,e??{}))return s;Mt(s,"already-initialized")}return n.initialize({options:e})}function VT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BT(t,e,n){const r=Ue(t);D(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=xw(e),{host:o,port:l}=WT(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){D(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),D(Lr(u,r.config.emulator)&&Lr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,wi(o)?(xv(`${i}//${o}${c}`),Sv("Auth",!0)):s||zT()}function xw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WT(t){const e=xw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Pg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Pg(o)}}}function Pg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,n){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(t,e){return Ne(t,"POST","/v1/accounts:resetPassword",Ie(t,e))}async function HT(t,e){return Ne(t,"POST","/v1/accounts:update",e)}async function GT(t,e){return Ne(t,"POST","/v1/accounts:signUp",e)}async function qT(t,e){return Ne(t,"POST","/v1/accounts:update",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(t,e){return sr(t,"POST","/v1/accounts:signInWithPassword",Ie(t,e))}async function Lc(t,e){return Ne(t,"POST","/v1/accounts:sendOobCode",Ie(t,e))}async function YT(t,e){return Lc(t,e)}async function QT(t,e){return Lc(t,e)}async function JT(t,e){return Lc(t,e)}async function XT(t,e){return Lc(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e){return sr(t,"POST","/v1/accounts:signInWithEmailLink",Ie(t,e))}async function ek(t,e){return sr(t,"POST","/v1/accounts:signInWithEmailLink",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends ca{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dr(e,n,"signInWithPassword",KT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZT(e,{email:this._email,oobCode:this._password});default:Mt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dr(e,r,"signUpPassword",GT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ek(e,{idToken:n,email:this._email,oobCode:this._password});default:Mt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qn(t,e){return sr(t,"POST","/v1/accounts:signInWithIdp",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="http://localhost";class nr extends ca{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new nr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qn(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qn(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qn(e,n)}buildRequest(){const e={requestUri:tk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ag(t,e){return Ne(t,"POST","/v1/accounts:sendVerificationCode",Ie(t,e))}async function nk(t,e){return sr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ie(t,e))}async function rk(t,e){const n=await sr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ie(t,e));if(n.temporaryProof)throw qi(t,"account-exists-with-different-credential",n);return n}const sk={USER_NOT_FOUND:"user-not-found"};async function ik(t,e){const n={...e,operation:"REAUTH"};return sr(t,"POST","/v1/accounts:signInWithPhoneNumber",Ie(t,n),sk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends ca{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new as({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new as({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return nk(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return rk(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return ik(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new as({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ak(t){const e=Hi(Gi(t)).link,n=e?Hi(Gi(e)).deep_link_id:null,r=Hi(Gi(t)).deep_link_id;return(r?Hi(Gi(r)).link:null)||r||n||e||t}class ua{constructor(e){const n=Hi(Gi(e)),r=n.apiKey??null,s=n.oobCode??null,i=ok(n.mode??null);D(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ak(e);try{return new ua(n)}catch{return null}}}function FD(t){return ua.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.providerId=Ts.PROVIDER_ID}static credential(e,n){return Bo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ua.parseLink(n);return D(r,"argument-error"),Bo._fromEmailAndCode(e,r.code,r.tenantId)}}Ts.PROVIDER_ID="password";Ts.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ts.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tl extends Ci{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return D("providerId"in n&&"signInMethod"in n,"argument-error"),nr._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return D(e.idToken||e.accessToken,"argument-error"),nr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return tl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:l}=e;if(!r&&!s&&!n&&!i||!l)return null;try{return new tl(l)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Ci{constructor(){super("facebook.com")}static credential(e){return nr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Ci{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nr._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ci{constructor(){super("github.com")}static credential(e){return nr._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="http://localhost";class Wo extends ca{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return qn(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qn(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qn(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new Wo(r,i)}static _create(e,n){return new Wo(e,n)}buildRequest(){return{requestUri:lk,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="saml.";class ch extends ir{constructor(e){D(e.startsWith(ck),"argument-error"),super(e)}static credentialFromResult(e){return ch.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ch.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Wo.fromJSON(e);return D(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Wo._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Ci{constructor(){super("twitter.com")}static credential(e,n){return nr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(t,e){return sr(t,"POST","/v1/accounts:signUp",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await gn._fromIdTokenResponse(e,r,s),o=Dg(r);return new cn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Dg(r);return new cn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Dg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t){var s;if(Ae(t.app))return Promise.reject(st(t));const e=Ue(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new cn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await bw(e,{returnSecureToken:!0}),r=await cn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends jn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ql.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ql(e,n,r,s)}}function Ew(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e){const n=z(t);await Mc(!0,n,e);const{providerUserInfo:r}=await fT(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=Iw(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function np(t,e,n=!1){const r=await tr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cn._forOperation(t,"link",r)}async function Mc(t,e,n){await Vo(e);const r=Iw(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";D(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nw(t,e,n=!1){const{auth:r}=t;if(Ae(r.app))return Promise.reject(st(r));const s="reauthenticate";try{const i=await tr(t,Ew(r,s,e,t),n);D(i.idToken,r,"internal-error");const o=jc(i.idToken);D(o,r,"internal-error");const{sub:l}=o;return D(t.uid===l,r,"user-mismatch"),cn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(t,e,n=!1){if(Ae(t.app))return Promise.reject(st(t));const r="signIn",s=await Ew(t,r,e),i=await cn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function rp(t,e){return Cw(Ue(t),e)}async function uk(t,e){const n=z(t);return await Mc(!1,n,e.providerId),np(n,e)}async function dk(t,e){return Nw(z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return sr(t,"POST","/v1/accounts:signInWithCustomToken",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e){if(Ae(t.app))return Promise.reject(st(t));const n=Ue(t),r=await hk(n,{token:e,returnSecureToken:!0}),s=await cn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?sp._fromServerResponse(e,n):"totpInfo"in n?ip._fromServerResponse(e,n):Mt(e,"internal-error")}}class sp extends da{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new sp(n)}}class ip extends da{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new ip(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){var r;D(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),D(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),D(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(D(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(D(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(t){const e=Ue(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fk(t,e,n){const r=Ue(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Fc(r,s,n),await Dr(r,s,"getOobCode",QT,"EMAIL_PASSWORD_PROVIDER")}async function BD(t,e,n){await Sw(z(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&op(t),r})}async function WD(t,e){await qT(z(t),{oobCode:e})}async function pk(t,e){const n=z(t),r=await Sw(n,{oobCode:e}),s=r.requestType;switch(D(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":D(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":D(r.mfaInfo,n,"internal-error");default:D(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=da._fromServerResponse(Ue(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function zD(t,e){const{data:n}=await pk(z(t),e);return n.email}async function mk(t,e,n){if(Ae(t.app))return Promise.reject(st(t));const r=Ue(t),o=await Dr(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bw,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&op(t),c}),l=await cn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function gk(t,e,n){return Ae(t.app)?Promise.reject(st(t)):rp(z(t),Ts.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&op(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e,n){const r=Ue(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,l){D(l.handleCodeInApp,r,"argument-error"),l&&Fc(r,o,l)}i(s,n),await Dr(r,s,"getOobCode",JT,"EMAIL_PASSWORD_PROVIDER")}function GD(t,e){const n=ua.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function qD(t,e,n){if(Ae(t.app))return Promise.reject(st(t));const r=z(t),s=Ts.credentialWithLink(e,n||$o());return D(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),rp(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){return Ne(t,"POST","/v1/accounts:createAuthUri",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e){const n=Xf()?$o():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await yk(z(t),r);return s||[]}async function vk(t,e){const n=z(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Fc(n.auth,s,e);const{email:i}=await YT(n.auth,s);i!==t.email&&await t.reload()}async function YD(t,e,n){const r=z(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Fc(r.auth,i,n);const{email:o}=await XT(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e){return Ne(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=z(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await tr(r,_k(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function JD(t,e){const n=z(t);return Ae(n.auth.app)?Promise.reject(st(n.auth)):Tw(n,e,null)}function XD(t,e){return Tw(z(t),null,e)}async function Tw(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await tr(t,HT(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){var s,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(i=(s=jc(t.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(o){const l=o!=="anonymous"&&o!=="custom"?o:null;return new ti(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new xk(r,n);case"github.com":return new Sk(r,n);case"google.com":return new bk(r,n);case"twitter.com":return new Ek(r,n,t.screenName||null);case"custom":case"anonymous":return new ti(r,null);default:return new ti(r,e,n)}}class ti{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class kw extends ti{constructor(e,n,r,s){super(e,n,r),this.username=s}}class xk extends ti{constructor(e,n){super(e,"facebook.com",n)}}class Sk extends kw{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class bk extends ti{constructor(e,n){super(e,"google.com",n)}}class Ek extends kw{constructor(e,n,r){super(e,"twitter.com",n,r)}}function ZD(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:wk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){return z(t).setPersistence(e)}function e2(t){return ww(t)}async function t2(t,e){return Ue(t).validatePassword(e)}function Nk(t,e,n,r){return z(t).onIdTokenChanged(e,n,r)}function Ck(t,e,n){return z(t).beforeAuthStateChanged(e,n)}function n2(t,e,n,r){return z(t).onAuthStateChanged(e,n,r)}function r2(t){z(t).useDeviceLanguage()}function s2(t,e){return z(t).updateCurrentUser(e)}function i2(t){return z(t).signOut()}function o2(t,e){return Ue(t).revokeAccessToken(e)}async function a2(t){return z(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ts("enroll",e,n)}static _fromMfaPendingCredential(e){return new ts("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return ts._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return ts._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ue(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(l=>da._fromServerResponse(r,l));D(s.mfaPendingCredential,r,"internal-error");const o=ts._fromMfaPendingCredential(s.mfaPendingCredential);return new ap(o,i,async l=>{const c=await l._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const u={...s,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const d=await cn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return D(n.user,r,"internal-error"),cn._forOperation(n.user,n.operationType,u);default:Mt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function l2(t,e){var s;const n=z(t),r=e;return D(e.customData.operationType,n,"argument-error"),D((s=r.customData._serverResponse)==null?void 0:s.mfaPendingCredential,n,"argument-error"),ap._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e){return Ne(t,"POST","/v2/accounts/mfaEnrollment:start",Ie(t,e))}function Tk(t,e){return Ne(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(t,e))}function kk(t,e){return Ne(t,"POST","/v2/accounts/mfaEnrollment:start",Ie(t,e))}function Rk(t,e){return Ne(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(t,e))}function Pk(t,e){return Ne(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(t,e))}class lp{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>da._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new lp(e)}async getSession(){return ts._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),i=await tr(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await tr(this.user,Pk(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const ju=new WeakMap;function c2(t){const e=z(t);return ju.has(e)||ju.set(e,lp._fromUser(e)),ju.get(e)}const Kl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=1e3,Dk=10;class Pw extends Rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);ST()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Dk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ak)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pw.type="LOCAL";const Aw=Pw;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=1e3;function Lu(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Mu(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class Dw{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Mu(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return Lu(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Mu(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Mu(e);if(window.cookieStore){const l=u=>{const d=u.changed.find(f=>f.name===r);d&&n(d.value),u.deleted.find(f=>f.name===r)&&n(null)},c=()=>window.cookieStore.removeEventListener("change",l);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",l)}let s=Lu(r);const i=setInterval(()=>{const l=Lu(r);l!==s&&(n(l),s=l)},Ok),o=()=>clearInterval(i);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}Dw.type="COOKIE";const u2=Dw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ow.type="SESSION";const jw=Ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Uc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await jk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=$c("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return window}function Mk(t){Be().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){return typeof Be().WorkerGlobalScope<"u"&&typeof Be().importScripts=="function"}async function Fk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Uk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function $k(){return cp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebaseLocalStorageDb",Vk=1,Yl="firebaseLocalStorage",Mw="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vc(t,e){return t.transaction([Yl],e?"readwrite":"readonly").objectStore(Yl)}function Bk(){const t=indexedDB.deleteDatabase(Lw);return new ha(t).toPromise()}function uh(){const t=indexedDB.open(Lw,Vk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yl,{keyPath:Mw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yl)?e(r):(r.close(),await Bk(),e(await uh()))})})}async function jg(t,e,n){const r=Vc(t,!0).put({[Mw]:e,value:n});return new ha(r).toPromise()}async function Wk(t,e){const n=Vc(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function Lg(t,e){const n=Vc(t,!0).delete(e);return new ha(n).toPromise()}const zk=800,Hk=3;class Fw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Hk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uc._getInstance($k()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Fk(),!this.activeServiceWorker)return;this.sender=new Lk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Uk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uh();return await jg(e,Kl,"1"),await Lg(e,Kl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Wk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Vc(s,!1).getAll();return new ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fw.type="LOCAL";const Gk=Fw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){return Ne(t,"POST","/v2/accounts/mfaSignIn:start",Ie(t,e))}function qk(t,e){return Ne(t,"POST","/v2/accounts/mfaSignIn:finalize",Ie(t,e))}function Kk(t,e){return Ne(t,"POST","/v2/accounts/mfaSignIn:finalize",Ie(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=vw("rcb"),Yk=new aa(3e4,6e4);class Qk{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Be().grecaptcha)!=null&&e.render)}load(e,n=""){return D(Jk(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Eg(Be().grecaptcha)?Promise.resolve(Be().grecaptcha):new Promise((r,s)=>{const i=Be().setTimeout(()=>{s(bt(e,"network-request-failed"))},Yk.get());Be()[Fu]=()=>{Be().clearTimeout(i),delete Be()[Fu];const l=Be().grecaptcha;if(!l||!Eg(l)){s(bt(e,"internal-error"));return}const c=l.render;l.render=(u,d)=>{const h=c(u,d);return this.counter++,h},this.hostLanguage=n,r(l)};const o=`${kT()}?${bs({onload:Fu,render:"explicit",hl:n})}`;tp(o).catch(()=>{clearTimeout(i),s(bt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Be().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Jk(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Xk{async load(e){return new OT(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="recaptcha",Zk={theme:"light",type:"image"};class d2{constructor(e,n,r={...Zk}){this.parameters=r,this.type=uo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ue(e),this.isInvisible=this.parameters.size==="invisible",D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;D(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xk:new Qk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){D(!this.parameters.sitekey,this.auth,"argument-error"),D(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Be()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){D(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){D(Xf()&&!cp(),this.auth,"internal-error"),await eR(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await dT(this.auth);D(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return D(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function eR(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=as._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function h2(t,e,n){if(Ae(t.app))return Promise.reject(st(t));const r=Ue(t),s=await Bc(r,e,z(n));return new up(s,i=>rp(r,i))}async function f2(t,e,n){const r=z(t);await Mc(!1,r,"phone");const s=await Bc(r.auth,e,z(n));return new up(s,i=>uk(r,i))}async function p2(t,e,n){const r=z(t);if(Ae(r.auth.app))return Promise.reject(st(r.auth));const s=await Bc(r.auth,e,z(n));return new up(s,i=>dk(r,i))}async function Bc(t,e,n){var r;if(!t._getRecaptchaConfig())try{await ww(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){D(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Dr(t,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===co){D((n==null?void 0:n.type)===uo,d,"argument-error");const f=await Uu(d,h,n);return Og(d,f)}return Og(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{D(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)==null?void 0:r.uid)||s.multiFactorUid;D(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Dr(t,l,"mfaSmsSignIn",async(h,f)=>{if(f.phoneSignInInfo.captchaResponse===co){D((n==null?void 0:n.type)===uo,h,"argument-error");const g=await Uu(h,f,n);return Mg(h,g)}return Mg(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Dr(t,i,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===co){D((n==null?void 0:n.type)===uo,u,"argument-error");const h=await Uu(u,d,n);return Ag(u,h)}return Ag(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function m2(t,e){const n=z(t);if(Ae(n.auth.app))return Promise.reject(st(n.auth));await np(n,e)}async function Uu(t,e,n){D(n.type===uo,t,"argument-error");const r=await n.verify();D(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,l=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:l,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,l=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:l}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.providerId=ni.PROVIDER_ID,this.auth=Ue(e)}verifyPhoneNumber(e,n){return Bc(this.auth,e,z(n))}static credential(e,n){return as._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ni.credentialFromTaggedObject(n)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?as._fromTokenResponse(n,r):null}}ni.PROVIDER_ID="phone";ni.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,e){return e?zn(e):(D(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends ca{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qn(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tR(t){return Cw(t.auth,new dp(t),t.bypassAuthState)}function nR(t){const{auth:e,user:n}=t;return D(n,e,"internal-error"),Nw(n,new dp(t),t.bypassAuthState)}async function rR(t){const{auth:e,user:n}=t;return D(n,e,"internal-error"),np(n,new dp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tR;case"linkViaPopup":case"linkViaRedirect":return rR;case"reauthViaPopup":case"reauthViaRedirect":return nR;default:Mt(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new aa(2e3,1e4);async function iR(t,e,n){if(Ae(t.app))return Promise.reject(bt(t,"operation-not-supported-in-this-environment"));const r=Ue(t);Ni(t,e,ir);const s=ks(r,n);return new Hn(r,"signInViaPopup",e,s).executeNotNull()}async function g2(t,e,n){const r=z(t);if(Ae(r.auth.app))return Promise.reject(bt(r.auth,"operation-not-supported-in-this-environment"));Ni(r.auth,e,ir);const s=ks(r.auth,n);return new Hn(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function y2(t,e,n){const r=z(t);Ni(r.auth,e,ir);const s=ks(r.auth,n);return new Hn(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Hn extends Uw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hn.currentPopupAction&&Hn.currentPopupAction.cancel(),Hn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return D(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=$c();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sR.get())};e()}}Hn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="pendingRedirect",nl=new Map;class aR extends Uw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nl.get(this.auth._key());if(!e){try{const r=await lR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lR(t,e){const n=Vw(e),r=$w(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function hp(t,e){return $w(t)._set(Vw(e),"true")}function cR(t,e){nl.set(t._key(),e)}function $w(t){return zn(t._redirectPersistence)}function Vw(t){return el(oR,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e,n){return uR(t,e,n)}async function uR(t,e,n){if(Ae(t.app))return Promise.reject(st(t));const r=Ue(t);Ni(t,e,ir),await r._initializationPromise;const s=ks(r,n);return await hp(s,r),s._openRedirect(r,e,"signInViaRedirect")}function _2(t,e,n){return dR(t,e,n)}async function dR(t,e,n){const r=z(t);if(Ni(r.auth,e,ir),Ae(r.auth.app))return Promise.reject(st(r.auth));await r.auth._initializationPromise;const s=ks(r.auth,n);await hp(s,r.auth);const i=await Ww(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function w2(t,e,n){return hR(t,e,n)}async function hR(t,e,n){const r=z(t);Ni(r.auth,e,ir),await r.auth._initializationPromise;const s=ks(r.auth,n);await Mc(!1,r,e.providerId),await hp(s,r.auth);const i=await Ww(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function x2(t,e){return await Ue(t)._initializationPromise,Bw(t,e,!1)}async function Bw(t,e,n=!1){if(Ae(t.app))return Promise.reject(st(t));const r=Ue(t),s=ks(r,e),o=await new aR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Ww(t){const e=$c(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=10*60*1e3;class pR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zw(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(bt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fg(e))}saveEventToCache(e){this.cachedEventUids.add(Fg(e)),this.lastProcessedEventTime=Date.now()}}function Fg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t,e={}){return Ne(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vR=/^https?/;async function _R(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gR(t);for(const n of e)try{if(wR(n))return}catch{}Mt(t,"unauthorized-domain")}function wR(t){const e=$o(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vR.test(n))return!1;if(yR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new aa(3e4,6e4);function Ug(){const t=Be().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SR(t){return new Promise((e,n)=>{var s,i,o;function r(){Ug(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ug(),n(bt(t,"network-request-failed"))},timeout:xR.get()})}if((i=(s=Be().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Be().gapi)!=null&&o.load)r();else{const l=vw("iframefcb");return Be()[l]=()=>{gapi.load?r():n(bt(t,"network-request-failed"))},tp(`${PT()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw rl=null,e})}let rl=null;function bR(t){return rl=rl||SR(t),rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new aa(5e3,15e3),IR="__/auth/iframe",NR="emulator/auth/iframe",CR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kR(t){const e=t.config;D(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zf(e,NR):`https://${t.config.authDomain}/${IR}`,r={apiKey:e.apiKey,appName:t.name,v:xi},s=TR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${bs(r).slice(1)}`}async function RR(t){const e=await bR(t),n=Be().gapi;return D(n,t,"internal-error"),e.open({where:document.body,url:kR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=bt(t,"network-request-failed"),l=Be().setTimeout(()=>{i(o)},ER.get());function c(){Be().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AR=500,DR=600,OR="_blank",jR="http://localhost";class $g{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LR(t,e,n,r=AR,s=DR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...PR,width:r.toString(),height:s.toString(),top:i,left:o},u=Et().toLowerCase();n&&(l=dw(u)?OR:n),cw(u)&&(e=e||jR,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(xT(u)&&l!=="_self")return MR(e||"",l),new $g(null);const h=window.open(e||"",l,d);D(h,t,"popup-blocked");try{h.focus()}catch{}return new $g(h)}function MR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="__/auth/handler",UR="emulator/auth/handler",$R=encodeURIComponent("fac");async function Vg(t,e,n,r,s,i){D(t.config.authDomain,t,"auth-domain-config-required"),D(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:s};if(e instanceof ir){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof Ci){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${$R}=${encodeURIComponent(c)}`:"";return`${VR(t)}?${bs(l).slice(1)}${u}`}function VR({config:t}){return t.emulator?Zf(t,UR):`https://${t.authDomain}/${FR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="webStorageSupport";class BR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jw,this._completeRedirectFn=Bw,this._overrideRedirectResult=cR}async _openPopup(e,n,r,s){var o;er((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Vg(e,n,r,$o(),s);return LR(e,i,$c())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Vg(e,n,r,$o(),s);return Mk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(er(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await RR(e),r=new pR(e);return n.register("authEvent",s=>(D(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($u,{type:$u},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[$u];i!==void 0&&n(!!i),Mt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_R(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gw()||uw()||ep()}}const WR=BR;class Hw{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Tn("unexpected MultiFactorSessionType")}}}class fp extends Hw{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new fp(e)}_finalizeEnroll(e,n,r){return Tk(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return qk(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class zR{constructor(){}static assertion(e){return fp._fromCredential(e)}}zR.FACTOR_ID="phone";class HR{static assertionForEnrollment(e,n){return zo._fromSecret(e,n)}static assertionForSignIn(e,n){return zo._fromEnrollmentId(e,n)}static async generateSecret(e){var s;const n=e;D(typeof((s=n.user)==null?void 0:s.auth)<"u","internal-error");const r=await kk(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return pp._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}HR.FACTOR_ID="totp";class zo extends Hw{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new zo(n,void 0,e)}static _fromEnrollmentId(e,n){return new zo(n,e)}async _finalizeEnroll(e,n,r){return D(typeof this.secret<"u",e,"argument-error"),Rk(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){D(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return Kk(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class pp{constructor(e,n,r,s,i,o,l){this.sessionInfo=o,this.auth=l,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,n){return new pp(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var s;let r=!1;return(Ma(e)||Ma(n))&&(r=!0),r&&(Ma(e)&&(e=((s=this.auth.currentUser)==null?void 0:s.email)||"unknownuser"),Ma(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Ma(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var Bg="@firebase/auth",Wg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KR(t){An(new Gt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;D(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(t)},u=new CT(r,s,i,c);return VT(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),An(new Gt("auth-internal",e=>{const n=Ue(e.getProvider("auth").getImmediate());return(r=>new GR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(Bg,Wg,qR(t)),sn(Bg,Wg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=5*60,QR=wv("authIdTokenMaxAge")||YR;let zg=null;const JR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QR)return;const s=n==null?void 0:n.token;zg!==s&&(zg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XR(t=gc()){const e=Es(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$T(t,{popupRedirectResolver:WR,persistence:[Gk,Aw,jw]}),r=wv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=JR(i.toString());Ck(n,o,()=>o(n.currentUser)),Nk(n,l=>o(l))}}const s=vv("auth");return s&&BT(n,`http://${s}`),n}function ZR(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}TT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=bt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ZR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KR("Browser");const Gw="@firebase/installations",mp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=1e4,Kw=`w:${mp}`,Yw="FIS_v2",eP="https://firebaseinstallations.googleapis.com/v1",tP=60*60*1e3,nP="installations",rP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vs=new Ss(nP,rP,sP);function Qw(t){return t instanceof jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw({projectId:t}){return`${eP}/projects/${t}/installations`}function Xw(t){return{token:t.token,requestStatus:2,expiresIn:oP(t.expiresIn),creationTime:Date.now()}}async function Zw(t,e){const r=(await e.json()).error;return vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ex({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function iP(t,{refreshToken:e}){const n=ex(t);return n.append("Authorization",aP(e)),n}async function tx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function oP(t){return Number(t.replace("s","000"))}function aP(t){return`${Yw} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Jw(t),s=ex(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:Yw,appId:t.appId,sdkVersion:Kw},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await tx(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Xw(u.authToken)}}else throw await Zw("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=/^[cdef][\w-]{21}$/,dh="";function dP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=hP(t);return uP.test(n)?n:dh}catch{return dh}}function hP(t){return cP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;function sx(t,e){const n=Wc(t);ix(n,e),fP(n,e)}function ix(t,e){const n=rx.get(t);if(n)for(const r of n)r(e)}function fP(t,e){const n=pP();n&&n.postMessage({key:t,fid:e}),mP()}let ns=null;function pP(){return!ns&&"BroadcastChannel"in self&&(ns=new BroadcastChannel("[Firebase] FID Change"),ns.onmessage=t=>{ix(t.data.key,t.data.fid)}),ns}function mP(){rx.size===0&&ns&&(ns.close(),ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firebase-installations-database",yP=1,_s="firebase-installations-store";let Vu=null;function gp(){return Vu||(Vu=Rv(gP,yP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_s)}}})),Vu}async function Ql(t,e){const n=Wc(t),s=(await gp()).transaction(_s,"readwrite"),i=s.objectStore(_s),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&sx(t,e.fid),e}async function ox(t){const e=Wc(t),r=(await gp()).transaction(_s,"readwrite");await r.objectStore(_s).delete(e),await r.done}async function zc(t,e){const n=Wc(t),s=(await gp()).transaction(_s,"readwrite"),i=s.objectStore(_s),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&sx(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(t){let e;const n=await zc(t.appConfig,r=>{const s=vP(r),i=_P(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===dh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function vP(t){const e=t||{fid:dP(),registrationStatus:0};return ax(e)}function _P(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=wP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xP(t)}:{installationEntry:e}}async function wP(t,e){try{const n=await lP(t,e);return Ql(t.appConfig,n)}catch(n){throw Qw(n)&&n.customData.serverCode===409?await ox(t.appConfig):await Ql(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function xP(t){let e=await Hg(t.appConfig);for(;e.registrationStatus===1;)await nx(100),e=await Hg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await yp(t);return r||n}return e}function Hg(t){return zc(t,e=>{if(!e)throw vs.create("installation-not-found");return ax(e)})}function ax(t){return SP(t)?{fid:t.fid,registrationStatus:0}:t}function SP(t){return t.registrationStatus===1&&t.registrationTime+qw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP({appConfig:t,heartbeatServiceProvider:e},n){const r=EP(t,n),s=iP(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:Kw,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await tx(()=>fetch(r,l));if(c.ok){const u=await c.json();return Xw(u)}else throw await Zw("Generate Auth Token",c)}function EP(t,{fid:e}){return`${Jw(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(t,e=!1){let n;const r=await zc(t.appConfig,i=>{if(!lx(i))throw vs.create("not-registered");const o=i.authToken;if(!e&&CP(o))return i;if(o.requestStatus===1)return n=IP(t,e),i;{if(!navigator.onLine)throw vs.create("app-offline");const l=kP(i);return n=NP(t,l),l}});return n?await n:r.authToken}async function IP(t,e){let n=await Gg(t.appConfig);for(;n.authToken.requestStatus===1;)await nx(100),n=await Gg(t.appConfig);const r=n.authToken;return r.requestStatus===0?vp(t,e):r}function Gg(t){return zc(t,e=>{if(!lx(e))throw vs.create("not-registered");const n=e.authToken;return RP(n)?{...e,authToken:{requestStatus:0}}:e})}async function NP(t,e){try{const n=await bP(t,e),r={...e,authToken:n};return await Ql(t.appConfig,r),n}catch(n){if(Qw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ox(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ql(t.appConfig,r)}throw n}}function lx(t){return t!==void 0&&t.registrationStatus===2}function CP(t){return t.requestStatus===2&&!TP(t)}function TP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+tP}function kP(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function RP(t){return t.requestStatus===1&&t.requestTime+qw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(t){const e=t,{installationEntry:n,registrationPromise:r}=await yp(e);return r?r.catch(console.error):vp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(t,e=!1){const n=t;return await DP(n),(await vp(n,e)).token}async function DP(t){const{registrationPromise:e}=await yp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){if(!t||!t.options)throw Bu("App Configuration");if(!t.name)throw Bu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Bu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bu(t){return vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="installations",jP="installations-internal",LP=t=>{const e=t.getProvider("app").getImmediate(),n=OP(e),r=Es(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},MP=t=>{const e=t.getProvider("app").getImmediate(),n=Es(e,cx).getImmediate();return{getId:()=>PP(n),getToken:s=>AP(n,s)}};function FP(){An(new Gt(cx,LP,"PUBLIC")),An(new Gt(jP,MP,"PRIVATE"))}FP();sn(Gw,mp);sn(Gw,mp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl="analytics",UP="firebase_id",$P="origin",VP=60*1e3,BP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_p="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=new mc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zt=new Ss("analytics","Analytics",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){if(!t.startsWith(_p)){const e=zt.create("invalid-gtag-resource",{gtagURL:t});return Lt.warn(e.message),""}return t}function ux(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function HP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function GP(t,e){const n=HP("firebase-js-sdk-policy",{createScriptURL:zP}),r=document.createElement("script"),s=`${_p}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function qP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function KP(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await ux(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){Lt.error(l)}t("config",s,i)}async function YP(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await ux(n);for(const c of o){const u=l.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Lt.error(i)}}function QP(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await YP(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await KP(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Lt.error(l)}}return s}function JP(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=QP(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function XP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(_p)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=30,eA=1e3;class tA{constructor(e={},n=eA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dx=new tA;function nA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function rA(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:nA(n)},s=BP.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw zt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function sA(t,e=dx,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw zt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw zt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new aA;return setTimeout(async()=>{l.abort()},n!==void 0?n:VP),hx({appId:r,apiKey:s,measurementId:i},o,l,e)}async function hx(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=dx){var l;const{appId:i,measurementId:o}=t;try{await iA(r,e)}catch(c){if(o)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await rA(t);return s.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!oA(u)){if(s.deleteThrottleMetadata(i),o)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw c}const d=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?jm(n,s.intervalMillis,ZP):jm(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(i,h),Lt.debug(`Calling attemptFetch again in ${d} millis`),hx(t,h,r,s)}}function iA(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function oA(t){if(!(t instanceof jn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class aA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function lA(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(){if(df())try{await hf()}catch(t){return Lt.warn(zt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Lt.warn(zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uA(t,e,n,r,s,i,o){const l=sA(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Lt.error(f)),e.push(l);const c=cA().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,c]);XP(i)||GP(i,u.measurementId),s("js",new Date);const h=(o==null?void 0:o.config)??{};return h[$P]="firebase",h.update=!0,d!=null&&(h[UP]=d),s("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.app=e}_delete(){return delete ho[this.app.options.appId],Promise.resolve()}}let ho={},qg=[];const Kg={};let Wu="dataLayer",hA="gtag",Yg,fx,Qg=!1;function fA(){const t=[];if(uf()&&t.push("This is a browser extension environment."),Iv()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=zt.create("invalid-analytics-context",{errorInfo:e});Lt.warn(n.message)}}function pA(t,e,n){fA();const r=t.options.appId;if(!r)throw zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zt.create("no-api-key");if(ho[r]!=null)throw zt.create("already-exists",{id:r});if(!Qg){qP(Wu);const{wrappedGtag:i,gtagCore:o}=JP(ho,qg,Kg,Wu,hA);fx=i,Yg=o,Qg=!0}return ho[r]=uA(t,qg,Kg,e,Yg,Wu,n),new dA(t)}function mA(t=gc()){t=z(t);const e=Es(t,Jl);return e.isInitialized()?e.getImmediate():gA(t)}function gA(t,e={}){const n=Es(t,Jl);if(n.isInitialized()){const s=n.getImmediate();if(Lr(e,n.getOptions()))return s;throw zt.create("already-initialized")}return n.initialize({options:e})}async function yA(){if(uf()||!Iv()||!df())return!1;try{return await hf()}catch{return!1}}function vA(t,e,n,r){t=z(t),lA(fx,ho[t.app.options.appId],e,n,r).catch(s=>Lt.error(s))}const Jg="@firebase/analytics",Xg="0.10.18";function _A(){An(new Gt(Jl,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return pA(r,s,n)},"PUBLIC")),An(new Gt("analytics-internal",t,"PRIVATE")),sn(Jg,Xg),sn(Jg,Xg,"esm2020");function t(e){try{const n=e.getProvider(Jl).getImmediate();return{logEvent:(r,s,i)=>vA(n,r,s,i)}}catch(n){throw zt.create("interop-component-reg-failed",{reason:n})}}}_A();const px={apiKey:"AIzaSyAdJ3lRxhgZWhnqH8SNQsT1bTFB8E0-cDg",authDomain:"quitarena-a97de.firebaseapp.com",databaseURL:"https://quitarena-a97de-default-rtdb.europe-west1.firebasedatabase.app",projectId:"quitarena-a97de",storageBucket:"quitarena-a97de.firebasestorage.app",messagingSenderId:"693525963288",appId:"1:693525963288:web:a175e9a8bd56fffb35596d",measurementId:"G-H2CCRXYY74"},wp=II().length?gc():Pv(px),V=QC(wp,px.databaseURL),rs=XR(wp);Ik(rs,Aw).then(()=>{console.log("Firebase Auth persistence configured for 30 days")}).catch(t=>{console.error("Error setting auth persistence:",t)});let wA=null;(async()=>{try{await yA()&&(wA=mA(wp))}catch(t){console.debug("Analytics not initialized:",t==null?void 0:t.message)}})();class xp{constructor(e,n){this.db=e,this.userUID=n,this.userRef=Q(e,`users/${n}`),this.statsRef=Q(e,`users/${n}/stats`),this.profileRef=Q(e,`users/${n}/profile`),this.behaviorLogRef=Q(e,`users/${n}/behaviorLog`)}async updateStat(e,n,r=""){try{const s=await Me(this.statsRef);if(!s.exists())return!1;const i=s.val(),o=i[e]||0,l=Math.max(0,Math.min(100,o+n));return await Ze(this.statsRef,{...i,[e]:l}),await this.logBehavior(e,n,r),this.showStatNotification(e,n,r),console.log(`${e}: ${n>0?"+":""}${n} (${r})`),!0}catch(s){return console.error(`Error updating ${e}:`,s),!1}}async updateAddictionFromCleanTime(){try{const e=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`)),n=await Me(this.userRef);if(!n.exists())return;const r=n.val(),s=e.exists()?new Date(e.val()):new Date(r.quitDate||Date.now()),o=Math.floor((new Date-s)/(1e3*60*60*24*7));if(o>=1){const l=o*2;await this.updateStat("addictionLevel",-l,`Clean time: ${o} week(s)`),o>=1&&await this.resetRelapsePenaltyLevel()}}catch(e){console.error("Error updating addiction from clean time:",e)}}async handleRelapse(){try{const e=new Date,n=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`));let r=1;if(n.exists()){const i=new Date(n.val()),o=Math.floor((e-i)/(1e3*60*60*24));o<=3?r=3:o<=7?r=2:r=1}let s=0;switch(r){case 1:s=4;break;case 2:s=6;break;case 3:s=8;break}return await Promise.all([this.updateStat("addictionLevel",s,`Relapse penalty level ${r}`),this.updateStat("mentalStrength",-3,"Relapse setback"),this.updateStat("triggerDefense",-3,"Relapse to known trigger")]),await Ze(Q(this.db,`users/${this.userUID}/profile/relapseDate`),e.toISOString()),await this.logBehavior("relapse",r,`Penalty level ${r} - ${s} addiction, -3 mental, -3 trigger defense`),!0}catch(e){return console.error("Error handling relapse:",e),!1}}async resetRelapsePenaltyLevel(){try{await Ze(Q(this.db,`users/${this.userUID}/profile/relapsePenaltyLevel`),1),console.log("Relapse penalty level reset")}catch(e){console.error("Error resetting relapse penalty level:",e)}}async handleCravingResistance(){try{return await Promise.all([this.updateStat("mentalStrength",1,"Successful craving resistance"),this.updateStat("triggerDefense",3,"Surviving trigger situation")]),await this.trackAppUsageDuringCravings(),!0}catch(e){return console.error("Error handling craving resistance:",e),!1}}async handleBreathingExercise(){try{const e=new Date().toDateString();return await Ze(Q(this.db,`users/${this.userUID}/profile/daily/${e}/breathing`),!0),await this.checkBreathingStreak()>=3&&await this.updateStat("mentalStrength",1,"3-day breathing exercise streak"),!0}catch(e){return console.error("Error handling breathing exercise:",e),!1}}async handleHydrationUpdate(e){try{const n=new Date().toDateString();return await Ze(Q(this.db,`users/${this.userUID}/profile/daily/${n}/water`),e),await this.checkHydrationStreak()>=3&&await this.updateStat("mentalStrength",1,"3-day hydration streak"),!0}catch(n){return console.error("Error handling hydration update:",n),!1}}async checkMilestoneBonuses(){try{const e=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`)),n=await Me(this.userRef);if(!n.exists())return;const r=n.val(),s=e.exists()?new Date(e.val()):new Date(r.quitDate||Date.now()),o=Math.floor((new Date-s)/(1e3*60*60*24)),l=[{days:7,bonus:5,name:"First week"},{days:30,bonus:10,name:"First month"},{days:90,bonus:15,name:"Three months"}];for(const c of l)if(o>=c.days){const u=`milestone_${c.days}`;(await Me(Q(this.db,`users/${this.userUID}/profile/${u}`))).exists()||await Promise.all([this.updateStat("mentalStrength",c.bonus,`${c.name} milestone bonus`),Ze(Q(this.db,`users/${this.userUID}/profile/${u}`),!0)])}}catch(e){console.error("Error checking milestone bonuses:",e)}}async trackLoggingActivity(){try{const e=new Date().toDateString();return await Ze(Q(this.db,`users/${this.userUID}/profile/daily/${e}/logged`),!0),await this.checkWeeklyLoggingFrequency()>=3&&await this.updateStat("motivation",2,"Regular logging (3+ days this week)"),await this.checkInactivityPenalty(),!0}catch(e){return console.error("Error tracking logging activity:",e),!1}}async handleAchievementShare(){try{return await this.updateStat("motivation",3,"Sharing achievement"),!0}catch(e){return console.error("Error handling achievement share:",e),!1}}async checkMoneyMilestones(){var e;try{const n=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`)),r=await Me(this.userRef);if(!r.exists())return;const s=r.val(),i=n.exists()?new Date(n.val()):new Date(s.quitDate||Date.now()),u=Math.floor((new Date-i)/(1e3*60*60*24))*10,d=[50,100,200,500,1e3];for(const h of d)if(u>=h){const f=`moneyMilestone_${h}`;(await Me(Q(this.db,`users/${this.userUID}/profile/${f}`))).exists()||await Promise.all([this.updateStat("motivation",2,`$${h} saved milestone`),Ze(Q(this.db,`users/${this.userUID}/profile/${f}`),!0)])}await this.updateStat("moneySaved",u-(((e=r.val().stats)==null?void 0:e.moneySaved)||0),"Money saved calculation")}catch(n){console.error("Error checking money milestones:",n)}}async handleTriggerPlanning(){try{return await this.updateStat("triggerDefense",1,"Pre-planning for known triggers"),!0}catch(e){return console.error("Error handling trigger planning:",e),!1}}async handleTriggerListUpdate(){try{return await this.updateStat("triggerDefense",1,"Updating trigger list"),!0}catch(e){return console.error("Error handling trigger list update:",e),!1}}async handleUnpreparedTrigger(){try{return await this.updateStat("triggerDefense",-1,"Entering trigger situation unprepared"),!0}catch(e){return console.error("Error handling unprepared trigger:",e),!1}}async checkBreathingStreak(){try{let e=0;for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n);const s=r.toDateString(),i=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${s}/breathing`));if(i.exists()&&i.val())e++;else break}return e}catch(e){return console.error("Error checking breathing streak:",e),0}}async checkHydrationStreak(){try{let e=0;for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n);const s=r.toDateString(),i=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${s}/water`));if(i.exists()&&i.val()>0)e++;else break}return e}catch(e){return console.error("Error checking hydration streak:",e),0}}async checkWeeklyLoggingFrequency(){try{let e=0;for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n);const s=r.toDateString(),i=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${s}/logged`));i.exists()&&i.val()&&e++}return e}catch(e){return console.error("Error checking weekly logging frequency:",e),0}}async checkInactivityPenalty(){try{let e=null;for(let n=0;n<10;n++){const r=new Date;r.setDate(r.getDate()-n);const s=r.toDateString(),i=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${s}/logged`));if(i.exists()&&i.val()){e=n;break}}(e===null||e>=7)&&await this.updateStat("motivation",-3,"Long period inactive (7+ days)")}catch(e){console.error("Error checking inactivity penalty:",e)}}async trackAppUsageDuringCravings(){try{const n=`appUsage_${new Date().toDateString()}`,r=await Me(Q(this.db,`users/${this.userUID}/profile/${n}`));let s=r.exists()?r.val():0;s++,await Ze(Q(this.db,`users/${this.userUID}/profile/${n}`),s),s===3&&await this.updateStat("mentalStrength",1,"Using app during cravings (3 times, no relapse)")}catch(e){console.error("Error tracking app usage during cravings:",e)}}async logBehavior(e,n,r){try{const s={timestamp:Date.now(),statName:e,change:n,reason:r,date:new Date().toISOString()};await K_(Q(this.db,`users/${this.userUID}/behaviorLog`),s)}catch(s){console.error("Error logging behavior:",s)}}showStatNotification(e,n,r){const s=document.createElement("div");s.className=`fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-500 transform translate-x-full ${n>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,s.innerHTML=`
      <div class="flex items-center gap-2">
        <span class="text-lg">${n>0?"":""}</span>
        <span class="font-bold">${e}</span>
        <span class="text-xl">${n>0?"+":""}${n}</span>
      </div>
      <div class="text-sm opacity-90">${r}</div>
    `,document.body.appendChild(s),setTimeout(()=>{s.classList.remove("translate-x-full")},100),setTimeout(()=>{s.classList.add("translate-x-full"),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},500)},3e3)}async runDailyUpdates(){try{await Promise.all([this.updateAddictionFromCleanTime(),this.checkMilestoneBonuses(),this.checkMoneyMilestones(),this.checkInactivityPenalty()])}catch(e){console.error("Error running daily updates:",e)}}async initialize(){try{setInterval(()=>{this.runDailyUpdates()},24*60*60*1e3),await this.runDailyUpdates(),console.log("StatManager initialized successfully")}catch(e){console.error("Error initializing StatManager:",e)}}}class xA{constructor(e){this.db=e,this.matchingPoolRef=Q(e,"matchingPool"),this.buddyPairsRef=Q(e,"buddyPairs"),this.usersRef=Q(e,"users")}async addToMatchingPool(e,n){var r;try{const s={userId:e,quitStartDate:n.quitDate||new Date().toISOString(),addictionLevel:((r=n.stats)==null?void 0:r.addictionLevel)||50,triggers:n.triggers||[],timezone:n.timezone||"UTC",quitExperience:n.quitExperience||"first-timer",availableForMatching:!0,lastActive:new Date().toISOString(),createdAt:new Date().toISOString(),archetype:n.archetype||"DETERMINED",dailyPatterns:n.dailyPatterns||[],copingStrategies:n.copingStrategies||[],confidence:n.confidence||5,preferredContactMethod:"chat",availabilityHours:n.availabilityHours||"anytime",language:n.language||"en"};return await Ze(Q(this.db,`matchingPool/${e}`),s),console.log(` User ${e} added to matching pool`),!0}catch(s){return console.error(" Error adding user to matching pool:",s),!1}}async removeFromMatchingPool(e){try{return await OC(Q(this.db,`matchingPool/${e}`)),console.log(` User ${e} removed from matching pool`),!0}catch(n){return console.error(" Error removing user from matching pool:",n),!1}}async updateMatchingAvailability(e,n){try{return await Ze(Q(this.db,`matchingPool/${e}/availableForMatching`),n),await Ze(Q(this.db,`matchingPool/${e}/lastActive`),new Date().toISOString()),console.log(` User ${e} matching availability updated to: ${n}`),!0}catch(r){return console.error(" Error updating matching availability:",r),!1}}async updateLastActive(e){try{return await Ze(Q(this.db,`matchingPool/${e}/lastActive`),new Date().toISOString()),!0}catch(n){return console.error(" Error updating last active:",n),!1}}async findCompatibleMatches(e,n=5){try{const r=await Me(Q(this.db,`matchingPool/${e}`));if(!r.exists())return console.log(" User not found in matching pool"),[];const s=r.val(),i=await Me(this.matchingPoolRef);if(!i.exists())return console.log(" No users in matching pool"),[];const o=i.val(),l=[];for(const[c,u]of Object.entries(o)){if(c===e||!u.availableForMatching)continue;const d=this.calculateCompatibilityScore(s,u);d>=.1&&l.push({userId:c,profile:u,compatibilityScore:d,matchReasons:this.getMatchReasons(s,u)})}return l.sort((c,u)=>u.compatibilityScore-c.compatibilityScore),l.slice(0,n)}catch(r){return console.error(" Error finding compatible matches:",r),[]}}calculateCompatibilityScore(e,n){let r=0,s=0;const i=new Date(e.quitStartDate),o=new Date(n.quitStartDate),l=Math.abs(i-o)/(1e3*60*60*24),c=Math.max(0,1-l/30);r+=c*.3,s+=.3;const u=Math.abs(e.addictionLevel-n.addictionLevel),d=Math.max(0,1-u/100);r+=d*.25,s+=.25;const h=e.timezone===n.timezone?1:.5;r+=h*.2,s+=.2;const f=e.quitExperience===n.quitExperience?1:.7;r+=f*.15,s+=.15;const g=e.triggers.filter(w=>n.triggers.includes(w)).length,v=Math.min(1,g/Math.max(e.triggers.length,1));return r+=v*.1,s+=.1,r/s}getMatchReasons(e,n){const r=[],s=new Date(e.quitStartDate),i=new Date(n.quitStartDate),o=Math.abs(s-i)/(1e3*60*60*24);o<=7?r.push("Started quitting around the same time"):o<=30&&r.push("Similar quit journey timeline"),Math.abs(e.addictionLevel-n.addictionLevel)<=10&&r.push("Similar addiction levels"),e.timezone===n.timezone&&r.push("Same timezone for easy communication"),e.quitExperience===n.quitExperience&&r.push(`Both ${e.quitExperience}s`);const c=e.triggers.filter(u=>n.triggers.includes(u));return c.length>0&&r.push(`Shared triggers: ${c.join(", ")}`),r}async createBuddyPair(e,n,r={}){try{const s=K_(this.buddyPairsRef).key,i={pairId:s,users:[e,n],matchedAt:new Date().toISOString(),compatibilityScore:r.compatibilityScore||0,matchReasons:r.matchReasons||[],status:"active",lastMessageAt:new Date().toISOString(),user1RemovedFromPool:!1,user2RemovedFromPool:!1};return await Ze(Q(this.db,`buddyPairs/${s}`),i),await Promise.all([this.removeFromMatchingPool(e),this.removeFromMatchingPool(n)]),await Promise.all([Ze(Q(this.db,`users/${e}/buddyInfo`),{hasBuddy:!0,buddyId:n,pairId:s,matchedAt:i.matchedAt}),Ze(Q(this.db,`users/${n}/buddyInfo`),{hasBuddy:!0,buddyId:e,pairId:s,matchedAt:i.matchedAt})]),console.log(` Buddy pair created between ${e} and ${n}`),!0}catch(s){return console.error(" Error creating buddy pair:",s),!1}}async getUserBuddyInfo(e){try{const n=await Me(Q(this.db,`users/${e}/buddyInfo`));return n.exists()?n.val():null}catch(n){return console.error(" Error getting user buddy info:",n),null}}async getBuddyPairInfo(e){try{const n=await Me(Q(this.db,`buddyPairs/${e}`));return n.exists()?n.val():null}catch(n){return console.error(" Error getting buddy pair info:",n),null}}async forceMatchUsers(e,n){try{console.log(` Force matching users ${e} and ${n}`);const r={compatibilityScore:.95,matchReasons:["Force matched for testing","High compatibility detected"],matchedAt:Date.now()},s=await this.createBuddyPair(e,n,r);return s&&console.log(` Force match successful between ${e} and ${n}`),s}catch(r){return console.error(" Error force matching users:",r),!1}}async cleanupInactiveUsers(e=30){try{const n=await Me(this.matchingPoolRef);if(!n.exists())return 0;const r=n.val(),s=new Date;s.setDate(s.getDate()-e);let i=0;for(const[o,l]of Object.entries(r))new Date(l.lastActive)<s&&(await this.removeFromMatchingPool(o),i++);return console.log(` Cleaned up ${i} inactive users from matching pool`),i}catch(n){return console.error(" Error cleaning up inactive users:",n),0}}async getMatchingPoolStats(){try{const e=await Me(this.matchingPoolRef);if(!e.exists())return{totalUsers:0,availableUsers:0,averageAddictionLevel:0,topTriggers:[],timezoneDistribution:{}};const n=e.val(),r=Object.values(n);return{totalUsers:r.length,availableUsers:r.filter(i=>i.availableForMatching).length,averageAddictionLevel:r.reduce((i,o)=>i+(o.addictionLevel||0),0)/r.length,topTriggers:this.getTopTriggers(r),timezoneDistribution:this.getTimezoneDistribution(r),quitExperienceDistribution:this.getQuitExperienceDistribution(r)}}catch(e){return console.error(" Error getting matching pool stats:",e),null}}getTopTriggers(e){const n={};return e.forEach(r=>{var s;(s=r.triggers)==null||s.forEach(i=>{n[i]=(n[i]||0)+1})}),Object.entries(n).sort(([,r],[,s])=>s-r).slice(0,5).map(([r,s])=>({trigger:r,count:s}))}getTimezoneDistribution(e){const n={};return e.forEach(r=>{const s=r.timezone||"Unknown";n[s]=(n[s]||0)+1}),n}getQuitExperienceDistribution(e){const n={};return e.forEach(r=>{const s=r.quitExperience||"unknown";n[s]=(n[s]||0)+1}),n}listenToMatchingPoolStatus(e,n){const r=Q(this.db,`matchingPool/${e}`);return oh(r,i=>{i.exists()?n(i.val()):n(null)})}listenToBuddyPair(e,n){const r=Q(this.db,`buddyPairs/${e}`);return oh(r,i=>{i.exists()?n(i.val()):n(null)})}async getAllMatchingPoolUsers(){try{const e=await Me(this.matchingPoolRef);if(!e.exists())return console.log(" No users in matching pool"),[];const n=e.val(),r=Object.entries(n).map(([s,i])=>({id:s,...i}));return console.log(" Matching pool users:",r),r}catch(e){return console.error(" Error getting matching pool users:",e),[]}}async forceMatchUsers(e,n){try{console.log(` Force matching users ${e} and ${n}`);const r={compatibilityScore:.95,matchReasons:["Force matched for testing","High compatibility detected"],matchedAt:Date.now()},s=await this.createBuddyPair(e,n,r);return s&&console.log(` Force match successful between ${e} and ${n}`),s}catch(r){return console.error(" Error force matching users:",r),!1}}}const SA=({onAuthSuccess:t,isNewUser:e})=>{const[n,r]=N.useState("signin"),[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(""),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[v,w]=N.useState(""),[L,m]=N.useState(""),[p,y]=N.useState(!1);N.useEffect(()=>()=>{f&&g(!1)},[f]);const S=new $n;S.addScope("email"),S.addScope("profile"),S.setCustomParameters({prompt:"select_account",access_type:"offline",include_granted_scopes:"true"});const k=()=>{i(""),l(""),u(""),w(""),m("")},C=async()=>{h(!0),g(!0),w("");try{console.log("Starting Google sign-in process..."),console.log("Opening Google authentication popup..."),console.log("Google provider configuration:",{scopes:S.scopes,customParameters:S.customParameters});const E=iR(rs,S),x=new Promise((M,B)=>{setTimeout(()=>B(new Error("Popup timeout - please try again")),6e4)}),I=await Promise.race([E,x]);if(I&&I.user){const M=I.user;console.log("Google sign-in successful for:",M.email,"UID:",M.uid),console.log("User display name:",M.displayName),console.log("User photo URL:",M.photoURL),await new Promise(B=>setTimeout(B,800)),t(M)}else throw new Error("No user data received from Google authentication")}catch(E){console.error("Google sign-in error:",E),E.code==="auth/popup-closed-by-user"?w("Google sign-in was cancelled. Please try again and complete the account selection in the popup window."):E.code==="auth/popup-blocked"?w("Google sign-in popup was blocked by your browser. Please allow popups for this site and try again."):E.code==="auth/cancelled-popup-request"?w("Google sign-in was cancelled. Please try again and complete the authentication process."):E.code==="auth/account-exists-with-different-credential"?w("An account already exists with this email using a different sign-in method. Please use email/password instead."):E.message==="Popup timeout - please try again"?w("Google sign-in popup timed out. Please try again and complete the account selection quickly."):E.code==="auth/network-request-failed"?w("Network error during Google sign-in. Please check your internet connection and try again."):E.code==="auth/operation-not-allowed"?w("Google sign-in is not enabled for this app. Please contact support."):w(_(E.code))}finally{h(!1),g(!1)}},R=async E=>{E.preventDefault(),h(!0),w("");try{const I=(await gk(rs,s,o)).user;console.log("Email sign-in successful for:",I.email),t(I)}catch(x){console.error("Email sign-in error:",x),w(_(x.code))}finally{h(!1)}},T=async E=>{if(E.preventDefault(),h(!0),w(""),o!==c){w("Passwords do not match"),h(!1);return}if(o.length<6){w("Password must be at least 6 characters long"),h(!1);return}try{const I=(await mk(rs,s,o)).user;console.log("Email sign-up successful for:",I.email),await vk(I),t(I)}catch(x){console.error("Email sign-up error:",x),w(_(x.code))}finally{h(!1)}},j=async E=>{if(E.preventDefault(),!s){w("Please enter your email address");return}h(!0),w("");try{await fk(rs,s),m("Password reset email sent! Check your inbox.")}catch(x){console.error("Password reset error:",x),w(_(x.code))}finally{h(!1)}},_=E=>{switch(E){case"auth/user-not-found":return"No account found with this email address";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password is too weak. Use at least 6 characters";case"auth/invalid-email":return"Invalid email address";case"auth/popup-closed-by-user":return"Google sign-in was cancelled. Please try again and complete the account selection.";case"auth/popup-blocked":return"Google sign-in popup was blocked. Please allow popups for this site and try again.";case"auth/cancelled-popup-request":return"Google sign-in was cancelled. Please try again.";case"auth/account-exists-with-different-credential":return"An account already exists with this email using a different sign-in method.";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/operation-not-allowed":return"Google sign-in is not enabled. Please contact support.";case"auth/too-many-requests":return"Too many sign-in attempts. Please try again later.";default:return"Authentication failed. Please try again"}};return p?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-white",children:"Reset Password"}),a.jsx("p",{className:"mt-2 text-gray-400",children:"Enter your email to receive a reset link"})]}),a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:s,onChange:E=>i(E.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),v&&a.jsx("div",{className:"text-red-400 text-sm",children:v}),L&&a.jsx("div",{className:"text-green-400 text-sm",children:L}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>{y(!1),w(""),m("")},className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Back to Login"}),a.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-blue-600 border border-transparent rounded-md text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Sending...":"Send Reset Link"})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QuitCard Arena"}),a.jsx("p",{className:"text-gray-400",children:"Your journey to quit starts here"})]}),a.jsxs("div",{children:[f&&a.jsx("div",{className:"mb-3 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-center text-blue-300 text-sm",children:[a.jsx("div",{className:"animate-pulse mr-2",children:""}),"Google popup is open - please complete your account selection"]})}),a.jsx("button",{onClick:C,disabled:d,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-md text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Opening Google Sign-in..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:f?a.jsx("span",{className:"text-blue-400 font-medium",children:" Google popup is open - please complete account selection"}):"Click to open Google account selection popup"}),v&&a.jsxs("div",{className:"mt-3 p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:[a.jsx("div",{className:"text-red-300 text-sm mb-2",children:v}),v.includes("Google sign-in")&&!f&&a.jsx("button",{onClick:C,disabled:d,className:"w-full px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-md transition-colors disabled:opacity-50",children:d?"Retrying...":"Try Google Sign-in Again"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Or continue with email"})})]}),a.jsxs("div",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg",children:[a.jsx("button",{onClick:()=>{r("signin"),k()},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="signin"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sign In"}),a.jsx("button",{onClick:()=>{r("signup"),k()},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="signup"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sign Up"})]}),n==="signin"&&a.jsxs("form",{onSubmit:R,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"signin-email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),a.jsx("input",{id:"signin-email",type:"email",value:s,onChange:E=>i(E.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"signin-password",className:"block text-sm font-medium text-gray-300",children:"Password"}),a.jsx("input",{id:"signin-password",type:"password",value:o,onChange:E=>l(E.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password"})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"Forgot your password?"})}),v&&a.jsx("div",{className:"text-red-400 text-sm",children:v}),a.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Signing in...":"Sign In"})]}),n==="signup"&&a.jsxs("form",{onSubmit:T,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),a.jsx("input",{id:"signup-email",type:"email",value:s,onChange:E=>i(E.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-300",children:"Password"}),a.jsx("input",{id:"signup-password",type:"password",value:o,onChange:E=>l(E.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Create a password (min 6 characters)"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-300",children:"Confirm Password"}),a.jsx("input",{id:"confirm-password",type:"password",value:c,onChange:E=>u(E.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your password"})]}),v&&a.jsx("div",{className:"text-red-400 text-sm",children:v}),L&&a.jsx("div",{className:"text-green-400 text-sm",children:L}),a.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Creating account...":"Create Account"})]})]})})},bA=()=>{const[t,e]=N.useState(navigator.onLine),[n,r]=N.useState(!1);return N.useEffect(()=>{const s=()=>{e(!0),r(!1),console.log(" Connection restored")},i=()=>{e(!1),r(!0),console.log(" Connection lost")};return window.addEventListener("online",s),window.addEventListener("offline",i),e(navigator.onLine),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[]),t?null:a.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-600 text-white p-3 text-center shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("svg",{className:"w-5 h-5 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsx("span",{className:"font-medium",children:"You're offline. Some features may be limited."}),a.jsx("button",{onClick:()=>r(!1),className:"ml-2 text-white hover:text-yellow-200 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&a.jsxs("div",{className:"mt-2 text-sm bg-yellow-700 p-2 rounded",children:[a.jsx("p",{className:"mb-2",children:"While offline, you can:"}),a.jsxs("ul",{className:"text-left space-y-1 ml-4",children:[a.jsx("li",{children:" View your current stats and progress"}),a.jsx("li",{children:" Track habits and cravings"}),a.jsx("li",{children:" Play distraction games"}),a.jsx("li",{children:" View your profile information"})]}),a.jsx("p",{className:"mt-2 text-yellow-200",children:"Changes will sync when you're back online."})]})]})};var EA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NA=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>N.createElement("svg",{ref:u,...EA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${IA(t)}`,...c},[...e.map(([d,h])=>N.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var Ct=NA;const CA=Ct("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),TA=Ct("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),mx=Ct("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),gx=Ct("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),kA=Ct("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),RA=Ct("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Fa=Ct("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),yx=Ct("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ho=Ct("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),PA=Ct("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),vx=Ct("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),AA=Ct("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),_x=Ct("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),wx=Ct("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xx=Ct("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),dr=(t,e="adventurer")=>{const n="https://api.dicebear.com/7.x",r={seed:t||Math.random().toString(36).substring(7),backgroundColor:["b6e3f4","c0aede","ffdfbf","ffd5dc"],radius:50,size:200},s=new URLSearchParams(r).toString();return`${n}/${e}/svg?${s}`},Ua=t=>{const e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],n=e[t.charCodeAt(0)%e.length],r=t.substring(0,2).toUpperCase();return`data:image/svg+xml,${encodeURIComponent(`
    <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="200" fill="${n}"/>
      <text x="100" y="120" font-family="Arial, sans-serif" font-size="80" font-weight="bold" text-anchor="middle" fill="white">${r}</text>
    </svg>
  `)}`},DA=({onComplete:t,authUser:e})=>{const[n,r]=N.useState(1),[s,i]=N.useState({heroName:"",archetype:"",avatar:null,avatarSeed:Math.random().toString(36).substring(7),triggers:[],dailyPatterns:[],copingStrategies:[],vapePodsPerWeek:0,nicotineStrength:"",quitAttempts:"",confidence:5}),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[d,h]=N.useState(null),[f,g]=N.useState(null),v=[{id:"DETERMINED",name:"The Determined",description:"Unstoppable willpower and determination",color:"bg-red-500",icon:Ho},{id:"SOCIAL_FIGHTER",name:"The Social Fighter",description:"Thrives on community support",color:"bg-blue-500",icon:xx},{id:"HEALTH_WARRIOR",name:"The Health Warrior",description:"Focused on physical and mental wellness",color:"bg-green-500",icon:gx},{id:"MONEY_SAVER",name:"The Money Saver",description:"Motivated by financial freedom",color:"bg-yellow-500",icon:mx}],w=["Stress/anxiety","Social situations","Boredom","After meals","Drinking alcohol","Work breaks","Driving"],L=["Morning routine","Work breaks","After meals","Evening wind-down","Social events","Throughout the day"],m=["Breathing exercises","Nicotine replacement therapy","Exercise/physical activity","Distraction techniques","Nothing - this is new to me"],p=()=>{console.log("Calculating stats with userData:",s);let _=40;s.vapePodsPerWeek<=1?_+=5:s.vapePodsPerWeek<=3?_+=15:s.vapePodsPerWeek<=5?_+=25:s.vapePodsPerWeek<=7?_+=35:_+=40;const E=s.nicotineStrength||"",x=parseInt(E.replace("mg",""))||0;x<=5?_+=0:x<=11?_+=10:x<=20?_+=20:_+=25,s.dailyPatterns.includes("Throughout the day")?_+=20:s.dailyPatterns.length>2?_+=10:_+=0,_=Math.min(_,100);let I=25;s.confidence>=9?I+=35:s.confidence>=7?I+=25:s.confidence>=4?I+=15:I+=0,s.quitAttempts==="first"?I+=15:parseInt(s.quitAttempts)<=3?I+=10:I+=5,s.copingStrategies.length>=3?I+=15:s.copingStrategies.length>=1?I+=10:I+=0,I=Math.min(I,80);let M=35;M+={DETERMINED:20,HEALTH_WARRIOR:15,SOCIAL_FIGHTER:15,MONEY_SAVER:10}[s.archetype]||0,s.confidence>=8?M+=25:s.confidence>=5?M+=15:M+=0,s.quitAttempts==="first"?M+=10:parseInt(s.quitAttempts)<=3?M+=5:M+=15,M=Math.min(M,90);let q=15;s.triggers.length<=2?q+=15:s.triggers.length<=4?q+=10:q+=5;const ce=s.triggers.includes("Drinking alcohol"),P=s.triggers.includes("Social situations");return ce&&P?q+=0:s.triggers.length>3?q+=5:q+=10,s.copingStrategies.length>=3?q+=25:s.copingStrategies.length>=1?q+=15:q+=0,s.dailyPatterns.includes("Throughout the day")?q+=0:s.dailyPatterns.length>2?q+=5:q+=10,q=Math.min(q,60),{addictionLevel:_,mentalStrength:I,motivation:M,triggerDefense:q}},y=_=>{const E=_.target.files[0];if(E){h(E);const x=new FileReader;x.onload=I=>g(I.target.result),x.readAsDataURL(E)}},S=async()=>{if(d){u(!0);try{const _=document.createElement("canvas"),E=_.getContext("2d"),x=new Image;x.onload=()=>{_.width=200,_.height=200,E.filter="contrast(1.2) saturate(1.3) brightness(1.1)",E.drawImage(x,0,0,200,200),E.globalCompositeOperation="overlay",E.fillStyle="rgba(255, 200, 200, 0.1)",E.fillRect(0,0,200,200);const I=_.toDataURL("image/png"),M={...s,avatar:I};i(M),j(M,3),u(!1)},x.src=f}catch(_){console.error("Photo processing failed:",_);const E=Ua(s.avatarSeed);i(x=>({...x,avatar:E})),u(!1)}}},k=()=>{l(!0);const _=Math.random().toString(36).substring(7);(async()=>{try{const x=dr(_),I={...s,avatarSeed:_,avatar:x};i(I),j(I,3)}catch{const I=Ua(_),M={...s,avatarSeed:_,avatar:I};i(M),j(M,3)}})(),setTimeout(()=>l(!1),500)},C=async()=>{if(n<10)await j(s,n),r(n+1);else try{console.log("Completing onboarding with userData:",s);const _=p();console.log("Calculated stats:",_);const E={...s,stats:{..._,streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date};await j(E,10),console.log("Final user data:",E),t(E)}catch(_){console.error("Error completing onboarding:",_);const x={...s,stats:{...{addictionLevel:50,mentalStrength:50,motivation:50,triggerDefense:30},streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date};try{await j(x,10)}catch(I){console.error("Failed to save fallback data to Firebase:",I)}console.log("Using fallback stats:",x),t(x)}},R=()=>{n>1&&r(n-1)},T=()=>{switch(n){case 1:return s.heroName.trim().length>0;case 2:return s.archetype!=="";case 3:return s.avatar!==null;case 4:return s.triggers.length>0;case 5:return s.dailyPatterns.length>0;case 6:return s.copingStrategies.length>0;case 7:return s.vapePodsPerWeek>0;case 8:return s.nicotineStrength!=="";case 9:return s.quitAttempts!=="";case 10:return s.confidence>0;default:return!1}},j=async(_,E)=>{if(e)try{const{ref:x,set:I}=await be(()=>import("./index.esm-aea0f173.js"),[]),M=x(V,`users/${e.uid}/onboarding`);await I(x(V,`users/${e.uid}/onboarding/step${E}`),{..._,stepNumber:E,timestamp:Date.now()}),await I(x(V,`users/${e.uid}/onboarding/progress`),{currentStep:E,completedSteps:Array.from({length:E},(B,q)=>q+1),lastUpdated:Date.now()}),console.log(`Step ${E} saved to Firebase successfully`)}catch(x){console.error(`Error saving step ${E} to Firebase:`,x)}};return N.useEffect(()=>{if(!s.avatar){const _=dr(s.avatarSeed);i(E=>({...E,avatar:_}))}},[]),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-8 max-w-md w-full shadow-2xl border border-slate-700",children:[a.jsx("div",{className:"flex justify-between items-center mb-8 overflow-x-auto",children:[1,2,3,4,5,6,7,8,9,10].map(_=>a.jsxs("div",{className:"flex items-center flex-shrink-0",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${_<=n?"bg-blue-500 text-white":"bg-slate-600 text-gray-400"}`,children:_<n?"":_}),_<10&&a.jsx("div",{className:`w-4 h-1 mx-1 ${_<n?"bg-blue-500":"bg-slate-600"}`})]},_))}),n===1&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(PA,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Welcome to QuitCard Arena"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"Your journey to freedom starts here. Let's create your hero identity."}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-left text-white text-sm font-medium mb-2",children:"What's your hero name?"}),a.jsx("input",{type:"text",value:s.heroName,onChange:_=>{const E={...s,heroName:_.target.value};i(E),_.target.value.trim().length>0&&j(E,1)},placeholder:"e.g., FreedomSeeker, HealthGuardian",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n===2&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ho,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Choose Your Archetype"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"Select the warrior type that resonates with your journey."}),a.jsx("div",{className:"space-y-3 mb-6",children:v.map(_=>{const E=_.icon;return a.jsx("button",{onClick:()=>{const x={...s,archetype:_.id};i(x),j(x,2)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${s.archetype===_.id?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 ${_.color} rounded-lg flex items-center justify-center`,children:a.jsx(E,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold",children:_.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:_.description})]})]})},_.id)})})]}),n===3&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(wx,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Create Your Avatar"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"Choose your battle card identity in the arena."}),a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full overflow-hidden border-4 border-slate-600 bg-slate-700",children:s.avatar?a.jsx("img",{src:s.avatar,alt:"Avatar",className:"w-full h-full object-cover",onError:()=>{i(_=>({..._,avatar:Ua(_.avatarSeed)}))}}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(Fa,{className:"w-8 h-8 text-gray-400 animate-spin"})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Upload Your Photo"}),a.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden",id:"photo-upload"}),a.jsx("label",{htmlFor:"photo-upload",className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 justify-center cursor-pointer",children:" Upload Photo"})]}),f&&a.jsx("div",{className:"mb-4",children:a.jsx("button",{onClick:S,disabled:c,className:"w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 text-white rounded-lg transition-colors flex items-center gap-2 justify-center",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Fa,{className:"w-4 h-4 animate-spin"}),"Converting to Anime..."]}):a.jsx(a.Fragment,{children:" Convert to Anime"})})}),a.jsx("div",{className:"text-gray-400 text-sm",children:"- OR -"}),a.jsx("button",{onClick:k,disabled:o,className:"w-full px-6 py-3 bg-slate-600 hover:bg-slate-500 disabled:bg-slate-700 text-white rounded-lg transition-colors flex items-center gap-2 justify-center",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Fa,{className:"w-4 h-4 animate-spin"}),"Generate Random Avatar"]}):a.jsxs(a.Fragment,{children:[a.jsx(Fa,{className:"w-4 h-4"}),"Generate Random Avatar"]})}),a.jsx("button",{onClick:()=>{const _=Ua(s.avatarSeed),E={...s,avatar:_};i(E),j(E,3)},className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Use Fallback Avatar"})]})]})]}),n===4&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Trigger Identification"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"What usually makes you want to vape? (Select all that apply)"}),a.jsx("div",{className:"space-y-3 mb-6",children:w.map(_=>a.jsx("button",{onClick:()=>{const E={...s,triggers:s.triggers.includes(_)?s.triggers.filter(x=>x!==_):[...s.triggers,_]};i(E),j(E,4)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${s.triggers.includes(_)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${s.triggers.includes(_)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:s.triggers.includes(_)&&a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsx("span",{className:"text-white font-semibold",children:_})]})},_))})]}),n===5&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Daily Routine"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"When do you vape most? (Select all that apply)"}),a.jsx("div",{className:"space-y-3 mb-6",children:L.map(_=>a.jsx("button",{onClick:()=>{const E={...s,dailyPatterns:s.dailyPatterns.includes(_)?s.dailyPatterns.filter(x=>x!==_):[...s.dailyPatterns,_]};i(E),j(E,5)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${s.dailyPatterns.includes(_)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${s.dailyPatterns.includes(_)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:s.dailyPatterns.includes(_)&&a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsx("span",{className:"text-white font-semibold",children:_})]})},_))})]}),n===6&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Coping Experience"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"Have you tried any of these strategies before? (Select all that apply)"}),a.jsx("div",{className:"space-y-3 mb-6",children:m.map(_=>a.jsx("button",{onClick:()=>{const E={...s,copingStrategies:s.copingStrategies.includes(_)?s.copingStrategies.filter(x=>x!==_):[...s.copingStrategies,_]};i(E),j(E,6)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${s.copingStrategies.includes(_)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${s.copingStrategies.includes(_)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:s.copingStrategies.includes(_)&&a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsx("span",{className:"text-white font-semibold",children:_})]})},_))})]}),n===7&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Vape Usage"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"How many vape pods do you typically use per week?"}),a.jsx("div",{className:"mb-6",children:a.jsxs("select",{value:s.vapePodsPerWeek,onChange:_=>{const E={...s,vapePodsPerWeek:parseFloat(_.target.value)||0};i(E),E.vapePodsPerWeek>0&&j(E,7)},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select pods per week"}),a.jsx("option",{value:"0.5",children:"0.5 pods"}),a.jsx("option",{value:"1",children:"1 pod"}),a.jsx("option",{value:"2",children:"2 pods"}),a.jsx("option",{value:"3",children:"3 pods"}),a.jsx("option",{value:"4",children:"4 pods"}),a.jsx("option",{value:"5",children:"5 pods"}),a.jsx("option",{value:"6",children:"6 pods"}),a.jsx("option",{value:"7",children:"7 pods"}),a.jsx("option",{value:"8",children:"8+ pods"})]})})]}),n===8&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Nicotine Strength"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"What nicotine strength do you typically use?"}),a.jsx("div",{className:"mb-6",children:a.jsxs("select",{value:s.nicotineStrength,onChange:_=>{const E={...s,nicotineStrength:_.target.value};i(E),E.nicotineStrength&&j(E,8)},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select nicotine strength"}),a.jsx("option",{value:"3mg",children:"3mg"}),a.jsx("option",{value:"6mg",children:"6mg"}),a.jsx("option",{value:"12mg",children:"12mg"}),a.jsx("option",{value:"18mg",children:"18mg"}),a.jsx("option",{value:"20mg",children:"20mg"}),a.jsx("option",{value:"50mg",children:"50mg"})]})})]}),n===9&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Previous Attempts"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"How many times have you tried to quit before?"}),a.jsx("div",{className:"mb-6",children:a.jsxs("select",{value:s.quitAttempts,onChange:_=>{const E={...s,quitAttempts:_.target.value};i(E),E.quitAttempts&&j(E,9)},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select option"}),a.jsx("option",{value:"first",children:"This is my first attempt"}),a.jsx("option",{value:"1",children:"Once before"}),a.jsx("option",{value:"2",children:"Twice before"}),a.jsx("option",{value:"3",children:"3-5 times"}),a.jsx("option",{value:"5",children:"More than 5 times"})]})})]}),n===10&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Confidence Level"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"How confident are you this time? (1-10 scale)"}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"1"}),a.jsx("input",{type:"range",min:"1",max:"10",value:s.confidence,onChange:_=>{const E={...s,confidence:parseInt(_.target.value)};i(E),j(E,10)},className:"flex-1 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer slider"}),a.jsx("span",{className:"text-gray-400 text-sm",children:"10"})]}),a.jsxs("div",{className:"text-center mt-2",children:[a.jsx("span",{className:"text-white font-bold text-lg",children:s.confidence}),a.jsx("span",{className:"text-gray-400 text-sm ml-2",children:"/ 10"})]})]})]}),a.jsxs("div",{className:"flex justify-between",children:[n>1&&a.jsx("button",{onClick:R,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Back"}),a.jsxs("button",{onClick:C,disabled:!T(),className:`ml-auto px-6 py-3 rounded-lg transition-colors flex items-center gap-2 ${T()?"bg-blue-600 hover:bg-blue-700 text-white":"bg-slate-700 text-gray-400 cursor-not-allowed"}`,children:[n===10?"Start Journey":"Next",a.jsx(CA,{className:"w-4 h-4"})]})]})]})})},Zg={DETERMINED:{name:"The Determined",color:"bg-red-500",icon:Ho},SOCIAL_FIGHTER:{name:"The Social Fighter",color:"bg-blue-500",icon:xx},HEALTH_WARRIOR:{name:"The Health Warrior",color:"bg-green-500",icon:gx},MONEY_SAVER:{name:"The Money Saver",color:"bg-yellow-500",icon:mx}},OA={COMMON:{name:"Common",color:"border-gray-400",glow:"",days:0},UNCOMMON:{name:"Uncommon",color:"border-gray-300",glow:"shadow-lg",days:7},RARE:{name:"Rare",color:"border-yellow-400",glow:"shadow-yellow-400/50 shadow-lg",days:14},EPIC:{name:"Epic",color:"border-purple-400",glow:"shadow-purple-400/50 shadow-xl",days:30},LEGENDARY:{name:"Legendary",color:"border-orange-400",glow:"shadow-orange-400/50 shadow-2xl animate-pulse",days:90}},ey={WEEK_WARRIOR:{name:"Week Warrior",icon:TA,description:"7 days clean"},MONTH_MASTER:{name:"Month Master",icon:_x,description:"30 days clean"},LEGEND:{name:"Legend",icon:vx,description:"90 days clean"}},jA=t=>t>=90?"LEGENDARY":t>=30?"EPIC":t>=14?"RARE":t>=7?"UNCOMMON":"COMMON",LA=({isOpen:t,onClose:e,statType:n})=>{if(!t)return null;const s={addiction:{title:"Addiction",description:"Time since last vape - decreases as your body heals",impacts:["What decreases it:"," Clean time: -2 points per week (standard recovery)"," Cold turkey approach: -3 points per week (faster healing)"," Tapering approach: -1.5 points per week (gentler decline)","","What increases it:"," First relapse (after clean period): +4 points"," Second relapse (within 7 days): +6 additional points"," Third relapse and on (within 3 days): +8 additional points"," Reset: Penalty level resets after 7 clean days"]},mentalStrength:{title:"Mental Strength",description:"Your ability to resist urges and stay strong",impacts:["What increases it:"," Successful craving resistance: +1 point"," Using app during cravings every 3 times with no relapse: +1 point"," Completing breathing exercises 3 days straight: +1 point"," Staying hydrated for 3 days straight: +1 point"," Milestone bonuses: First 7 days +5 points, 30 days +10 points, 90 days +15 points","","What decreases it:"," Giving in to cravings: -3 points"," Each relapse: -3 points"]},motivation:{title:"Motivation",description:"Your drive to quit - boosted by staying engaged",impacts:["What increases it:"," Regular logging (3+ days per week): +2 points (weekly)"," Sharing achievements: +3 points per share (weekly)"," Reaching money saved milestones: +2 points","","What decreases it:"," Long periods inactive (7+ days no logging): -3 points"]},triggerDefense:{title:"Trigger Defense",description:"Protection against your personal vaping triggers",impacts:["What increases it:"," Surviving trigger situations without vaping: +3 points"," Pre-planning for known triggers: +1 point"," Updating your trigger list: +1 point","","What decreases it:"," Relapsing to known triggers: -3 points"," Entering trigger situations unprepared: -1 point"]}}[n];return s?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s.title}),a.jsx("p",{className:"text-gray-300 text-sm",children:s.description})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-white font-semibold mb-3 text-left",children:"What impacts it:"}),a.jsx("ul",{className:"space-y-2 text-left",children:s.impacts.map((i,o)=>a.jsxs("li",{className:"text-gray-300 text-sm flex items-start",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),i]},o))})]}),a.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-all duration-300",children:"Got it"})]})}):null},$a=({label:t,value:e,max:n,color:r,statType:s,onInfoClick:i})=>{const o=Math.min(e,n);return a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex justify-between text-white text-xs mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:t}),s&&i&&a.jsx("button",{onClick:()=>i(s),className:"w-4 h-4 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center text-white text-xs font-bold transition-colors",title:`Learn about ${t}`,children:"i"})]}),a.jsxs("span",{children:[o,"/",n]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`${r} h-2 rounded-full transition-all duration-500`,style:{width:`${o/n*100}%`}})})]})},ty=({user:t,isNemesis:e=!1,showComparison:n=!1,nemesisUser:r=null,onInfoClick:s})=>{const[i,o]=N.useState(!1),[l,c]=N.useState(null);if(t.isEmpty)return a.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-slate-600 p-4 text-white text-center mx-auto flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-4xl text-slate-400",children:""})}),a.jsx("h3",{className:"text-slate-300 text-lg font-semibold mb-2",children:"Looking for Buddy"}),a.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"We are searching for a suitable quit buddy for you. This may take a few minutes."}),a.jsx("div",{className:"mt-4 p-3 bg-slate-700/50 rounded-lg",children:a.jsx("p",{className:"text-slate-300 text-xs",children:" Tip: Complete your profile to help us find better matches"})})]})});if(!t||!t.archetype||!t.stats)return a.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-gray-400 p-4 text-white text-center mx-auto flex items-center justify-center",children:a.jsx("div",{className:"animate-pulse",children:"Loading Card..."})});const u=Zg[t.archetype];if(!u)return console.error("Invalid archetype:",t.archetype,"Available:",Object.keys(Zg)),a.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-red-400 p-4 text-white text-center mx-auto flex items-center justify-center",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-red-400 mb-2",children:"Invalid Archetype"}),a.jsx("p",{className:"text-gray-300 text-sm",children:t.archetype})]})});const d=OA[jA(t.stats.streakDays)],h=u.icon,f=async S=>{let k=null;if(S.uid)try{const{ref:T,get:j}=await be(()=>import("./index.esm-aea0f173.js"),[]),_=T(V,`users/${S.uid}/specialFeatures`),E=await j(_);E.exists()&&(k=E.val())}catch(T){console.error("Error fetching special features from Firebase:",T)}if(!k){const T=`specialFeatures_${S.heroName||S.id||"default"}`,j=localStorage.getItem(T);j&&(k=JSON.parse(j))}if(k)return k;const C=[];for(S.triggers&&S.triggers.length>0&&S.triggers.forEach(T=>{switch(T){case"Stress/anxiety":C.push("Stress Vaper");break;case"Social situations":C.push("Social Vaper");break;case"Boredom":C.push("Boredom Vaper");break;case"After meals":C.push("Habit Vaper");break;case"Drinking alcohol":C.push("Party Vaper");break;case"Work breaks":C.push("Break Vaper");break;case"Driving":C.push("Driving Vaper");break}}),S.dailyPatterns&&S.dailyPatterns.length>0&&S.dailyPatterns.forEach(T=>{switch(T){case"Morning routine":C.push("Morning Struggler");break;case"Evening wind-down":C.push("Late Night Lurker");break;case"Throughout the day":C.push("All-Day Addict");break}}),S.copingStrategies&&S.copingStrategies.length>0&&(S.copingStrategies.includes("Nothing - this is new to me")?C.push("First Timer"):S.copingStrategies.length>2&&C.push("Veteran Quitter"));C.length<4;){const T=["Nicotine Fighter","Health Seeker","Freedom Chaser","Willpower Warrior"],j=T[Math.floor(Math.random()*T.length)];C.includes(j)||C.push(j)}const R=C.slice(0,4);if(S.uid)try{const{ref:T,set:j}=await be(()=>import("./index.esm-aea0f173.js"),[]),_=T(V,`users/${S.uid}/specialFeatures`);await j(_,R),console.log("Special features saved to Firebase successfully")}catch(T){console.error("Error saving special features to Firebase:",T);const j=`specialFeatures_${S.heroName||S.id||"default"}`;localStorage.setItem(j,JSON.stringify(R))}else{const T=`specialFeatures_${S.heroName||S.id||"default"}`;localStorage.setItem(T,JSON.stringify(R))}return R},[g,v]=N.useState([]);N.useEffect(()=>{(async()=>{if(t&&t.uid){const k=await f(t);v(k)}})()},[t]);const w=t.stats.addictionLevel||50,L=t.stats.mentalStrength||50,m=t.stats.motivation||50,p=t.stats.triggerDefense||30;t.stats.nemesisVictories||(Math.floor(Math.random()*8)+1,Math.floor(Math.random()*5)+1);const y=S=>{c(S),o(!0)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`relative w-80 h-[520px] rounded-xl ${d.color} border-4 ${d.glow} bg-gradient-to-br from-slate-800 to-slate-900 p-4 transform transition-all duration-300 hover:scale-105 mx-auto overflow-hidden`,children:[a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("h3",{className:"text-white font-bold text-lg leading-tight break-words px-1",children:t.heroName}),a.jsx("p",{className:"text-gray-300 text-base",children:u.name})]}),a.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full overflow-hidden bg-slate-700 flex items-center justify-center ring-2 ring-blue-400/50",children:t.avatar?a.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover",onError:()=>{console.log("Avatar failed to load, using fallback")}}):a.jsx("div",{className:`w-full h-full ${u.color} flex items-center justify-center`,children:a.jsx(h,{className:"w-12 h-12 text-white"})})}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx($a,{label:"Addiction",value:w,max:100,color:"bg-red-500",statType:e?null:"addiction",onInfoClick:e?null:y}),a.jsx($a,{label:"Mental Strength",value:L,max:100,color:"bg-blue-500",statType:e?null:"mentalStrength",onInfoClick:e?null:y}),a.jsx($a,{label:"Motivation",value:m,max:100,color:"bg-green-500",statType:e?null:"motivation",onInfoClick:e?null:y}),a.jsx($a,{label:"Trigger Defense",value:p,max:100,color:"bg-orange-500",statType:e?null:"triggerDefense",onInfoClick:e?null:y})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-white text-xs font-semibold mb-2 text-center",children:"Special Features"}),a.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:g.map((S,k)=>a.jsx("div",{className:"px-2 py-1 bg-blue-600/80 text-white text-xs rounded-full font-medium",title:S,children:S},k))})]}),a.jsxs("div",{className:"bg-black/30 rounded-lg p-3 space-y-2 mb-3 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex justify-between text-white text-sm",children:[a.jsx("span",{className:"text-gray-300",children:"Streak:"}),a.jsxs("span",{className:"font-bold text-green-400 flex items-center gap-1",children:[t.stats.streakDays," days",t.stats.streakDays>0&&a.jsx("span",{className:"text-xs",children:""})]})]}),a.jsxs("div",{className:"flex justify-between text-white text-sm",children:[a.jsx("span",{className:"text-gray-300",children:"Cravings Resisted:"}),a.jsxs("span",{className:"font-bold text-blue-400 flex items-center gap-1",children:[t.stats.cravingsResisted||0,a.jsx("span",{className:"text-xs",children:""})]})]})]}),t.achievements&&t.achievements.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[t.achievements.slice(0,4).map((S,k)=>{var R,T;const C=((R=ey[S])==null?void 0:R.icon)||vx;return a.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center shadow-lg",title:(T=ey[S])==null?void 0:T.description,children:a.jsx(C,{className:"w-3 h-3 text-white"})},k)}),t.achievements.length>4&&a.jsxs("div",{className:"w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:["+",t.achievements.length-4]})]})]}),a.jsx(LA,{isOpen:i,onClose:()=>o(!1),statType:l})]})},MA=({activeTab:t,onTabChange:e,dataLoadingState:n,onRefreshData:r,offlineManager:s})=>{const i=[{id:"arena",label:"Arena",icon:kA},{id:"craving-support",label:"Craving Support",icon:Ho},{id:"profile",label:"Profile",icon:wx},{id:"buddy-chat",label:"Chat with Buddy",icon:RA},{id:"settings",label:"Explore",icon:yx}];return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-slate-700/90 backdrop-blur-sm border-t border-slate-600 px-4 py-2 z-30",children:a.jsxs("div",{className:"flex justify-center items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-green-400",children:""}),a.jsx("span",{className:"text-white",children:"Session Active"}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-gray-300",children:"30 days persistence"}),n&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:""}),n.isComplete?a.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsx("span",{children:"Synced"})]}):n.error?a.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsx("span",{children:"Sync Error"})]}):a.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsx("span",{children:"Syncing..."})]}),n.isComplete&&a.jsx("button",{onClick:r,className:"ml-2 px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:"Refresh data from server",children:""})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:""}),s.isOnline?a.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsx("span",{children:"Online"})]}):a.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsx("span",{children:"Offline"})]}),s.syncQueue.length>0&&a.jsxs("span",{className:"text-blue-400 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsxs("span",{children:[s.syncQueue.length," pending"]})]})]})]})}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-800 border-t border-slate-700 px-4 py-2 z-40",children:a.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:i.map(o=>{const l=o.icon,c=t===o.id;return a.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center transition-colors ${c?"text-blue-400":"text-gray-400 hover:text-blue-300"}`,children:[a.jsx(l,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs",children:o.label})]},o.id)})})})]})},FA=({user:t,nemesis:e,onBackToLogin:n,onResetForTesting:r,buddyLoading:s,buddyError:i,onRefreshBuddy:o,onAutoMatch:l,realBuddy:c})=>{const[u,d]=N.useState(!1),[h,f]=N.useState(null);N.useEffect(()=>{c&&console.log(" Arena: Real buddy loaded:",c.heroName)},[c]),N.useEffect(()=>{if(t!=null&&t.uid&&!c&&!s&&o)try{o()}catch(x){console.error("Error loading buddy in Arena:",x)}},[t==null?void 0:t.uid]);const g=async()=>{h&&await h.handleAchievementShare()},v=async x=>{const I={...x.stats};if(!(x!=null&&x.uid)){const M=localStorage.getItem("quitCoachRelapseDate");if(M){const ce=new Date(M),W=new Date().getTime()-ce.getTime(),H=Math.floor(W/(1e3*3600*24));I.streakDays=H}else{const ce=x.quitDate?new Date(x.quitDate):new Date,W=new Date().getTime()-ce.getTime();I.streakDays=Math.floor(W/(1e3*3600*24))}const B=parseInt(localStorage.getItem("cravingWins")||0);I.cravingsResisted=B,new Date().toDateString();let q=0;for(let ce=0;ce<7;ce++){const P=new Date;P.setDate(P.getDate()-ce);const W=P.toDateString(),H=localStorage.getItem(`water_${W}`);if(H&&parseInt(H)>0)q++;else break}return q>=3&&(I.mentalStrength=Math.min(80,(I.mentalStrength||50)+1)),I}try{const{ref:M,get:B}=await be(()=>import("./index.esm-aea0f173.js"),[]),q=M(V,`users/${x.uid}/profile/relapseDate`),ce=await B(q);if(ce.exists()){const ee=new Date(ce.val()),ze=new Date().getTime()-ee.getTime(),te=Math.floor(ze/(1e3*3600*24));I.streakDays=te}else{const ee=x.quitDate?new Date(x.quitDate):new Date,ze=new Date().getTime()-ee.getTime();I.streakDays=Math.floor(ze/(1e3*3600*24))}const P=M(V,`users/${x.uid}/profile/cravingsResisted`),W=await B(P);I.cravingsResisted=W.exists()?W.val():0;const H=new Date().toDateString();let re=0;for(let ee=0;ee<7;ee++){const ct=new Date;ct.setDate(ct.getDate()-ee);const ze=ct.toDateString(),te=M(V,`users/${x.uid}/profile/daily/${ze}/water`),he=await B(te);if(he.exists()&&he.val()>0)re++;else break}re>=3&&(I.mentalStrength=Math.min(80,(I.mentalStrength||50)+1))}catch(M){console.error("Error fetching profile data from Firebase:",M);const B=localStorage.getItem("quitCoachRelapseDate");if(B){const P=new Date(B),H=new Date().getTime()-P.getTime(),re=Math.floor(H/(1e3*3600*24));I.streakDays=re}else{const P=x.quitDate?new Date(x.quitDate):new Date,H=new Date().getTime()-P.getTime();I.streakDays=Math.floor(H/(1e3*3600*24))}const q=parseInt(localStorage.getItem("cravingWins")||0);I.cravingsResisted=q,new Date().toDateString();let ce=0;for(let P=0;P<7;P++){const W=new Date;W.setDate(W.getDate()-P);const H=W.toDateString(),re=localStorage.getItem(`water_${H}`);if(re&&parseInt(re)>0)ce++;else break}ce>=3&&(I.mentalStrength=Math.min(80,(I.mentalStrength||50)+1))}return I},[w,L]=N.useState({...t==null?void 0:t.stats}),[m,p]=N.useState({...e==null?void 0:e.stats});N.useEffect(()=>{if(!(t!=null&&t.uid))return;const x=async()=>{try{const B=new xp(V,t.uid);await B.initialize(),f(B)}catch(B){console.error("Error initializing StatManager:",B)}},I=async()=>{try{const B=new xA(V);setBuddyMatchingService(B),console.log(" BuddyMatchingService initialized successfully")}catch(B){console.error("Error initializing BuddyMatchingService:",B)}};x(),I(),(async()=>{if(t){const B=await v(t);L(B)}if(e){const B=await v(e);p(B)}})()},[t,e]);const y=x=>{const I=x.stats.mentalStrength||50,M=x.stats.motivation||50,B=x.stats.triggerDefense||30,q=x.stats.addictionLevel||50;return I*1.5+M*1+B*1.2-q*1},S=y({...t,stats:w}),k=y({...e,stats:m}),C=S>k?"WINNING":S===k?"TIED":"LOSING",R=()=>{if(C==="WINNING")return null;const x=k-S+1,I=[],M=w.mentalStrength||50,B=w.motivation||50,q=w.triggerDefense||30,ce=w.addictionLevel||50,P=m.mentalStrength||50,W=m.motivation||50;m.triggerDefense;const H=m.addictionLevel||50,re=P-M,ee=W-B,ct=ce-H,ze=[{name:"Mental Strength",multiplier:1.5,gap:re,current:M,max:100},{name:"Trigger Defense",multiplier:1.2,gap:ee,current:q,max:100},{name:"Motivation",multiplier:1,gap:ee,current:B,max:100},{name:"Addiction",multiplier:1,gap:ct,current:ce,min:0,isReduction:!0}];if(ze.sort((te,he)=>te.multiplier!==he.multiplier?he.multiplier-te.multiplier:Math.abs(he.gap)-Math.abs(te.gap)),ze.forEach(te=>{if(te.isReduction){const he=Math.min(te.current-te.min,50),ut=he*te.multiplier;ut>0&&I.push({stat:te.name,change:he,action:T(he),priority:ut,canWin:ut>=x,isReduction:!0,efficiency:te.multiplier,gap:te.gap})}else{const he=Math.min(te.max-te.current,50),ut=he*te.multiplier;ut>0&&I.push({stat:te.name,change:he,action:j(te.name,he),priority:ut,canWin:ut>=x,efficiency:te.multiplier,gap:te.gap})}}),I.sort((te,he)=>he.priority-te.priority),I.length>0&&!I.some(te=>te.canWin)){const te=_(I,x);te&&I.unshift(te)}return I.slice(0,3)},T=x=>x>=30?"Stay completely clean, avoid all triggers, use nicotine replacement therapy":x>=20?"Reduce nicotine intake significantly, avoid high-risk situations":x>=10?"Cut back on vaping frequency, identify and avoid main triggers":"Small reduction in nicotine intake, practice trigger avoidance",j=(x,I)=>{switch(x){case"Mental Strength":return I>=30?"Complete daily breathing exercises, stay hydrated for 3+ days, practice meditation":I>=20?"Complete breathing exercises 3 days straight, stay hydrated, use stress management":"Complete breathing exercises, stay hydrated for 3 days straight";case"Motivation":return I>=30?"Log progress daily, share achievements weekly, track money saved milestones":I>=20?"Log progress 5+ days per week, share achievements, track progress":"Regular logging (3+ days per week), share achievements, reach milestones";case"Trigger Defense":return I>=30?"Survive multiple trigger situations, pre-plan for all triggers, update trigger list":I>=20?"Survive trigger situations, pre-plan for known triggers, practice coping":"Survive trigger situations without vaping, pre-plan for known triggers";default:return"Focus on improving this stat through consistent practice"}},_=(x,I)=>{let M=0;const B=[];for(const q of x){if(M>=I)break;const ce=I-M,P=Math.min(q.priority,ce);P>0&&(B.push({stat:q.stat,change:Math.ceil(P/q.efficiency),contribution:P}),M+=P)}return B.length>0?{stat:"Combination Strategy",change:Math.ceil(I),action:`Focus on: ${B.map(q=>`${q.stat} (+${q.change})`).join(", ")}`,priority:M,canWin:M>=I,isCombination:!0,strategy:B}:null},E=R();return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[a.jsxs("div",{className:"flex justify-start mb-6 gap-3",children:[a.jsx("button",{onClick:n,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",children:" Back to Login"}),!1]}),a.jsx("div",{className:"text-center mb-8",children:a.jsxs("div",{className:"inline-flex items-center gap-4",children:[a.jsxs("div",{className:`inline-flex items-center px-6 py-3 rounded-full font-bold text-lg shadow-xl ${C==="WINNING"?"bg-green-600":C==="TIED"?"bg-yellow-600":"bg-red-600"} text-white`,children:[C==="WINNING"?a.jsx(_x,{className:"w-5 h-5 mr-2"}):C==="TIED"?a.jsx(Ho,{className:"w-5 h-5 mr-2"}):a.jsx("span",{className:"mr-2",children:""}),"You are ",C]}),a.jsx("button",{onClick:()=>d(!0),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg",title:"Battle Algorithm Info",children:a.jsx("span",{className:"text-lg font-bold",children:"i"})})]})}),a.jsxs("div",{className:"flex justify-center gap-12 mb-6",children:[a.jsx("div",{className:"w-80 text-center",children:a.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-sm shadow-lg ${C==="WINNING"?"bg-green-600":C==="TIED"?"bg-yellow-600":"bg-red-600"} text-white`,children:C==="WINNING"?"WINNING":C==="TIED"?"TIED":"LOSING"})}),a.jsx("div",{className:"w-24"})," ",a.jsx("div",{className:"w-80 text-center",children:a.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-sm shadow-lg ${C==="WINNING"?"bg-red-600":C==="TIED"?"bg-yellow-600":"bg-green-600"} text-white`,children:C==="WINNING"?"LOSING":C==="TIED"?"TIED":"WINNING"})})]}),a.jsxs("div",{className:"flex flex-row items-center justify-center gap-12 mb-8 w-full max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:a.jsx(ty,{user:{...t,stats:w},showComparison:!1,nemesisUser:e})}),a.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-red-500 to-purple-600 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:a.jsx(AA,{className:"w-12 h-12 text-white"})}),a.jsx("div",{className:"bg-red-600 px-8 py-3 rounded-full",children:a.jsx("p",{className:"text-white font-bold text-2xl",children:"VS"})})]}),a.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:[e.isEmpty&&!c&&a.jsx("div",{className:"mb-2 text-center",children:a.jsxs("div",{className:"bg-slate-600/20 border border-slate-500/50 rounded-lg px-4 py-2",children:[a.jsx("p",{className:"text-slate-400 text-sm font-semibold",children:" Looking for Buddy"}),a.jsx("p",{className:"text-slate-300 text-xs",children:"We are searching for a suitable match"})]})}),s&&a.jsx("div",{className:"mb-2 text-center",children:a.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-500/50 rounded-lg px-4 py-2",children:[a.jsx("p",{className:"text-yellow-400 text-sm font-semibold",children:" Loading Buddy..."}),a.jsx("p",{className:"text-yellow-300 text-xs",children:"Please wait while we find your match"})]})}),i&&a.jsxs("div",{className:"mb-2 text-center",children:[a.jsxs("div",{className:"bg-red-600/20 border border-red-500/50 rounded-lg px-4 py-2 mb-2",children:[a.jsx("p",{className:"text-red-400 text-sm font-semibold",children:" Error Loading Buddy"}),a.jsx("p",{className:"text-red-300 text-xs",children:i})]}),a.jsx("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Retry"})]}),c&&a.jsx("div",{className:"mb-2 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/50 rounded-lg px-4 py-2",children:[a.jsx("p",{className:"text-green-400 text-sm font-semibold",children:" Connected with Buddy"}),a.jsxs("p",{className:"text-green-300 text-xs",children:["You're battling ",c.heroName,"!"]})]})}),a.jsx(ty,{user:c||e,isNemesis:!0,showComparison:!1,nemesisUser:t})]})]}),C==="LOSING"&&E&&E.length>0&&a.jsxs("div",{className:"max-w-4xl mx-auto bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:" Quick Win Strategy"}),a.jsx("div",{className:"space-y-4",children:E.slice(0,3).map((x,I)=>a.jsx("div",{className:"bg-slate-700/50 rounded-lg p-4 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:x.isReduction?a.jsxs(a.Fragment,{children:[" Reduce your ",x.stat," by ",x.change," points!"]}):x.isCombination?a.jsxs(a.Fragment,{children:[" Best Strategy: Improve multiple stats by ",x.change," total points!"]}):x.isMajor?a.jsxs(a.Fragment,{children:[" Major improvement needed: ",x.change," total points!"]}):a.jsxs(a.Fragment,{children:[" Increase your ",x.stat," by ",x.change," points!"]})}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[" ",x.action]})]}),a.jsxs("div",{className:`font-bold text-2xl ml-4 ${x.isReduction?"text-green-400":x.isCombination?"text-purple-400":x.isMajor?"text-orange-400":"text-blue-400"}`,children:[x.isReduction?"-":"+",x.change]})]})},I))}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("p",{className:"text-gray-400 text-sm",children:"Focus on the top recommendation for the fastest path to victory!"})})]})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-600",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Battle Algorithm"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:g,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm transition-colors",title:"Share achievement for Motivation bonus",children:" Share"}),a.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]})]}),a.jsxs("div",{className:"space-y-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:"Formula:"}),a.jsx("p",{className:"text-gray-300 font-mono",children:"(Mental Strength  1.5) + (Motivation  1.0) + (Trigger Defense  1.2) - (Addiction  1.0)"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:"Your Score:"}),a.jsxs("p",{className:"text-green-400 font-mono",children:["(",w.mentalStrength||50,"  1.5) + (",w.motivation||50,"  1.0) + (",w.triggerDefense||30,"  1.2) - (",w.addictionLevel||50,"  1.0) = ",S.toFixed(1)]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:"Nemesis Score:"}),a.jsxs("p",{className:"text-red-400 font-mono",children:["(",m.mentalStrength||50,"  1.5) + (",m.motivation||50,"  1.0) + (",m.triggerDefense||30,"  1.2) - (",m.addictionLevel||50,"  1.0) = ",k.toFixed(1)]})]}),a.jsx("div",{className:"bg-slate-700/50 rounded-lg p-3",children:a.jsxs("p",{className:"text-gray-300 text-xs",children:[a.jsx("strong",{children:"Mental Strength (1.5):"})," Your resilience and coping ability",a.jsx("br",{}),a.jsx("strong",{children:"Motivation (1.0):"})," Your drive to quit",a.jsx("br",{}),a.jsx("strong",{children:"Trigger Defense (1.2):"})," Your ability to resist triggers",a.jsx("br",{}),a.jsx("strong",{children:"Addiction (1.0):"})," Your nicotine dependence level"]})})]})]})})]})},UA=({isOpen:t,onClose:e,title:n,message:r,type:s="info"})=>{if(!t)return null;const i=()=>{switch(s){case"success":return"";case"warning":return"";case"info":return"";default:return""}},o=()=>{switch(s){case"success":return"from-green-600 to-green-700";case"warning":return"from-yellow-600 to-yellow-700";case"info":return"from-blue-600 to-blue-700";default:return"from-slate-600 to-slate-700"}};return a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full border border-slate-600 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-600 to-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:i()})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:n}),a.jsx("div",{className:"text-gray-300 mb-6 whitespace-pre-line text-sm leading-relaxed",children:r}),a.jsx("button",{onClick:e,className:`w-full bg-gradient-to-r ${o()} hover:from-slate-700 hover:to-slate-800 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105`,children:"Got it"})]})})})},$A=({gameType:t,onClose:e})=>{N.useState(0);const[n,r]=N.useState(!1),s=()=>r(!n),i=()=>{const c=N.useRef(null),[u,d]=N.useState([{x:7,y:7}]),[h,f]=N.useState({x:1,y:0}),[g,v]=N.useState({x:1,y:0}),[w,L]=N.useState({x:10,y:10}),[m,p]=N.useState(!1),[y,S]=N.useState(0),[k,C]=N.useState(1),R={1:160,2:Math.round(160/1.25),3:Math.round(160/1.25/1.25)},T={1:2,2:5,3:10};return N.useEffect(()=>{const j=_=>{if(m){_.preventDefault(),d([{x:7,y:7}]),f({x:1,y:0}),v({x:1,y:0}),L({x:10,y:10}),p(!1),S(0),C(1);return}switch(_.key){case"ArrowUp":_.preventDefault(),h.y!==1&&v({x:0,y:-1});break;case"ArrowDown":_.preventDefault(),h.y!==-1&&v({x:0,y:1});break;case"ArrowLeft":_.preventDefault(),h.x!==1&&v({x:-1,y:0});break;case"ArrowRight":_.preventDefault(),h.x!==-1&&v({x:1,y:0});break}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[h,m]),N.useEffect(()=>{if(n||m)return;const j=setInterval(()=>{d(_=>{const E={x:_[0].x+h.x,y:_[0].y+h.y};if(E.x<0&&(E.x=14),E.x>=15&&(E.x=0),E.y<0&&(E.y=14),E.y>=15&&(E.y=0),_.slice(0,-1).some(B=>B.x===E.x&&B.y===E.y))return p(!0),_;const I=E.x===w.x&&E.y===w.y;let M;return I?(S(B=>B+T[k]),L({x:Math.floor(Math.random()*15),y:Math.floor(Math.random()*15)}),M=[E,..._]):M=[E,..._.slice(0,-1)],(g.x!==h.x||g.y!==h.y)&&setTimeout(()=>{f(g)},0),M})},R[k]);return()=>clearInterval(j)},[h,g,w,n,m]),N.useEffect(()=>{const j=c.current;if(!j)return;const _=j.getContext("2d"),E=20,x=15;_.fillStyle="#1f2937",_.fillRect(0,0,300,300),_.strokeStyle="#374151",_.lineWidth=1;for(let I=0;I<=x;I++)_.beginPath(),_.moveTo(I*E,0),_.lineTo(I*E,300),_.stroke(),_.beginPath(),_.moveTo(0,I*E),_.lineTo(300,I*E),_.stroke();u.forEach((I,M)=>{M===0?_.fillStyle="#fbbf24":_.fillStyle="#10b981",_.fillRect(I.x*E+1,I.y*E+1,E-2,E-2)}),_.fillStyle="#ef4444",_.fillRect(w.x*E+2,w.y*E+2,E-4,E-4)},[u,w]),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[a.jsx("span",{className:"text-white mr-2 text-sm",children:"Level:"}),[1,2,3].map(j=>a.jsxs("button",{onClick:()=>C(j),className:`
                  px-4 py-2 text-sm font-mono border-2 border-green-500 transition-all
                  ${k===j?"bg-green-500 text-black":"bg-green-900 text-green-400"}
                  hover:bg-green-600 cursor-pointer
                `,style:{minWidth:"80px"},children:[a.jsxs("div",{children:["Level ",j]}),a.jsxs("div",{className:"text-xs mt-1",children:[j===1&&"Normal",j===2&&"Fast",j===3&&"Insane"]})]},j))]}),a.jsxs("div",{className:"text-center text-yellow-400 text-xs mb-3",children:[a.jsxs("div",{children:["Speed: ",R[k],"ms | Points: ",T[k]," per food"]}),k===1&&"Good for beginners",k===2&&"For experienced players",k===3&&"Ultimate challenge"]})]}),a.jsx("canvas",{ref:c,width:"300",height:"300",className:"border-2 border-gray-300 mx-auto",style:{imageRendering:"pixelated"}}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Score: ",y," | Level: ",k]}),a.jsxs("div",{className:"flex justify-center gap-4 mb-2 text-sm",children:[a.jsxs("div",{className:"text-gray-600",children:[a.jsx("span",{className:"font-semibold",children:"Current:"}),h.x===1&&"",h.x===-1&&"",h.y===1&&"",h.y===-1&&""]}),g.x!==h.x||g.y!==h.y?a.jsxs("div",{className:"text-blue-600",children:[a.jsx("span",{className:"font-semibold",children:"Next:"}),g.x===1&&"",g.x===-1&&"",g.y===1&&"",g.y===-1&&""]}):null]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Use arrow keys to control the snake"}),m&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-red-600 font-bold mb-2",children:"Game Over!"}),a.jsx("button",{onClick:()=>{d([{x:7,y:7}]),f({x:1,y:0}),v({x:1,y:0}),L({x:10,y:10}),p(!1),S(0),C(1)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Restart Game"})]})]})]})},o=()=>{const[c,u]=N.useState(0),[d,h]=N.useState(0),[f]=N.useState(Date.now()),g=()=>{u(v=>v+1)};return N.useEffect(()=>{const v=(Date.now()-f)/1e3;v>0&&h((c/v).toFixed(1))},[c,f]),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Click as Fast as You Can!"}),a.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:["Total Clicks: ",c]}),a.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:["Clicks/Second: ",d]}),a.jsx("button",{onClick:g,className:"w-48 h-48 text-2xl font-bold bg-orange-500 hover:bg-orange-600 border-none rounded-full text-white cursor-pointer transition-colors shadow-lg",children:"CLICK ME!"}),a.jsx("div",{className:"mt-4 text-sm text-gray-600",children:"Challenge: Try to reach 500 clicks!"})]})},l=()=>{try{switch(t){case"snake":return a.jsx(i,{});case"click-counter":return a.jsx(o,{});default:return a.jsx("div",{children:"Game not found"})}}catch(c){return console.error("Error rendering game:",c),a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx("p",{className:"text-lg font-bold mb-2",children:" Game Error"}),a.jsx("p",{className:"text-sm",children:"Something went wrong loading the game."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm",children:"Reload Game"})]})}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[t==="snake"&&" Snake Game",t==="puzzle"&&" Memory Puzzle"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:s,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",children:n?"Resume":"Pause"}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]})]}),a.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 min-h-[500px] flex items-center justify-center relative",children:[l(),a.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white p-2 rounded text-xs max-w-48",children:[a.jsx("p",{className:"font-bold mb-1",children:"Controls:"}),t==="snake"&&a.jsx("p",{children:"Arrow keys to move"}),t==="click-counter"&&a.jsx("p",{children:"Click the button rapidly!"})]}),a.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white p-2 rounded text-xs",children:[a.jsx("p",{className:"font-bold mb-1",children:"Status:"}),a.jsx("p",{children:n?" Paused":" Playing"})]})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Games now run without time limits - play as long as you need!"})})]})})},VA=({user:t,nemesis:e,onBackToLogin:n,onResetForTesting:r})=>{const[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState(!1),[f,g]=N.useState({title:"",message:"",type:"info"}),[v,w]=N.useState(0),[L,m]=N.useState(null);N.useEffect(()=>{if(!(t!=null&&t.uid))return;(async()=>{try{const j=new xp(V,t.uid);await j.initialize(),m(j)}catch(j){console.error("Error initializing StatManager:",j)}})(),(async()=>{try{const{ref:j,get:_,onValue:E}=await be(()=>import("./index.esm-aea0f173.js"),[]),x=j(V,`users/${t.uid}/profile/cravingsResisted`),I=await _(x);if(I.exists())w(I.val()||0);else{const B=parseInt(localStorage.getItem("cravingWins")||0);w(B)}return E(x,B=>{B.exists()&&w(B.val()||0)})}catch(j){console.error("Error loading cravings resisted from Firebase:",j);const _=parseInt(localStorage.getItem("cravingWins")||0);w(_)}})()},[t==null?void 0:t.uid]);const p=()=>{console.log("SOS sent to nemesis:",e.heroName);const R={timestamp:new Date().toISOString(),nemesis:e.heroName,status:"sent"};localStorage.setItem("lastSOS",JSON.stringify(R)),l(!0),setTimeout(()=>l(!1),5e3),L&&L.trackAppUsageDuringCravings()},y=R=>{u(R),i(!0)},S=()=>{u(null),i(!1)},k=async()=>{try{const R=v;if(localStorage.setItem("cravingWins",R+1),t&&t.uid){const{ref:T,set:j}=await be(()=>import("./index.esm-aea0f173.js"),[]),_=T(V,`users/${t.uid}/profile/cravingsResisted`);await j(_,R+1),w(R+1),console.log("Cravings resisted updated in profile:",R+1)}L&&await L.handleCravingResistance(),g({title:"Congratulations!",message:` Great job resisting that craving!

Every trigger survival increases:
 Mental Strength +1 point
 Trigger Defense +3 points

Keep up the amazing work!`,type:"success"}),h(!0)}catch(R){console.error("Error updating stats:",R),g({title:"Congratulations!",message:` Great job resisting that craving!

Your progress has been recorded locally.

Keep up the amazing work!`,type:"success"}),h(!0)}},C=(R,T)=>{g({title:R,message:T,type:"info"}),h(!0)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:a.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex justify-start gap-3",children:[a.jsx("button",{onClick:n,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",children:" Back to Login"}),!1]})}),a.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border-2 border-red-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Need Immediate Help?"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Press the SOS button to alert your nemesis and get instant support"}),a.jsx("button",{onClick:p,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-6 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:" SOS - Get Help Now"}),(()=>{const R=localStorage.getItem("lastSOS");if(R){const T=JSON.parse(R),j=Math.floor((Date.now()-new Date(T.timestamp))/(1e3*60));return a.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:a.jsxs("p",{className:"text-sm text-red-600",children:["Last SOS sent ",j," minutes ago to ",T.nemesis]})})}return null})()]})}),a.jsx("div",{className:"bg-slate-800/50 rounded-xl p-6 mb-6 border border-slate-600",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Distract Yourself"}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsx("button",{onClick:()=>y("snake"),className:"w-full bg-gradient-to-r from-orange-500/20 to-orange-600/20 hover:from-orange-500/30 hover:to-orange-600/30 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 border border-orange-500/30",children:" Play Snake"}),a.jsx("button",{onClick:()=>y("click-counter"),className:"w-full bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 border border-blue-500/30",children:" Click Counter"})]})]})}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-600",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:" Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>C(" Drink Water",`Hydration helps reduce cravings!

Drink a full glass of water slowly.

This will help you feel full and reduce the urge to vape.`),className:"bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-blue-500/30 hover:scale-105",children:" Drink Water"}),a.jsx("button",{onClick:()=>C(" Breathe",`Take 3 deep breaths:

1. Inhale for 4 seconds
2. Hold for 4 seconds
3. Exhale for 4 seconds

Repeat 3 times`),className:"bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-blue-500/30 hover:scale-105",children:" Breathe"}),a.jsx("button",{onClick:()=>C(" Walk",`Take a 5-minute walk:

Physical activity releases endorphins that can help reduce cravings.

Walk around your room or step outside if possible.`),className:"bg-gradient-to-r from-purple-500/20 to-purple-600/20 hover:from-purple-500/30 hover:to-purple-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-purple-500/30 hover:scale-105",children:" Walk"}),a.jsx("button",{onClick:()=>C(" Meditate",`Quick Meditation:

1. Close your eyes
2. Focus on your breath
3. Count to 10 slowly
4. Repeat 3 times

This helps calm your mind and reduce stress.`),className:"bg-gradient-to-r from-green-500/20 to-green-600/20 hover:from-green-500/30 hover:to-green-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-green-500/30 hover:scale-105",children:" Meditate"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-green-600 mb-2",children:"Help is on the way!"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Your nemesis ",a.jsx("strong",{children:e.heroName})," has been notified and will reach out soon."]}),a.jsx("button",{onClick:()=>l(!1),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Got it"})]})}),s&&c&&a.jsx($A,{gameType:c,onClose:S}),a.jsx(UA,{isOpen:d,onClose:()=>h(!1),title:f.title,message:f.message,type:f.type}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-600 mt-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:" Cravings Resisted"}),a.jsxs("div",{className:"text-center p-6 bg-slate-700/50 rounded-lg border border-slate-500/30",children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("p",{className:"text-lg font-bold text-white mb-2",children:"Total Wins"}),a.jsx("p",{className:"text-3xl font-bold text-green-400 mb-3",children:v}),a.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Times you successfully resisted cravings"}),a.jsx("button",{onClick:k,className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:" I Resisted a Craving!"})]})]})]})})},BA=({user:t,onNavigate:e})=>{var pa;const[n,r]=N.useState(null),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[v,w]=N.useState(null),[L,m]=N.useState(0),[p,y]=N.useState(null),[S,k]=N.useState(!1),[C,R]=N.useState([]),[T,j]=N.useState(null);N.useEffect(()=>{if(!(t!=null&&t.uid))return;(async()=>{try{const K=new xp(V,t.uid);await K.initialize(),j(K)}catch(K){console.error("Error initializing StatManager:",K)}})();const Y=async()=>{try{const{ref:K,get:fe,onValue:He}=await be(()=>import("./index.esm-aea0f173.js"),[]),vt=K(V,`users/${t.uid}/profile/relapseDate`),Tt=await fe(vt);Tt.exists()&&r(new Date(Tt.val()));const Ln=K(V,`users/${t.uid}/profile/scheduledTriggers`),Ge=await fe(Ln);Ge.exists()&&R(Ge.val());const Qe=new Date().toDateString(),Jt=K(V,`users/${t.uid}/profile/daily/${Qe}/water`),kt=He(Jt,Ft=>{Ft.exists()&&m(Ft.val()||0)}),Gc=K(V,`users/${t.uid}/profile/daily/${Qe}/mood`),qc=He(Gc,Ft=>{Ft.exists()&&y(Ft.val())}),ma=K(V,`users/${t.uid}/profile/daily/${Qe}/breathing`),ga=He(ma,Ft=>{Ft.exists()&&k(Ft.val()||!1)}),Kc=K(V,`users/${t.uid}/profile/scheduledTriggers`),Yc=He(Kc,Ft=>{Ft.exists()&&R(Ft.val()||[])});return()=>{kt(),qc(),ga(),Yc()}}catch(K){console.error("Error loading profile data from Firebase:",K),xe()}},xe=()=>{const K=localStorage.getItem("quitCoachRelapseDate");K&&r(new Date(K));const fe=new Date().toDateString(),He=localStorage.getItem(`water_${fe}`),vt=localStorage.getItem(`mood_${fe}`),Tt=localStorage.getItem(`breathing_${fe}`);He&&m(parseInt(He)),vt&&y(JSON.parse(vt)),Tt&&k(Tt==="true");const Ln=localStorage.getItem("scheduledTriggers");Ln&&R(JSON.parse(Ln))};Y()},[t==null?void 0:t.uid]),N.useEffect(()=>{T&&T.trackLoggingActivity()},[T]),N.useEffect(()=>{if(!(t!=null&&t.uid))return;(async()=>{try{const{ref:Y,get:xe,set:K}=await be(()=>import("./index.esm-aea0f173.js"),[]),fe=Y(V,`users/${t.uid}/profile`),He=await xe(fe);if(!He.exists()||Object.keys(He.val()).length===0){console.log("Migrating localStorage data to Firebase...");const vt=localStorage.getItem("quitCoachRelapseDate");vt&&(await K(Y(V,`users/${t.uid}/profile/relapseDate`),vt),r(new Date(vt)));const Tt=parseInt(localStorage.getItem("cravingWins")||0);Tt>0&&await K(Y(V,`users/${t.uid}/profile/cravingsResisted`),Tt);for(let Ge=0;Ge<7;Ge++){const Qe=new Date;Qe.setDate(Qe.getDate()-Ge);const Jt=Qe.toDateString(),kt=localStorage.getItem(`water_${Jt}`);kt&&await K(Y(V,`users/${t.uid}/profile/daily/${Jt}/water`),parseInt(kt))}for(let Ge=0;Ge<7;Ge++){const Qe=new Date;Qe.setDate(Qe.getDate()-Ge);const Jt=Qe.toDateString(),kt=localStorage.getItem(`mood_${Jt}`);kt&&await K(Y(V,`users/${t.uid}/profile/daily/${Jt}/mood`),JSON.parse(kt))}for(let Ge=0;Ge<7;Ge++){const Qe=new Date;Qe.setDate(Qe.getDate()-Ge);const Jt=Qe.toDateString(),kt=localStorage.getItem(`breathing_${Jt}`);kt&&await K(Y(V,`users/${t.uid}/profile/daily/${Jt}/breathing`),kt==="true")}const Ln=localStorage.getItem("scheduledTriggers");if(Ln){const Ge=JSON.parse(Ln);await K(Y(V,`users/${t.uid}/profile/scheduledTriggers`),Ge),R(Ge)}console.log("localStorage data migration to Firebase completed")}}catch(Y){console.error("Error migrating localStorage data to Firebase:",Y)}})()},[t==null?void 0:t.uid]);const _=()=>n&&n>((t==null?void 0:t.quitDate)||new Date(0))?n:(t==null?void 0:t.quitDate)||new Date,E=()=>{const se=new Date,Y=new Date(se);Y.setHours(24,0,0,0);const xe=Y-se,K=Math.floor(xe/(1e3*60*60)),fe=Math.floor(xe%(1e3*60*60)/(1e3*60)),He=Math.floor(xe%(1e3*60)/1e3);return{hours:K,minutes:fe,seconds:He}},[x,I]=N.useState(E()),[M,B]=N.useState(0),[q,ce]=N.useState(0),[P,W]=N.useState(0),[H,re]=N.useState(0);N.useEffect(()=>{const se=setInterval(()=>{I(E());const Y=_(),K=new Date-Y,fe=Math.floor(K/(1e3*60*60*24)),He=Math.floor(K%(1e3*60*60*24)/(1e3*60*60)),vt=Math.floor(K%(1e3*60*60)/(1e3*60)),Tt=Math.floor(K%(1e3*60)/1e3);B(fe),ce(He),W(vt),re(Tt)},1e3);return()=>clearInterval(se)},[n,t==null?void 0:t.quitDate]);const ee=async(se,Y)=>{if(!(t!=null&&t.uid))return!1;try{const{ref:xe,set:K}=await be(()=>import("./index.esm-aea0f173.js"),[]),fe=xe(V,`users/${t.uid}/profile/${se}`);return await K(fe,Y),!0}catch(xe){return console.error("Error saving to Firebase:",xe),!1}},ct=async()=>{const se=new Date;r(se),T&&await T.handleRelapse(),await ee("relapseDate",se.toISOString())||localStorage.setItem("quitCoachRelapseDate",se.toISOString())},te=(()=>{const se=new Date,Y=se.getDay(),xe=Y===0?6:Y-1,K=[{name:"Mon",color:"bg-slate-700"},{name:"Tue",color:"bg-slate-700"},{name:"Wed",color:"bg-slate-700"},{name:"Thu",color:"bg-slate-700"},{name:"Fri",color:"bg-slate-700"},{name:"Sat",color:"bg-slate-700"},{name:"Sun",color:"bg-slate-700"}];for(let fe=0;fe<=xe;fe++)K[fe].color="bg-green-500";return n&&n.toDateString()===se.toDateString()&&(K[xe].color="bg-red-500"),K})(),he=async se=>{m(se);const Y=new Date().toDateString();T&&await T.handleHydrationUpdate(se),await ee(`daily/${Y}/water`,se)||localStorage.setItem(`water_${Y}`,se.toString()),i(!1)},ut=async se=>{y(se);const Y=new Date().toDateString();await ee(`daily/${Y}/mood`,se)||localStorage.setItem(`mood_${Y}`,JSON.stringify(se)),u(!1)},Hc=async()=>{k(!0);const se=new Date().toDateString();T&&await T.handleBreathingExercise(),await ee(`daily/${se}/breathing`,!0)||localStorage.setItem(`breathing_${se}`,"true"),l(!1)},fa=async(se,Y,xe)=>{const K={day:se,triggerType:Y,time:xe,id:Date.now()},fe=[...C,K];R(fe),T&&await T.handleTriggerPlanning(),await ee("scheduledTriggers",fe)||localStorage.setItem("scheduledTriggers",JSON.stringify(fe)),h(!1)},Sp=async()=>{T&&await T.handleTriggerListUpdate()};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 pb-20",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 pt-16",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:t!=null&&t.avatar?a.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):a.jsx("span",{className:"text-white font-bold text-lg",children:t!=null&&t.heroName?t.heroName.charAt(0).toUpperCase():"H"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white text-lg",children:"Hello,"}),a.jsx("p",{className:"text-white text-2xl font-bold",children:(t==null?void 0:t.heroName)||"Hero"})]})]}),a.jsx("div",{className:"bg-yellow-500 px-3 py-1 rounded-full",children:a.jsx("span",{className:"font-bold text-slate-900",children:M})})]}),a.jsxs("div",{className:"px-4 space-y-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:ct,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-lg",children:"RELAPSE"}),a.jsx("span",{className:"text-2xl",children:""})]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Reset progress and start over"})]})}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-white text-xl font-bold",children:"My week"}),a.jsxs("div",{className:"bg-green-500 px-3 py-1 rounded-full flex items-center gap-1",children:[a.jsx("span",{className:"text-white text-sm",children:""}),a.jsx("span",{className:"text-white font-bold",children:"0"})]})]}),a.jsx("div",{className:"flex justify-between items-center mb-4",children:te.map((se,Y)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-8 h-8 rounded-full mb-1 ${se.color}`}),a.jsx("p",{className:"text-gray-400 text-xs",children:se.name})]},se.name))})]}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Remaining time for Today"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-white text-3xl font-bold",children:[x.hours.toString().padStart(2,"0"),":",x.minutes.toString().padStart(2,"0"),":",x.seconds.toString().padStart(2,"0")]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Countdown to midnight"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"My progress"}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-yellow-400 text-lg",children:""}),a.jsx("span",{className:"text-gray-300",children:"Clean for"})]}),a.jsxs("div",{className:"flex items-baseline gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white text-3xl font-bold",children:M.toString().padStart(2,"0")}),a.jsx("div",{className:"text-gray-400 text-sm",children:"days"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white text-3xl font-bold",children:q.toString().padStart(2,"0")}),a.jsx("div",{className:"text-gray-400 text-sm",children:"hours"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white text-3xl font-bold",children:P.toString().padStart(2,"0")}),a.jsx("div",{className:"text-gray-400 text-sm",children:"minutes"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white text-2xl font-bold animate-pulse",children:H.toString().padStart(2,"0")}),a.jsx("div",{className:"text-gray-400 text-sm",children:"seconds"})]})]}),n&&a.jsx("div",{className:"mt-3 text-center",children:a.jsxs("p",{className:"text-red-400 text-sm",children:["Last relapse: ",n.toLocaleDateString()," at ",n.toLocaleTimeString()]})})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Habit Tracking"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{onClick:()=>i(!0),className:"w-full bg-gradient-to-r from-blue-500/20 to-blue-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:"Stay hydrated"}),a.jsx("p",{className:"text-gray-300 text-sm",children:L>0?`${L} glasses today`:"Tap to log water intake"})]}),a.jsx("div",{className:"text-blue-400 text-2xl",children:""})]})}),a.jsx("button",{onClick:()=>l(!0),className:"w-full bg-gradient-to-r from-purple-500/20 to-purple-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:"Complete breathing exercise"}),a.jsx("p",{className:"text-gray-300 text-sm",children:S?"Completed! Stay calm!":"Tap to start 4-cycle breathing"})]}),a.jsx("div",{className:"text-purple-400 text-2xl",children:""})]})}),a.jsx("button",{onClick:()=>u(!0),className:"w-full bg-gradient-to-r from-green-500/20 to-green-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:"Mood tracking"}),a.jsx("p",{className:"text-gray-300 text-sm",children:p?`You feel ${p.name.toLowerCase()}`:"How do you feel today?"})]}),a.jsx("div",{className:"text-green-400 text-2xl",children:""})]})})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"This Week's Battle Plan"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>h(!0),className:"w-full bg-gradient-to-r from-orange-500/20 to-orange-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:"Trigger defense planning"}),a.jsx("p",{className:"text-gray-300 text-sm",children:C.length>0?`${C.length} triggers planned`:"Plan your trigger defense strategy"})]}),a.jsx("div",{className:"text-orange-400 text-2xl",children:""})]})}),a.jsx("button",{onClick:Sp,className:"w-full bg-gradient-to-r from-purple-500/20 to-purple-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:"Update trigger list"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Review and update your personal triggers for +1 Trigger Defense"})]}),a.jsx("div",{className:"text-purple-400 text-2xl",children:""})]})})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Benefits Monitor"}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-yellow-400",children:"$"}),a.jsx("span",{className:"text-gray-300 text-sm",children:"Money saved"})]}),a.jsx("div",{className:"text-white text-2xl font-bold",children:((pa=t==null?void 0:t.stats)==null?void 0:pa.moneySaved)||0}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Work in progress"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Diary"}),a.jsx("button",{onClick:()=>g(!0),className:"w-full bg-gradient-to-r from-indigo-500/20 to-indigo-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:"Monthly overview"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"View your progress and daily activities"})]}),a.jsx("div",{className:"text-indigo-400 text-2xl",children:""})]})})]})]}),a.jsx(WA,{isOpen:s,onClose:()=>i(!1),onConfirm:he,currentWater:L}),a.jsx(zA,{isOpen:o,onClose:()=>l(!1),onComplete:Hc}),a.jsx(HA,{isOpen:c,onClose:()=>u(!1),onSelect:ut,selectedMood:p}),a.jsx(GA,{isOpen:d,onClose:()=>h(!1),onSchedule:fa,scheduledTriggers:C}),a.jsx(qA,{isOpen:f,onClose:()=>g(!1),selectedDate:v,onDateSelect:w,dailyData:{water:L,mood:p,breathing:S,relapseDate:n}})]})},WA=({isOpen:t,onClose:e,onConfirm:n,currentWater:r})=>{const[s,i]=N.useState(r);return t?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Water Intake"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"How many glasses of water today?"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("input",{type:"number",min:"0",max:"20",value:s,onChange:o=>i(parseInt(o.target.value)||0),className:"w-full bg-slate-700 text-white text-center text-2xl font-bold py-4 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",placeholder:"0"}),a.jsx("p",{className:"text-gray-400 text-sm text-center mt-2",children:"0-20 glasses"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>n(s),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Confirm"})]})]})}):null},zA=({isOpen:t,onClose:e,onComplete:n})=>{const[r,s]=N.useState(1),[i,o]=N.useState("exhale"),[l,c]=N.useState(5),[u,d]=N.useState(!1);N.useEffect(()=>{if(!t||!u)return;const v=setInterval(()=>{c(w=>{if(w<=1){if(i==="exhale")o("inhale"),c(4);else if(i==="inhale")o("hold"),c(7);else if(i==="hold")if(r<4)s(L=>L+1),o("exhale"),c(5);else return d(!1),n(),0;return w}return w-1})},1e3);return()=>clearInterval(v)},[t,u,i,r,n]);const h=()=>{d(!0),s(1),o("exhale"),c(5)};if(!t)return null;const f=()=>{switch(i){case"exhale":return"Exhale, empty lungs";case"inhale":return"Inhale quietly through nose";case"hold":return"Hold your breath";default:return""}},g=()=>{switch(i){case"exhale":return"w-32 h-32";case"inhale":return"w-48 h-48";case"hold":return"w-40 h-40";default:return"w-40 h-40"}};return a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"text-center text-white",children:u?a.jsxs(a.Fragment,{children:[a.jsxs("h3",{className:"text-2xl font-bold mb-4",children:["Cycle ",r,"/4"]}),a.jsx("p",{className:"text-xl text-gray-300 mb-8",children:f()}),a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx("div",{className:`${g()} rounded-full border-4 border-blue-400 flex items-center justify-center transition-all duration-1000 ${i==="hold"?"animate-pulse":""}`,children:a.jsx("span",{className:"text-4xl font-bold",children:l})})}),a.jsx("button",{onClick:e,className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Stop"})]}):a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-3xl font-bold mb-4",children:" Breathing Exercise"}),a.jsx("p",{className:"text-xl text-gray-300 mb-6",children:"4-cycle breathing pattern"}),a.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl text-xl transition-colors",children:"Start Exercise"})]})})})},HA=({isOpen:t,onClose:e,onSelect:n,selectedMood:r})=>{const s=[{name:"Anger",icon:"",color:"bg-red-500"},{name:"Disgust",icon:"",color:"bg-orange-500"},{name:"Enjoyment",icon:"",color:"bg-yellow-500"},{name:"Calm",icon:"",color:"bg-blue-500"},{name:"Fear",icon:"",color:"bg-purple-500"},{name:"Sadness",icon:"",color:"bg-indigo-500"},{name:"Indifferent",icon:"",color:"bg-gray-500"}];return t?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" How do you feel?"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Select your current mood"})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:s.map(i=>a.jsxs("button",{onClick:()=>n(i),className:`p-4 rounded-xl text-center transition-all duration-300 hover:scale-105 ${(r==null?void 0:r.name)===i.name?"ring-2 ring-blue-400":"bg-slate-700 hover:bg-slate-600"}`,children:[a.jsx("div",{className:`w-12 h-12 ${i.color} rounded-full flex items-center justify-center text-2xl mx-auto mb-2`,children:i.icon}),a.jsx("p",{className:"text-white font-semibold",children:i.name})]},i.name))}),a.jsx("button",{onClick:e,className:"w-full bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})}):null},GA=({isOpen:t,onClose:e,onSchedule:n,scheduledTriggers:r})=>{const[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState("12:00"),d=["Social event","Drinks","High-stress event","Social pressure"],h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return t?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Trigger Defense Planning"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Schedule your trigger defense strategy"})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Day of the week"}),a.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Select a day"}),h.map(f=>a.jsx("option",{value:f,children:f},f))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Trigger type"}),a.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Select trigger type"}),d.map(f=>a.jsx("option",{value:f,children:f},f))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Time"}),a.jsx("input",{type:"time",value:c,onChange:f=>u(f.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{s&&o&&c&&n(s,o,c)},disabled:!s||!o||!c,className:"flex-1 bg-orange-600 hover:bg-orange-700 disabled:bg-slate-600 text-white font-bold py-3 rounded-lg transition-colors disabled:cursor-not-allowed",children:"Schedule"})]})]})}):null},qA=({isOpen:t,onClose:e,selectedDate:n,onDateSelect:r,dailyData:s})=>t?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Daily Summary"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Your activities and progress"})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:" Water Intake"}),a.jsxs("p",{className:"text-gray-300",children:[s.water," glasses"]})]}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:" Mood"}),a.jsx("p",{className:"text-gray-300",children:s.mood?s.mood.name:"Not logged"})]}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:" Breathing Exercise"}),a.jsx("p",{className:"text-gray-300",children:s.breathing?" Completed":" Not completed"})]}),s.relapseDate&&a.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4 border border-red-500",children:[a.jsx("h4",{className:"text-red-300 font-semibold mb-2",children:" Relapse"}),a.jsxs("p",{className:"text-red-300",children:[s.relapseDate.toLocaleDateString()," at ",s.relapseDate.toLocaleTimeString()]})]})]}),a.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Close"})]})}):null,KA=({onResetApp:t})=>a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 pb-20",children:a.jsxs("div",{className:"max-w-md mx-auto px-4 pt-16",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(yx,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-300",children:"Manage your app preferences"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[a.jsx("h3",{className:"text-white font-semibold mb-2",children:"App Data"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Reset your progress and start over"}),a.jsx("button",{onClick:t,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg transition-colors",children:"Reset App & Start Over"})]}),a.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[a.jsx("h3",{className:"text-white font-semibold mb-2",children:"About"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"QuitCard Arena v1.0.0"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Your journey to freedom starts here"})]})]})]})}),YA=({user:t,nemesis:e,buddyMatchingService:n})=>{var E;const[r,s]=N.useState([{id:1,sender:"buddy",text:"Hey! How's your quit journey going?",timestamp:new Date(Date.now()-6e4).toLocaleTimeString()},{id:2,sender:"user",text:"Going strong! Day 3 now.",timestamp:new Date(Date.now()-3e4).toLocaleTimeString()}]),[i,o]=N.useState(""),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState(!1),[g,v]=N.useState(null),[w,L]=N.useState(!1),[m,p]=N.useState(null),[y,S]=N.useState(null);N.useEffect(()=>{(async()=>{if(!(!n||!(t!=null&&t.uid)))try{console.log(" Checking for existing buddy pair...");const I=await n.getUserBuddyInfo(t.uid);if(I){console.log(" Found existing buddy pair:",I),S(I);const M=await n.getBuddyPairInfo(I.id);M&&v(M)}}catch(I){console.error("Error loading existing buddy pair:",I)}})()},[n,t==null?void 0:t.uid]);const k=()=>{if(i.trim().length===0)return;const x=i.trim().slice(0,20),I={id:Date.now(),sender:"user",text:x,timestamp:new Date().toLocaleTimeString()};s(M=>[...M,I]),o(""),c(!0),setTimeout(()=>{const M=["Keep it up! ","You're doing great!","Stay strong today!","One day at a time!","I believe in you!","You've got this!","Every day counts!","Stay focused! "],B=M[Math.floor(Math.random()*M.length)],q={id:Date.now()+1,sender:"buddy",text:B,timestamp:new Date().toLocaleTimeString()};s(ce=>[...ce,q]),c(!1)},1500)},C=x=>{x.key==="Enter"&&k()},R=async()=>{if(!n||!(t!=null&&t.uid)){p({error:!0,message:"Buddy matching service not available"});return}L(!0),p(null);try{console.log(" Searching for compatible buddies...");const x=await n.findCompatibleMatches(t.uid,5);if(x&&x.length>0){console.log(" Found compatible matches:",x);const I=x[0],M=I.compatibilityScore,B=I.matchReasons;p({success:!0,matches:x,bestMatch:I,compatibilityScore:M,matchReasons:B,message:`Found ${x.length} compatible buddy${x.length>1?"s":""}!`}),v(I)}else console.log(" No compatible matches found"),p({success:!1,message:"No compatible buddies found at the moment. Check back later!",suggestion:"Make sure your profile is complete and you're available for matching."})}catch(x){console.error(" Error finding buddy:",x),p({error:!0,message:"Failed to search for buddies. Please try again.",details:x.message})}finally{L(!1)}},T=async()=>{if(!n||!(t!=null&&t.uid)||!g){console.error("Cannot create buddy pair: missing required data");return}try{console.log(" Creating buddy pair...");const x=await n.createBuddyPair(t.uid,g.userId,{compatibilityScore:g.compatibilityScore,matchReasons:g.matchReasons,matchedAt:Date.now()});console.log(" Buddy pair created successfully:",x),S({id:x,user1:t.uid,user2:g.userId,matchedAt:Date.now()}),await n.removeFromMatchingPool(t.uid),await n.removeFromMatchingPool(g.userId),p({success:!0,message:" Buddy pair created successfully! You can now chat with your new buddy.",pairId:x})}catch(x){console.error(" Error creating buddy pair:",x),p({error:!0,message:"Failed to create buddy pair. Please try again.",details:x.message})}},j=async()=>{if(!(!n||!(t!=null&&t.uid)))try{await n.removeFromMatchingPool(t.uid),console.log(" Removed from matching pool"),p({success:!0,message:'You have been removed from the matching pool. You can rejoin anytime by clicking "Find My Buddy" again.'}),v(null)}catch(x){console.error(" Error removing from matching pool:",x)}},_=async()=>{f(!0),d(null);try{if(!n)throw new Error("BuddyMatchingService not available");console.log(" Starting Real Buddy Matching Service Test...");const x=await n.getMatchingPoolStats();if(console.log("Matching pool stats:",x),t!=null&&t.uid){const I=await n.findCompatibleMatches(t.uid,3);if(console.log(`Found ${I.length} compatible matches for current user`),I.length>0){const M=I[0];console.log("Best match:",M);const B=await n.createBuddyPair(t.uid,M.userId,{compatibilityScore:M.compatibilityScore,matchReasons:M.matchReasons,matchedAt:Date.now()});console.log("Buddy pair created with ID:",B);const q=await n.getBuddyPairInfo(B);console.log("Buddy pair info:",q),await n.removeFromMatchingPool(t.uid),await n.removeFromMatchingPool(M.userId),d({success:!0,userCount:x.totalUsers,poolStats:x,matchesFound:I.length,bestMatch:M.heroName,compatibilityScore:M.compatibilityScore,pairId:B,message:"Real buddy matching service test completed successfully!",timestamp:new Date().toLocaleTimeString()})}else d({success:!1,message:"No compatible matches found for testing",poolStats:x,timestamp:new Date().toLocaleTimeString()})}else throw new Error("No authenticated user for testing")}catch(x){console.error(" Error testing real buddy matching service:",x),d({error:!0,message:x.message,timestamp:new Date().toLocaleTimeString()})}finally{f(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:a.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:" Chat with Buddy"}),a.jsx("p",{className:"text-gray-300",children:"Stay connected with your quit buddy for support"})]}),a.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:[r.map(x=>a.jsx("div",{className:`flex ${x.sender==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-2xl ${x.sender==="user"?"bg-blue-600 text-white":"bg-slate-700 text-gray-200"}`,children:[a.jsx("div",{className:"text-sm",children:x.text}),a.jsx("div",{className:"text-xs opacity-70 mt-1",children:x.timestamp})]})},x.id)),l&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-slate-700 text-gray-200 px-4 py-2 rounded-2xl",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-sm",children:"Buddy is typing"}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),onKeyPress:C,placeholder:"Type your message (max 20 chars)...",maxLength:20,className:"flex-1 bg-slate-700 text-white px-4 py-3 rounded-xl border border-slate-600 focus:border-blue-500 focus:outline-none"}),a.jsx("button",{onClick:k,disabled:i.trim().length===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white px-6 py-3 rounded-xl transition-colors disabled:cursor-not-allowed",children:"Send"})]}),a.jsx("div",{className:"text-right mt-2",children:a.jsxs("span",{className:`text-xs ${i.length>=18?"text-yellow-400":"text-gray-400"}`,children:[i.length,"/20"]})})]}),a.jsxs("div",{className:"mt-6 bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Find Your Quit Buddy"}),a.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Connect with someone on a similar quit journey"}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:R,disabled:w||!n,className:"bg-green-600 hover:bg-green-700 disabled:bg-slate-600 text-white px-6 py-3 rounded-xl transition-colors disabled:cursor-not-allowed font-semibold",children:w?" Searching...":"Find My Buddy"}),a.jsx("button",{onClick:j,disabled:!n,className:"bg-slate-600 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-colors font-semibold",children:"Leave Pool"})]})]}),m&&a.jsx("div",{className:"mt-4 p-4 bg-slate-700 rounded-xl border border-slate-600",children:m.error?a.jsxs("div",{className:"text-red-400",children:[a.jsxs("p",{className:"font-semibold",children:[" ",m.message]}),m.details&&a.jsx("p",{className:"text-sm mt-1",children:m.details})]}):m.success&&m.bestMatch?a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-green-400",children:a.jsxs("p",{className:"font-semibold",children:[" ",m.message]})}),a.jsxs("div",{className:"bg-slate-600 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:((E=m.bestMatch.heroName)==null?void 0:E.charAt(0))||"B"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold",children:m.bestMatch.heroName||"Buddy"}),a.jsxs("p",{className:"text-gray-300 text-sm",children:["Compatibility: ",m.compatibilityScore," points"]})]})]}),m.matchReasons&&m.matchReasons.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-gray-300 text-xs mb-1",children:"Why you're a great match:"}),a.jsx("ul",{className:"text-xs text-gray-400 space-y-1",children:m.matchReasons.slice(0,3).map((x,I)=>a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-green-400 mr-2",children:""}),x]},I))})]})]}),a.jsxs("button",{onClick:T,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors font-semibold",children:[" Connect with ",m.bestMatch.heroName||"Buddy"]})]}):a.jsxs("div",{className:"text-yellow-400",children:[a.jsxs("p",{className:"font-semibold",children:[" ",m.message]}),m.suggestion&&a.jsx("p",{className:"text-sm mt-1 text-gray-300",children:m.suggestion})]})}),y?a.jsx("div",{className:"mt-4 p-4 bg-green-900/20 rounded-xl border border-green-600/50",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-green-400 font-semibold",children:"Connected with Buddy"}),a.jsx("p",{className:"text-gray-300 text-sm",children:"You can now chat and support each other!"}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Connected: ",new Date(y.matchedAt).toLocaleDateString()]})]})]})}):g?a.jsx("div",{className:"mt-4 p-4 bg-blue-900/20 rounded-xl border border-blue-600/50",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-blue-400 font-semibold",children:"Buddy Found"}),a.jsx("p",{className:"text-gray-300 text-sm",children:'Click "Connect" above to start your journey together!'})]})]})}):null]}),a.jsx("div",{className:"mt-6 bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:e.heroName.charAt(0)}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:e.heroName}),a.jsx("p",{className:"text-gray-300",children:"Your Quit Buddy"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Always here to support you"})]})]})}),a.jsxs("div",{className:"mt-6 bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Test Buddy Matching Algorithm"}),a.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Verify the matching service works correctly"}),a.jsx("button",{onClick:_,disabled:h,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-slate-600 text-white px-6 py-3 rounded-xl transition-colors disabled:cursor-not-allowed font-semibold",children:h?"Testing...":"Test Algorithm"})]}),u&&a.jsxs("div",{className:"mt-4 p-4 bg-slate-700 rounded-xl border border-slate-600",children:[a.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Testing Results:"}),u.error?a.jsxs("div",{className:"text-red-400",children:[a.jsx("p",{className:"font-semibold",children:" Test Failed:"}),a.jsx("p",{className:"text-sm",children:u.message}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Timestamp: ",u.timestamp]})]}):u.success?a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsx("p",{className:"text-green-400",children:a.jsxs("span",{className:"font-semibold",children:[" ",u.message]})}),a.jsx("p",{className:"text-blue-400",children:a.jsxs("span",{className:"font-semibold",children:["Matching Pool: ",u.userCount," users available"]})}),a.jsxs("p",{className:"text-yellow-400",children:[a.jsxs("span",{className:"font-semibold",children:["Best Match: ",u.bestMatch]}),u.compatibilityScore>0&&` (Score: ${u.compatibilityScore})`]}),u.pairId&&a.jsx("p",{className:"text-purple-400",children:a.jsxs("span",{className:"font-semibold",children:["Buddy Pair Created: ",u.pairId]})}),a.jsxs("p",{className:"text-gray-400 text-xs mt-3",children:[a.jsx("span",{className:"font-semibold",children:"Check console for detailed logs"}),a.jsx("br",{}),"Timestamp: ",u.timestamp]})]}):a.jsxs("div",{className:"text-yellow-400",children:[a.jsxs("p",{className:"font-semibold",children:[" ",u.message]}),u.poolStats&&a.jsxs("p",{className:"text-sm text-gray-300",children:["Pool Stats: ",u.poolStats.totalUsers," users, ",u.poolStats.activeUsers," active"]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Timestamp: ",u.timestamp]})]})]})]})]})})},QA=()=>{const[t,e]=N.useState("arena"),[n,r]=N.useState("auth"),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,h]=N.useState(null),[f,g]=N.useState(!0),[v,w]=N.useState({isLoading:!1,progress:0,currentStep:"",error:null,isComplete:!1}),[L,m]=N.useState([]),[p,y]=N.useState(null),S=()=>({mentalStrength:50,motivation:50,triggerDefense:30,addictionLevel:50,moneySaved:0}),k=()=>({dailyWater:0,dailyMood:null,dailyBreathing:!1,scheduledTriggers:[],relapseDate:null,cravingsResisted:0}),C=b=>{b.relapseDate&&W(new Date(b.relapseDate)),b.dailyWater!==void 0&&re(b.dailyWater),b.dailyMood!==void 0&&ct(b.dailyMood),b.dailyBreathing!==void 0&&te(b.dailyBreathing),b.scheduledTriggers&&ut(b.scheduledTriggers)},R=(b,F)=>{const U=document.createElement("div");U.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg bg-red-500 text-white max-w-sm",U.innerHTML=`
      <div class="font-bold">${b}</div>
      <div class="text-sm opacity-90">${F}</div>
      <button class="mt-2 text-sm underline" onclick="this.parentElement.remove()">Dismiss</button>
    `,document.body.appendChild(U),setTimeout(()=>{U.parentNode&&U.parentNode.removeChild(U)},1e4)},T=async b=>{if(!b)return!1;w({isLoading:!0,progress:0,currentStep:"Initializing...",error:null,isComplete:!1});try{const{ref:F,get:U,onValue:ie}=await be(()=>import("./index.esm-aea0f173.js"),[]);w(Le=>({...Le,currentStep:"Loading profile data...",progress:20}));const me=F(V,`users/${b}`),ye=await U(me);if(!ye.exists())throw new Error("User profile not found");const Ce=ye.val(),je=j(Ce);w(Le=>({...Le,currentStep:"Loading battle stats...",progress:40}));const $e=F(V,`users/${b}/stats`),dt=await U($e),Je=dt.exists()?_(dt.val()):S();w(Le=>({...Le,currentStep:"Loading habits and progress...",progress:60}));const ht=F(V,`users/${b}/profile`),or=await U(ht),un=or.exists()?E(or.val()):k();w(Le=>({...Le,currentStep:"Loading achievements...",progress:80}));const _t=F(V,`users/${b}/profile/cravingsResisted`),Ut=await U(_t),oe=Ut.exists()?Math.max(0,parseInt(Ut.val())||0):0;w(Le=>({...Le,currentStep:"Setting up live sync...",progress:90}));const Mn=ie($e,Le=>{if(Le.exists()){const Rs=_(Le.val());if(pa(Rs),n==="arena"&&o){const Ex={...o,stats:Rs};calculateRealTimeStats(Ex).then(setRealTimeUserStats)}}}),Gr=ie(ht,Le=>{if(Le.exists()){const Rs=E(Le.val());n==="profile"&&C(Rs)}}),bx=ie(_t,Le=>{if(Le.exists()){const Rs=Math.max(0,parseInt(Le.val())||0);n==="craving-support"&&fa(Rs)}});return m([Mn,Gr,bx]),w(Le=>({...Le,currentStep:"Finalizing...",progress:100})),l(Le=>({...Le,...je,stats:Je})),C(un),fa(oe),je.onboardingCompleted&&u(!0),w({isLoading:!1,progress:100,currentStep:"Data loaded successfully!",error:null,isComplete:!0}),console.log(" All user data loaded successfully:",{profile:je,stats:Je,profileData:un,cravingsResisted:oe}),!0}catch(F){return console.error(" Error loading user data:",F),w({isLoading:!1,progress:0,currentStep:"Failed to load data",error:F.message,isComplete:!1}),R("Failed to load user data",F.message),!1}},j=b=>b?{uid:b.uid||"",email:b.email||"",heroName:b.heroName||"Hero",archetype:b.archetype||"The Determined",avatar:b.avatar||dr("default"),quitDate:b.quitDate||new Date().toISOString(),onboardingCompleted:!!b.onboardingCompleted,updatedAt:b.updatedAt||Date.now(),...b}:x(),_=b=>b?{mentalStrength:Math.max(0,Math.min(100,parseInt(b.mentalStrength)||50)),motivation:Math.max(0,Math.min(100,parseInt(b.motivation)||50)),triggerDefense:Math.max(0,Math.min(100,parseInt(b.triggerDefense)||30)),addictionLevel:Math.max(0,Math.min(100,parseInt(b.addictionLevel)||50)),moneySaved:Math.max(0,parseInt(b.moneySaved)||0),...b}:S(),E=b=>b?{dailyWater:Math.max(0,parseInt(b.dailyWater)||0),dailyMood:b.dailyMood||null,dailyBreathing:!!b.dailyBreathing,scheduledTriggers:Array.isArray(b.scheduledTriggers)?b.scheduledTriggers:[],relapseDate:b.relapseDate?new Date(b.relapseDate).toISOString():null,cravingsResisted:Math.max(0,parseInt(b.cravingsResisted)||0),...b}:k(),x=()=>({uid:"",email:"",heroName:"Hero",archetype:"The Determined",avatar:dr("default"),quitDate:new Date().toISOString(),onboardingCompleted:!1,updatedAt:Date.now()});N.useEffect(()=>()=>{L.forEach(b=>{typeof b=="function"&&b()})},[L]),N.useEffect(()=>{const b=()=>{console.log(" Internet connection restored"),d!=null&&d.uid&&v.isComplete&&(console.log(" Auto-refreshing data after connection restore..."),T(d.uid))},F=()=>{console.log(" Internet connection lost"),w(U=>({...U,currentStep:"Offline mode - data will sync when connection is restored",error:"No internet connection"}))};return window.addEventListener("online",b),window.addEventListener("offline",F),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",F)}},[d==null?void 0:d.uid,v.isComplete]);const[I,M]=N.useState(null);N.useEffect(()=>{(async()=>{try{const F=(await be(()=>import("./offlineManager-282bb7ba.js"),[])).default,U=new F;M(U),window.refreshUserData=ce,console.log(" Offline manager initialized")}catch(F){console.error("Error initializing offline manager:",F)}})()},[]);const B=async b=>{if(!b)return!1;const F=await T(b);if(F&&I&&(await I.cacheUserData(o),await I.cacheProfileData({dailyWater:H,dailyMood:ee,dailyBreathing:ze,scheduledTriggers:he,relapseDate:P,cravingsResisted:Hc})),!F&&I){console.log(" Loading offline data...");const U=await I.getCachedUserData(),ie=await I.getCachedProfileData();if(U)return console.log(" Using offline user data"),l(U),u(U.onboardingCompleted),ie&&C(ie),!0}return F},q=async()=>d!=null&&d.uid?(console.log(" Refreshing user data with offline support..."),await B(d.uid)):!1,ce=async()=>{if(!(d!=null&&d.uid)){R("Cannot Refresh","No authenticated user found");return}if(console.log(" Manually refreshing user data..."),await q()){const F=document.createElement("div");F.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg bg-green-500 text-white max-w-sm",F.innerHTML=`
        <div class="font-bold"> Data Refreshed!</div>
        <div class="text-sm opacity-90">Your data has been synced across all devices</div>
        <button class="mt-2 text-sm underline" onclick="this.parentElement.remove()">Dismiss</button>
      `,document.body.appendChild(F),setTimeout(()=>{F.parentNode&&F.parentNode.removeChild(F)},5e3)}else R("Refresh Failed","Could not refresh data. Please try again.")},[P,W]=N.useState(null),[H,re]=N.useState(0),[ee,ct]=N.useState(null),[ze,te]=N.useState(!1),[he,ut]=N.useState([]),[Hc,fa]=N.useState(0),[Sp,pa]=N.useState(S());N.useEffect(()=>{const b=U=>{if(U.message&&U.message.includes("content_script")){console.warn("Browser extension error (ignored):",U.message);return}if(U.message&&(U.message.includes("FrameDoesNotExistError")||U.message.includes("background.js"))){console.warn("Background frame error (ignored):",U.message);return}console.error("Global error caught:",U)},F=U=>{if(U.reason&&U.reason.message&&U.reason.message.includes("content_script")){console.warn("Browser extension promise rejection (ignored):",U.reason.message);return}if(U.reason&&U.reason.message&&(U.reason.message.includes("FrameDoesNotExistError")||U.reason.message.includes("background.js"))){console.warn("Background frame promise rejection (ignored):",U.reason.message);return}console.error("Unhandled promise rejection:",U.reason)};return window.addEventListener("error",b),window.addEventListener("unhandledrejection",F),()=>{window.removeEventListener("error",b),window.removeEventListener("unhandledrejection",F)}},[]),N.useEffect(()=>{const b=async(F=0)=>{try{const{ref:U,set:ie,get:me,child:ye}=await be(()=>import("./index.esm-aea0f173.js"),[]),Ce=U(V),je=ye(Ce,"healthchecks/vite_dev");await ie(je,{lastRun:Date.now()});const $e=await me(je);console.log(" Firebase RTDB connected. Healthcheck exists:",$e.exists())}catch(U){if(console.error("Firebase connectivity test failed:",(U==null?void 0:U.message)||U),F<3){const ie=Math.pow(2,F)*1e3;console.log(`Retrying Firebase connection in ${ie}ms... (attempt ${F+1}/3)`),setTimeout(()=>b(F+1),ie)}else console.error("Firebase connection failed after 3 retries. Check your internet connection and Firebase configuration.")}};b()},[]),N.useEffect(()=>{let b=!0,F=null;return(async()=>{try{console.log("Initializing authentication state..."),g(!0);const{onAuthStateChanged:ie}=await be(()=>import("./index.esm-17f08e3e.js"),[]);F=ie(rs,async ye=>{if(b)if(console.log("Auth state changed:",ye?`User: ${ye.uid}`:"No user"),ye){h(ye),console.log("User authenticated, checking database for user data...");try{const{ref:Ce,get:je}=await be(()=>import("./index.esm-aea0f173.js"),[]),$e=Ce(V,`users/${ye.uid}`),dt=await je($e);if(dt.exists()){const Je=dt.val();console.log("Existing user data found - auto-login successful"),l(Je),u(!0),r("arena"),console.log("User auto-logged in and redirected to Arena")}else console.log("No user data found - new user needs onboarding"),r("onboarding")}catch(Ce){console.error("Error fetching user data during auto-login:",Ce),r("onboarding")}}else console.log("No authenticated user - showing login screen"),h(null),l(null),u(!1),r("auth")});const me=setTimeout(()=>{b&&(console.warn("Auth initialization timeout - forcing to auth screen"),g(!1),r("auth"))},1e4);F&&clearTimeout(me)}catch(ie){console.error("Error initializing authentication:",ie),b&&(g(!1),r("auth"))}finally{b&&g(!1)}})(),()=>{b=!1,F&&F()}},[]);const se=async b=>{console.log("Authentication successful, checking for existing user data...",{uid:b==null?void 0:b.uid,email:b==null?void 0:b.email});try{const{ref:F,get:U}=await be(()=>import("./index.esm-aea0f173.js"),[]);console.log("Checking database for existing user data...");const ie=F(V,`users/${b.uid}`),me=await U(ie);if(me.exists()){const ye=me.val();if(console.log("Existing user data found - loading all user data..."),await B(b.uid))console.log(" All user data loaded successfully, going to Arena"),r("arena");else{console.log(" Data loading failed, but proceeding to Arena with basic data"),l(ye);const je=!!ye.onboardingCompleted;u(je),r("arena")}}else console.log("No user data found - starting onboarding"),r("onboarding")}catch(F){console.error("Database check failed:",F),r("onboarding")}},[Y,xe]=N.useState(null),[K,fe]=N.useState(!1),[He,vt]=N.useState(null),Tt=async()=>{var b,F,U,ie,me,ye,Ce,je;if(!(o!=null&&o.uid)){console.log(" Cannot load buddy: missing user UID"),fe(!1);return}if(K){console.log(" Buddy loading already in progress, skipping...");return}fe(!0),vt(null);try{console.log(" Loading real buddy data for user:",o.uid);const{ref:$e,get:dt}=await be(()=>import("./index.esm-aea0f173.js"),[]);console.log(" Querying buddyPairs collection...");let Je=null,ht=null;const or=$e(V,"buddyPairs"),un=await dt(or);if(un.exists()){const _t=un.val();console.log(" All buddy pairs:",_t);for(const[Ut,oe]of Object.entries(_t))if(console.log(` Checking pair ${Ut}:`,oe),oe.users&&Array.isArray(oe.users)&&oe.users.includes(o.uid)){console.log(" Found buddy pair containing current user:",Ut),Je=oe,Je.pairId=Ut,ht=oe.users.find(Mn=>Mn!==o.uid),console.log(" Current user:",o.uid,"Buddy user:",ht);break}}if(Je&&ht){console.log(" Found existing buddy pair:",Je),console.log(" Buddy user ID:",ht);const _t=$e(V,`users/${ht}`),Ut=await dt(_t);if(!Ut.exists()){console.log(" Buddy user no longer exists in database, cleaning up orphaned pair");const{remove:Gr}=await be(()=>import("./index.esm-aea0f173.js"),[]);await Gr($e(V,`buddyPairs/${Je.pairId}`)),xe(null);return}const oe=Ut.val();console.log(" Loaded buddy user data:",oe);const Mn={heroName:oe.heroName||"Buddy",stats:{streakDays:((b=oe.stats)==null?void 0:b.streakDays)||0,addictionLevel:((F=oe.stats)==null?void 0:F.addictionLevel)||50,willpower:((U=oe.stats)==null?void 0:U.mentalStrength)||50,motivation:((ie=oe.stats)==null?void 0:ie.mentalStrength)||50,cravingResistance:((me=oe.stats)==null?void 0:me.mentalStrength)||50,triggerDefense:((ye=oe.stats)==null?void 0:ye.triggerDefense)||30,moneySaved:((Ce=oe.stats)==null?void 0:Ce.moneySaved)||0,experiencePoints:((je=oe.stats)==null?void 0:je.experiencePoints)||0},achievements:oe.achievements||[],archetype:oe.archetype||"The Determined",avatar:oe.avatar||dr(oe.heroName||"buddy","adventurer"),userId:ht,isRealBuddy:!0,pairId:Je.pairId};console.log(" Buddy data loaded successfully:",Mn.heroName),xe(Mn),await Ln(o.uid,ht)}else console.log(" No existing buddy pair found for user:",o.uid),xe(null)}catch($e){console.error(" Error loading real buddy:",$e),vt($e.message),xe(null)}finally{fe(!1)}},Ln=async(b,F)=>{try{console.log(" Removing users from matching pool..."),console.log("User 1:",b,"User 2:",F);const{ref:U,remove:ie,set:me}=await be(()=>import("./index.esm-aea0f173.js"),[]);await ie(U(V,`matchingPool/${b}`)),await ie(U(V,`matchingPool/${F}`)),console.log(" Removed both users from matching pool"),Y!=null&&Y.pairId&&(await me(U(V,`buddyPairs/${Y.pairId}/user1RemovedFromPool`),!0),await me(U(V,`buddyPairs/${Y.pairId}/user2RemovedFromPool`),!0),console.log(" Updated buddy pair pool removal flags"))}catch(U){console.error(" Error removing users from matching pool:",U)}},Ge=async()=>{try{console.log(" Cleaning up orphaned buddy pairs...");const{ref:b,get:F,remove:U}=await be(()=>import("./index.esm-aea0f173.js"),[]),ie=b(V,"buddyPairs"),me=await F(ie);if(!me.exists()){console.log(" No buddy pairs to clean");return}const ye=me.val();let Ce=0;for(const[je,$e]of Object.entries(ye))if($e.users&&Array.isArray($e.users)){let dt=!0;for(const Je of $e.users){const ht=b(V,`users/${Je}`);if(!(await F(ht)).exists()){dt=!1,console.log(` User ${Je} in buddy pair ${je} no longer exists`);break}}dt||(console.log(` Removing orphaned buddy pair ${je}`),await U(b(V,`buddyPairs/${je}`)),Ce++)}Ce>0?console.log(` Cleaned up ${Ce} orphaned buddy pairs`):console.log(" No orphaned buddy pairs found")}catch(b){console.error(" Error cleaning up orphaned buddy pairs:",b)}};N.useEffect(()=>{if(o!=null&&o.uid&&!Y&&!K)try{Ge().then(()=>{Tt()})}catch(b){console.error("Error loading buddy in Arena:",b),vt("Failed to load buddy data"),fe(!1)}},[o==null?void 0:o.uid]);const Qe=async()=>{if(!(o!=null&&o.uid)){console.log(" Cannot auto-match: missing user UID");return}try{console.log(" Auto-matching available users..."),console.log("Current user UID:",o.uid);const{ref:b,get:F,set:U,push:ie,remove:me}=await be(()=>import("./index.esm-aea0f173.js"),[]),ye=b(V,"buddyPairs"),Ce=await F(ye);let je=!1;if(Ce.exists()){const oe=Ce.val();for(const[Mn,Gr]of Object.entries(oe))if(Gr.users&&Gr.users.includes(o.uid)){console.log(" User already has a buddy, skipping auto-match"),je=!0;break}}if(je)return;const $e=b(V,"matchingPool"),dt=await F($e);if(!dt.exists()){console.log(" No matching pool found");return}const Je=Object.keys(dt.val());if(console.log(" Users in matching pool:",Je),Je.length<2){console.log(" Need at least 2 users for auto-matching");return}const ht=[];for(const oe of Je){const Mn=b(V,`users/${oe}`);(await F(Mn)).exists()?ht.push(oe):(console.log(` User ${oe} in matching pool no longer exists, removing from pool`),await me(b(V,`matchingPool/${oe}`)))}if(ht.length<2){console.log(" Need at least 2 valid users for auto-matching after validation");return}const or=ht.filter(oe=>oe!==o.uid);if(or.length===0){console.log(" No other valid users available for matching");return}const un=or[0];console.log(` Auto-matching with valid user: ${un}`);const _t=ie(b(V,"buddyPairs")).key,Ut={pairId:_t,users:[o.uid,un],matchedAt:new Date().toISOString(),compatibilityScore:.85,matchReasons:["Auto-matched from app","High compatibility detected"],status:"active",lastMessageAt:new Date().toISOString(),user1RemovedFromPool:!1,user2RemovedFromPool:!1};await U(b(V,`buddyPairs/${_t}`),Ut),console.log(" Auto-created buddy pair:",_t),await U(b(V,`users/${o.uid}/buddyInfo`),{hasBuddy:!0,buddyId:un,pairId:_t,matchedAt:Ut.matchedAt}),await U(b(V,`users/${un}/buddyInfo`),{hasBuddy:!0,buddyId:o.uid,pairId:_t,matchedAt:Ut.matchedAt}),await me(b(V,`matchingPool/${o.uid}`)),await me(b(V,`matchingPool/${un}`)),await U(b(V,`buddyPairs/${_t}/user1RemovedFromPool`),!0),await U(b(V,`buddyPairs/${_t}/user2RemovedFromPool`),!0),console.log(" Auto-match complete! Reloading buddy data..."),await Tt()}catch(b){console.error(" Error in auto-matching:",b),alert("Failed to find buddy match. Please try again later.")}};N.useEffect(()=>{const b=F=>{const U=F.detail;console.log("Navigating to tab:",U),U==="buddy-chat"&&(r("buddy-chat"),e("buddy-chat"))};return window.addEventListener("navigateToTab",b),()=>{window.removeEventListener("navigateToTab",b)}},[]);const Jt={heroName:"",stats:{streakDays:0,addictionLevel:0,willpower:0,motivation:0,cravingResistance:0,triggerDefense:0,moneySaved:0,experiencePoints:0},achievements:[],archetype:"",avatar:null,isEmpty:!0,message:"We are looking for a suitable buddy for you"},kt=()=>K?{heroName:"Loading Buddy...",stats:{streakDays:0,addictionLevel:50,willpower:50,motivation:50,cravingResistance:50,triggerDefense:30,moneySaved:0,experiencePoints:0},achievements:[],archetype:"LOADING",avatar:dr("loading","adventurer"),isLoading:!0}:He?{heroName:"Error Loading Buddy",stats:{streakDays:0,addictionLevel:50,willpower:50,motivation:50,cravingResistance:50,triggerDefense:30,moneySaved:0,experiencePoints:0},achievements:[],archetype:"ERROR",avatar:dr("error","adventurer"),isError:!0,errorMessage:He}:Y||Jt,Gc=async b=>{console.log("Onboarding completed with user data:",b);try{if(!b||!b.heroName||!b.stats)throw new Error("Invalid user data received from onboarding");if(!d)throw new Error("No authenticated user found");const F={...b,uid:d.uid,email:d.email,displayName:d.displayName||b.heroName,photoURL:d.photoURL,onboardingCompleted:!0,updatedAt:Date.now()};console.log("Saving user data to Firebase:",F);const{ref:U,set:ie}=await be(()=>import("./index.esm-aea0f173.js"),[]),me=U(V,`users/${d.uid}`);await ie(me,F),console.log("Firebase save successful, updating app state..."),l(F),u(!0);try{console.log("Adding user to buddy matching pool...");const{ref:Ce,set:je}=await be(()=>import("./index.esm-aea0f173.js"),[]),$e={quitStartDate:F.quitDate||new Date().toISOString(),addictionLevel:F.stats.addictionLevel||50,triggers:F.triggers||[],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,quitExperience:F.quitAttempts||"first",availableForMatching:!0,lastActive:Date.now(),userId:d.uid,heroName:F.heroName,archetype:F.archetype};await je(Ce(V,`matchingPool/${d.uid}`),$e),console.log(" User added to buddy matching pool successfully");try{console.log(" Triggering automatic matching for new user..."),await Qe()}catch(dt){console.error(" Automatic matching failed:",dt)}}catch(Ce){console.error(" Failed to add user to buddy matching pool:",Ce)}console.log("Loading all user data after onboarding completion...");const ye=await B(d.uid);console.log(ye?" All user data loaded successfully after onboarding":" Data loading failed after onboarding, but proceeding"),r("arena"),console.log("Onboarding completed successfully:",{user:F,hasCompletedOnboarding:!0,currentView:"arena"})}catch(F){console.error("Error in handleOnboardingComplete:",F);const U={heroName:(b==null?void 0:b.heroName)||"Hero",archetype:(b==null?void 0:b.archetype)||"The Determined",avatar:(b==null?void 0:b.avatar)||dr("fallback"),stats:{addictionLevel:50,mentalStrength:50,motivation:50,triggerDefense:30,streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date,uid:d==null?void 0:d.uid,email:d==null?void 0:d.email,onboardingCompleted:!0};if(console.log("Using fallback user data due to error:",U),d)try{console.log("Attempting to save fallback data to Firebase...");const{ref:ie,set:me}=await be(()=>import("./index.esm-aea0f173.js"),[]),ye=ie(V,`users/${d.uid}`);await me(ye,U),console.log("Fallback data saved to Firebase successfully")}catch(ie){console.error("Failed to save fallback data to Firebase:",ie)}l(U),u(!0),r("arena"),console.log("App state set with fallback data")}},qc=()=>{l(null),u(!1),r("onboarding"),e("arena"),i(null),localStorage.removeItem("quitCoachUser")},ma=async()=>{try{console.log("Logging out user...");const{signOut:b}=await be(()=>import("./index.esm-17f08e3e.js"),[]);await b(rs),l(null),h(null),u(!1),r("auth"),localStorage.removeItem("lastSOS"),localStorage.removeItem("cravingWins"),localStorage.removeItem("specialFeatures"),console.log("User successfully logged out and redirected to login screen")}catch(b){console.error("Error during logout:",b),l(null),h(null),u(!1),r("auth")}},ga=async()=>{if(!d){console.error("No authenticated user to reset");return}try{console.log("Resetting ALL user data for testing...");const{ref:b,set:F,remove:U}=await be(()=>import("./index.esm-aea0f173.js"),[]),ie=b(V,`users/${d.uid}`);await F(ie,null);const me=b(V,"users");await F(me,null);const ye=b(V,"buddyPairs");await F(ye,null);const Ce=b(V,"matchingPool");await F(Ce,null),console.log("All user data and buddy matching data cleared from database"),l(null),u(!1),r("onboarding"),xe(null),fe(!1),vt(null),console.log("Account reset successful - ready for fresh onboarding")}catch(b){console.error("Error resetting account for testing:",b)}},Kc=b=>{console.log("Tab changed to:",b),e(b),r(b)},Yc=b=>{r(b==="mood-selector"?"mood-selector":"profile")},Ft=b=>{i(b),r("profile")},Sx=()=>{r("profile")};return f?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-6"}),a.jsx("h2",{className:"text-3xl font-bold mb-4",children:" Restoring Session..."}),a.jsx("p",{className:"text-xl text-gray-300 mb-4",children:"Checking authentication state"}),a.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto",children:a.jsxs("div",{className:"text-sm text-gray-400 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Checking Firebase Auth persistence"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Verifying user session (30 days)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Loading user data from database"]})]})}),a.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"This should take only a few seconds"})]})}):n==="auth"?a.jsx(SA,{onAuthSuccess:se}):v.isLoading?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-6"}),a.jsx("h2",{className:"text-3xl font-bold mb-4",children:" Loading Your Data..."}),a.jsx("p",{className:"text-xl text-gray-300 mb-4",children:v.currentStep}),a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto mb-6",children:[a.jsx("div",{className:"w-full bg-slate-700 rounded-full h-3 mb-3",children:a.jsx("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${v.progress}%`}})}),a.jsxs("div",{className:"text-sm text-gray-400",children:[v.progress,"% Complete"]})]}),a.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto",children:a.jsxs("div",{className:"text-sm text-gray-400 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Profile and onboarding data"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Battle stats and progress"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Habits and achievements"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-400",children:""}),"Setting up live sync"]})]})}),v.error&&a.jsxs("div",{className:"mt-4 p-3 bg-red-600/20 border border-red-500/30 rounded-lg max-w-md mx-auto",children:[a.jsxs("p",{className:"text-red-300 text-sm",children:[a.jsx("span",{className:"font-semibold",children:"Error:"})," ",v.error]}),a.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Don't worry, you can still use the app with basic functionality"})]}),a.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Syncing your data across all devices..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[a.jsx(bA,{}),!1,n==="onboarding"&&a.jsxs("div",{children:[console.log("Rendering OnboardingFlow"),a.jsx(DA,{onComplete:Gc,authUser:d})]}),c&&o?a.jsxs(a.Fragment,{children:[console.log("Main app rendering with user:",o,"view:",n),n==="arena"&&a.jsxs("div",{children:[console.log("Rendering ArenaView with user:",o),(()=>{try{const b=kt();return a.jsx(FA,{user:o,nemesis:b,onBackToLogin:ma,onResetForTesting:ga,buddyLoading:K,buddyError:He,onRefreshBuddy:Tt,onAutoMatch:Qe,realBuddy:Y})}catch(b){return console.error("Error rendering ArenaView:",b),a.jsxs("div",{className:"text-white text-center p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Error Loading Arena"}),a.jsx("p",{className:"text-gray-300 mb-4",children:b.message}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:"Reload App"})]})}})()]}),n==="craving-support"&&a.jsxs("div",{children:[console.log("Rendering CravingSupportView with user:",o),a.jsx(VA,{user:o,nemesis:kt(),onBackToLogin:ma,onResetForTesting:ga})]}),n==="profile"&&a.jsxs("div",{children:[console.log("Rendering ProfileView with user:",o),a.jsx(BA,{user:o,onNavigate:Yc})]}),n==="mood-selector"&&a.jsx(MoodSelector,{onMoodSelect:Ft,onBack:Sx}),n==="buddy-chat"&&a.jsx(YA,{user:o,nemesis:kt(),buddyMatchingService:p}),n==="settings"&&a.jsx(KA,{onResetApp:qc}),a.jsx(MA,{activeTab:t,onTabChange:Kc,dataLoadingState:v,onRefreshData:ce,offlineManager:I})]}):a.jsx("div",{className:"flex items-center justify-center min-h-screen text-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),a.jsx("p",{className:"text-gray-300",children:c?"User data missing":"Onboarding not completed"}),a.jsxs("p",{className:"text-gray-300",children:["Current view: ",n]}),a.jsxs("p",{className:"text-gray-300",children:["User data: ",o?JSON.stringify(o,null,2):"None"]}),a.jsx("button",{onClick:()=>{console.log("Debug button clicked"),console.log("Current state:",{hasCompletedOnboarding:c,user:o,currentView:n}),console.log("User data:",o)},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Debug State"})]})})]})};zu.createRoot(document.getElementById("root")).render(a.jsx(Vx.StrictMode,{children:a.jsx(QA,{})}));export{tD as $,rD as A,sD as B,iD as C,ys as D,XA as E,oh as F,fD as G,pD as H,mD as I,gD as J,K_ as K,vD as L,Q as M,JA as N,DC as O,OC as P,bn as Q,Sn as R,ND as S,eT as T,ED as U,Ze as V,ZA as W,eD as X,uD as Y,cD as Z,kD as _,YC as a,fk as a$,OD as a0,ua as a1,ca as a2,LD as a3,Bo as a4,Ts as a5,pr as a6,RD as a7,mr as a8,$n as a9,ZD as aA,XR as aB,MD as aC,pT as aD,l2 as aE,x2 as aF,Tg as aG,Gk as aH,$T as aI,e2 as aJ,GD as aK,uk as aL,f2 as aM,y2 as aN,w2 as aO,c2 as aP,n2 as aQ,Nk as aR,FD as aS,nT as aT,dk as aU,p2 as aV,g2 as aW,_2 as aX,yT as aY,o2 as aZ,vk as a_,nr as aa,tl as ab,DD as ac,as as ad,ni as ae,zR as af,PD as ag,d2 as ah,ch as ai,AD as aj,HR as ak,pp as al,gr as am,WD as an,Ck as ao,u2 as ap,Aw as aq,WR as ar,jw as as,pk as at,BD as au,BT as av,mk as aw,jD as ax,a2 as ay,KD as az,Qt as b,HD as b0,Ik as b1,UD as b2,rp as b3,VD as b4,gk as b5,qD as b6,h2 as b7,iR as b8,v2 as b9,i2 as ba,$D as bb,s2 as bc,JD as bd,XD as be,m2 as bf,QD as bg,r2 as bh,t2 as bi,YD as bj,zD as bk,be as bl,If as c,Cn as d,mi as e,TD as f,JC as g,CD as h,bD as i,aD as j,lD as k,yD as l,wD as m,_D as n,Me as o,QC as p,xD as q,X_ as r,jv as s,SD as t,ID as u,zf as v,dD as w,hD as x,oD as y,nD as z};
