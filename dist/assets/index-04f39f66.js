(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ix(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ry={exports:{}},Xl={},iy={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),bx=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),Tx=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Rx=Symbol.for("react.context"),Px=Symbol.for("react.forward_ref"),Ax=Symbol.for("react.suspense"),Dx=Symbol.for("react.memo"),Ox=Symbol.for("react.lazy"),Ip=Symbol.iterator;function jx(t){return t===null||typeof t!="object"?null:(t=Ip&&t[Ip]||t["@@iterator"],typeof t=="function"?t:null)}var sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oy=Object.assign,ay={};function gs(t,e,n){this.props=t,this.context=e,this.refs=ay,this.updater=n||sy}gs.prototype.isReactComponent={};gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ly(){}ly.prototype=gs.prototype;function fh(t,e,n){this.props=t,this.context=e,this.refs=ay,this.updater=n||sy}var ph=fh.prototype=new ly;ph.constructor=fh;oy(ph,gs.prototype);ph.isPureReactComponent=!0;var bp=Array.isArray,cy=Object.prototype.hasOwnProperty,mh={current:null},uy={key:!0,ref:!0,__self:!0,__source:!0};function dy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cy.call(e,r)&&!uy.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Go,type:t,key:s,ref:o,props:i,_owner:mh.current}}function Lx(t,e){return{$$typeof:Go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Go}function Mx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Np=/\/+/g;function Jc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mx(""+t.key):e.toString(36)}function Va(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Go:case bx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jc(o,0):r,bp(i)?(n="",t!=null&&(n=t.replace(Np,"$&/")+"/"),Va(i,e,n,"",function(u){return u})):i!=null&&(gh(i)&&(i=Lx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Np,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bp(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Jc(s,a);o+=Va(s,e,n,c,i)}else if(c=jx(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Jc(s,a++),o+=Va(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ya(t,e,n){if(t==null)return t;var r=[],i=0;return Va(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Fx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Wa={transition:null},Ux={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:mh};function hy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:ya,forEach:function(t,e,n){ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ya(t,function(){e++}),e},toArray:function(t){return ya(t,function(e){return e})||[]},only:function(t){if(!gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=gs;te.Fragment=Nx;te.Profiler=Tx;te.PureComponent=fh;te.StrictMode=Cx;te.Suspense=Ax;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ux;te.act=hy;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oy({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)cy.call(e,c)&&!uy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Go,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:Rx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kx,_context:t},t.Consumer=t};te.createElement=dy;te.createFactory=function(t){var e=dy.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Px,render:t}};te.isValidElement=gh;te.lazy=function(t){return{$$typeof:Ox,_payload:{_status:-1,_result:t},_init:Fx}};te.memo=function(t,e){return{$$typeof:Dx,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Wa.transition;Wa.transition={};try{t()}finally{Wa.transition=e}};te.unstable_act=hy;te.useCallback=function(t,e){return It.current.useCallback(t,e)};te.useContext=function(t){return It.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return It.current.useDeferredValue(t)};te.useEffect=function(t,e){return It.current.useEffect(t,e)};te.useId=function(){return It.current.useId()};te.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return It.current.useMemo(t,e)};te.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};te.useRef=function(t){return It.current.useRef(t)};te.useState=function(t){return It.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return It.current.useTransition()};te.version="18.3.1";iy.exports=te;var I=iy.exports;const $x=Ix(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=I,Wx=Symbol.for("react.element"),zx=Symbol.for("react.fragment"),Bx=Object.prototype.hasOwnProperty,Hx=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gx={key:!0,ref:!0,__self:!0,__source:!0};function fy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Bx.call(e,r)&&!Gx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wx,type:t,key:s,ref:o,props:i,_owner:Hx.current}}Xl.Fragment=zx;Xl.jsx=fy;Xl.jsxs=fy;ry.exports=Xl;var l=ry.exports,Hu={},py={exports:{}},Kt={},my={exports:{}},gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,z){var B=L.length;L.push(z);e:for(;0<B;){var ie=B-1>>>1,ne=L[ie];if(0<i(ne,z))L[ie]=z,L[B]=ne,B=ie;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var z=L[0],B=L.pop();if(B!==z){L[0]=B;e:for(var ie=0,ne=L.length,Z=ne>>>1;ie<Z;){var he=2*(ie+1)-1,vt=L[he],un=he+1,sr=L[un];if(0>i(vt,B))un<ne&&0>i(sr,vt)?(L[ie]=sr,L[un]=B,ie=un):(L[ie]=vt,L[he]=B,ie=he);else if(un<ne&&0>i(sr,B))L[ie]=sr,L[un]=B,ie=un;else break e}}return z}function i(L,z){var B=L.sortIndex-z.sortIndex;return B!==0?B:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,y=!1,w=!1,x=!1,O=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=L)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function S(L){if(x=!1,v(L),!w)if(n(c)!==null)w=!0,G(C);else{var z=n(u);z!==null&&de(S,z.startTime-L)}}function C(L,z){w=!1,x&&(x=!1,g(b),b=-1),y=!0;var B=f;try{for(v(z),h=n(c);h!==null&&(!(h.expirationTime>z)||L&&!_());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var ne=ie(h.expirationTime<=z);z=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(c)&&r(c),v(z)}else r(c);h=n(c)}if(h!==null)var Z=!0;else{var he=n(u);he!==null&&de(S,he.startTime-z),Z=!1}return Z}finally{h=null,f=B,y=!1}}var N=!1,T=null,b=-1,D=5,m=-1;function _(){return!(t.unstable_now()-m<D)}function j(){if(T!==null){var L=t.unstable_now();m=L;var z=!0;try{z=T(!0,L)}finally{z?k():(N=!1,T=null)}}else N=!1}var k;if(typeof p=="function")k=function(){p(j)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=j,k=function(){K.postMessage(null)}}else k=function(){O(j,0)};function G(L){T=L,N||(N=!0,k())}function de(L,z){b=O(function(){L(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,G(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var B=f;f=z;try{return L()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=f;f=L;try{return z()}finally{f=B}},t.unstable_scheduleCallback=function(L,z,B){var ie=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ie+B:ie):B=ie,L){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=B+ne,L={id:d++,callback:z,priorityLevel:L,startTime:B,expirationTime:ne,sortIndex:-1},B>ie?(L.sortIndex=B,e(u,L),n(c)===null&&L===n(u)&&(x?(g(b),b=-1):x=!0,de(S,B-ie))):(L.sortIndex=ne,e(c,L),w||y||(w=!0,G(C))),L},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(L){var z=f;return function(){var B=f;f=z;try{return L.apply(this,arguments)}finally{f=B}}}})(gy);my.exports=gy;var qx=my.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx=I,Ht=qx;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yy=new Set,fo={};function _i(t,e){rs(t,e),rs(t+"Capture",e)}function rs(t,e){for(fo[t]=e,t=0;t<e.length;t++)yy.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=Object.prototype.hasOwnProperty,Yx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cp={},Tp={};function Qx(t){return Gu.call(Tp,t)?!0:Gu.call(Cp,t)?!1:Yx.test(t)?Tp[t]=!0:(Cp[t]=!0,!1)}function Jx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xx(t,e,n,r){if(e===null||typeof e>"u"||Jx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yh,vh);dt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yh,vh);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yh,vh);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _h(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xx(e,n,i,r)&&(n=null),r||i===null?Qx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=Kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),wh=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),vy=Symbol.for("react.provider"),_y=Symbol.for("react.context"),xh=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),Sh=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),wy=Symbol.for("react.offscreen"),kp=Symbol.iterator;function Ts(t){return t===null||typeof t!="object"?null:(t=kp&&t[kp]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Xc;function Vs(t){if(Xc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xc=e&&e[1]||""}return`
`+Xc+t}var Zc=!1;function eu(t,e){if(!t||Zc)return"";Zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Zc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function Zx(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=eu(t.type,!1),t;case 11:return t=eu(t.type.render,!1),t;case 1:return t=eu(t.type,!0),t;default:return""}}function Qu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case Di:return"Portal";case qu:return"Profiler";case wh:return"StrictMode";case Ku:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _y:return(t.displayName||"Context")+".Consumer";case vy:return(t._context.displayName||"Context")+".Provider";case xh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sh:return e=t.displayName||null,e!==null?e:Qu(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return Qu(t(e))}catch{}}return null}function eS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qu(e);case 8:return e===wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tS(t){var e=xy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){t._valueTracker||(t._valueTracker=tS(t))}function Sy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ju(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ey(t,e){e=e.checked,e!=null&&_h(t,"checked",e,!1)}function Xu(t,e){Ey(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zu(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zu(t,e,n){(e!=="number"||il(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ws=Array.isArray;function Hi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ed(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ap(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Ws(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function Iy(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function by(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function td(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?by(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,Ny=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nS=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(t){nS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ks[e]=Ks[t]})});function Cy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ks.hasOwnProperty(t)&&Ks[t]?(""+e).trim():e+"px"}function Ty(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rS=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nd(t,e){if(e){if(rS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=null;function Eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sd=null,Gi=null,qi=null;function Op(t){if(t=Yo(t)){if(typeof sd!="function")throw Error(R(280));var e=t.stateNode;e&&(e=rc(e),sd(t.stateNode,t.type,e))}}function ky(t){Gi?qi?qi.push(t):qi=[t]:Gi=t}function Ry(){if(Gi){var t=Gi,e=qi;if(qi=Gi=null,Op(t),e)for(t=0;t<e.length;t++)Op(e[t])}}function Py(t,e){return t(e)}function Ay(){}var tu=!1;function Dy(t,e,n){if(tu)return t(e,n);tu=!0;try{return Py(t,e,n)}finally{tu=!1,(Gi!==null||qi!==null)&&(Ay(),Ry())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=rc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var od=!1;if(qn)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){od=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{od=!1}function iS(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ys=!1,sl=null,ol=!1,ad=null,sS={onError:function(t){Ys=!0,sl=t}};function oS(t,e,n,r,i,s,o,a,c){Ys=!1,sl=null,iS.apply(sS,arguments)}function aS(t,e,n,r,i,s,o,a,c){if(oS.apply(this,arguments),Ys){if(Ys){var u=sl;Ys=!1,sl=null}else throw Error(R(198));ol||(ol=!0,ad=u)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Oy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jp(t){if(wi(t)!==t)throw Error(R(188))}function lS(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jp(i),t;if(s===r)return jp(i),e;s=s.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function jy(t){return t=lS(t),t!==null?Ly(t):null}function Ly(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ly(t);if(e!==null)return e;t=t.sibling}return null}var My=Ht.unstable_scheduleCallback,Lp=Ht.unstable_cancelCallback,cS=Ht.unstable_shouldYield,uS=Ht.unstable_requestPaint,We=Ht.unstable_now,dS=Ht.unstable_getCurrentPriorityLevel,Ih=Ht.unstable_ImmediatePriority,Fy=Ht.unstable_UserBlockingPriority,al=Ht.unstable_NormalPriority,hS=Ht.unstable_LowPriority,Uy=Ht.unstable_IdlePriority,Zl=null,kn=null;function fS(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:gS,pS=Math.log,mS=Math.LN2;function gS(t){return t>>>=0,t===0?32:31-(pS(t)/mS|0)|0}var xa=64,Sa=4194304;function zs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=zs(a):(s&=o,s!==0&&(r=zs(s)))}else o=n&~i,o!==0?r=zs(o):s!==0&&(r=zs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),i=1<<n,r|=t[n],e&=~i;return r}function yS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-yn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=yS(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function ld(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $y(){var t=xa;return xa<<=1,!(xa&4194240)&&(xa=64),t}function nu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function _S(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function bh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function Vy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wy,Nh,zy,By,Hy,cd=!1,Ea=[],xr=null,Sr=null,Er=null,go=new Map,yo=new Map,hr=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mp(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(e.pointerId)}}function Rs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Yo(e),e!==null&&Nh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xS(t,e,n,r,i){switch(e){case"focusin":return xr=Rs(xr,t,e,n,r,i),!0;case"dragenter":return Sr=Rs(Sr,t,e,n,r,i),!0;case"mouseover":return Er=Rs(Er,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,Rs(go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yo.set(s,Rs(yo.get(s)||null,t,e,n,r,i)),!0}return!1}function Gy(t){var e=Qr(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=Oy(n),e!==null){t.blockedOn=e,Hy(t.priority,function(){zy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ud(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);id=r,n.target.dispatchEvent(r),id=null}else return e=Yo(n),e!==null&&Nh(e),t.blockedOn=n,!1;e.shift()}return!0}function Fp(t,e,n){za(t)&&n.delete(e)}function SS(){cd=!1,xr!==null&&za(xr)&&(xr=null),Sr!==null&&za(Sr)&&(Sr=null),Er!==null&&za(Er)&&(Er=null),go.forEach(Fp),yo.forEach(Fp)}function Ps(t,e){t.blockedOn===e&&(t.blockedOn=null,cd||(cd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,SS)))}function vo(t){function e(i){return Ps(i,t)}if(0<Ea.length){Ps(Ea[0],t);for(var n=1;n<Ea.length;n++){var r=Ea[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Ps(xr,t),Sr!==null&&Ps(Sr,t),Er!==null&&Ps(Er,t),go.forEach(e),yo.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)Gy(n),n.blockedOn===null&&hr.shift()}var Ki=nr.ReactCurrentBatchConfig,cl=!0;function ES(t,e,n,r){var i=ce,s=Ki.transition;Ki.transition=null;try{ce=1,Ch(t,e,n,r)}finally{ce=i,Ki.transition=s}}function IS(t,e,n,r){var i=ce,s=Ki.transition;Ki.transition=null;try{ce=4,Ch(t,e,n,r)}finally{ce=i,Ki.transition=s}}function Ch(t,e,n,r){if(cl){var i=ud(t,e,n,r);if(i===null)hu(t,e,r,ul,n),Mp(t,r);else if(xS(i,t,e,n,r))r.stopPropagation();else if(Mp(t,r),e&4&&-1<wS.indexOf(t)){for(;i!==null;){var s=Yo(i);if(s!==null&&Wy(s),s=ud(t,e,n,r),s===null&&hu(t,e,r,ul,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hu(t,e,r,null,n)}}var ul=null;function ud(t,e,n,r){if(ul=null,t=Eh(r),t=Qr(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Oy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ul=t,null}function qy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dS()){case Ih:return 1;case Fy:return 4;case al:case hS:return 16;case Uy:return 536870912;default:return 16}default:return 16}}var yr=null,Th=null,Ba=null;function Ky(){if(Ba)return Ba;var t,e=Th,n=e.length,r,i="value"in yr?yr.value:yr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ba=i.slice(t,1<r?1-r:void 0)}function Ha(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function Up(){return!1}function Yt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ia:Up,this.isPropagationStopped=Up,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=Yt(ys),Ko=Oe({},ys,{view:0,detail:0}),bS=Yt(Ko),ru,iu,As,ec=Oe({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==As&&(As&&t.type==="mousemove"?(ru=t.screenX-As.screenX,iu=t.screenY-As.screenY):iu=ru=0,As=t),ru)},movementY:function(t){return"movementY"in t?t.movementY:iu}}),$p=Yt(ec),NS=Oe({},ec,{dataTransfer:0}),CS=Yt(NS),TS=Oe({},Ko,{relatedTarget:0}),su=Yt(TS),kS=Oe({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),RS=Yt(kS),PS=Oe({},ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AS=Yt(PS),DS=Oe({},ys,{data:0}),Vp=Yt(DS),OS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LS[t])?!!e[t]:!1}function Rh(){return MS}var FS=Oe({},Ko,{key:function(t){if(t.key){var e=OS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ha(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rh,charCode:function(t){return t.type==="keypress"?Ha(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ha(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),US=Yt(FS),$S=Oe({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wp=Yt($S),VS=Oe({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rh}),WS=Yt(VS),zS=Oe({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),BS=Yt(zS),HS=Oe({},ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=Yt(HS),qS=[9,13,27,32],Ph=qn&&"CompositionEvent"in window,Qs=null;qn&&"documentMode"in document&&(Qs=document.documentMode);var KS=qn&&"TextEvent"in window&&!Qs,Yy=qn&&(!Ph||Qs&&8<Qs&&11>=Qs),zp=String.fromCharCode(32),Bp=!1;function Qy(t,e){switch(t){case"keyup":return qS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function YS(t,e){switch(t){case"compositionend":return Jy(e);case"keypress":return e.which!==32?null:(Bp=!0,zp);case"textInput":return t=e.data,t===zp&&Bp?null:t;default:return null}}function QS(t,e){if(ji)return t==="compositionend"||!Ph&&Qy(t,e)?(t=Ky(),Ba=Th=yr=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yy&&e.locale!=="ko"?null:e.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JS[t.type]:e==="textarea"}function Xy(t,e,n,r){ky(r),e=dl(e,"onChange"),0<e.length&&(n=new kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Js=null,_o=null;function XS(t){c0(t,0)}function tc(t){var e=Fi(t);if(Sy(e))return t}function ZS(t,e){if(t==="change")return e}var Zy=!1;if(qn){var ou;if(qn){var au="oninput"in document;if(!au){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),au=typeof Gp.oninput=="function"}ou=au}else ou=!1;Zy=ou&&(!document.documentMode||9<document.documentMode)}function qp(){Js&&(Js.detachEvent("onpropertychange",e0),_o=Js=null)}function e0(t){if(t.propertyName==="value"&&tc(_o)){var e=[];Xy(e,_o,t,Eh(t)),Dy(XS,e)}}function eE(t,e,n){t==="focusin"?(qp(),Js=e,_o=n,Js.attachEvent("onpropertychange",e0)):t==="focusout"&&qp()}function tE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tc(_o)}function nE(t,e){if(t==="click")return tc(e)}function rE(t,e){if(t==="input"||t==="change")return tc(e)}function iE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:iE;function wo(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gu.call(e,i)||!wn(t[i],e[i]))return!1}return!0}function Kp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,e){var n=Kp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kp(n)}}function t0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?t0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function n0(){for(var t=window,e=il();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=il(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sE(t){var e=n0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&t0(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yp(n,s);var o=Yp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oE=qn&&"documentMode"in document&&11>=document.documentMode,Li=null,dd=null,Xs=null,hd=!1;function Qp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hd||Li==null||Li!==il(r)||(r=Li,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xs&&wo(Xs,r)||(Xs=r,r=dl(dd,"onSelect"),0<r.length&&(e=new kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Li)))}function ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},lu={},r0={};qn&&(r0=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function nc(t){if(lu[t])return lu[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r0)return lu[t]=e[n];return t}var i0=nc("animationend"),s0=nc("animationiteration"),o0=nc("animationstart"),a0=nc("transitionend"),l0=new Map,Jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,e){l0.set(t,e),_i(e,[t])}for(var cu=0;cu<Jp.length;cu++){var uu=Jp[cu],aE=uu.toLowerCase(),lE=uu[0].toUpperCase()+uu.slice(1);Wr(aE,"on"+lE)}Wr(i0,"onAnimationEnd");Wr(s0,"onAnimationIteration");Wr(o0,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(a0,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function Xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aS(r,e,void 0,t),t.currentTarget=null}function c0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Xp(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Xp(i,a,u),s=c}}}if(ol)throw t=ad,ol=!1,ad=null,t}function we(t,e){var n=e[yd];n===void 0&&(n=e[yd]=new Set);var r=t+"__bubble";n.has(r)||(u0(e,t,2,!1),n.add(r))}function du(t,e,n){var r=0;e&&(r|=4),u0(n,t,r,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Na]){t[Na]=!0,yy.forEach(function(n){n!=="selectionchange"&&(cE.has(n)||du(n,!1,t),du(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,du("selectionchange",!1,e))}}function u0(t,e,n,r){switch(qy(e)){case 1:var i=ES;break;case 4:i=IS;break;default:i=Ch}n=i.bind(null,e,n,t),i=void 0,!od||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qr(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Dy(function(){var u=s,d=Eh(n),h=[];e:{var f=l0.get(t);if(f!==void 0){var y=kh,w=t;switch(t){case"keypress":if(Ha(n)===0)break e;case"keydown":case"keyup":y=US;break;case"focusin":w="focus",y=su;break;case"focusout":w="blur",y=su;break;case"beforeblur":case"afterblur":y=su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=$p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=CS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=WS;break;case i0:case s0:case o0:y=RS;break;case a0:y=BS;break;case"scroll":y=bS;break;case"wheel":y=GS;break;case"copy":case"cut":case"paste":y=AS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Wp}var x=(e&4)!==0,O=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var p=u,v;p!==null;){v=p;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=mo(p,g),S!=null&&x.push(So(p,S,v)))),O)break;p=p.return}0<x.length&&(f=new y(f,w,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==id&&(w=n.relatedTarget||n.fromElement)&&(Qr(w)||w[Kn]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=u,w=w?Qr(w):null,w!==null&&(O=wi(w),w!==O||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(x=$p,S="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=Wp,S="onPointerLeave",g="onPointerEnter",p="pointer"),O=y==null?f:Fi(y),v=w==null?f:Fi(w),f=new x(S,p+"leave",y,n,d),f.target=O,f.relatedTarget=v,S=null,Qr(d)===u&&(x=new x(g,p+"enter",w,n,d),x.target=v,x.relatedTarget=O,S=x),O=S,y&&w)t:{for(x=y,g=w,p=0,v=x;v;v=Pi(v))p++;for(v=0,S=g;S;S=Pi(S))v++;for(;0<p-v;)x=Pi(x),p--;for(;0<v-p;)g=Pi(g),v--;for(;p--;){if(x===g||g!==null&&x===g.alternate)break t;x=Pi(x),g=Pi(g)}x=null}else x=null;y!==null&&Zp(h,f,y,x,!1),w!==null&&O!==null&&Zp(h,O,w,x,!0)}}e:{if(f=u?Fi(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var C=ZS;else if(Hp(f))if(Zy)C=rE;else{C=tE;var N=eE}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=nE);if(C&&(C=C(t,u))){Xy(h,C,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Zu(f,"number",f.value)}switch(N=u?Fi(u):window,t){case"focusin":(Hp(N)||N.contentEditable==="true")&&(Li=N,dd=u,Xs=null);break;case"focusout":Xs=dd=Li=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,Qp(h,n,d);break;case"selectionchange":if(oE)break;case"keydown":case"keyup":Qp(h,n,d)}var T;if(Ph)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ji?Qy(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Yy&&n.locale!=="ko"&&(ji||b!=="onCompositionStart"?b==="onCompositionEnd"&&ji&&(T=Ky()):(yr=d,Th="value"in yr?yr.value:yr.textContent,ji=!0)),N=dl(u,b),0<N.length&&(b=new Vp(b,t,null,n,d),h.push({event:b,listeners:N}),T?b.data=T:(T=Jy(n),T!==null&&(b.data=T)))),(T=KS?YS(t,n):QS(t,n))&&(u=dl(u,"onBeforeInput"),0<u.length&&(d=new Vp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}c0(h,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(So(t,s,i)),s=mo(t,e),s!=null&&r.push(So(t,s,i))),t=t.return}return r}function Pi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=mo(n,s),c!=null&&o.unshift(So(n,c,a))):i||(c=mo(n,s),c!=null&&o.push(So(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function em(t){return(typeof t=="string"?t:""+t).replace(uE,`
`).replace(dE,"")}function Ca(t,e,n){if(e=em(e),em(t)!==e&&n)throw Error(R(425))}function hl(){}var fd=null,pd=null;function md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gd=typeof setTimeout=="function"?setTimeout:void 0,hE=typeof clearTimeout=="function"?clearTimeout:void 0,tm=typeof Promise=="function"?Promise:void 0,fE=typeof queueMicrotask=="function"?queueMicrotask:typeof tm<"u"?function(t){return tm.resolve(null).then(t).catch(pE)}:gd;function pE(t){setTimeout(function(){throw t})}function fu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vo(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vs=Math.random().toString(36).slice(2),Nn="__reactFiber$"+vs,Eo="__reactProps$"+vs,Kn="__reactContainer$"+vs,yd="__reactEvents$"+vs,mE="__reactListeners$"+vs,gE="__reactHandles$"+vs;function Qr(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nm(t);t!==null;){if(n=t[Nn])return n;t=nm(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[Nn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function rc(t){return t[Eo]||null}var vd=[],Ui=-1;function zr(t){return{current:t}}function xe(t){0>Ui||(t.current=vd[Ui],vd[Ui]=null,Ui--)}function ve(t,e){Ui++,vd[Ui]=t.current,t.current=e}var jr={},yt=zr(jr),At=zr(!1),ai=jr;function is(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(t){return t=t.childContextTypes,t!=null}function fl(){xe(At),xe(yt)}function rm(t,e,n){if(yt.current!==jr)throw Error(R(168));ve(yt,e),ve(At,n)}function d0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(R(108,eS(t)||"Unknown",i));return Oe({},n,r)}function pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,ai=yt.current,ve(yt,t),ve(At,At.current),!0}function im(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=d0(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,xe(At),xe(yt),ve(yt,t)):xe(At),ve(At,n)}var Fn=null,ic=!1,pu=!1;function h0(t){Fn===null?Fn=[t]:Fn.push(t)}function yE(t){ic=!0,h0(t)}function Br(){if(!pu&&Fn!==null){pu=!0;var t=0,e=ce;try{var n=Fn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,ic=!1}catch(i){throw Fn!==null&&(Fn=Fn.slice(t+1)),My(Ih,Br),i}finally{ce=e,pu=!1}}return null}var $i=[],Vi=0,ml=null,gl=0,Xt=[],Zt=0,li=null,$n=1,Vn="";function Gr(t,e){$i[Vi++]=gl,$i[Vi++]=ml,ml=t,gl=e}function f0(t,e,n){Xt[Zt++]=$n,Xt[Zt++]=Vn,Xt[Zt++]=li,li=t;var r=$n;t=Vn;var i=32-yn(r)-1;r&=~(1<<i),n+=1;var s=32-yn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$n=1<<32-yn(e)+i|n<<i|r,Vn=s+t}else $n=1<<s|n<<i|r,Vn=t}function Dh(t){t.return!==null&&(Gr(t,1),f0(t,1,0))}function Oh(t){for(;t===ml;)ml=$i[--Vi],$i[Vi]=null,gl=$i[--Vi],$i[Vi]=null;for(;t===li;)li=Xt[--Zt],Xt[Zt]=null,Vn=Xt[--Zt],Xt[Zt]=null,$n=Xt[--Zt],Xt[Zt]=null}var zt=null,Wt=null,Ne=!1,pn=null;function p0(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Wt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=li!==null?{id:$n,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Wt=null,!0):!1;default:return!1}}function _d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wd(t){if(Ne){var e=Wt;if(e){var n=e;if(!sm(t,e)){if(_d(t))throw Error(R(418));e=Ir(n.nextSibling);var r=zt;e&&sm(t,e)?p0(r,n):(t.flags=t.flags&-4097|2,Ne=!1,zt=t)}}else{if(_d(t))throw Error(R(418));t.flags=t.flags&-4097|2,Ne=!1,zt=t}}}function om(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Ta(t){if(t!==zt)return!1;if(!Ne)return om(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!md(t.type,t.memoizedProps)),e&&(e=Wt)){if(_d(t))throw m0(),Error(R(418));for(;e;)p0(t,e),e=Ir(e.nextSibling)}if(om(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=zt?Ir(t.stateNode.nextSibling):null;return!0}function m0(){for(var t=Wt;t;)t=Ir(t.nextSibling)}function ss(){Wt=zt=null,Ne=!1}function jh(t){pn===null?pn=[t]:pn.push(t)}var vE=nr.ReactCurrentBatchConfig;function Ds(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function ka(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function am(t){var e=t._init;return e(t._payload)}function g0(t){function e(g,p){if(t){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=Tr(g,p),g.index=0,g.sibling=null,g}function s(g,p,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,v,S){return p===null||p.tag!==6?(p=xu(v,g.mode,S),p.return=g,p):(p=i(p,v),p.return=g,p)}function c(g,p,v,S){var C=v.type;return C===Oi?d(g,p,v.props.children,S,v.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===cr&&am(C)===p.type)?(S=i(p,v.props),S.ref=Ds(g,p,v),S.return=g,S):(S=Xa(v.type,v.key,v.props,null,g.mode,S),S.ref=Ds(g,p,v),S.return=g,S)}function u(g,p,v,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Su(v,g.mode,S),p.return=g,p):(p=i(p,v.children||[]),p.return=g,p)}function d(g,p,v,S,C){return p===null||p.tag!==7?(p=ii(v,g.mode,S,C),p.return=g,p):(p=i(p,v),p.return=g,p)}function h(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xu(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case va:return v=Xa(p.type,p.key,p.props,null,g.mode,v),v.ref=Ds(g,null,p),v.return=g,v;case Di:return p=Su(p,g.mode,v),p.return=g,p;case cr:var S=p._init;return h(g,S(p._payload),v)}if(Ws(p)||Ts(p))return p=ii(p,g.mode,v,null),p.return=g,p;ka(g,p)}return null}function f(g,p,v,S){var C=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(g,p,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case va:return v.key===C?c(g,p,v,S):null;case Di:return v.key===C?u(g,p,v,S):null;case cr:return C=v._init,f(g,p,C(v._payload),S)}if(Ws(v)||Ts(v))return C!==null?null:d(g,p,v,S,null);ka(g,v)}return null}function y(g,p,v,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,a(p,g,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case va:return g=g.get(S.key===null?v:S.key)||null,c(p,g,S,C);case Di:return g=g.get(S.key===null?v:S.key)||null,u(p,g,S,C);case cr:var N=S._init;return y(g,p,v,N(S._payload),C)}if(Ws(S)||Ts(S))return g=g.get(v)||null,d(p,g,S,C,null);ka(p,S)}return null}function w(g,p,v,S){for(var C=null,N=null,T=p,b=p=0,D=null;T!==null&&b<v.length;b++){T.index>b?(D=T,T=null):D=T.sibling;var m=f(g,T,v[b],S);if(m===null){T===null&&(T=D);break}t&&T&&m.alternate===null&&e(g,T),p=s(m,p,b),N===null?C=m:N.sibling=m,N=m,T=D}if(b===v.length)return n(g,T),Ne&&Gr(g,b),C;if(T===null){for(;b<v.length;b++)T=h(g,v[b],S),T!==null&&(p=s(T,p,b),N===null?C=T:N.sibling=T,N=T);return Ne&&Gr(g,b),C}for(T=r(g,T);b<v.length;b++)D=y(T,g,b,v[b],S),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?b:D.key),p=s(D,p,b),N===null?C=D:N.sibling=D,N=D);return t&&T.forEach(function(_){return e(g,_)}),Ne&&Gr(g,b),C}function x(g,p,v,S){var C=Ts(v);if(typeof C!="function")throw Error(R(150));if(v=C.call(v),v==null)throw Error(R(151));for(var N=C=null,T=p,b=p=0,D=null,m=v.next();T!==null&&!m.done;b++,m=v.next()){T.index>b?(D=T,T=null):D=T.sibling;var _=f(g,T,m.value,S);if(_===null){T===null&&(T=D);break}t&&T&&_.alternate===null&&e(g,T),p=s(_,p,b),N===null?C=_:N.sibling=_,N=_,T=D}if(m.done)return n(g,T),Ne&&Gr(g,b),C;if(T===null){for(;!m.done;b++,m=v.next())m=h(g,m.value,S),m!==null&&(p=s(m,p,b),N===null?C=m:N.sibling=m,N=m);return Ne&&Gr(g,b),C}for(T=r(g,T);!m.done;b++,m=v.next())m=y(T,g,b,m.value,S),m!==null&&(t&&m.alternate!==null&&T.delete(m.key===null?b:m.key),p=s(m,p,b),N===null?C=m:N.sibling=m,N=m);return t&&T.forEach(function(j){return e(g,j)}),Ne&&Gr(g,b),C}function O(g,p,v,S){if(typeof v=="object"&&v!==null&&v.type===Oi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case va:e:{for(var C=v.key,N=p;N!==null;){if(N.key===C){if(C=v.type,C===Oi){if(N.tag===7){n(g,N.sibling),p=i(N,v.props.children),p.return=g,g=p;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===cr&&am(C)===N.type){n(g,N.sibling),p=i(N,v.props),p.ref=Ds(g,N,v),p.return=g,g=p;break e}n(g,N);break}else e(g,N);N=N.sibling}v.type===Oi?(p=ii(v.props.children,g.mode,S,v.key),p.return=g,g=p):(S=Xa(v.type,v.key,v.props,null,g.mode,S),S.ref=Ds(g,p,v),S.return=g,g=S)}return o(g);case Di:e:{for(N=v.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(g,p.sibling),p=i(p,v.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Su(v,g.mode,S),p.return=g,g=p}return o(g);case cr:return N=v._init,O(g,p,N(v._payload),S)}if(Ws(v))return w(g,p,v,S);if(Ts(v))return x(g,p,v,S);ka(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,v),p.return=g,g=p):(n(g,p),p=xu(v,g.mode,S),p.return=g,g=p),o(g)):n(g,p)}return O}var os=g0(!0),y0=g0(!1),yl=zr(null),vl=null,Wi=null,Lh=null;function Mh(){Lh=Wi=vl=null}function Fh(t){var e=yl.current;xe(yl),t._currentValue=e}function xd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yi(t,e){vl=t,Lh=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function an(t){var e=t._currentValue;if(Lh!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(vl===null)throw Error(R(308));Wi=t,vl.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var Jr=null;function Uh(t){Jr===null?Jr=[t]:Jr.push(t)}function v0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Uh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yn(t,r)}function Yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function $h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yn(t,n)}return i=r.interleaved,i===null?(e.next=e,Uh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yn(t,n)}function Ga(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bh(t,n)}}function lm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _l(t,e,n,r){var i=t.updateQueue;ur=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;o=0,d=u=c=null,a=s;do{var f=a.lane,y=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(f=e,y=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(y,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,f=typeof w=="function"?w.call(y,h,f):w,f==null)break e;h=Oe({},h,f);break e;case 2:ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ui|=o,t.lanes=o,t.memoizedState=h}}function cm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(R(191,i));i.call(r)}}}var Qo={},Rn=zr(Qo),Io=zr(Qo),bo=zr(Qo);function Xr(t){if(t===Qo)throw Error(R(174));return t}function Vh(t,e){switch(ve(bo,e),ve(Io,t),ve(Rn,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:td(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=td(e,t)}xe(Rn),ve(Rn,e)}function as(){xe(Rn),xe(Io),xe(bo)}function w0(t){Xr(bo.current);var e=Xr(Rn.current),n=td(e,t.type);e!==n&&(ve(Io,t),ve(Rn,n))}function Wh(t){Io.current===t&&(xe(Rn),xe(Io))}var Re=zr(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mu=[];function zh(){for(var t=0;t<mu.length;t++)mu[t]._workInProgressVersionPrimary=null;mu.length=0}var qa=nr.ReactCurrentDispatcher,gu=nr.ReactCurrentBatchConfig,ci=0,De=null,Ke=null,et=null,xl=!1,Zs=!1,No=0,_E=0;function ft(){throw Error(R(321))}function Bh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Hh(t,e,n,r,i,s){if(ci=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qa.current=t===null||t.memoizedState===null?EE:IE,t=n(r,i),Zs){s=0;do{if(Zs=!1,No=0,25<=s)throw Error(R(301));s+=1,et=Ke=null,e.updateQueue=null,qa.current=bE,t=n(r,i)}while(Zs)}if(qa.current=Sl,e=Ke!==null&&Ke.next!==null,ci=0,et=Ke=De=null,xl=!1,e)throw Error(R(300));return t}function Gh(){var t=No!==0;return No=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=t:et=et.next=t,et}function ln(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=et===null?De.memoizedState:et.next;if(e!==null)et=e,Ke=t;else{if(t===null)throw Error(R(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},et===null?De.memoizedState=et=t:et=et.next=t}return et}function Co(t,e){return typeof e=="function"?e(t):e}function yu(t){var e=ln(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var d=u.lane;if((ci&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,De.lanes|=d,ui|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,wn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,ui|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vu(t){var e=ln(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);wn(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function x0(){}function S0(t,e){var n=De,r=ln(),i=e(),s=!wn(r.memoizedState,i);if(s&&(r.memoizedState=i,Rt=!0),r=r.queue,qh(b0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,To(9,I0.bind(null,n,r,i,e),void 0,null),rt===null)throw Error(R(349));ci&30||E0(n,e,i)}return i}function E0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I0(t,e,n,r){e.value=n,e.getSnapshot=r,N0(e)&&C0(t)}function b0(t,e,n){return n(function(){N0(e)&&C0(t)})}function N0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function C0(t){var e=Yn(t,1);e!==null&&vn(e,t,1,-1)}function um(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=SE.bind(null,De,t),[e.memoizedState,t]}function To(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T0(){return ln().memoizedState}function Ka(t,e,n,r){var i=bn();De.flags|=t,i.memoizedState=To(1|e,n,void 0,r===void 0?null:r)}function sc(t,e,n,r){var i=ln();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&Bh(r,o.deps)){i.memoizedState=To(e,n,s,r);return}}De.flags|=t,i.memoizedState=To(1|e,n,s,r)}function dm(t,e){return Ka(8390656,8,t,e)}function qh(t,e){return sc(2048,8,t,e)}function k0(t,e){return sc(4,2,t,e)}function R0(t,e){return sc(4,4,t,e)}function P0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A0(t,e,n){return n=n!=null?n.concat([t]):null,sc(4,4,P0.bind(null,e,t),n)}function Kh(){}function D0(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function O0(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function j0(t,e,n){return ci&21?(wn(n,e)||(n=$y(),De.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function wE(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=gu.transition;gu.transition={};try{t(!1),e()}finally{ce=n,gu.transition=r}}function L0(){return ln().memoizedState}function xE(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M0(t))F0(e,n);else if(n=v0(t,e,n,r),n!==null){var i=xt();vn(n,t,r,i),U0(n,e,r)}}function SE(t,e,n){var r=Cr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M0(t))F0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wn(a,o)){var c=e.interleaved;c===null?(i.next=i,Uh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=v0(t,e,i,r),n!==null&&(i=xt(),vn(n,t,r,i),U0(n,e,r))}}function M0(t){var e=t.alternate;return t===De||e!==null&&e===De}function F0(t,e){Zs=xl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bh(t,n)}}var Sl={readContext:an,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},EE={readContext:an,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:an,useEffect:dm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ka(4194308,4,P0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ka(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ka(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xE.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:um,useDebugValue:Kh,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=um(!1),e=t[0];return t=wE.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=bn();if(Ne){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),rt===null)throw Error(R(349));ci&30||E0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,dm(b0.bind(null,r,s,t),[t]),r.flags|=2048,To(9,I0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=rt.identifierPrefix;if(Ne){var n=Vn,r=$n;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_E++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IE={readContext:an,useCallback:D0,useContext:an,useEffect:qh,useImperativeHandle:A0,useInsertionEffect:k0,useLayoutEffect:R0,useMemo:O0,useReducer:yu,useRef:T0,useState:function(){return yu(Co)},useDebugValue:Kh,useDeferredValue:function(t){var e=ln();return j0(e,Ke.memoizedState,t)},useTransition:function(){var t=yu(Co)[0],e=ln().memoizedState;return[t,e]},useMutableSource:x0,useSyncExternalStore:S0,useId:L0,unstable_isNewReconciler:!1},bE={readContext:an,useCallback:D0,useContext:an,useEffect:qh,useImperativeHandle:A0,useInsertionEffect:k0,useLayoutEffect:R0,useMemo:O0,useReducer:vu,useRef:T0,useState:function(){return vu(Co)},useDebugValue:Kh,useDeferredValue:function(t){var e=ln();return Ke===null?e.memoizedState=t:j0(e,Ke.memoizedState,t)},useTransition:function(){var t=vu(Co)[0],e=ln().memoizedState;return[t,e]},useMutableSource:x0,useSyncExternalStore:S0,useId:L0,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oc={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),i=Cr(t),s=Hn(r,i);s.payload=e,n!=null&&(s.callback=n),e=br(t,s,i),e!==null&&(vn(e,t,i,r),Ga(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),i=Cr(t),s=Hn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=br(t,s,i),e!==null&&(vn(e,t,i,r),Ga(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Cr(t),i=Hn(n,r);i.tag=2,e!=null&&(i.callback=e),e=br(t,i,r),e!==null&&(vn(e,t,r,n),Ga(e,t,r))}};function hm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(i,s):!0}function $0(t,e,n){var r=!1,i=jr,s=e.contextType;return typeof s=="object"&&s!==null?s=an(s):(i=Dt(e)?ai:yt.current,r=e.contextTypes,s=(r=r!=null)?is(t,i):jr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function fm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&oc.enqueueReplaceState(e,e.state,null)}function Ed(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},$h(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=an(s):(s=Dt(e)?ai:yt.current,i.context=is(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oc.enqueueReplaceState(i,i.state,null),_l(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ls(t,e){try{var n="",r=e;do n+=Zx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _u(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Id(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NE=typeof WeakMap=="function"?WeakMap:Map;function V0(t,e,n){n=Hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Il||(Il=!0,Od=r),Id(t,e)},n}function W0(t,e,n){n=Hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Id(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Id(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$E.bind(null,t,e,n),e.then(t,t))}function mm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hn(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var CE=nr.ReactCurrentOwner,Rt=!1;function _t(t,e,n,r){e.child=t===null?y0(e,null,n,r):os(e,t.child,n,r)}function ym(t,e,n,r,i){n=n.render;var s=e.ref;return Yi(e,i),r=Hh(t,e,n,r,s,i),n=Gh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qn(t,e,i)):(Ne&&n&&Dh(e),e.flags|=1,_t(t,e,r,i),e.child)}function vm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!nf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,z0(t,e,s,r,i)):(t=Xa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return Qn(t,e,i)}return e.flags|=1,t=Tr(s,r),t.ref=e.ref,t.return=e,e.child=t}function z0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wo(s,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Qn(t,e,i)}return bd(t,e,n,r,i)}function B0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Bi,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Bi,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(Bi,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ve(Bi,$t),$t|=r;return _t(t,e,i,n),e.child}function H0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bd(t,e,n,r,i){var s=Dt(n)?ai:yt.current;return s=is(e,s),Yi(e,i),n=Hh(t,e,n,r,s,i),r=Gh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qn(t,e,i)):(Ne&&r&&Dh(e),e.flags|=1,_t(t,e,n,i),e.child)}function _m(t,e,n,r,i){if(Dt(n)){var s=!0;pl(e)}else s=!1;if(Yi(e,i),e.stateNode===null)Ya(t,e),$0(e,n,r),Ed(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=an(u):(u=Dt(n)?ai:yt.current,u=is(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&fm(e,o,r,u),ur=!1;var f=e.memoizedState;o.state=f,_l(e,r,o,i),c=e.memoizedState,a!==r||f!==c||At.current||ur?(typeof d=="function"&&(Sd(e,n,d,r),c=e.memoizedState),(a=ur||hm(e,n,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_0(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:hn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=an(c):(c=Dt(n)?ai:yt.current,c=is(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&fm(e,o,r,c),ur=!1,f=e.memoizedState,o.state=f,_l(e,r,o,i);var w=e.memoizedState;a!==h||f!==w||At.current||ur?(typeof y=="function"&&(Sd(e,n,y,r),w=e.memoizedState),(u=ur||hm(e,n,u,r,f,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Nd(t,e,n,r,s,i)}function Nd(t,e,n,r,i,s){H0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&im(e,n,!1),Qn(t,e,s);r=e.stateNode,CE.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=os(e,t.child,null,s),e.child=os(e,null,a,s)):_t(t,e,a,s),e.memoizedState=r.state,i&&im(e,n,!0),e.child}function G0(t){var e=t.stateNode;e.pendingContext?rm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rm(t,e.context,!1),Vh(t,e.containerInfo)}function wm(t,e,n,r,i){return ss(),jh(i),e.flags|=256,_t(t,e,n,r),e.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Td(t){return{baseLanes:t,cachePool:null,transitions:null}}function q0(t,e,n){var r=e.pendingProps,i=Re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(Re,i&1),t===null)return wd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cc(o,r,0,null),t=ii(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Td(n),e.memoizedState=Cd,t):Yh(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return TE(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Tr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Tr(a,s):(s=ii(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Td(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Cd,r}return s=t.child,t=s.sibling,r=Tr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yh(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ra(t,e,n,r){return r!==null&&jh(r),os(e,t.child,null,n),t=Yh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_u(Error(R(422))),Ra(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cc({mode:"visible",children:r.children},i,0,null),s=ii(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&os(e,t.child,null,o),e.child.memoizedState=Td(o),e.memoizedState=Cd,s);if(!(e.mode&1))return Ra(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(R(419)),r=_u(s,r,void 0),Ra(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rt||a){if(r=rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yn(t,i),vn(r,t,i,-1))}return tf(),r=_u(Error(R(421))),Ra(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wt=Ir(i.nextSibling),zt=e,Ne=!0,pn=null,t!==null&&(Xt[Zt++]=$n,Xt[Zt++]=Vn,Xt[Zt++]=li,$n=t.id,Vn=t.overflow,li=e),e=Yh(e,r.children),e.flags|=4096,e)}function xm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xd(t.return,e,n)}function wu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function K0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(_t(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xm(t,n,e);else if(t.tag===19)xm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wu(e,!0,n,null,s);break;case"together":wu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kE(t,e,n){switch(e.tag){case 3:G0(e),ss();break;case 5:w0(e);break;case 1:Dt(e.type)&&pl(e);break;case 4:Vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(yl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?q0(t,e,n):(ve(Re,Re.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);ve(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return K0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,B0(t,e,n)}return Qn(t,e,n)}var Y0,kd,Q0,J0;Y0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kd=function(){};Q0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xr(Rn.current);var s=null;switch(n){case"input":i=Ju(t,i),r=Ju(t,r),s=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":i=ed(t,i),r=ed(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hl)}nd(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&we("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};J0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Os(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RE(t,e,n){var r=e.pendingProps;switch(Oh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Dt(e.type)&&fl(),pt(e),null;case 3:return r=e.stateNode,as(),xe(At),xe(yt),zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Md(pn),pn=null))),kd(t,e),pt(e),null;case 5:Wh(e);var i=Xr(bo.current);if(n=e.type,t!==null&&e.stateNode!=null)Q0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return pt(e),null}if(t=Xr(Rn.current),Ta(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Nn]=e,r[Eo]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<Bs.length;i++)we(Bs[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Rp(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":Ap(r,s),we("invalid",r)}nd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ca(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ca(r.textContent,a,t),i=["children",""+a]):fo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":_a(r),Pp(r,s,!0);break;case"textarea":_a(r),Dp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=by(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[Eo]=r,Y0(t,e,!1,!1),e.stateNode=t;e:{switch(o=rd(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bs.length;i++)we(Bs[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":Rp(t,r),i=Ju(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),we("invalid",t);break;case"textarea":Ap(t,r),i=ed(t,r),we("invalid",t);break;default:i=r}nd(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Ty(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ny(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&po(t,c):typeof c=="number"&&po(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&we("scroll",t):c!=null&&_h(t,s,c,o))}switch(n){case"input":_a(t),Pp(t,r,!1);break;case"textarea":_a(t),Dp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)J0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=Xr(bo.current),Xr(Rn.current),Ta(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(s=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Ca(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return pt(e),null;case 13:if(xe(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Wt!==null&&e.mode&1&&!(e.flags&128))m0(),ss(),e.flags|=98560,s=!1;else if(s=Ta(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[Nn]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),s=!1}else pn!==null&&(Md(pn),pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Qe===0&&(Qe=3):tf())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return as(),kd(t,e),t===null&&xo(e.stateNode.containerInfo),pt(e),null;case 10:return Fh(e.type._context),pt(e),null;case 17:return Dt(e.type)&&fl(),pt(e),null;case 19:if(xe(Re),s=e.memoizedState,s===null)return pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Os(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wl(t),o!==null){for(e.flags|=128,Os(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>cs&&(e.flags|=128,r=!0,Os(s,!1),e.lanes=4194304)}else{if(!r)if(t=wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Os(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return pt(e),null}else 2*We()-s.renderingStartTime>cs&&n!==1073741824&&(e.flags|=128,r=!0,Os(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=Re.current,ve(Re,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return ef(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function PE(t,e){switch(Oh(e),e.tag){case 1:return Dt(e.type)&&fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return as(),xe(At),xe(yt),zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wh(e),null;case 13:if(xe(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Re),null;case 4:return as(),null;case 10:return Fh(e.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Pa=!1,mt=!1,AE=typeof WeakSet=="function"?WeakSet:Set,U=null;function zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Rd(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Sm=!1;function DE(t,e){if(fd=cl,t=n0(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(c=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:t,selectionRange:n},cl=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,O=w.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:hn(e.type,x),O);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){Fe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return w=Sm,Sm=!1,w}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rd(e,n,s)}i=i.next}while(i!==r)}}function ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function X0(t){var e=t.alternate;e!==null&&(t.alternate=null,X0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[Eo],delete e[yd],delete e[mE],delete e[gE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Z0(t){return t.tag===5||t.tag===3||t.tag===4}function Em(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ad(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hl));else if(r!==4&&(t=t.child,t!==null))for(Ad(t,e,n),t=t.sibling;t!==null;)Ad(t,e,n),t=t.sibling}function Dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dd(t,e,n),t=t.sibling;t!==null;)Dd(t,e,n),t=t.sibling}var ct=null,fn=!1;function ar(t,e,n){for(n=n.child;n!==null;)ev(t,e,n),n=n.sibling}function ev(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:mt||zi(n,e);case 6:var r=ct,i=fn;ct=null,ar(t,e,n),ct=r,fn=i,ct!==null&&(fn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(fn?(t=ct,n=n.stateNode,t.nodeType===8?fu(t.parentNode,n):t.nodeType===1&&fu(t,n),vo(t)):fu(ct,n.stateNode));break;case 4:r=ct,i=fn,ct=n.stateNode.containerInfo,fn=!0,ar(t,e,n),ct=r,fn=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rd(n,e,o),i=i.next}while(i!==r)}ar(t,e,n);break;case 1:if(!mt&&(zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,ar(t,e,n),mt=r):ar(t,e,n);break;default:ar(t,e,n)}}function Im(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AE),e.forEach(function(r){var i=WE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,fn=!1;break e;case 3:ct=a.stateNode.containerInfo,fn=!0;break e;case 4:ct=a.stateNode.containerInfo,fn=!0;break e}a=a.return}if(ct===null)throw Error(R(160));ev(s,o,i),ct=null,fn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tv(e,t),e=e.sibling}function tv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),In(t),r&4){try{eo(3,t,t.return),ac(3,t)}catch(x){Fe(t,t.return,x)}try{eo(5,t,t.return)}catch(x){Fe(t,t.return,x)}}break;case 1:dn(e,t),In(t),r&512&&n!==null&&zi(n,n.return);break;case 5:if(dn(e,t),In(t),r&512&&n!==null&&zi(n,n.return),t.flags&32){var i=t.stateNode;try{po(i,"")}catch(x){Fe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ey(i,s),rd(a,o);var u=rd(a,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Ty(i,h):d==="dangerouslySetInnerHTML"?Ny(i,h):d==="children"?po(i,h):_h(i,d,h,u)}switch(a){case"input":Xu(i,s);break;case"textarea":Iy(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Hi(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hi(i,!!s.multiple,s.defaultValue,!0):Hi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Eo]=s}catch(x){Fe(t,t.return,x)}}break;case 6:if(dn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Fe(t,t.return,x)}}break;case 3:if(dn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(e.containerInfo)}catch(x){Fe(t,t.return,x)}break;case 4:dn(e,t),In(t);break;case 13:dn(e,t),In(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Xh=We())),r&4&&Im(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(u=mt)||d,dn(e,t),mt=u):dn(e,t),In(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(f=U,y=f.child,f.tag){case 0:case 11:case 14:case 15:eo(4,f,f.return);break;case 1:zi(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Fe(r,n,x)}}break;case 5:zi(f,f.return);break;case 22:if(f.memoizedState!==null){Nm(h);continue}}y!==null?(y.return=f,U=y):Nm(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Cy("display",o))}catch(x){Fe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Fe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dn(e,t),In(t),r&4&&Im(t);break;case 21:break;default:dn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Z0(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(po(i,""),r.flags&=-33);var s=Em(t);Dd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Em(t);Ad(t,a,o);break;default:throw Error(R(161))}}catch(c){Fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OE(t,e,n){U=t,nv(t)}function nv(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Pa;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||mt;a=Pa;var u=mt;if(Pa=o,(mt=c)&&!u)for(U=i;U!==null;)o=U,c=o.child,o.tag===22&&o.memoizedState!==null?Cm(i):c!==null?(c.return=o,U=c):Cm(i);for(;s!==null;)U=s,nv(s),s=s.sibling;U=i,Pa=a,mt=u}bm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):bm(t)}}function bm(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cm(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&vo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}mt||e.flags&512&&Pd(e)}catch(f){Fe(e,e.return,f)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Nm(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Cm(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ac(4,e)}catch(c){Fe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Fe(e,i,c)}}var s=e.return;try{Pd(e)}catch(c){Fe(e,s,c)}break;case 5:var o=e.return;try{Pd(e)}catch(c){Fe(e,o,c)}}}catch(c){Fe(e,e.return,c)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var jE=Math.ceil,El=nr.ReactCurrentDispatcher,Qh=nr.ReactCurrentOwner,rn=nr.ReactCurrentBatchConfig,oe=0,rt=null,He=null,ut=0,$t=0,Bi=zr(0),Qe=0,ko=null,ui=0,lc=0,Jh=0,to=null,kt=null,Xh=0,cs=1/0,Mn=null,Il=!1,Od=null,Nr=null,Aa=!1,vr=null,bl=0,no=0,jd=null,Qa=-1,Ja=0;function xt(){return oe&6?We():Qa!==-1?Qa:Qa=We()}function Cr(t){return t.mode&1?oe&2&&ut!==0?ut&-ut:vE.transition!==null?(Ja===0&&(Ja=$y()),Ja):(t=ce,t!==0||(t=window.event,t=t===void 0?16:qy(t.type)),t):1}function vn(t,e,n,r){if(50<no)throw no=0,jd=null,Error(R(185));qo(t,n,r),(!(oe&2)||t!==rt)&&(t===rt&&(!(oe&2)&&(lc|=n),Qe===4&&fr(t,ut)),Ot(t,r),n===1&&oe===0&&!(e.mode&1)&&(cs=We()+500,ic&&Br()))}function Ot(t,e){var n=t.callbackNode;vS(t,e);var r=ll(t,t===rt?ut:0);if(r===0)n!==null&&Lp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lp(n),e===1)t.tag===0?yE(Tm.bind(null,t)):h0(Tm.bind(null,t)),fE(function(){!(oe&6)&&Br()}),n=null;else{switch(Vy(r)){case 1:n=Ih;break;case 4:n=Fy;break;case 16:n=al;break;case 536870912:n=Uy;break;default:n=al}n=uv(n,rv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rv(t,e){if(Qa=-1,Ja=0,oe&6)throw Error(R(327));var n=t.callbackNode;if(Qi()&&t.callbackNode!==n)return null;var r=ll(t,t===rt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nl(t,r);else{e=r;var i=oe;oe|=2;var s=sv();(rt!==t||ut!==e)&&(Mn=null,cs=We()+500,ri(t,e));do try{FE();break}catch(a){iv(t,a)}while(1);Mh(),El.current=s,oe=i,He!==null?e=0:(rt=null,ut=0,e=Qe)}if(e!==0){if(e===2&&(i=ld(t),i!==0&&(r=i,e=Ld(t,i))),e===1)throw n=ko,ri(t,0),fr(t,r),Ot(t,We()),n;if(e===6)fr(t,r);else{if(i=t.current.alternate,!(r&30)&&!LE(i)&&(e=Nl(t,r),e===2&&(s=ld(t),s!==0&&(r=s,e=Ld(t,s))),e===1))throw n=ko,ri(t,0),fr(t,r),Ot(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:qr(t,kt,Mn);break;case 3:if(fr(t,r),(r&130023424)===r&&(e=Xh+500-We(),10<e)){if(ll(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gd(qr.bind(null,t,kt,Mn),e);break}qr(t,kt,Mn);break;case 4:if(fr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-yn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jE(r/1960))-r,10<r){t.timeoutHandle=gd(qr.bind(null,t,kt,Mn),r);break}qr(t,kt,Mn);break;case 5:qr(t,kt,Mn);break;default:throw Error(R(329))}}}return Ot(t,We()),t.callbackNode===n?rv.bind(null,t):null}function Ld(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(ri(t,e).flags|=256),t=Nl(t,e),t!==2&&(e=kt,kt=n,e!==null&&Md(e)),t}function Md(t){kt===null?kt=t:kt.push.apply(kt,t)}function LE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~Jh,e&=~lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Tm(t){if(oe&6)throw Error(R(327));Qi();var e=ll(t,0);if(!(e&1))return Ot(t,We()),null;var n=Nl(t,e);if(t.tag!==0&&n===2){var r=ld(t);r!==0&&(e=r,n=Ld(t,r))}if(n===1)throw n=ko,ri(t,0),fr(t,e),Ot(t,We()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qr(t,kt,Mn),Ot(t,We()),null}function Zh(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(cs=We()+500,ic&&Br())}}function di(t){vr!==null&&vr.tag===0&&!(oe&6)&&Qi();var e=oe;oe|=1;var n=rn.transition,r=ce;try{if(rn.transition=null,ce=1,t)return t()}finally{ce=r,rn.transition=n,oe=e,!(oe&6)&&Br()}}function ef(){$t=Bi.current,xe(Bi)}function ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hE(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Oh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fl();break;case 3:as(),xe(At),xe(yt),zh();break;case 5:Wh(r);break;case 4:as();break;case 13:xe(Re);break;case 19:xe(Re);break;case 10:Fh(r.type._context);break;case 22:case 23:ef()}n=n.return}if(rt=t,He=t=Tr(t.current,null),ut=$t=e,Qe=0,ko=null,Jh=lc=ui=0,kt=to=null,Jr!==null){for(e=0;e<Jr.length;e++)if(n=Jr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Jr=null}return t}function iv(t,e){do{var n=He;try{if(Mh(),qa.current=Sl,xl){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xl=!1}if(ci=0,et=Ke=De=null,Zs=!1,No=0,Qh.current=null,n===null||n.return===null){Qe=1,ko=e,He=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=ut,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=mm(o);if(y!==null){y.flags&=-257,gm(y,o,a,s,e),y.mode&1&&pm(s,u,e),e=y,c=u;var w=e.updateQueue;if(w===null){var x=new Set;x.add(c),e.updateQueue=x}else w.add(c);break e}else{if(!(e&1)){pm(s,u,e),tf();break e}c=Error(R(426))}}else if(Ne&&a.mode&1){var O=mm(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),gm(O,o,a,s,e),jh(ls(c,a));break e}}s=c=ls(c,a),Qe!==4&&(Qe=2),to===null?to=[s]:to.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=V0(s,c,e);lm(s,g);break e;case 1:a=c;var p=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Nr===null||!Nr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=W0(s,a,e);lm(s,S);break e}}s=s.return}while(s!==null)}av(n)}catch(C){e=C,He===n&&n!==null&&(He=n=n.return);continue}break}while(1)}function sv(){var t=El.current;return El.current=Sl,t===null?Sl:t}function tf(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),rt===null||!(ui&268435455)&&!(lc&268435455)||fr(rt,ut)}function Nl(t,e){var n=oe;oe|=2;var r=sv();(rt!==t||ut!==e)&&(Mn=null,ri(t,e));do try{ME();break}catch(i){iv(t,i)}while(1);if(Mh(),oe=n,El.current=r,He!==null)throw Error(R(261));return rt=null,ut=0,Qe}function ME(){for(;He!==null;)ov(He)}function FE(){for(;He!==null&&!cS();)ov(He)}function ov(t){var e=cv(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?av(t):He=e,Qh.current=null}function av(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PE(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=RE(n,e,$t),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function qr(t,e,n){var r=ce,i=rn.transition;try{rn.transition=null,ce=1,UE(t,e,n,r)}finally{rn.transition=i,ce=r}return null}function UE(t,e,n,r){do Qi();while(vr!==null);if(oe&6)throw Error(R(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_S(t,s),t===rt&&(He=rt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Aa||(Aa=!0,uv(al,function(){return Qi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rn.transition,rn.transition=null;var o=ce;ce=1;var a=oe;oe|=4,Qh.current=null,DE(t,n),tv(n,t),sE(pd),cl=!!fd,pd=fd=null,t.current=n,OE(n),uS(),oe=a,ce=o,rn.transition=s}else t.current=n;if(Aa&&(Aa=!1,vr=t,bl=i),s=t.pendingLanes,s===0&&(Nr=null),fS(n.stateNode),Ot(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Il)throw Il=!1,t=Od,Od=null,t;return bl&1&&t.tag!==0&&Qi(),s=t.pendingLanes,s&1?t===jd?no++:(no=0,jd=t):no=0,Br(),null}function Qi(){if(vr!==null){var t=Vy(bl),e=rn.transition,n=ce;try{if(rn.transition=null,ce=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,bl=0,oe&6)throw Error(R(331));var i=oe;for(oe|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(U=u;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:eo(8,d,s)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var f=d.sibling,y=d.return;if(X0(d),d===u){U=null;break}if(f!==null){f.return=y,U=f;break}U=y}}}var w=s.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var O=x.sibling;x.sibling=null,x=O}while(x!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:eo(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,U=g;break e}U=s.return}}var p=t.current;for(U=p;U!==null;){o=U;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,U=v;else e:for(o=p;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ac(9,a)}}catch(C){Fe(a,a.return,C)}if(a===o){U=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,U=S;break e}U=a.return}}if(oe=i,Br(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{ce=n,rn.transition=e}}return!1}function km(t,e,n){e=ls(n,e),e=V0(t,e,1),t=br(t,e,1),e=xt(),t!==null&&(qo(t,1,e),Ot(t,e))}function Fe(t,e,n){if(t.tag===3)km(t,t,n);else for(;e!==null;){if(e.tag===3){km(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=ls(n,t),t=W0(e,t,1),e=br(e,t,1),t=xt(),e!==null&&(qo(e,1,t),Ot(e,t));break}}e=e.return}}function $E(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ut&n)===n&&(Qe===4||Qe===3&&(ut&130023424)===ut&&500>We()-Xh?ri(t,0):Jh|=n),Ot(t,e)}function lv(t,e){e===0&&(t.mode&1?(e=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):e=1);var n=xt();t=Yn(t,e),t!==null&&(qo(t,e,n),Ot(t,n))}function VE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lv(t,n)}function WE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),lv(t,n)}var cv;cv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,kE(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ne&&e.flags&1048576&&f0(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ya(t,e),t=e.pendingProps;var i=is(e,yt.current);Yi(e,n),i=Hh(null,e,r,t,i,n);var s=Gh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(s=!0,pl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$h(e),i.updater=oc,e.stateNode=i,i._reactInternals=e,Ed(e,r,t,n),e=Nd(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&Dh(e),_t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ya(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BE(r),t=hn(r,t),i){case 0:e=bd(null,e,r,t,n);break e;case 1:e=_m(null,e,r,t,n);break e;case 11:e=ym(null,e,r,t,n);break e;case 14:e=vm(null,e,r,hn(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),bd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),_m(t,e,r,i,n);case 3:e:{if(G0(e),t===null)throw Error(R(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_0(t,e),_l(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ls(Error(R(423)),e),e=wm(t,e,r,n,i);break e}else if(r!==i){i=ls(Error(R(424)),e),e=wm(t,e,r,n,i);break e}else for(Wt=Ir(e.stateNode.containerInfo.firstChild),zt=e,Ne=!0,pn=null,n=y0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),r===i){e=Qn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return w0(e),t===null&&wd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,md(r,i)?o=null:s!==null&&md(r,s)&&(e.flags|=32),H0(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&wd(e),null;case 13:return q0(t,e,n);case 4:return Vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=os(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),ym(t,e,r,i,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ve(yl,r._currentValue),r._currentValue=o,s!==null)if(wn(s.value,o)){if(s.children===i.children&&!At.current){e=Qn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Hn(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),xd(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(R(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Yi(e,n),i=an(i),r=r(i),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,i=hn(r,e.pendingProps),i=hn(r.type,i),vm(t,e,r,i,n);case 15:return z0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Ya(t,e),e.tag=1,Dt(r)?(t=!0,pl(e)):t=!1,Yi(e,n),$0(e,r,i),Ed(e,r,i,n),Nd(null,e,r,!0,t,n);case 19:return K0(t,e,n);case 22:return B0(t,e,n)}throw Error(R(156,e.tag))};function uv(t,e){return My(t,e)}function zE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new zE(t,e,n,r)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BE(t){if(typeof t=="function")return nf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xh)return 11;if(t===Sh)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xa(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")nf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return ii(n.children,i,s,e);case wh:o=8,i|=8;break;case qu:return t=tn(12,n,e,i|2),t.elementType=qu,t.lanes=s,t;case Ku:return t=tn(13,n,e,i),t.elementType=Ku,t.lanes=s,t;case Yu:return t=tn(19,n,e,i),t.elementType=Yu,t.lanes=s,t;case wy:return cc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vy:o=10;break e;case _y:o=9;break e;case xh:o=11;break e;case Sh:o=14;break e;case cr:o=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ii(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function cc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=wy,t.lanes=n,t.stateNode={isHidden:!1},t}function xu(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function Su(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rf(t,e,n,r,i,s,o,a,c){return t=new HE(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$h(s),t}function GE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dv(t){if(!t)return jr;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Dt(n))return d0(t,n,e)}return e}function hv(t,e,n,r,i,s,o,a,c){return t=rf(n,r,!0,t,i,s,o,a,c),t.context=dv(null),n=t.current,r=xt(),i=Cr(n),s=Hn(r,i),s.callback=e??null,br(n,s,i),t.current.lanes=i,qo(t,i,r),Ot(t,r),t}function uc(t,e,n,r){var i=e.current,s=xt(),o=Cr(i);return n=dv(n),e.context===null?e.context=n:e.pendingContext=n,e=Hn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(i,e,o),t!==null&&(vn(t,i,o,s),Ga(t,i,o)),o}function Cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sf(t,e){Rm(t,e),(t=t.alternate)&&Rm(t,e)}function qE(){return null}var fv=typeof reportError=="function"?reportError:function(t){console.error(t)};function of(t){this._internalRoot=t}dc.prototype.render=of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));uc(t,e,null,null)};dc.prototype.unmount=of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;di(function(){uc(null,t,null,null)}),e[Kn]=null}};function dc(t){this._internalRoot=t}dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=By();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&Gy(t)}};function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pm(){}function KE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Cl(o);s.call(u)}}var o=hv(e,r,t,0,null,!1,!1,"",Pm);return t._reactRootContainer=o,t[Kn]=o.current,xo(t.nodeType===8?t.parentNode:t),di(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Cl(c);a.call(u)}}var c=rf(t,0,!1,null,null,!1,!1,"",Pm);return t._reactRootContainer=c,t[Kn]=c.current,xo(t.nodeType===8?t.parentNode:t),di(function(){uc(e,c,n,r)}),c}function fc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Cl(o);a.call(c)}}uc(e,o,t,i)}else o=KE(n,e,t,i,r);return Cl(o)}Wy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zs(e.pendingLanes);n!==0&&(bh(e,n|1),Ot(e,We()),!(oe&6)&&(cs=We()+500,Br()))}break;case 13:di(function(){var r=Yn(t,1);if(r!==null){var i=xt();vn(r,t,1,i)}}),sf(t,1)}};Nh=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var n=xt();vn(e,t,134217728,n)}sf(t,134217728)}};zy=function(t){if(t.tag===13){var e=Cr(t),n=Yn(t,e);if(n!==null){var r=xt();vn(n,t,e,r)}sf(t,e)}};By=function(){return ce};Hy=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};sd=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rc(r);if(!i)throw Error(R(90));Sy(r),Xu(r,i)}}}break;case"textarea":Iy(t,n);break;case"select":e=n.value,e!=null&&Hi(t,!!n.multiple,e,!1)}};Py=Zh;Ay=di;var YE={usingClientEntryPoint:!1,Events:[Yo,Fi,rc,ky,Ry,Zh]},js={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QE={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jy(t),t===null?null:t.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||qE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{Zl=Da.inject(QE),kn=Da}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(e))throw Error(R(200));return GE(t,e,null,n)};Kt.createRoot=function(t,e){if(!af(t))throw Error(R(299));var n=!1,r="",i=fv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rf(t,1,!1,null,null,n,!1,r,i),t[Kn]=e.current,xo(t.nodeType===8?t.parentNode:t),new of(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=jy(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return di(t)};Kt.hydrate=function(t,e,n){if(!hc(e))throw Error(R(200));return fc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!af(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hv(e,null,t,1,n??null,i,!1,s,o),t[Kn]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dc(e)};Kt.render=function(t,e,n){if(!hc(e))throw Error(R(200));return fc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!hc(t))throw Error(R(40));return t._reactRootContainer?(di(function(){fc(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Zh;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hc(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return fc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function pv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pv)}catch(t){console.error(t)}}pv(),py.exports=Kt;var JE=py.exports,Am=JE;Hu.createRoot=Am.createRoot,Hu.hydrateRoot=Am.hydrateRoot;const XE="modulepreload",ZE=function(t){return"/"+t},Dm={},be=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ZE(s),s in Dm)return;Dm[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":XE,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},eI=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=function(t,e){if(!t)throw _s(e)},_s=function(t){return new Error("Firebase Database ("+mv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},lf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(f=64)),r.push(n[d],n[h],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new nI;const f=s<<2|a>>4;if(r.push(f),u!==64){const y=a<<4&240|u>>2;if(r.push(y),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yv=function(t){const e=gv(t);return lf.encodeByteArray(e,!0)},Tl=function(t){return yv(t).replace(/\./g,"")},kl=function(t){try{return lf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){return vv(void 0,t)}function vv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!iI(n)||(t[n]=vv(t[n],e[n]));return t}function iI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=()=>sI().__FIREBASE_DEFAULTS__,aI=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kl(t[1]);return e&&JSON.parse(e)},cf=()=>{try{return eI()||oI()||aI()||lI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_v=t=>{var e,n;return(n=(e=cf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cI=t=>{const e=_v(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wv=()=>{var t;return(t=cf())==null?void 0:t.config},xv=t=>{var e;return(e=cf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Tl(JSON.stringify(n)),Tl(JSON.stringify(o)),a].join(".")}const ro={};function dI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ro))ro[e]?t.emulator.push(e):t.prod.push(e);return t}function hI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Om=!1;function Ev(t,e){if(typeof window>"u"||typeof document>"u"||!ws(window.location.host)||ro[t]===e||ro[t]||Om)return;ro[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=dI().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Om=!0,o()},f}function d(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=hI(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),O=document.getElementById(x)||document.createElement("a"),g=n("preprendIcon"),p=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),d(O,x);const S=u();c(p,g),v.append(p,w,O,S),document.body.appendChild(v)}s?(w.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function fI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function df(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Iv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pI(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bv(){return mv.NODE_ADMIN===!0}function hf(){try{return typeof indexedDB=="object"}catch{return!1}}function ff(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function Nv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mI,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xi.prototype.create)}}class xi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gI(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jn(i,a,r)}}function gI(t,e){return t.replace(yI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){return JSON.parse(t)}function Ye(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ro(kl(s[0])||""),n=Ro(kl(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},vI=function(t){const e=Cv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},_I=function(t){const e=Cv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Rl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pl(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(jm(s)&&jm(o)){if(!Lr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hs(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Gs(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),d=1518500249):(u=s^o^a,d=1859775393):h<60?(u=s&o|a&(s|o),d=2400959708):(u=s^o^a,d=3395469782);const f=(i<<5|i>>>27)+u+c+d+r[h]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function xI(t,e){const n=new SI(t,e);return n.subscribe.bind(n)}class SI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Eu),i.error===void 0&&(i.error=Eu),i.complete===void 0&&(i.complete=Eu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Eu(){}function fi(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,A(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pc=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1e3,NI=2,CI=4*60*60*1e3,TI=.5;function Lm(t,e=bI,n=NI){const r=e*Math.pow(n,t),i=Math.round(TI*r*(Math.random()-.5)*2);return Math.min(CI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RI(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kI(t){return t===Kr?void 0:t}function RI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const PI={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},AI=ue.INFO,DI={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},OI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mc{constructor(e){this.name=e,this._logLevel=AI,this._logHandler=OI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const jI=(t,e)=>e.some(n=>t instanceof n);let Mm,Fm;function LI(){return Mm||(Mm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MI(){return Fm||(Fm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kv=new WeakMap,Ud=new WeakMap,Rv=new WeakMap,Iu=new WeakMap,pf=new WeakMap;function FI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kv.set(n,t)}).catch(()=>{}),pf.set(e,t),e}function UI(t){if(Ud.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ud.set(t,e)}let $d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ud.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $I(t){$d=t($d)}function VI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bu(this),e,...n);return Rv.set(r,e.sort?e.sort():[e]),kr(r)}:MI().includes(t)?function(...e){return t.apply(bu(this),e),kr(kv.get(this))}:function(...e){return kr(t.apply(bu(this),e))}}function WI(t){return typeof t=="function"?VI(t):(t instanceof IDBTransaction&&UI(t),jI(t,LI())?new Proxy(t,$d):t)}function kr(t){if(t instanceof IDBRequest)return FI(t);if(Iu.has(t))return Iu.get(t);const e=WI(t);return e!==t&&(Iu.set(t,e),pf.set(e,t)),e}const bu=t=>pf.get(t);function Pv(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=kr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(kr(o.result),c.oldVersion,c.newVersion,kr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const zI=["get","getKey","getAll","getAllKeys","count"],BI=["put","add","delete","clear"],Nu=new Map;function Um(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nu.get(e))return Nu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zI.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return Nu.set(e,s),s}$I(t=>({...t,get:(e,n,r)=>Um(e,n)||t.get(e,n,r),has:(e,n)=>!!Um(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vd="@firebase/app",$m="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new mc("@firebase/app"),qI="@firebase/app-compat",KI="@firebase/analytics-compat",YI="@firebase/analytics",QI="@firebase/app-check-compat",JI="@firebase/app-check",XI="@firebase/auth",ZI="@firebase/auth-compat",eb="@firebase/database",tb="@firebase/data-connect",nb="@firebase/database-compat",rb="@firebase/functions",ib="@firebase/functions-compat",sb="@firebase/installations",ob="@firebase/installations-compat",ab="@firebase/messaging",lb="@firebase/messaging-compat",cb="@firebase/performance",ub="@firebase/performance-compat",db="@firebase/remote-config",hb="@firebase/remote-config-compat",fb="@firebase/storage",pb="@firebase/storage-compat",mb="@firebase/firestore",gb="@firebase/ai",yb="@firebase/firestore-compat",vb="firebase",_b="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="[DEFAULT]",wb={[Vd]:"fire-core",[qI]:"fire-core-compat",[YI]:"fire-analytics",[KI]:"fire-analytics-compat",[JI]:"fire-app-check",[QI]:"fire-app-check-compat",[XI]:"fire-auth",[ZI]:"fire-auth-compat",[eb]:"fire-rtdb",[tb]:"fire-data-connect",[nb]:"fire-rtdb-compat",[rb]:"fire-fn",[ib]:"fire-fn-compat",[sb]:"fire-iid",[ob]:"fire-iid-compat",[ab]:"fire-fcm",[lb]:"fire-fcm-compat",[cb]:"fire-perf",[ub]:"fire-perf-compat",[db]:"fire-rc",[hb]:"fire-rc-compat",[fb]:"fire-gcs",[pb]:"fire-gcs-compat",[mb]:"fire-fst",[yb]:"fire-fst-compat",[gb]:"fire-vertex","fire-js":"fire-js",[vb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Map,xb=new Map,zd=new Map;function Vm(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function An(t){const e=t.name;if(zd.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;zd.set(e,t);for(const n of Po.values())Vm(n,t);for(const n of xb.values())Vm(n,t);return!0}function Ei(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ae(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new xi("app","Firebase",Sb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=_b;function Av(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Wd,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(n||(n=wv()),!n)throw Rr.create("no-options");const s=Po.get(i);if(s){if(Lr(n,s.options)&&Lr(r,s.config))return s;throw Rr.create("duplicate-app",{appName:i})}const o=new Tv(i);for(const c of zd.values())o.addComponent(c);const a=new Eb(n,r,o);return Po.set(i,a),a}function gc(t=Wd){const e=Po.get(t);if(!e&&t===Wd&&wv())return Av();if(!e)throw Rr.create("no-app",{appName:t});return e}function Ib(){return Array.from(Po.values())}function sn(t,e,n){let r=wb[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(o.join(" "));return}An(new Gt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firebase-heartbeat-database",Nb=1,Ao="firebase-heartbeat-store";let Cu=null;function Dv(){return Cu||(Cu=Pv(bb,Nb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Cu}async function Cb(t){try{const n=(await Dv()).transaction(Ao),r=await n.objectStore(Ao).get(Ov(t));return await n.done,r}catch(e){if(e instanceof jn)Jn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jn.warn(n.message)}}}async function Wm(t,e){try{const r=(await Dv()).transaction(Ao,"readwrite");await r.objectStore(Ao).put(e,Ov(t)),await r.done}catch(n){if(n instanceof jn)Jn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jn.warn(r.message)}}}function Ov(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=1024,kb=30;class Rb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ab(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>kb){const o=Db(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zm(),{heartbeatsToSend:r,unsentEntries:i}=Pb(this._heartbeatsCache.heartbeats),s=Tl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jn.warn(n),""}}}function zm(){return new Date().toISOString().substring(0,10)}function Pb(t,e=Tb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ab{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hf()?ff().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Cb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Bm(t){return Tl(JSON.stringify({version:2,heartbeats:t})).length}function Db(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){An(new Gt("platform-logger",e=>new HI(e),"PRIVATE")),An(new Gt("heartbeat",e=>new Rb(e),"PRIVATE")),sn(Vd,$m,t),sn(Vd,$m,"esm2020"),sn("fire-js","")}Ob("");var jb="firebase",Lb="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(jb,Lb,"app");const Hm="@firebase/database",Gm="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv="";function Lv(t){jv=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ye(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ro(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Mb(e)}}catch{}return new Fb},Zr=Mv("localStorage"),Bd=Mv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new mc("@firebase/database"),Fv=function(){let t=1;return function(){return t++}}(),Uv=function(t){const e=II(t),n=new wI;n.update(e);const r=n.digest();return lf.encodeByteArray(r)},Jo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jo.apply(null,r):typeof r=="object"?e+=Ye(r):e+=r,e+=" "}return e};let si=null,qm=!0;const $v=function(t,e){A(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ji.logLevel=ue.VERBOSE,si=Ji.log.bind(Ji),e&&Bd.set("logging_enabled",!0)):typeof t=="function"?si=t:(si=null,Bd.remove("logging_enabled"))},nt=function(...t){if(qm===!0&&(qm=!1,si===null&&Bd.get("logging_enabled")===!0&&$v(!0)),si){const e=Jo.apply(null,t);si(e)}},Xo=function(t){return function(...e){nt(t,...e)}},Hd=function(...t){const e="FIREBASE INTERNAL ERROR: "+Jo(...t);Ji.error(e)},Dn=function(...t){const e=`FIREBASE FATAL ERROR: ${Jo(...t)}`;throw Ji.error(e),new Error(e)},gt=function(...t){const e="FIREBASE WARNING: "+Jo(...t);Ji.warn(e)},Ub=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},$b=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Mr="[MIN_NAME]",Xn="[MAX_NAME]",Ii=function(t,e){if(t===e)return 0;if(t===Mr||e===Xn)return-1;if(e===Mr||t===Xn)return 1;{const n=Km(t),r=Km(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Vb=function(t,e){return t===e?0:t<e?-1:1},Ls=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ye(e))},mf=function(t){if(typeof t!="object"||t===null)return Ye(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ye(e[r]),n+=":",n+=mf(t[e[r]]);return n+="}",n},Vv=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function st(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Wv=function(t){A(!yc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Wb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Bb(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Hb=new RegExp("^-?(0*)\\d{1,10}$"),Gb=-2147483648,qb=2147483647,Km=function(t){if(Hb.test(t)){const e=Number(t);if(e>=Gb&&e<=qb)return e}return null},Ss=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Kb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},io=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ae(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gt(e)}}class Xi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xi.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="5",zv="v",Bv="s",Hv="r",Gv="f",qv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Kv="ls",Yv="p",Gd="ac",Qv="websocket",Jv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Jb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Zv(t,e,n){A(typeof e=="string","typeof type must == string"),A(typeof n=="object","typeof params must == object");let r;if(e===Qv)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Jv)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Jb(t)&&(n.ns=t.namespace);const i=[];return st(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.counters_={}}incrementCounter(e,n=1){xn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return rI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu={},ku={};function yf(t){const e=t.toString();return Tu[e]||(Tu[e]=new Xb),Tu[e]}function Zb(t,e){const n=t.toString();return ku[n]||(ku[n]=e()),ku[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ss(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="start",t1="close",n1="pLPCommand",r1="pRTLPCB",e_="id",t_="pw",n_="ser",i1="cb",s1="seg",o1="ts",a1="d",l1="dframe",r_=1870,i_=30,c1=r_-i_,u1=25e3,d1=3e4;class _r{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xo(e),this.stats_=yf(n),this.urlFn=c=>(this.appCheckToken&&(c[Gd]=this.appCheckToken),Zv(n,Jv,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new e1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(d1)),$b(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vf((...s)=>{const[o,a,c,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ym)this.id=a,this.password=c;else if(o===t1)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ym]="t",r[n_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[i1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[zv]=gf,this.transportSessionId&&(r[Bv]=this.transportSessionId),this.lastSessionId&&(r[Kv]=this.lastSessionId),this.applicationId&&(r[Yv]=this.applicationId),this.appCheckToken&&(r[Gd]=this.appCheckToken),typeof location<"u"&&location.hostname&&qv.test(location.hostname)&&(r[Hv]=Gv);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_r.forceAllow_=!0}static forceDisallow(){_r.forceDisallow_=!0}static isAvailable(){return _r.forceAllow_?!0:!_r.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Wb()&&!zb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ye(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=yv(n),i=Vv(r,c1);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[l1]="t",r[e_]=e,r[t_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ye(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class vf{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Fv(),window[n1+this.uniqueCallbackIdentifier]=e,window[r1+this.uniqueCallbackIdentifier]=n,this.myIFrame=vf.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){nt("frame writing exception"),a.stack&&nt(a.stack),nt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[e_]=this.myID,e[t_]=this.myPW,e[n_]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+i_+r.length<=r_;){const o=this.pendingSegs.shift();r=r+"&"+s1+i+"="+o.seg+"&"+o1+i+"="+o.ts+"&"+a1+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(u1)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=16384,f1=45e3;let Al=null;typeof MozWebSocket<"u"?Al=MozWebSocket:typeof WebSocket<"u"&&(Al=WebSocket);class en{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xo(this.connId),this.stats_=yf(n),this.connURL=en.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[zv]=gf,typeof location<"u"&&location.hostname&&qv.test(location.hostname)&&(o[Hv]=Gv),n&&(o[Bv]=n),r&&(o[Kv]=r),i&&(o[Gd]=i),s&&(o[Yv]=s),Zv(e,Qv,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zr.set("previous_websocket_failure",!0);try{let r;bv(),this.mySock=new Al(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Al!==null&&!en.forceDisallow_}static previouslyFailed(){return Zr.isInMemoryStorage||Zr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ro(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(A(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ye(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Vv(n,h1);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(f1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{static get ALL_TRANSPORTS(){return[_r,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=en&&en.isAvailable();let r=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[en];else{const i=this.transports_=[];for(const s of us.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);us.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}us.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=6e4,m1=5e3,g1=10*1024,y1=100*1024,Ru="t",Qm="d",v1="s",Jm="r",_1="e",Xm="o",Zm="a",eg="n",tg="p",w1="h";class x1{constructor(e,n,r,i,s,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xo("c:"+this.id+":"),this.transportManager_=new us(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=io(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>y1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>g1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ru in e){const n=e[Ru];n===Zm?this.upgradeIfSecondaryHealthy_():n===Jm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Xm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ls("t",e),r=Ls("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ls("t",e),r=Ls("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ls(Ru,e);if(Qm in e){const r=e[Qm];if(n===w1){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===eg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===v1?this.onConnectionShutdown_(r):n===Jm?this.onReset_(r):n===_1?Hd("Server Error: "+r):n===Xm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),gf!==r&&gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),io(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(p1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):io(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(m1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.allowedEvents_=e,this.listeners_={},A(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){A(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends o_{static getInstance(){return new Dl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!uf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return A(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=32,rg=768;class le{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ae(){return new le("")}function J(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Fr(t){return t.pieces_.length-t.pieceNum_}function fe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function _f(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function S1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Do(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function a_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function Ce(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof le)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new le(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){const n=J(t),r=J(e);if(n===null)return e;if(n===r)return wt(fe(t),fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function E1(t,e){const n=Do(t,0),r=Do(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Ii(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function wf(t,e){if(Fr(t)!==Fr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function nn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Fr(t)>Fr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class I1{constructor(e,n){this.errorPrefix_=n,this.parts_=Do(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pc(this.parts_[r]);l_(this)}}function b1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=pc(e),l_(t)}function N1(t){const e=t.parts_.pop();t.byteLength_-=pc(e),t.parts_.length>0&&(t.byteLength_-=1)}function l_(t){if(t.byteLength_>rg)throw new Error(t.errorPrefix_+"has a key path longer than "+rg+" bytes ("+t.byteLength_+").");if(t.parts_.length>ng)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ng+") or object contains a cycle "+Yr(t))}function Yr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends o_{static getInstance(){return new xf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return A(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=1e3,C1=60*5*1e3,ig=30*1e3,T1=1.3,k1=3e4,R1="server_kill",sg=3;class on extends s_{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=on.nextPersistentConnectionId_++,this.log_=Xo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ms,this.maxReconnectDelay_=C1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!bv())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Dl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Ye(s)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Vt,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,u=a.s;on.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xn(e,"w")){const r=hi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||_I(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ig)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=vI(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ye(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Hd("Unrecognized action received from server: "+Ye(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>k1&&(this.reconnectDelay_=Ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*T1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+on.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(h){A(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?nt("getToken() completed but was canceled"):(nt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new x1(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{gt(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(R1)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&gt(h),c())}}}interrupt(e){nt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Rl(this.interruptReasons_)&&(this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>mf(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new le(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){nt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sg&&(this.reconnectDelay_=ig,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+jv.replace(/\./g,"-")]=1,uf()?e["framework.cordova"]=1:Iv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dl.getInstance().currentlyOnline();return Rl(this.interruptReasons_)&&e}}on.nextPersistentConnectionId_=0;on.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ee(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ee(Mr,e),i=new ee(Mr,n);return this.compare(r,i)!==0}minPost(){return ee.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa;class c_ extends vc{static get __EMPTY_NODE(){return Oa}static set __EMPTY_NODE(e){Oa=e}compare(e,n){return Ii(e.name,n.name)}isDefinedOn(e){throw _s("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ee.MIN}maxPost(){return new ee(Xn,Oa)}makePost(e,n){return A(typeof e=="string","KeyIndex indexValue must always be a string."),new ee(e,Oa)}toString(){return".key"}}const Pn=new c_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??tt.RED,this.left=i??Pt.EMPTY_NODE,this.right=s??Pt.EMPTY_NODE}copy(e,n,r,i,s){return new tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Pt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}tt.RED=!0;tt.BLACK=!1;class P1{copy(e,n,r,i,s){return this}insert(e,n,r){return new tt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Pt{constructor(e,n=Pt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Pt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tt.BLACK,null,null))}remove(e){return new Pt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ja(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ja(this.root_,null,this.comparator_,!0,e)}}Pt.EMPTY_NODE=new P1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){return Ii(t.name,e.name)}function Sf(t,e){return Ii(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;function D1(t){qd=t}const u_=function(t){return typeof t=="number"?"number:"+Wv(t):"string:"+t},d_=function(t){if(t.isLeafNode()){const e=t.val();A(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xn(e,".sv"),"Priority must be a string or number.")}else A(t===qd||t.isEmpty(),"priority of unexpected type.");A(t===qd||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og;class Xe{static set __childrenNodeConstructor(e){og=e}static get __childrenNodeConstructor(){return og}constructor(e,n=Xe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,A(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),d_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return X(e)?this:J(e)===".priority"?this.priorityNode_:Xe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Xe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=J(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(A(r!==".priority"||Fr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Xe.__childrenNodeConstructor.EMPTY_NODE.updateChild(fe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+u_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Wv(this.value_):e+=this.value_,this.lazyHash_=Uv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xe.__childrenNodeConstructor?-1:(A(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Xe.VALUE_TYPE_ORDER.indexOf(n),s=Xe.VALUE_TYPE_ORDER.indexOf(r);return A(i>=0,"Unknown leaf type: "+n),A(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Xe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_,f_;function O1(t){h_=t}function j1(t){f_=t}class L1 extends vc{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ii(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ee.MIN}maxPost(){return new ee(Xn,new Xe("[PRIORITY-POST]",f_))}makePost(e,n){const r=h_(e);return new ee(n,new Xe("[PRIORITY-POST]",r))}toString(){return".priority"}}const _e=new L1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=Math.log(2);class F1{constructor(e){const n=s=>parseInt(Math.log(s)/M1,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ol=function(t,e,n,r){t.sort(e);const i=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new tt(f,h.node,tt.BLACK,null,null);{const y=parseInt(d/2,10)+c,w=i(c,y),x=i(y+1,u);return h=t[y],f=n?n(h):h,new tt(f,h.node,tt.BLACK,w,x)}},s=function(c){let u=null,d=null,h=t.length;const f=function(w,x){const O=h-w,g=h;h-=w;const p=i(O+1,g),v=t[O],S=n?n(v):v;y(new tt(S,v.node,x,null,p))},y=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){const x=c.nextBitIsOne(),O=Math.pow(2,c.count-(w+1));x?f(O,tt.BLACK):(f(O,tt.BLACK),f(O,tt.RED))}return d},o=new F1(t.length),a=s(o);return new Pt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu;const Ai={};class Wn{static get Default(){return A(Ai&&_e,"ChildrenNode.ts has not been loaded"),Pu=Pu||new Wn({".priority":Ai},{".priority":_e}),Pu}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=hi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pt?n:null}hasIndex(e){return xn(this.indexSet_,e.toString())}addIndex(e,n){A(e!==Pn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ee.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ol(r,e.getCompare()):a=Ai;const c=e.toString(),u={...this.indexSet_};u[c]=e;const d={...this.indexes_};return d[c]=a,new Wn(d,u)}addToIndexes(e,n){const r=Pl(this.indexes_,(i,s)=>{const o=hi(this.indexSet_,s);if(A(o,"Missing index implementation for "+s),i===Ai)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ee.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Ol(a,o.getCompare())}else return Ai;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new ee(e.name,a))),c.insert(e,e.node)}});return new Wn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Pl(this.indexes_,i=>{if(i===Ai)return i;{const s=n.get(e.name);return s?i.remove(new ee(e.name,s)):i}});return new Wn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs;class H{static get EMPTY_NODE(){return Fs||(Fs=new H(new Pt(Sf),null,Wn.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&d_(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fs}updatePriority(e){return this.children_.isEmpty()?this:new H(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fs:n}}getChild(e){const n=J(e);return n===null?this:this.getImmediateChild(n).getChild(fe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(A(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ee(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Fs:this.priorityNode_;return new H(i,o,s)}}updateChild(e,n){const r=J(e);if(r===null)return n;{A(J(e)!==".priority"||Fr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(fe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(_e,(o,a)=>{n[o]=a.val(e),r++,s&&H.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+u_(this.getPriority().val())+":"),this.forEachChild(_e,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Uv(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ee(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ee(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ee(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ee.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ee.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Zo?-1:0}withIndex(e){if(e===Pn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new H(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Pn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(_e),i=n.getIterator(_e);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Pn?null:this.indexMap_.get(e.toString())}}H.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class U1 extends H{constructor(){super(new Pt(Sf),H.EMPTY_NODE,Wn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return H.EMPTY_NODE}isEmpty(){return!1}}const Zo=new U1;Object.defineProperties(ee,{MIN:{value:new ee(Mr,H.EMPTY_NODE)},MAX:{value:new ee(Xn,Zo)}});c_.__EMPTY_NODE=H.EMPTY_NODE;Xe.__childrenNodeConstructor=H;D1(Zo);j1(Zo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=!0;function Pe(t,e=null){if(t===null)return H.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),A(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Xe(n,Pe(e))}if(!(t instanceof Array)&&$1){const n=[];let r=!1;if(st(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Pe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ee(o,c)))}}),n.length===0)return H.EMPTY_NODE;const s=Ol(n,A1,o=>o.name,Sf);if(r){const o=Ol(n,_e.getCompare());return new H(s,Pe(e),new Wn({".priority":o},{".priority":_e}))}else return new H(s,Pe(e),Wn.Default)}else{let n=H.EMPTY_NODE;return st(t,(r,i)=>{if(xn(t,r)&&r.substring(0,1)!=="."){const s=Pe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Pe(e))}}O1(Pe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends vc{constructor(e){super(),this.indexPath_=e,A(!X(e)&&J(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ii(e.name,n.name):s}makePost(e,n){const r=Pe(e),i=H.EMPTY_NODE.updateChild(this.indexPath_,r);return new ee(n,i)}maxPost(){const e=H.EMPTY_NODE.updateChild(this.indexPath_,Zo);return new ee(Xn,e)}toString(){return Do(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1 extends vc{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ii(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ee.MIN}maxPost(){return ee.MAX}makePost(e,n){const r=Pe(e);return new ee(n,r)}toString(){return".value"}}const If=new V1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){return{type:"value",snapshotNode:t}}function ds(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Oo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function W1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Oo(n,a)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ds(n,r)):o.trackChildChange(jo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(_e,(i,s)=>{n.hasChild(i)||r.trackChildChange(Oo(i,s))}),n.isLeafNode()||n.forEachChild(_e,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(jo(i,s,o))}else r.trackChildChange(ds(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?H.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.indexedFilter_=new bf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Lo.getStartPost_(e),this.endPost_=Lo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ee(n,r))||(r=H.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=H.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(H.EMPTY_NODE);const s=this;return n.forEachChild(_e,(o,a)=>{s.matches(new ee(o,a))||(i=i.updateImmediateChild(o,H.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Lo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ee(n,r))||(r=H.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=H.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=H.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(H.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,H.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,y)=>h(y,f)}else o=this.index_.getCompare();const a=e;A(a.numChildren()===this.limit_,"");const c=new ee(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,c);if(d&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(jo(n,r,h)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Oo(n,h));const x=a.updateImmediateChild(n,H.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(ds(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return r.isEmpty()?e:d&&o(u,c)>=0?(s!=null&&(s.trackChildChange(Oo(u.name,u.node)),s.trackChildChange(ds(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,H.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_e}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mr}hasEnd(){return this.endSet_}getIndexEndValue(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_e}copy(){const e=new Nf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function B1(t){return t.loadsAllData()?new bf(t.getIndex()):t.hasLimit()?new z1(t):new Lo(t)}function H1(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function G1(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Kd(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function q1(t,e,n){let r;return t.index_===Pn||n?r=Kd(t,e,n):r=Kd(t,e,Xn),r.startAfterSet_=!0,r}function Yd(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function K1(t,e,n){let r;return t.index_===Pn||n?r=Yd(t,e,n):r=Yd(t,e,Mr),r.endBeforeSet_=!0,r}function _c(t,e){const n=t.copy();return n.index_=e,n}function ag(t){const e={};if(t.isDefault())return e;let n;if(t.index_===_e?n="$priority":t.index_===If?n="$value":t.index_===Pn?n="$key":(A(t.index_ instanceof Ef,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ye(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ye(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ye(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ye(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ye(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lg(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==_e&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends s_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xo("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jl.getListenId_(e,r),a={};this.listens_[o]=a;const c=ag(e._queryParams);this.restRequest_(s+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),hi(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=jl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ag(e._queryParams),r=e._path.toString(),i=new Vt;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Si(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ro(a.responseText)}catch{gt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&gt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.rootNode_=H.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return{value:null,children:new Map}}function Es(t,e,n){if(X(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=J(e);t.children.has(r)||t.children.set(r,Ll());const i=t.children.get(r);e=fe(e),Es(i,e,n)}}function Qd(t,e){if(X(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(_e,(r,i)=>{Es(t,new le(r),i)}),Qd(t,e)}}else if(t.children.size>0){const n=J(e);return e=fe(e),t.children.has(n)&&Qd(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Jd(t,e,n){t.value!==null?n(e,t.value):Q1(t,(r,i)=>{const s=new le(e.toString()+"/"+r);Jd(i,s,n)})}function Q1(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&st(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=10*1e3,X1=30*1e3,Z1=5*60*1e3;class eN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new J1(e);const r=cg+(X1-cg)*Math.random();io(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;st(e,(i,s)=>{s>0&&xn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),io(this.reportStats_.bind(this),Math.floor(Math.random()*2*Z1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mn||(mn={}));function Cf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function kf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mn.ACK_USER_WRITE,this.source=Cf()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new le(e));return new Ml(ae(),n,this.revert)}}else return A(J(this.path)===e,"operationForChild called for unrelated child."),new Ml(fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.source=e,this.path=n,this.type=mn.LISTEN_COMPLETE}operationForChild(e){return X(this.path)?new Mo(this.source,ae()):new Mo(this.source,fe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mn.OVERWRITE}operationForChild(e){return X(this.path)?new pi(this.source,ae(),this.snap.getImmediateChild(e)):new pi(this.source,fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mn.MERGE}operationForChild(e){if(X(this.path)){const n=this.children.subtree(new le(e));return n.isEmpty()?null:n.value?new pi(this.source,ae(),n.value):new hs(this.source,ae(),n)}else return A(J(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hs(this.source,fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;const n=J(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nN(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(W1(o.childName,o.snapshotNode))}),Us(t,i,"child_removed",e,r,n),Us(t,i,"child_added",e,r,n),Us(t,i,"child_moved",s,r,n),Us(t,i,"child_changed",e,r,n),Us(t,i,"value",e,r,n),i}function Us(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>iN(t,a,c)),o.forEach(a=>{const c=rN(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function rN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function iN(t,e,n){if(e.childName==null||n.childName==null)throw _s("Should only compare child_ events.");const r=new ee(e.childName,e.snapshotNode),i=new ee(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e){return{eventCache:t,serverCache:e}}function so(t,e,n,r){return wc(new Ur(e,n,r),t.serverCache)}function m_(t,e,n,r){return wc(t.eventCache,new Ur(e,n,r))}function Fl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au;const sN=()=>(Au||(Au=new Pt(Vb)),Au);class ye{static fromObject(e){let n=new ye(null);return st(e,(r,i)=>{n=n.set(new le(r),i)}),n}constructor(e,n=sN()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ae(),value:this.value};if(X(e))return null;{const r=J(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(fe(e),n);return s!=null?{path:Ce(new le(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{const n=J(e),r=this.children.get(n);return r!==null?r.subtree(fe(e)):new ye(null)}}set(e,n){if(X(e))return new ye(n,this.children);{const r=J(e),s=(this.children.get(r)||new ye(null)).set(fe(e),n),o=this.children.insert(r,s);return new ye(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new ye(null):new ye(null,this.children);{const n=J(e),r=this.children.get(n);if(r){const i=r.remove(fe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ye(null):new ye(this.value,s)}else return this}}get(e){if(X(e))return this.value;{const n=J(e),r=this.children.get(n);return r?r.get(fe(e)):null}}setTree(e,n){if(X(e))return n;{const r=J(e),s=(this.children.get(r)||new ye(null)).setTree(fe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ye(this.value,o)}}fold(e){return this.fold_(ae(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ce(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ae(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(X(e))return null;{const s=J(e),o=this.children.get(s);return o?o.findOnPath_(fe(e),Ce(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ae(),n)}foreachOnPath_(e,n,r){if(X(e))return this;{this.value&&r(n,this.value);const i=J(e),s=this.children.get(i);return s?s.foreachOnPath_(fe(e),Ce(n,i),r):new ye(null)}}foreach(e){this.foreach_(ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ce(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.writeTree_=e}static empty(){return new _n(new ye(null))}}function oo(t,e,n){if(X(e))return new _n(new ye(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=wt(i,e);return s=s.updateChild(o,n),new _n(t.writeTree_.set(i,s))}else{const i=new ye(n),s=t.writeTree_.setTree(e,i);return new _n(s)}}}function Xd(t,e,n){let r=t;return st(n,(i,s)=>{r=oo(r,Ce(e,i),s)}),r}function ug(t,e){if(X(e))return _n.empty();{const n=t.writeTree_.setTree(e,new ye(null));return new _n(n)}}function Zd(t,e){return bi(t,e)!=null}function bi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function dg(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(_e,(r,i)=>{e.push(new ee(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ee(r,i.value))}),e}function Pr(t,e){if(X(e))return t;{const n=bi(t,e);return n!=null?new _n(new ye(n)):new _n(t.writeTree_.subtree(e))}}function eh(t){return t.writeTree_.isEmpty()}function fs(t,e){return g_(ae(),t.writeTree_,e)}function g_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(A(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=g_(Ce(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ce(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e){return w_(e,t)}function oN(t,e,n,r,i){A(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=oo(t.visibleWrites,e,n)),t.lastWriteId=r}function aN(t,e,n,r){A(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Xd(t.visibleWrites,e,n),t.lastWriteId=r}function lN(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function cN(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);A(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&uN(a,r.path)?i=!1:nn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return dN(t),!0;if(r.snap)t.visibleWrites=ug(t.visibleWrites,r.path);else{const a=r.children;st(a,c=>{t.visibleWrites=ug(t.visibleWrites,Ce(r.path,c))})}return!0}else return!1}function uN(t,e){if(t.snap)return nn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&nn(Ce(t.path,n),e))return!0;return!1}function dN(t){t.visibleWrites=y_(t.allWrites,hN,ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function hN(t){return t.visible}function y_(t,e,n){let r=_n.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)nn(n,o)?(a=wt(n,o),r=oo(r,a,s.snap)):nn(o,n)&&(a=wt(o,n),r=oo(r,ae(),s.snap.getChild(a)));else if(s.children){if(nn(n,o))a=wt(n,o),r=Xd(r,a,s.children);else if(nn(o,n))if(a=wt(o,n),X(a))r=Xd(r,ae(),s.children);else{const c=hi(s.children,J(a));if(c){const u=c.getChild(fe(a));r=oo(r,ae(),u)}}}else throw _s("WriteRecord should have .snap or .children")}}return r}function v_(t,e,n,r,i){if(!r&&!i){const s=bi(t.visibleWrites,e);if(s!=null)return s;{const o=Pr(t.visibleWrites,e);if(eh(o))return n;if(n==null&&!Zd(o,ae()))return null;{const a=n||H.EMPTY_NODE;return fs(o,a)}}}else{const s=Pr(t.visibleWrites,e);if(!i&&eh(s))return n;if(!i&&n==null&&!Zd(s,ae()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(nn(u.path,e)||nn(e,u.path))},a=y_(t.allWrites,o,e),c=n||H.EMPTY_NODE;return fs(a,c)}}}function fN(t,e,n){let r=H.EMPTY_NODE;const i=bi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_e,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Pr(t.visibleWrites,e);return n.forEachChild(_e,(o,a)=>{const c=fs(Pr(s,new le(o)),a);r=r.updateImmediateChild(o,c)}),dg(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Pr(t.visibleWrites,e);return dg(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function pN(t,e,n,r,i){A(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ce(e,n);if(Zd(t.visibleWrites,s))return null;{const o=Pr(t.visibleWrites,s);return eh(o)?i.getChild(n):fs(o,i.getChild(n))}}function mN(t,e,n,r){const i=Ce(e,n),s=bi(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Pr(t.visibleWrites,i);return fs(o,r.getNode().getImmediateChild(n))}else return null}function gN(t,e){return bi(t.visibleWrites,e)}function yN(t,e,n,r,i,s,o){let a;const c=Pr(t.visibleWrites,e),u=bi(c,ae());if(u!=null)a=u;else if(n!=null)a=fs(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=f.getNext();for(;y&&d.length<i;)h(y,r)!==0&&d.push(y),y=f.getNext();return d}else return[]}function vN(){return{visibleWrites:_n.empty(),allWrites:[],lastWriteId:-1}}function Ul(t,e,n,r){return v_(t.writeTree,t.treePath,e,n,r)}function Rf(t,e){return fN(t.writeTree,t.treePath,e)}function hg(t,e,n,r){return pN(t.writeTree,t.treePath,e,n,r)}function $l(t,e){return gN(t.writeTree,Ce(t.treePath,e))}function _N(t,e,n,r,i,s){return yN(t.writeTree,t.treePath,e,n,r,i,s)}function Pf(t,e,n){return mN(t.writeTree,t.treePath,e,n)}function __(t,e){return w_(Ce(t.treePath,e),t.writeTree)}function w_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;A(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),A(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,jo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Oo(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,ds(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,jo(r,e.snapshotNode,i.oldSnap));else throw _s("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const x_=new xN;class Af{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ur(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pf(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mi(this.viewCache_),s=_N(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){return{filter:t}}function EN(t,e){A(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function IN(t,e,n,r,i){const s=new wN;let o,a;if(n.type===mn.OVERWRITE){const u=n;u.source.fromUser?o=th(t,e,u.path,u.snap,r,i,s):(A(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!X(u.path),o=Vl(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===mn.MERGE){const u=n;u.source.fromUser?o=NN(t,e,u.path,u.children,r,i,s):(A(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=nh(t,e,u.path,u.children,r,i,a,s))}else if(n.type===mn.ACK_USER_WRITE){const u=n;u.revert?o=kN(t,e,u.path,r,i,s):o=CN(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===mn.LISTEN_COMPLETE)o=TN(t,e,n.path,r,s);else throw _s("Unknown operation type: "+n.type);const c=s.getChanges();return bN(e,o,c),{viewCache:o,changes:c}}function bN(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Fl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(p_(Fl(e)))}}function S_(t,e,n,r,i,s){const o=e.eventCache;if($l(r,n)!=null)return e;{let a,c;if(X(n))if(A(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=mi(e),d=u instanceof H?u:H.EMPTY_NODE,h=Rf(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=Ul(r,mi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=J(n);if(u===".priority"){A(Fr(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=hg(r,n,d,c);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=fe(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=hg(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Pf(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,i,s):a=o.getNode()}}return so(e,a,o.isFullyInitialized()||X(n),t.filter.filtersNodes())}}function Vl(t,e,n,r,i,s,o,a){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(X(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),y,null)}else{const y=J(n);if(!c.isCompleteForPath(n)&&Fr(n)>1)return e;const w=fe(n),O=c.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?u=d.updatePriority(c.getNode(),O):u=d.updateChild(c.getNode(),y,O,w,x_,null)}const h=m_(e,u,c.isFullyInitialized()||X(n),d.filtersNodes()),f=new Af(i,h,s);return S_(t,h,n,i,f,a)}function th(t,e,n,r,i,s,o){const a=e.eventCache;let c,u;const d=new Af(i,e,s);if(X(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=so(e,u,!0,t.filter.filtersNodes());else{const h=J(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=so(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=fe(n),y=a.getNode().getImmediateChild(h);let w;if(X(f))w=r;else{const x=d.getCompleteChild(h);x!=null?_f(f)===".priority"&&x.getChild(a_(f)).isEmpty()?w=x:w=x.updateChild(f,r):w=H.EMPTY_NODE}if(y.equals(w))c=e;else{const x=t.filter.updateChild(a.getNode(),h,w,f,d,o);c=so(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function fg(t,e){return t.eventCache.isCompleteForChild(e)}function NN(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{const d=Ce(n,c);fg(e,J(d))&&(a=th(t,a,d,u,i,s,o))}),r.foreach((c,u)=>{const d=Ce(n,c);fg(e,J(d))||(a=th(t,a,d,u,i,s,o))}),a}function pg(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nh(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;X(n)?u=r:u=new ye(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const y=e.serverCache.getNode().getImmediateChild(h),w=pg(t,y,f);c=Vl(t,c,new le(h),w,i,s,o,a)}}),u.children.inorderTraversal((h,f)=>{const y=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!y){const w=e.serverCache.getNode().getImmediateChild(h),x=pg(t,w,f);c=Vl(t,c,new le(h),x,i,s,o,a)}}),c}function CN(t,e,n,r,i,s,o){if($l(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(X(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Vl(t,e,n,c.getNode().getChild(n),i,s,a,o);if(X(n)){let u=new ye(null);return c.getNode().forEachChild(Pn,(d,h)=>{u=u.set(new le(d),h)}),nh(t,e,n,u,i,s,a,o)}else return e}else{let u=new ye(null);return r.foreach((d,h)=>{const f=Ce(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),nh(t,e,n,u,i,s,a,o)}}function TN(t,e,n,r,i){const s=e.serverCache,o=m_(e,s.getNode(),s.isFullyInitialized()||X(n),s.isFiltered());return S_(t,o,n,r,x_,i)}function kN(t,e,n,r,i,s){let o;if($l(r,n)!=null)return e;{const a=new Af(r,e,i),c=e.eventCache.getNode();let u;if(X(n)||J(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ul(r,mi(e));else{const h=e.serverCache.getNode();A(h instanceof H,"serverChildren would be complete if leaf node"),d=Rf(r,h)}d=d,u=t.filter.updateFullNode(c,d,s)}else{const d=J(n);let h=Pf(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,fe(n),a,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,H.EMPTY_NODE,fe(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ul(r,mi(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||$l(r,ae())!=null,so(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new bf(r.getIndex()),s=B1(r);this.processor_=SN(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(H.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(H.EMPTY_NODE,a.getNode(),null),d=new Ur(c,o.isFullyInitialized(),i.filtersNodes()),h=new Ur(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=wc(h,d),this.eventGenerator_=new tN(this.query_)}get query(){return this.query_}}function PN(t){return t.viewCache_.serverCache.getNode()}function AN(t){return Fl(t.viewCache_)}function DN(t,e){const n=mi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!X(e)&&!n.getImmediateChild(J(e)).isEmpty())?n.getChild(e):null}function mg(t){return t.eventRegistrations_.length===0}function ON(t,e){t.eventRegistrations_.push(e)}function gg(t,e,n){const r=[];if(n){A(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function yg(t,e,n,r){e.type===mn.MERGE&&e.source.queryId!==null&&(A(mi(t.viewCache_),"We should always have a full cache before handling merges"),A(Fl(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=IN(t.processor_,i,e,n,r);return EN(t.processor_,s.viewCache),A(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,E_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function jN(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(_e,(s,o)=>{r.push(ds(s,o))}),n.isFullyInitialized()&&r.push(p_(n.getNode())),E_(t,r,n.getNode(),e)}function E_(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return nN(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;class I_{constructor(){this.views=new Map}}function LN(t){A(!Wl,"__referenceConstructor has already been defined"),Wl=t}function MN(){return A(Wl,"Reference.ts has not been loaded"),Wl}function FN(t){return t.views.size===0}function Df(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return A(s!=null,"SyncTree gave us an op for an invalid query."),yg(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(yg(o,e,n,r));return s}}function b_(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ul(n,i?r:null),c=!1;a?c=!0:r instanceof H?(a=Rf(n,r),c=!1):(a=H.EMPTY_NODE,c=!1);const u=wc(new Ur(a,c,!1),new Ur(r,i,!1));return new RN(e,u)}return o}function UN(t,e,n,r,i,s){const o=b_(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),ON(o,n),jN(o,n)}function $N(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=$r(t);if(i==="default")for(const[c,u]of t.views.entries())o=o.concat(gg(u,n,r)),mg(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{const c=t.views.get(i);c&&(o=o.concat(gg(c,n,r)),mg(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!$r(t)&&s.push(new(MN())(e._repo,e._path)),{removed:s,events:o}}function N_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ar(t,e){let n=null;for(const r of t.views.values())n=n||DN(r,e);return n}function C_(t,e){if(e._queryParams.loadsAllData())return Sc(t);{const r=e._queryIdentifier;return t.views.get(r)}}function T_(t,e){return C_(t,e)!=null}function $r(t){return Sc(t)!=null}function Sc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl;function VN(t){A(!zl,"__referenceConstructor has already been defined"),zl=t}function WN(){return A(zl,"Reference.ts has not been loaded"),zl}let zN=1;class vg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ye(null),this.pendingWriteTree_=vN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Of(t,e,n,r,i){return oN(t.pendingWriteTree_,e,n,r,i),i?Is(t,new pi(Cf(),e,n)):[]}function BN(t,e,n,r){aN(t.pendingWriteTree_,e,n,r);const i=ye.fromObject(n);return Is(t,new hs(Cf(),e,i))}function wr(t,e,n=!1){const r=lN(t.pendingWriteTree_,e);if(cN(t.pendingWriteTree_,e)){let s=new ye(null);return r.snap!=null?s=s.set(ae(),!0):st(r.children,o=>{s=s.set(new le(o),!0)}),Is(t,new Ml(r.path,s,n))}else return[]}function ea(t,e,n){return Is(t,new pi(Tf(),e,n))}function HN(t,e,n){const r=ye.fromObject(n);return Is(t,new hs(Tf(),e,r))}function GN(t,e){return Is(t,new Mo(Tf(),e))}function qN(t,e,n){const r=jf(t,n);if(r){const i=Lf(r),s=i.path,o=i.queryId,a=wt(s,e),c=new Mo(kf(o),a);return Mf(t,s,c)}else return[]}function Bl(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||T_(o,e))){const c=$N(o,e,n,r);FN(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=c.removed;if(a=c.events,!i){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(s,(f,y)=>$r(y));if(d&&!h){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const y=QN(f);for(let w=0;w<y.length;++w){const x=y[w],O=x.query,g=A_(t,x);t.listenProvider_.startListening(ao(O),Fo(t,O),g.hashFn,g.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(ao(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(Ic(f));t.listenProvider_.stopListening(ao(f),y)}))}JN(t,u)}return a}function k_(t,e,n,r){const i=jf(t,r);if(i!=null){const s=Lf(i),o=s.path,a=s.queryId,c=wt(o,e),u=new pi(kf(a),c,n);return Mf(t,o,u)}else return[]}function KN(t,e,n,r){const i=jf(t,r);if(i){const s=Lf(i),o=s.path,a=s.queryId,c=wt(o,e),u=ye.fromObject(n),d=new hs(kf(a),c,u);return Mf(t,o,d)}else return[]}function rh(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,y)=>{const w=wt(f,i);s=s||Ar(y,w),o=o||$r(y)});let a=t.syncPointTree_.get(i);a?(o=o||$r(a),s=s||Ar(a,ae())):(a=new I_,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=H.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,w)=>{const x=Ar(w,ae());x&&(s=s.updateImmediateChild(y,x))}));const u=T_(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Ic(e);A(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=XN();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const d=xc(t.pendingWriteTree_,i);let h=UN(a,e,n,d,s,c);if(!u&&!o&&!r){const f=C_(a,e);h=h.concat(ZN(t,e,f))}return h}function Ec(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=wt(o,e),u=Ar(a,c);if(u)return u});return v_(i,e,s,n,!0)}function YN(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=wt(u,n);r=r||Ar(d,h)});let i=t.syncPointTree_.get(n);i?r=r||Ar(i,ae()):(i=new I_,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Ur(r,!0,!1):null,a=xc(t.pendingWriteTree_,e._path),c=b_(i,e,a,s?o.getNode():H.EMPTY_NODE,s);return AN(c)}function Is(t,e){return R_(e,t.syncPointTree_,null,xc(t.pendingWriteTree_,ae()))}function R_(t,e,n,r){if(X(t.path))return P_(t,e,n,r);{const i=e.get(ae());n==null&&i!=null&&(n=Ar(i,ae()));let s=[];const o=J(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,d=__(r,o);s=s.concat(R_(a,c,u,d))}return i&&(s=s.concat(Df(i,t,r,n))),s}}function P_(t,e,n,r){const i=e.get(ae());n==null&&i!=null&&(n=Ar(i,ae()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=__(r,o),d=t.operationForChild(o);d&&(s=s.concat(P_(d,a,c,u)))}),i&&(s=s.concat(Df(i,t,r,n))),s}function A_(t,e){const n=e.query,r=Fo(t,n);return{hashFn:()=>(PN(e)||H.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?qN(t,n._path,r):GN(t,n._path);{const s=Bb(i,n);return Bl(t,n,null,s)}}}}function Fo(t,e){const n=Ic(e);return t.queryToTagMap.get(n)}function Ic(t){return t._path.toString()+"$"+t._queryIdentifier}function jf(t,e){return t.tagToQueryMap.get(e)}function Lf(t){const e=t.indexOf("$");return A(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function Mf(t,e,n){const r=t.syncPointTree_.get(e);A(r,"Missing sync point for query tag that we're tracking");const i=xc(t.pendingWriteTree_,e);return Df(r,n,i,null)}function QN(t){return t.fold((e,n,r)=>{if(n&&$r(n))return[Sc(n)];{let i=[];return n&&(i=N_(n)),st(r,(s,o)=>{i=i.concat(o)}),i}})}function ao(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(WN())(t._repo,t._path):t}function JN(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Ic(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function XN(){return zN++}function ZN(t,e,n){const r=e._path,i=Fo(t,e),s=A_(t,n),o=t.listenProvider_.startListening(ao(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)A(!$r(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,d,h)=>{if(!X(u)&&d&&$r(d))return[Sc(d).query];{let f=[];return d&&(f=f.concat(N_(d).map(y=>y.query))),st(h,(y,w)=>{f=f.concat(w)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(ao(d),Fo(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ff(n)}node(){return this.node_}}class Uf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ce(this.path_,e);return new Uf(this.syncTree_,n)}node(){return Ec(this.syncTree_,this.path_)}}const eC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},_g=function(t,e,n){if(!t||typeof t!="object")return t;if(A(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return tC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return nC(t[".sv"],e);A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},tC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:A(!1,"Unexpected server value: "+t)}},nC=function(t,e,n){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&A(!1,"Unexpected increment value: "+r);const i=e.node();if(A(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},D_=function(t,e,n,r){return Vf(e,new Uf(n,t),r)},$f=function(t,e,n){return Vf(t,new Ff(e),n)};function Vf(t,e,n){const r=t.getPriority().val(),i=_g(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=_g(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Xe(a,Pe(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Xe(i))),o.forEachChild(_e,(a,c)=>{const u=Vf(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function bc(t,e){let n=e instanceof le?e:new le(e),r=t,i=J(n);for(;i!==null;){const s=hi(r.node.children,i)||{children:{},childCount:0};r=new Wf(i,r,s),n=fe(n),i=J(n)}return r}function Ni(t){return t.node.value}function zf(t,e){t.node.value=e,ih(t)}function O_(t){return t.node.childCount>0}function rC(t){return Ni(t)===void 0&&!O_(t)}function Nc(t,e){st(t.node.children,(n,r)=>{e(new Wf(n,t,r))})}function j_(t,e,n,r){n&&!r&&e(t),Nc(t,i=>{j_(i,e,!0,r)}),n&&r&&e(t)}function iC(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ta(t){return new le(t.parent===null?t.name:ta(t.parent)+"/"+t.name)}function ih(t){t.parent!==null&&sC(t.parent,t.name,t)}function sC(t,e,n){const r=rC(n),i=xn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ih(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,ih(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=/[\[\].#$\/\u0000-\u001F\u007F]/,aC=/[\[\].#$\u0000-\u001F\u007F]/,Du=10*1024*1024,Cc=function(t){return typeof t=="string"&&t.length!==0&&!oC.test(t)},L_=function(t){return typeof t=="string"&&t.length!==0&&!aC.test(t)},lC=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),L_(t)},Uo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!yc(t)||t&&typeof t=="object"&&xn(t,".sv")},On=function(t,e,n,r){r&&e===void 0||na(fi(t,"value"),e,n)},na=function(t,e,n){const r=n instanceof le?new I1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Yr(r)+" with contents = "+e.toString());if(yc(e))throw new Error(t+"contains "+e.toString()+" "+Yr(r));if(typeof e=="string"&&e.length>Du/3&&pc(e)>Du)throw new Error(t+"contains a string greater than "+Du+" utf8 bytes "+Yr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(st(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Cc(o)))throw new Error(t+" contains an invalid key ("+o+") "+Yr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);b1(r,o),na(t,a,r),N1(r)}),i&&s)throw new Error(t+' contains ".value" child '+Yr(r)+" in addition to actual children.")}},cC=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Do(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Cc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(E1);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&nn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},M_=function(t,e,n,r){if(r&&e===void 0)return;const i=fi(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];st(e,(o,a)=>{const c=new le(o);if(na(i,a,Ce(n,c)),_f(c)===".priority"&&!Uo(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),cC(i,s)},Bf=function(t,e,n){if(!(n&&e===void 0)){if(yc(e))throw new Error(fi(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Uo(e))throw new Error(fi(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ra=function(t,e,n,r){if(!(r&&n===void 0)&&!Cc(n))throw new Error(fi(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Hf=function(t,e,n,r){if(!(r&&n===void 0)&&!L_(n))throw new Error(fi(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},uC=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Hf(t,e,n,r)},Cn=function(t,e){if(J(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},F_=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!lC(n))throw new Error(fi(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!wf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function U_(t,e,n){Tc(t,n),$_(t,r=>wf(r,e))}function qt(t,e,n){Tc(t,n),$_(t,r=>nn(r,e)||nn(e,r))}function $_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(hC(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function hC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();si&&nt("event: "+n.toString()),Ss(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="repo_interrupt",fC=25;class pC{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ll(),this.transactionQueueTree_=new Wf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mC(t,e,n){if(t.stats_=yf(t.repoInfo_),t.forceRestClient_||Kb())t.server_=new jl(t.repoInfo_,(r,i,s,o)=>{wg(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ye(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new on(t.repoInfo_,e,(r,i,s,o)=>{wg(t,r,i,s,o)},r=>{xg(t,r)},r=>{gC(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Zb(t.repoInfo_,()=>new eN(t.stats_,t.server_)),t.infoData_=new Y1,t.infoSyncTree_=new vg({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ea(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gf(t,"connected",!1),t.serverSyncTree_=new vg({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const u=o(a,c);qt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function W_(t){const n=t.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ia(t){return eC({timestamp:W_(t)})}function wg(t,e,n,r,i){t.dataUpdateCount++;const s=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Pl(n,u=>Pe(u));o=KN(t.serverSyncTree_,s,c,i)}else{const c=Pe(n);o=k_(t.serverSyncTree_,s,c,i)}else if(r){const c=Pl(n,u=>Pe(u));o=HN(t.serverSyncTree_,s,c)}else{const c=Pe(n);o=ea(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=ps(t,s)),qt(t.eventQueue_,a,o)}function xg(t,e){Gf(t,"connected",e),e===!1&&_C(t)}function gC(t,e){st(e,(n,r)=>{Gf(t,n,r)})}function Gf(t,e,n){const r=new le("/.info/"+e),i=Pe(n);t.infoData_.updateSnapshot(r,i);const s=ea(t.infoSyncTree_,r,i);qt(t.eventQueue_,r,s)}function kc(t){return t.nextWriteId_++}function yC(t,e,n){const r=YN(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Pe(i).withIndex(e._queryParams.getIndex());rh(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ea(t.serverSyncTree_,e._path,s);else{const a=Fo(t.serverSyncTree_,e);o=k_(t.serverSyncTree_,e._path,s,a)}return qt(t.eventQueue_,e._path,o),Bl(t.serverSyncTree_,e,n,null,!0),s},i=>(bs(t,"get for query "+Ye(e)+" failed: "+i),Promise.reject(new Error(i))))}function qf(t,e,n,r,i){bs(t,"set",{path:e.toString(),value:n,priority:r});const s=ia(t),o=Pe(n,r),a=Ec(t.serverSyncTree_,e),c=$f(o,a,s),u=kc(t),d=Of(t.serverSyncTree_,e,c,u,!0);Tc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const w=f==="ok";w||gt("set at "+e+" failed: "+f);const x=wr(t.serverSyncTree_,u,!w);qt(t.eventQueue_,e,x),Vr(t,i,f,y)});const h=Yf(t,e);ps(t,h),qt(t.eventQueue_,h,[])}function vC(t,e,n,r){bs(t,"update",{path:e.toString(),value:n});let i=!0;const s=ia(t),o={};if(st(n,(a,c)=>{i=!1,o[a]=D_(Ce(e,a),Pe(c),t.serverSyncTree_,s)}),i)nt("update() called with empty data.  Don't do anything."),Vr(t,r,"ok",void 0);else{const a=kc(t),c=BN(t.serverSyncTree_,e,o,a);Tc(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||gt("update at "+e+" failed: "+u);const f=wr(t.serverSyncTree_,a,!h),y=f.length>0?ps(t,e):e;qt(t.eventQueue_,y,f),Vr(t,r,u,d)}),st(n,u=>{const d=Yf(t,Ce(e,u));ps(t,d)}),qt(t.eventQueue_,e,[])}}function _C(t){bs(t,"onDisconnectEvents");const e=ia(t),n=Ll();Jd(t.onDisconnect_,ae(),(i,s)=>{const o=D_(i,s,t.serverSyncTree_,e);Es(n,i,o)});let r=[];Jd(n,ae(),(i,s)=>{r=r.concat(ea(t.serverSyncTree_,i,s));const o=Yf(t,i);ps(t,o)}),t.onDisconnect_=Ll(),qt(t.eventQueue_,ae(),r)}function wC(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&Qd(t.onDisconnect_,e),Vr(t,n,r,i)})}function Sg(t,e,n,r){const i=Pe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Es(t.onDisconnect_,e,i),Vr(t,r,s,o)})}function xC(t,e,n,r,i){const s=Pe(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Es(t.onDisconnect_,e,s),Vr(t,i,o,a)})}function SC(t,e,n,r){if(Rl(n)){nt("onDisconnect().update() called with empty data.  Don't do anything."),Vr(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&st(n,(o,a)=>{const c=Pe(a);Es(t.onDisconnect_,Ce(e,o),c)}),Vr(t,r,i,s)})}function EC(t,e,n){let r;J(e._path)===".info"?r=rh(t.infoSyncTree_,e,n):r=rh(t.serverSyncTree_,e,n),U_(t.eventQueue_,e._path,r)}function sh(t,e,n){let r;J(e._path)===".info"?r=Bl(t.infoSyncTree_,e,n):r=Bl(t.serverSyncTree_,e,n),U_(t.eventQueue_,e._path,r)}function z_(t){t.persistentConnection_&&t.persistentConnection_.interrupt(V_)}function IC(t){t.persistentConnection_&&t.persistentConnection_.resume(V_)}function bs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nt(n,...e)}function Vr(t,e,n,r){e&&Ss(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function bC(t,e,n,r,i,s){bs(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:Fv(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Kf(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{na("transaction failed: Data returned ",c,o.path),o.status=0;const u=bc(t.transactionQueueTree_,e),d=Ni(u)||[];d.push(o),zf(u,d);let h;typeof c=="object"&&c!==null&&xn(c,".priority")?(h=hi(c,".priority"),A(Uo(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Ec(t.serverSyncTree_,e)||H.EMPTY_NODE).getPriority().val();const f=ia(t),y=Pe(c,h),w=$f(y,a,f);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=w,o.currentWriteId=kc(t);const x=Of(t.serverSyncTree_,e,w,o.currentWriteId,o.applyLocally);qt(t.eventQueue_,e,x),Rc(t,t.transactionQueueTree_)}}function Kf(t,e,n){return Ec(t.serverSyncTree_,e,n)||H.EMPTY_NODE}function Rc(t,e=t.transactionQueueTree_){if(e||Pc(t,e),Ni(e)){const n=H_(t,e);A(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&NC(t,ta(e),n)}else O_(e)&&Nc(e,n=>{Rc(t,n)})}function NC(t,e,n){const r=n.map(u=>u.currentWriteId),i=Kf(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const d=n[u];A(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=wt(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{bs(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(wr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Pc(t,bc(t.transactionQueueTree_,e)),Rc(t,t.transactionQueueTree_),qt(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Ss(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{gt("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}ps(t,e)}},o)}function ps(t,e){const n=B_(t,e),r=ta(n),i=H_(t,n);return CC(t,i,r),r}function CC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=wt(n,c.path);let d=!1,h;if(A(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,i=i.concat(wr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=fC)d=!0,h="maxretry",i=i.concat(wr(t.serverSyncTree_,c.currentWriteId,!0));else{const f=Kf(t,c.path,o);c.currentInputSnapshot=f;const y=e[a].update(f.val());if(y!==void 0){na("transaction failed: Data returned ",y,c.path);let w=Pe(y);typeof y=="object"&&y!=null&&xn(y,".priority")||(w=w.updatePriority(f.getPriority()));const O=c.currentWriteId,g=ia(t),p=$f(w,f,g);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=p,c.currentWriteId=kc(t),o.splice(o.indexOf(O),1),i=i.concat(Of(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),i=i.concat(wr(t.serverSyncTree_,O,!0))}else d=!0,h="nodata",i=i.concat(wr(t.serverSyncTree_,c.currentWriteId,!0))}qt(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Pc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ss(r[a]);Rc(t,t.transactionQueueTree_)}function B_(t,e){let n,r=t.transactionQueueTree_;for(n=J(e);n!==null&&Ni(r)===void 0;)r=bc(r,n),e=fe(e),n=J(e);return r}function H_(t,e){const n=[];return G_(t,e,n),n.sort((r,i)=>r.order-i.order),n}function G_(t,e,n){const r=Ni(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Nc(e,i=>{G_(t,i,n)})}function Pc(t,e){const n=Ni(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,zf(e,n.length>0?n:void 0)}Nc(e,r=>{Pc(t,r)})}function Yf(t,e){const n=ta(B_(t,e)),r=bc(t.transactionQueueTree_,e);return iC(r,i=>{Ou(t,i)}),Ou(t,r),j_(r,i=>{Ou(t,i)}),n}function Ou(t,e){const n=Ni(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(A(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(A(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(wr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?zf(e,void 0):n.length=s+1,qt(t.eventQueue_,ta(e),i);for(let o=0;o<r.length;o++)Ss(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function kC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gt(`Invalid query segment '${n}' in query '${t}'`)}return e}const oh=function(t,e){const n=RC(t),r=n.namespace;n.domain==="firebase.com"&&Dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ub();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Xv(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new le(n.pathString)}},RC=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(i=TC(t.substring(d,h)));const f=kC(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",PC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Eg.charAt(n%64),n=Math.floor(n/64);A(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Eg.charAt(e[i]);return A(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ye(this.snapshot.exportVal())}}class K_{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Vt;return wC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Cn("OnDisconnect.remove",this._path);const e=new Vt;return Sg(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Cn("OnDisconnect.set",this._path),On("OnDisconnect.set",e,this._path,!1);const n=new Vt;return Sg(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Cn("OnDisconnect.setWithPriority",this._path),On("OnDisconnect.setWithPriority",e,this._path,!1),Bf("OnDisconnect.setWithPriority",n,!1);const r=new Vt;return xC(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Cn("OnDisconnect.update",this._path),M_("OnDisconnect.update",e,this._path,!1);const n=new Vt;return SC(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:_f(this._path)}get ref(){return new Sn(this._repo,this._path)}get _queryIdentifier(){const e=lg(this._queryParams),n=mf(e);return n==="{}"?"default":n}get _queryObject(){return lg(this._queryParams)}isEqual(e){if(e=W(e),!(e instanceof Qt))return!1;const n=this._repo===e._repo,r=wf(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+S1(this._path)}}function Ac(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hr(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Pn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Mr)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Xn)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===_e){if(e!=null&&!Uo(e)||n!=null&&!Uo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(A(t.getIndex()instanceof Ef||t.getIndex()===If,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Dc(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Sn extends Qt{constructor(e,n){super(e,n,new Nf,!1)}get parent(){const e=a_(this._path);return e===null?null:new Sn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class gi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new le(e),r=ms(this.ref,e);return new gi(this._node.getChild(n),r,_e)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new gi(i,ms(this.ref,r),_e)))}hasChild(e){const n=new le(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Q(t,e){return t=W(t),t._checkNotDeleted("ref"),e!==void 0?ms(t._root,e):t._root}function QA(t,e){t=W(t),t._checkNotDeleted("refFromURL");const n=oh(e,t._repo.repoInfo_.nodeAdmin);F_("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Dn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Q(t,n.path.toString())}function ms(t,e){return t=W(t),J(t._path)===null?uC("child","path",e,!1):Hf("child","path",e,!1),new Sn(t._repo,Ce(t._path,e))}function JA(t){return t=W(t),new AC(t._repo,t._path)}function Y_(t,e){t=W(t),Cn("push",t._path),On("push",e,t._path,!0);const n=W_(t._repo),r=PC(n),i=ms(t,r),s=ms(t,r);let o;return e!=null?o=Ze(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function DC(t){return Cn("remove",t._path),Ze(t,null)}function Ze(t,e){t=W(t),Cn("set",t._path),On("set",e,t._path,!1);const n=new Vt;return qf(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function XA(t,e){t=W(t),Cn("setPriority",t._path),Bf("setPriority",e,!1);const n=new Vt;return qf(t._repo,Ce(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function ZA(t,e,n){if(Cn("setWithPriority",t._path),On("setWithPriority",e,t._path,!1),Bf("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Vt;return qf(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function eD(t,e){M_("update",e,t._path,!1);const n=new Vt;return vC(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Me(t){t=W(t);const e=new Qf(()=>{}),n=new sa(e);return yC(t._repo,t,n).then(r=>new gi(r,new Sn(t._repo,t._path),t._queryParams.getIndex()))}class sa{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new q_("value",this,new gi(e.snapshotNode,new Sn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new K_(this,e,n):null}matches(e){return e instanceof sa?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Oc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new K_(this,e,n):null}createEvent(e,n){A(e.childName!=null,"Child events should have a childName.");const r=ms(new Sn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new q_(e.type,this,new gi(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Oc?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function oa(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,u=(d,h)=>{sh(t._repo,t,a),c(d,h)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Qf(n,s||void 0),a=e==="value"?new sa(o):new Oc(e,o);return EC(t._repo,t,a),()=>sh(t._repo,t,a)}function ah(t,e,n,r){return oa(t,"value",e,n,r)}function tD(t,e,n,r){return oa(t,"child_added",e,n,r)}function nD(t,e,n,r){return oa(t,"child_changed",e,n,r)}function rD(t,e,n,r){return oa(t,"child_moved",e,n,r)}function iD(t,e,n,r){return oa(t,"child_removed",e,n,r)}function sD(t,e,n){let r=null;const i=n?new Qf(n):null;e==="value"?r=new sa(i):e&&(r=new Oc(e,i)),sh(t._repo,t,r)}class En{}class Q_ extends En{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){On("endAt",this._value,e._path,!0);const n=Yd(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function oD(t,e){return ra("endAt","key",e,!0),new Q_(t,e)}class OC extends En{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){On("endBefore",this._value,e._path,!1);const n=K1(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function aD(t,e){return ra("endBefore","key",e,!0),new OC(t,e)}class J_ extends En{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){On("startAt",this._value,e._path,!0);const n=Kd(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function lD(t=null,e){return ra("startAt","key",e,!0),new J_(t,e)}class jC extends En{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){On("startAfter",this._value,e._path,!1);const n=q1(e._queryParams,this._value,this._key);if(Dc(n),Hr(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Qt(e._repo,e._path,n,e._orderByCalled)}}function cD(t,e){return ra("startAfter","key",e,!0),new jC(t,e)}class LC extends En{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qt(e._repo,e._path,H1(e._queryParams,this._limit),e._orderByCalled)}}function uD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new LC(t)}class MC extends En{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qt(e._repo,e._path,G1(e._queryParams,this._limit),e._orderByCalled)}}function dD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new MC(t)}class FC extends En{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ac(e,"orderByChild");const n=new le(this._path);if(X(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ef(n),i=_c(e._queryParams,r);return Hr(i),new Qt(e._repo,e._path,i,!0)}}function hD(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Hf("orderByChild","path",t,!1),new FC(t)}class UC extends En{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Ac(e,"orderByKey");const n=_c(e._queryParams,Pn);return Hr(n),new Qt(e._repo,e._path,n,!0)}}function fD(){return new UC}class $C extends En{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Ac(e,"orderByPriority");const n=_c(e._queryParams,_e);return Hr(n),new Qt(e._repo,e._path,n,!0)}}function pD(){return new $C}class VC extends En{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Ac(e,"orderByValue");const n=_c(e._queryParams,If);return Hr(n),new Qt(e._repo,e._path,n,!0)}}function mD(){return new VC}class WC extends En{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(On("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Q_(this._value,this._key)._apply(new J_(this._value,this._key)._apply(e))}}function gD(t,e){return ra("equalTo","key",e,!0),new WC(t,e)}function yD(t,...e){let n=W(t);for(const r of e)n=r._apply(n);return n}LN(Sn);VN(Sn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="FIREBASE_DATABASE_EMULATOR_HOST",lh={};let X_=!1;function BC(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=ws(s);t.repoInfo_=new Xv(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Z_(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=oh(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[zC]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=oh(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const d=i&&c?new Xi(Xi.OWNER):new Qb(t.name,t.options,e);F_("Invalid Firebase Database URL",o),X(o.path)||Dn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=GC(a,t,d,new Yb(t,n));return new KC(h,t)}function HC(t,e){const n=lh[e];(!n||n[t.key]!==t)&&Dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),z_(t),delete n[t.key]}function GC(t,e,n,r){let i=lh[e.name];i||(i={},lh[e.name]=i);let s=i[t.toURLString()];return s&&Dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pC(t,X_,n,r),i[t.toURLString()]=s,s}function qC(t){X_=t}class KC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sn(this._repo,ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(HC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Dn("Cannot call "+e+" on a deleted database.")}}function ew(){us.IS_TRANSPORT_INITIALIZED&&gt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function vD(){ew(),_r.forceDisallow()}function _D(){ew(),en.forceDisallow(),_r.forceAllow()}function YC(t=gc(),e){const n=Ei(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=cI("database");r&&QC(n,...r)}return n}function QC(t,e,n,r={}){t=W(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Lr(r,s.repoInfo_.emulatorOptions))return;Dn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Xi(Xi.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:uI(r.mockUserToken,t.app.options.projectId);o=new Xi(a)}ws(e)&&(Sv(e),Ev("Database",!0)),BC(s,i,r,o)}function wD(t){t=W(t),t._checkNotDeleted("goOffline"),z_(t._repo)}function xD(t){t=W(t),t._checkNotDeleted("goOnline"),IC(t._repo)}function SD(t,e){$v(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){Lv(xs),An(new Gt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Z_(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),sn(Hm,Gm,t),sn(Hm,Gm,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={".sv":"timestamp"};function ED(){return XC}function ID(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function bD(t,e,n){if(t=W(t),Cn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=(n==null?void 0:n.applyLocally)??!0,i=new Vt,s=(a,c,u)=>{let d=null;a?i.reject(a):(d=new gi(u,new Sn(t._repo,t._path),_e),i.resolve(new ZC(c,d)))},o=ah(t,()=>{});return bC(t._repo,t._path,e,s,o,r),i.promise}on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const ND=function(t){const e=on.prototype.put;return on.prototype.put=function(n,r,i,s){s!==void 0&&(s=t()),e.call(this,n,r,i,s)},function(){on.prototype.put=e}},CD=function(t){qC(t)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,nodeAdmin:s=!1}){Lv(n);const o=new Tv("database-standalone"),a=new Fd("auth-internal",o);let c;return i&&(c=new Fd("app-check-internal",o),c.setComponent(new Gt("app-check-internal",()=>i,"PRIVATE"))),a.setComponent(new Gt("auth-internal",()=>r,"PRIVATE")),Z_(t,a,c,e,s)}JC();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={PHONE:"phone",TOTP:"totp"},RD={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},PD={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},AD={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},DD={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OD=eT,tT=tw,nw=new xi("auth","Firebase",tw()),jD={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new mc("@firebase/auth");function nT(t,...e){Hl.logLevel<=ue.WARN&&Hl.warn(`Auth (${xs}): ${t}`,...e)}function Za(t,...e){Hl.logLevel<=ue.ERROR&&Hl.error(`Auth (${xs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,...e){throw Xf(t,...e)}function St(t,...e){return Xf(t,...e)}function Jf(t,e,n){const r={...tT(),[e]:n};return new xi("auth","Firebase",r).create(e,{appName:t.name})}function it(t){return Jf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ns(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lt(t,"argument-error"),Jf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nw.create(t,...e)}function P(t,e,...n){if(!t)throw Xf(e,...n)}function Tn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Za(e),new Error(e)}function Zn(t,e){t||Tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Zf(){return Ig()==="http:"||Ig()==="https:"}function Ig(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zf()||df()||"connection"in navigator)?navigator.onLine:!0}function iT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=uf()||Iv()}get(){return rT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aT=new aa(3e4,6e4);function Se(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ee(t,e,n,r,i={}){return iw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Si({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return fI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ws(t.emulatorConfig.host)&&(u.credentials="include"),rw.fetch()(await sw(t,t.config.apiHost,n,a),u)})}async function iw(t,e,n){t._canInitEmulator=!1;const r={...sT,...e};try{const i=new cT(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qs(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qs(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qs(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qs(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Jf(t,d,u);Lt(t,d)}}catch(i){if(i instanceof jn)throw i;Lt(t,"network-request-failed",{message:String(i)})}}async function rr(t,e,n,r,i={}){const s=await Ee(t,e,n,r,i);return"mfaPendingCredential"in s&&Lt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function sw(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?ep(t.config,i):`${t.config.apiScheme}://${i}`;return oT.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function lT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(St(this.auth,"network-request-failed")),aT.get())})}}function qs(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=St(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){return t!==void 0&&t.getResponse!==void 0}function Ng(t){return t!==void 0&&t.enterprise!==void 0}class ow{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t){return(await Ee(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function aw(t,e){return Ee(t,"GET","/v2/recaptchaConfig",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t,e){return Ee(t,"POST","/v1/accounts:delete",e)}async function hT(t,e){return Ee(t,"POST","/v1/accounts:update",e)}async function Gl(t,e){return Ee(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t,e=!1){return W(t).getIdToken(e)}async function fT(t,e=!1){const n=W(t),r=await n.getIdToken(e),i=jc(r);P(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:lo(ju(i.auth_time)),issuedAtTime:lo(ju(i.iat)),expirationTime:lo(ju(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ju(t){return Number(t)*1e3}function jc(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Za("JWT malformed, contained fewer than 3 sections"),null;try{const i=kl(n);return i?JSON.parse(i):(Za("Failed to decode base64 JWT payload"),null)}catch(i){return Za("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Cg(t){const e=jc(t);return P(e,"internal-error"),P(typeof e.exp<"u","internal-error"),P(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function er(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&pT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t){var h;const e=t.auth,n=await t.getIdToken(),r=await er(t,Gl(e,{idToken:n}));P(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?lw(i.providerUserInfo):[],o=yT(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ch(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function gT(t){const e=W(t);await Vo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yT(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t,e){const n=await iw(t,{},async()=>{const r=Si({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await sw(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&ws(t.emulatorConfig.host)&&(c.credentials="include"),rw.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _T(t,e){return Ee(t,"POST","/v2/accounts:revokeToken",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(typeof e.idToken<"u","internal-error"),P(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){P(e.length!==0,"internal-error");const n=Cg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(P(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vT(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Zi;return r&&(P(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(P(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(P(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zi,this.toJSON())}_performRefresh(){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){P(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new mT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ch(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await er(this,this.stsTokenManager.getToken(this.auth,e));return P(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fT(this,e)}reload(){return gT(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ae(this.auth.app))return Promise.reject(it(this.auth));const e=await this.getIdToken();return await er(this,dT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:y,providerData:w,stsTokenManager:x}=n;P(h&&x,e,"internal-error");const O=Zi.fromJSON(this.name,x);P(typeof h=="string",e,"internal-error"),lr(r,e.name),lr(i,e.name),P(typeof f=="boolean",e,"internal-error"),P(typeof y=="boolean",e,"internal-error"),lr(s,e.name),lr(o,e.name),lr(a,e.name),lr(c,e.name),lr(u,e.name),lr(d,e.name);const g=new gn({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:O,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(g.providerData=w.map(p=>({...p}))),c&&(g._redirectEventId=c),g}static async _fromIdTokenResponse(e,n,r=!1){const i=new Zi;i.updateFromServerResponse(n);const s=new gn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vo(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];P(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Zi;a.updateFromIdToken(r);const c=new gn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ch(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;function zn(t){Zn(t instanceof Function,"Expected a class definition");let e=Tg.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cw.type="NONE";const kg=cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t,e,n){return`firebase:${t}:${e}:${n}`}class es{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=el(this.userKey,i.apiKey,s),this.fullPersistenceKey=el("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gl(this.auth,{idToken:e}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new es(zn(kg),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||zn(kg);const o=el(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await Gl(e,{idToken:d}).catch(()=>{});if(!f)break;h=await gn._fromGetAccountInfoResponse(e,f,d)}else h=gn._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new es(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new es(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mw(e))return"Blackberry";if(gw(e))return"Webos";if(dw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(pw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uw(t=Et()){return/firefox\//i.test(t)}function dw(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(t=Et()){return/crios\//i.test(t)}function fw(t=Et()){return/iemobile/i.test(t)}function pw(t=Et()){return/android/i.test(t)}function mw(t=Et()){return/blackberry/i.test(t)}function gw(t=Et()){return/webos/i.test(t)}function tp(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wT(t=Et()){var e;return tp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xT(){return pI()&&document.documentMode===10}function yw(t=Et()){return tp(t)||pw(t)||gw(t)||mw(t)||/windows phone/i.test(t)||fw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e=[]){let n;switch(t){case"Browser":n=Rg(Et());break;case"Worker":n=`${Rg(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t,e={}){return Ee(t,"GET","/v2/passwordPolicy",Se(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=6;class bT{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pg(this),this.idTokenSubscription=new Pg(this),this.beforeStateQueue=new ST(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await es.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gl(this,{idToken:e}),r=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ae(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ae(this.app))return Promise.reject(it(this));const n=e?W(e):null;return n&&P(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&P(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ae(this.app)?Promise.reject(it(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ae(this.app)?Promise.reject(it(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ET(this),n=new bT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _T(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;P(n,this,"argument-error"),this.redirectPersistenceManager=await es.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(P(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ae(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&nT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ue(t){return W(t)}class Pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=xI(n=>this.observer=n)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CT(t){la=t}function np(t){return la.loadJS(t)}function TT(){return la.recaptchaV2Script}function kT(){return la.recaptchaEnterpriseScript}function RT(){return la.gapiScript}function _w(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=500,AT=6e4,La=1e12;class DT{constructor(e){this.auth=e,this.counter=La,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new LT(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||La;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||La;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||La;return(r=this._widgets.get(n))==null||r.execute(),""}}class OT{constructor(){this.enterprise=new jT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LT{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;P(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=MT(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},AT)},PT))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function MT(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const FT="recaptcha-enterprise",co="NO_RECAPTCHA";class ww{constructor(e){this.type=FT,this.auth=Ue(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{aw(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new ow(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;Ng(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(co)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OT().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ng(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kT();c.length!==0&&(c+=a),np(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function $s(t,e,n,r=!1,i=!1){const s=new ww(t);let o;if(i)o=co;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Dr(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await $s(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await $s(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await $s(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await $s(t,e,n,!1,!0);return r(t,d)}return Promise.reject(c)})}else{const a=await $s(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function xw(t){const e=Ue(t),n=await aw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ow(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new ww(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e){const n=Ei(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Lr(s,e??{}))return i;Lt(i,"already-initialized")}return n.initialize({options:e})}function $T(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VT(t,e,n){const r=Ue(t);P(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Sw(e),{host:o,port:a}=WT(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){P(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),P(Lr(u,r.config.emulator)&&Lr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ws(o)?(Sv(`${s}//${o}${c}`),Ev("Auth",!0)):i||zT()}function Sw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WT(t){const e=Sw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ag(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ag(o)}}}function Ag(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,n){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(t,e){return Ee(t,"POST","/v1/accounts:resetPassword",Se(t,e))}async function BT(t,e){return Ee(t,"POST","/v1/accounts:update",e)}async function HT(t,e){return Ee(t,"POST","/v1/accounts:signUp",e)}async function GT(t,e){return Ee(t,"POST","/v1/accounts:update",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qT(t,e){return rr(t,"POST","/v1/accounts:signInWithPassword",Se(t,e))}async function Lc(t,e){return Ee(t,"POST","/v1/accounts:sendOobCode",Se(t,e))}async function KT(t,e){return Lc(t,e)}async function YT(t,e){return Lc(t,e)}async function QT(t,e){return Lc(t,e)}async function JT(t,e){return Lc(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(t,e){return rr(t,"POST","/v1/accounts:signInWithEmailLink",Se(t,e))}async function ZT(t,e){return rr(t,"POST","/v1/accounts:signInWithEmailLink",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends ca{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Wo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dr(e,n,"signInWithPassword",qT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XT(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dr(e,r,"signUpPassword",HT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZT(e,{idToken:n,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gn(t,e){return rr(t,"POST","/v1/accounts:signInWithIdp",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="http://localhost";class tr extends ca{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new tr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gn(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gn(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gn(e,n)}buildRequest(){const e={requestUri:ek,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Si(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dg(t,e){return Ee(t,"POST","/v1/accounts:sendVerificationCode",Se(t,e))}async function tk(t,e){return rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Se(t,e))}async function nk(t,e){const n=await rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Se(t,e));if(n.temporaryProof)throw qs(t,"account-exists-with-different-credential",n);return n}const rk={USER_NOT_FOUND:"user-not-found"};async function ik(t,e){const n={...e,operation:"REAUTH"};return rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Se(t,n),rk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends ca{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new oi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new oi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return tk(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return nk(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return ik(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new oi({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ok(t){const e=Hs(Gs(t)).link,n=e?Hs(Gs(e)).deep_link_id:null,r=Hs(Gs(t)).deep_link_id;return(r?Hs(Gs(r)).link:null)||r||n||e||t}class ua{constructor(e){const n=Hs(Gs(e)),r=n.apiKey??null,i=n.oobCode??null,s=sk(n.mode??null);P(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ok(e);try{return new ua(n)}catch{return null}}}function MD(t){return ua.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.providerId=Ci.PROVIDER_ID}static credential(e,n){return Wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ua.parseLink(n);return P(r,"argument-error"),Wo._fromEmailAndCode(e,r.code,r.tenantId)}}Ci.PROVIDER_ID="password";Ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tl extends Cs{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return P("providerId"in n&&"signInMethod"in n,"argument-error"),tr._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return P(e.idToken||e.accessToken,"argument-error"),tr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return tl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new tl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Cs{constructor(){super("facebook.com")}static credential(e){return tr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Cs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return tr._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Cs{constructor(){super("github.com")}static credential(e){return tr._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="http://localhost";class zo extends ca{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Gn(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gn(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gn(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new zo(r,s)}static _create(e,n){return new zo(e,n)}buildRequest(){return{requestUri:ak,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="saml.";class uh extends ir{constructor(e){P(e.startsWith(lk),"argument-error"),super(e)}static credentialFromResult(e){return uh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return uh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=zo.fromJSON(e);return P(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return zo._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Cs{constructor(){super("twitter.com")}static credential(e,n){return tr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(t,e){return rr(t,"POST","/v1/accounts:signUp",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await gn._fromIdTokenResponse(e,r,i),o=Og(r);return new cn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Og(r);return new cn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Og(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t){var i;if(Ae(t.app))return Promise.reject(it(t));const e=Ue(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new cn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Iw(e,{returnSecureToken:!0}),r=await cn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends jn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ql.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ql(e,n,r,i)}}function bw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e){const n=W(t);await Mc(!0,n,e);const{providerUserInfo:r}=await hT(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=Nw(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function rp(t,e,n=!1){const r=await er(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cn._forOperation(t,"link",r)}async function Mc(t,e,n){await Vo(e);const r=Nw(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";P(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(t,e,n=!1){const{auth:r}=t;if(Ae(r.app))return Promise.reject(it(r));const i="reauthenticate";try{const s=await er(t,bw(r,i,e,t),n);P(s.idToken,r,"internal-error");const o=jc(s.idToken);P(o,r,"internal-error");const{sub:a}=o;return P(t.uid===a,r,"user-mismatch"),cn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(t,e,n=!1){if(Ae(t.app))return Promise.reject(it(t));const r="signIn",i=await bw(t,r,e),s=await cn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ip(t,e){return Tw(Ue(t),e)}async function ck(t,e){const n=W(t);return await Mc(!1,n,e.providerId),rp(n,e)}async function uk(t,e){return Cw(W(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return rr(t,"POST","/v1/accounts:signInWithCustomToken",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e){if(Ae(t.app))return Promise.reject(it(t));const n=Ue(t),r=await dk(n,{token:e,returnSecureToken:!0}),i=await cn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?sp._fromServerResponse(e,n):"totpInfo"in n?op._fromServerResponse(e,n):Lt(e,"internal-error")}}class sp extends da{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new sp(n)}}class op extends da{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new op(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){var r;P(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),P(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),P(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(P(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(P(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(t){const e=Ue(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hk(t,e,n){const r=Ue(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Fc(r,i,n),await Dr(r,i,"getOobCode",YT,"EMAIL_PASSWORD_PROVIDER")}async function VD(t,e,n){await Ew(W(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ap(t),r})}async function WD(t,e){await GT(W(t),{oobCode:e})}async function fk(t,e){const n=W(t),r=await Ew(n,{oobCode:e}),i=r.requestType;switch(P(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":P(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":P(r.mfaInfo,n,"internal-error");default:P(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=da._fromServerResponse(Ue(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function zD(t,e){const{data:n}=await fk(W(t),e);return n.email}async function pk(t,e,n){if(Ae(t.app))return Promise.reject(it(t));const r=Ue(t),o=await Dr(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Iw,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ap(t),c}),a=await cn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function mk(t,e,n){return Ae(t.app)?Promise.reject(it(t)):ip(W(t),Ci.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ap(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(t,e,n){const r=Ue(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){P(a.handleCodeInApp,r,"argument-error"),a&&Fc(r,o,a)}s(i,n),await Dr(r,i,"getOobCode",QT,"EMAIL_PASSWORD_PROVIDER")}function HD(t,e){const n=ua.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GD(t,e,n){if(Ae(t.app))return Promise.reject(it(t));const r=W(t),i=Ci.credentialWithLink(e,n||$o());return P(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ip(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){return Ee(t,"POST","/v1/accounts:createAuthUri",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e){const n=Zf()?$o():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await gk(W(t),r);return i||[]}async function yk(t,e){const n=W(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Fc(n.auth,i,e);const{email:s}=await KT(n.auth,i);s!==t.email&&await t.reload()}async function KD(t,e,n){const r=W(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Fc(r.auth,s,n);const{email:o}=await JT(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e){return Ee(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=W(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await er(r,vk(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function QD(t,e){const n=W(t);return Ae(n.auth.app)?Promise.reject(it(n.auth)):kw(n,e,null)}function JD(t,e){return kw(W(t),null,e)}async function kw(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await er(t,BT(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=jc(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ts(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new wk(r,n);case"github.com":return new xk(r,n);case"google.com":return new Sk(r,n);case"twitter.com":return new Ek(r,n,t.screenName||null);case"custom":case"anonymous":return new ts(r,null);default:return new ts(r,e,n)}}class ts{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class Rw extends ts{constructor(e,n,r,i){super(e,n,r),this.username=i}}class wk extends ts{constructor(e,n){super(e,"facebook.com",n)}}class xk extends Rw{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Sk extends ts{constructor(e,n){super(e,"google.com",n)}}class Ek extends Rw{constructor(e,n,r){super(e,"twitter.com",n,r)}}function XD(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:_k(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){return W(t).setPersistence(e)}function ZD(t){return xw(t)}async function e2(t,e){return Ue(t).validatePassword(e)}function bk(t,e,n,r){return W(t).onIdTokenChanged(e,n,r)}function Nk(t,e,n){return W(t).beforeAuthStateChanged(e,n)}function t2(t,e,n,r){return W(t).onAuthStateChanged(e,n,r)}function n2(t){W(t).useDeviceLanguage()}function r2(t,e){return W(t).updateCurrentUser(e)}function i2(t){return W(t).signOut()}function s2(t,e){return Ue(t).revokeAccessToken(e)}async function o2(t){return W(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ei("enroll",e,n)}static _fromMfaPendingCredential(e){return new ei("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return ei._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return ei._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ue(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>da._fromServerResponse(r,a));P(i.mfaPendingCredential,r,"internal-error");const o=ei._fromMfaPendingCredential(i.mfaPendingCredential);return new lp(o,s,async a=>{const c=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const d=await cn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return P(n.user,r,"internal-error"),cn._forOperation(n.user,n.operationType,u);default:Lt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function a2(t,e){var i;const n=W(t),r=e;return P(e.customData.operationType,n,"argument-error"),P((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),lp._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){return Ee(t,"POST","/v2/accounts/mfaEnrollment:start",Se(t,e))}function Ck(t,e){return Ee(t,"POST","/v2/accounts/mfaEnrollment:finalize",Se(t,e))}function Tk(t,e){return Ee(t,"POST","/v2/accounts/mfaEnrollment:start",Se(t,e))}function kk(t,e){return Ee(t,"POST","/v2/accounts/mfaEnrollment:finalize",Se(t,e))}function Rk(t,e){return Ee(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Se(t,e))}class cp{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>da._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new cp(e)}async getSession(){return ei._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await er(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await er(this.user,Rk(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Lu=new WeakMap;function l2(t){const e=W(t);return Lu.has(e)||Lu.set(e,cp._fromUser(e)),Lu.get(e)}const Kl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=1e3,Ak=10;class Aw extends Pw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);xT()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Ak):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Aw.type="LOCAL";const Dw=Aw;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3;function Mu(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Fu(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class Ow{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Fu(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return Mu(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Fu(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Fu(e);if(window.cookieStore){const a=u=>{const d=u.changed.find(f=>f.name===r);d&&n(d.value),u.deleted.find(f=>f.name===r)&&n(null)},c=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",a)}let i=Mu(r);const s=setInterval(()=>{const a=Mu(r);a!==i&&(n(a),i=a)},Dk),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}Ow.type="COOKIE";const c2=Ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends Pw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jw.type="SESSION";const Lw=jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),c=await Ok(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=$c("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return window}function Lk(t){Be().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){return typeof Be().WorkerGlobalScope<"u"&&typeof Be().importScripts=="function"}async function Mk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Uk(){return up()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebaseLocalStorageDb",$k=1,Yl="firebaseLocalStorage",Fw="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vc(t,e){return t.transaction([Yl],e?"readwrite":"readonly").objectStore(Yl)}function Vk(){const t=indexedDB.deleteDatabase(Mw);return new ha(t).toPromise()}function dh(){const t=indexedDB.open(Mw,$k);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yl,{keyPath:Fw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yl)?e(r):(r.close(),await Vk(),e(await dh()))})})}async function Lg(t,e,n){const r=Vc(t,!0).put({[Fw]:e,value:n});return new ha(r).toPromise()}async function Wk(t,e){const n=Vc(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function Mg(t,e){const n=Vc(t,!0).delete(e);return new ha(n).toPromise()}const zk=800,Bk=3;class Uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Bk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return up()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uc._getInstance(Uk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Mk(),!this.activeServiceWorker)return;this.sender=new jk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dh();return await Lg(e,Kl,"1"),await Mg(e,Kl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Lg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Wk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vc(i,!1).getAll();return new ha(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uw.type="LOCAL";const Hk=Uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){return Ee(t,"POST","/v2/accounts/mfaSignIn:start",Se(t,e))}function Gk(t,e){return Ee(t,"POST","/v2/accounts/mfaSignIn:finalize",Se(t,e))}function qk(t,e){return Ee(t,"POST","/v2/accounts/mfaSignIn:finalize",Se(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=_w("rcb"),Kk=new aa(3e4,6e4);class Yk{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Be().grecaptcha)!=null&&e.render)}load(e,n=""){return P(Qk(n),e,"argument-error"),this.shouldResolveImmediately(n)&&bg(Be().grecaptcha)?Promise.resolve(Be().grecaptcha):new Promise((r,i)=>{const s=Be().setTimeout(()=>{i(St(e,"network-request-failed"))},Kk.get());Be()[Uu]=()=>{Be().clearTimeout(s),delete Be()[Uu];const a=Be().grecaptcha;if(!a||!bg(a)){i(St(e,"internal-error"));return}const c=a.render;a.render=(u,d)=>{const h=c(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${TT()}?${Si({onload:Uu,render:"explicit",hl:n})}`;np(o).catch(()=>{clearTimeout(s),i(St(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Be().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Qk(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Jk{async load(e){return new DT(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="recaptcha",Xk={theme:"light",type:"image"};class u2{constructor(e,n,r={...Xk}){this.parameters=r,this.type=uo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ue(e),this.isInvisible=this.parameters.size==="invisible",P(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;P(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jk:new Yk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){P(!this.parameters.sitekey,this.auth,"argument-error"),P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Be()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){P(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){P(Zf()&&!up(),this.auth,"internal-error"),await Zk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await uT(this.auth);P(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return P(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Zk(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=oi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function d2(t,e,n){if(Ae(t.app))return Promise.reject(it(t));const r=Ue(t),i=await Wc(r,e,W(n));return new dp(i,s=>ip(r,s))}async function h2(t,e,n){const r=W(t);await Mc(!1,r,"phone");const i=await Wc(r.auth,e,W(n));return new dp(i,s=>ck(r,s))}async function f2(t,e,n){const r=W(t);if(Ae(r.auth.app))return Promise.reject(it(r.auth));const i=await Wc(r.auth,e,W(n));return new dp(i,s=>uk(r,s))}async function Wc(t,e,n){var r;if(!t._getRecaptchaConfig())try{await xw(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){P(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Dr(t,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===co){P((n==null?void 0:n.type)===uo,d,"argument-error");const f=await $u(d,h,n);return jg(d,f)}return jg(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{P(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;P(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Dr(t,a,"mfaSmsSignIn",async(h,f)=>{if(f.phoneSignInInfo.captchaResponse===co){P((n==null?void 0:n.type)===uo,h,"argument-error");const y=await $u(h,f,n);return Fg(h,y)}return Fg(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Dr(t,s,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===co){P((n==null?void 0:n.type)===uo,u,"argument-error");const h=await $u(u,d,n);return Dg(u,h)}return Dg(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function p2(t,e){const n=W(t);if(Ae(n.auth.app))return Promise.reject(it(n.auth));await rp(n,e)}async function $u(t,e,n){P(n.type===uo,t,"argument-error");const r=await n.verify();P(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.providerId=ns.PROVIDER_ID,this.auth=Ue(e)}verifyPhoneNumber(e,n){return Wc(this.auth,e,W(n))}static credential(e,n){return oi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ns.credentialFromTaggedObject(n)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?oi._fromTokenResponse(n,r):null}}ns.PROVIDER_ID="phone";ns.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){return e?zn(e):(P(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends ca{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gn(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eR(t){return Tw(t.auth,new hp(t),t.bypassAuthState)}function tR(t){const{auth:e,user:n}=t;return P(n,e,"internal-error"),Cw(n,new hp(t),t.bypassAuthState)}async function nR(t){const{auth:e,user:n}=t;return P(n,e,"internal-error"),rp(n,new hp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eR;case"linkViaPopup":case"linkViaRedirect":return nR;case"reauthViaPopup":case"reauthViaRedirect":return tR;default:Lt(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new aa(2e3,1e4);async function iR(t,e,n){if(Ae(t.app))return Promise.reject(St(t,"operation-not-supported-in-this-environment"));const r=Ue(t);Ns(t,e,ir);const i=Ti(r,n);return new Bn(r,"signInViaPopup",e,i).executeNotNull()}async function m2(t,e,n){const r=W(t);if(Ae(r.auth.app))return Promise.reject(St(r.auth,"operation-not-supported-in-this-environment"));Ns(r.auth,e,ir);const i=Ti(r.auth,n);return new Bn(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function g2(t,e,n){const r=W(t);Ns(r.auth,e,ir);const i=Ti(r.auth,n);return new Bn(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Bn extends $w{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bn.currentPopupAction&&Bn.currentPopupAction.cancel(),Bn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return P(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=$c();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(St(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rR.get())};e()}}Bn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="pendingRedirect",nl=new Map;class oR extends $w{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nl.get(this.auth._key());if(!e){try{const r=await aR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aR(t,e){const n=Ww(e),r=Vw(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function fp(t,e){return Vw(t)._set(Ww(e),"true")}function lR(t,e){nl.set(t._key(),e)}function Vw(t){return zn(t._redirectPersistence)}function Ww(t){return el(sR,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t,e,n){return cR(t,e,n)}async function cR(t,e,n){if(Ae(t.app))return Promise.reject(it(t));const r=Ue(t);Ns(t,e,ir),await r._initializationPromise;const i=Ti(r,n);return await fp(i,r),i._openRedirect(r,e,"signInViaRedirect")}function v2(t,e,n){return uR(t,e,n)}async function uR(t,e,n){const r=W(t);if(Ns(r.auth,e,ir),Ae(r.auth.app))return Promise.reject(it(r.auth));await r.auth._initializationPromise;const i=Ti(r.auth,n);await fp(i,r.auth);const s=await Bw(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function _2(t,e,n){return dR(t,e,n)}async function dR(t,e,n){const r=W(t);Ns(r.auth,e,ir),await r.auth._initializationPromise;const i=Ti(r.auth,n);await Mc(!1,r,e.providerId),await fp(i,r.auth);const s=await Bw(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function w2(t,e){return await Ue(t)._initializationPromise,zw(t,e,!1)}async function zw(t,e,n=!1){if(Ae(t.app))return Promise.reject(it(t));const r=Ue(t),i=Ti(r,e),o=await new oR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Bw(t){const e=$c(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=10*60*1e3;class fR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Hw(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(St(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ug(e))}saveEventToCache(e){this.cachedEventUids.add(Ug(e)),this.lastProcessedEventTime=Date.now()}}function Ug(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(t,e={}){return Ee(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yR=/^https?/;async function vR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mR(t);for(const n of e)try{if(_R(n))return}catch{}Lt(t,"unauthorized-domain")}function _R(t){const e=$o(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!yR.test(n))return!1;if(gR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new aa(3e4,6e4);function $g(){const t=Be().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xR(t){return new Promise((e,n)=>{var i,s,o;function r(){$g(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$g(),n(St(t,"network-request-failed"))},timeout:wR.get()})}if((s=(i=Be().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Be().gapi)!=null&&o.load)r();else{const a=_w("iframefcb");return Be()[a]=()=>{gapi.load?r():n(St(t,"network-request-failed"))},np(`${RT()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw rl=null,e})}let rl=null;function SR(t){return rl=rl||xR(t),rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new aa(5e3,15e3),IR="__/auth/iframe",bR="emulator/auth/iframe",NR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TR(t){const e=t.config;P(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ep(e,bR):`https://${t.config.authDomain}/${IR}`,r={apiKey:e.apiKey,appName:t.name,v:xs},i=CR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Si(r).slice(1)}`}async function kR(t){const e=await SR(t),n=Be().gapi;return P(n,t,"internal-error"),e.open({where:document.body,url:TR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=St(t,"network-request-failed"),a=Be().setTimeout(()=>{s(o)},ER.get());function c(){Be().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PR=500,AR=600,DR="_blank",OR="http://localhost";class Vg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jR(t,e,n,r=PR,i=AR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...RR,width:r.toString(),height:i.toString(),top:s,left:o},u=Et().toLowerCase();n&&(a=hw(u)?DR:n),uw(u)&&(e=e||OR,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[y,w])=>`${f}${y}=${w},`,"");if(wT(u)&&a!=="_self")return LR(e||"",a),new Vg(null);const h=window.open(e||"",a,d);P(h,t,"popup-blocked");try{h.focus()}catch{}return new Vg(h)}function LR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="__/auth/handler",FR="emulator/auth/handler",UR=encodeURIComponent("fac");async function Wg(t,e,n,r,i,s){P(t.config.authDomain,t,"auth-domain-config-required"),P(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xs,eventId:i};if(e instanceof ir){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Cs){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${UR}=${encodeURIComponent(c)}`:"";return`${$R(t)}?${Si(a).slice(1)}${u}`}function $R({config:t}){return t.emulator?ep(t,FR):`https://${t.authDomain}/${MR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="webStorageSupport";class VR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lw,this._completeRedirectFn=zw,this._overrideRedirectResult=lR}async _openPopup(e,n,r,i){var o;Zn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Wg(e,n,r,$o(),i);return jR(e,s,$c())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Wg(e,n,r,$o(),i);return Lk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kR(e),r=new fR(e);return n.register("authEvent",i=>(P(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vu,{type:Vu},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Vu];s!==void 0&&n(!!s),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yw()||dw()||tp()}}const WR=VR;class Gw{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Tn("unexpected MultiFactorSessionType")}}}class pp extends Gw{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new pp(e)}_finalizeEnroll(e,n,r){return Ck(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Gk(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class zR{constructor(){}static assertion(e){return pp._fromCredential(e)}}zR.FACTOR_ID="phone";class BR{static assertionForEnrollment(e,n){return Bo._fromSecret(e,n)}static assertionForSignIn(e,n){return Bo._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;P(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await Tk(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return mp._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}BR.FACTOR_ID="totp";class Bo extends Gw{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Bo(n,void 0,e)}static _fromEnrollmentId(e,n){return new Bo(n,e)}async _finalizeEnroll(e,n,r){return P(typeof this.secret<"u",e,"argument-error"),kk(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){P(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return qk(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class mp{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new mp(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(Ma(e)||Ma(n))&&(r=!0),r&&(Ma(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),Ma(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Ma(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var zg="@firebase/auth",Bg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qR(t){An(new Gt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vw(t)},u=new NT(r,i,s,c);return $T(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),An(new Gt("auth-internal",e=>{const n=Ue(e.getProvider("auth").getImmediate());return(r=>new HR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(zg,Bg,GR(t)),sn(zg,Bg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=5*60,YR=xv("authIdTokenMaxAge")||KR;let Hg=null;const QR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YR)return;const i=n==null?void 0:n.token;Hg!==i&&(Hg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JR(t=gc()){const e=Ei(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UT(t,{popupRedirectResolver:WR,persistence:[Hk,Dw,Lw]}),r=xv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=QR(s.toString());Nk(n,o,()=>o(n.currentUser)),bk(n,a=>o(a))}}const i=_v("auth");return i&&VT(n,`http://${i}`),n}function XR(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}CT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=St("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",XR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qR("Browser");const qw="@firebase/installations",gp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=1e4,Yw=`w:${gp}`,Qw="FIS_v2",ZR="https://firebaseinstallations.googleapis.com/v1",eP=60*60*1e3,tP="installations",nP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yi=new xi(tP,nP,rP);function Jw(t){return t instanceof jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw({projectId:t}){return`${ZR}/projects/${t}/installations`}function Zw(t){return{token:t.token,requestStatus:2,expiresIn:sP(t.expiresIn),creationTime:Date.now()}}async function ex(t,e){const r=(await e.json()).error;return yi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function tx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function iP(t,{refreshToken:e}){const n=tx(t);return n.append("Authorization",oP(e)),n}async function nx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function sP(t){return Number(t.replace("s","000"))}function oP(t){return`${Qw} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Xw(t),i=tx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:Qw,appId:t.appId,sdkVersion:Yw},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await nx(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Zw(u.authToken)}}else throw await ex("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=/^[cdef][\w-]{21}$/,hh="";function uP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=dP(t);return cP.test(n)?n:hh}catch{return hh}}function dP(t){return lP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Map;function sx(t,e){const n=zc(t);ox(n,e),hP(n,e)}function ox(t,e){const n=ix.get(t);if(n)for(const r of n)r(e)}function hP(t,e){const n=fP();n&&n.postMessage({key:t,fid:e}),pP()}let ti=null;function fP(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=t=>{ox(t.data.key,t.data.fid)}),ti}function pP(){ix.size===0&&ti&&(ti.close(),ti=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="firebase-installations-database",gP=1,vi="firebase-installations-store";let Wu=null;function yp(){return Wu||(Wu=Pv(mP,gP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vi)}}})),Wu}async function Ql(t,e){const n=zc(t),i=(await yp()).transaction(vi,"readwrite"),s=i.objectStore(vi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&sx(t,e.fid),e}async function ax(t){const e=zc(t),r=(await yp()).transaction(vi,"readwrite");await r.objectStore(vi).delete(e),await r.done}async function Bc(t,e){const n=zc(t),i=(await yp()).transaction(vi,"readwrite"),s=i.objectStore(vi),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&sx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(t){let e;const n=await Bc(t.appConfig,r=>{const i=yP(r),s=vP(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===hh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function yP(t){const e=t||{fid:uP(),registrationStatus:0};return lx(e)}function vP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(yi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=_P(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:wP(t)}:{installationEntry:e}}async function _P(t,e){try{const n=await aP(t,e);return Ql(t.appConfig,n)}catch(n){throw Jw(n)&&n.customData.serverCode===409?await ax(t.appConfig):await Ql(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function wP(t){let e=await Gg(t.appConfig);for(;e.registrationStatus===1;)await rx(100),e=await Gg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await vp(t);return r||n}return e}function Gg(t){return Bc(t,e=>{if(!e)throw yi.create("installation-not-found");return lx(e)})}function lx(t){return xP(t)?{fid:t.fid,registrationStatus:0}:t}function xP(t){return t.registrationStatus===1&&t.registrationTime+Kw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP({appConfig:t,heartbeatServiceProvider:e},n){const r=EP(t,n),i=iP(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:Yw,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await nx(()=>fetch(r,a));if(c.ok){const u=await c.json();return Zw(u)}else throw await ex("Generate Auth Token",c)}function EP(t,{fid:e}){return`${Xw(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(t,e=!1){let n;const r=await Bc(t.appConfig,s=>{if(!cx(s))throw yi.create("not-registered");const o=s.authToken;if(!e&&NP(o))return s;if(o.requestStatus===1)return n=IP(t,e),s;{if(!navigator.onLine)throw yi.create("app-offline");const a=TP(s);return n=bP(t,a),a}});return n?await n:r.authToken}async function IP(t,e){let n=await qg(t.appConfig);for(;n.authToken.requestStatus===1;)await rx(100),n=await qg(t.appConfig);const r=n.authToken;return r.requestStatus===0?_p(t,e):r}function qg(t){return Bc(t,e=>{if(!cx(e))throw yi.create("not-registered");const n=e.authToken;return kP(n)?{...e,authToken:{requestStatus:0}}:e})}async function bP(t,e){try{const n=await SP(t,e),r={...e,authToken:n};return await Ql(t.appConfig,r),n}catch(n){if(Jw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ax(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ql(t.appConfig,r)}throw n}}function cx(t){return t!==void 0&&t.registrationStatus===2}function NP(t){return t.requestStatus===2&&!CP(t)}function CP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+eP}function TP(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function kP(t){return t.requestStatus===1&&t.requestTime+Kw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(t){const e=t,{installationEntry:n,registrationPromise:r}=await vp(e);return r?r.catch(console.error):_p(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(t,e=!1){const n=t;return await AP(n),(await _p(n,e)).token}async function AP(t){const{registrationPromise:e}=await vp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){if(!t||!t.options)throw zu("App Configuration");if(!t.name)throw zu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zu(t){return yi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="installations",OP="installations-internal",jP=t=>{const e=t.getProvider("app").getImmediate(),n=DP(e),r=Ei(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LP=t=>{const e=t.getProvider("app").getImmediate(),n=Ei(e,ux).getImmediate();return{getId:()=>RP(n),getToken:i=>PP(n,i)}};function MP(){An(new Gt(ux,jP,"PUBLIC")),An(new Gt(OP,LP,"PRIVATE"))}MP();sn(qw,gp);sn(qw,gp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl="analytics",FP="firebase_id",UP="origin",$P=60*1e3,VP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=new mc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bt=new xi("analytics","Analytics",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){if(!t.startsWith(wp)){const e=Bt.create("invalid-gtag-resource",{gtagURL:t});return jt.warn(e.message),""}return t}function dx(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function BP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function HP(t,e){const n=BP("firebase-js-sdk-policy",{createScriptURL:zP}),r=document.createElement("script"),i=`${wp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function GP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function qP(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await dx(n)).find(u=>u.measurementId===i);c&&await e[c.appId]}}catch(a){jt.error(a)}t("config",i,s)}async function KP(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await dx(n);for(const c of o){const u=a.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){jt.error(s)}}function YP(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await KP(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await qP(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){jt.error(a)}}return i}function QP(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=YP(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function JP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(wp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=30,ZP=1e3;class eA{constructor(e={},n=ZP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const hx=new eA;function tA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function nA(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:tA(n)},i=VP.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw Bt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function rA(t,e=hx,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Bt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Bt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new oA;return setTimeout(async()=>{a.abort()},n!==void 0?n:$P),fx({appId:r,apiKey:i,measurementId:s},o,a,e)}async function fx(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=hx){var a;const{appId:s,measurementId:o}=t;try{await iA(r,e)}catch(c){if(o)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await nA(t);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!sA(u)){if(i.deleteThrottleMetadata(s),o)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw c}const d=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?Lm(n,i.intervalMillis,XP):Lm(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(s,h),jt.debug(`Calling attemptFetch again in ${d} millis`),fx(t,h,r,i)}}function iA(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Bt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sA(t){if(!(t instanceof jn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class oA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function aA(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(){if(hf())try{await ff()}catch(t){return jt.warn(Bt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return jt.warn(Bt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cA(t,e,n,r,i,s,o){const a=rA(t);a.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>jt.error(f)),e.push(a);const c=lA().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([a,c]);JP(s)||HP(s,u.measurementId),i("js",new Date);const h=(o==null?void 0:o.config)??{};return h[UP]="firebase",h.update=!0,d!=null&&(h[FP]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.app=e}_delete(){return delete ho[this.app.options.appId],Promise.resolve()}}let ho={},Kg=[];const Yg={};let Bu="dataLayer",dA="gtag",Qg,px,Jg=!1;function hA(){const t=[];if(df()&&t.push("This is a browser extension environment."),Nv()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Bt.create("invalid-analytics-context",{errorInfo:e});jt.warn(n.message)}}function fA(t,e,n){hA();const r=t.options.appId;if(!r)throw Bt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bt.create("no-api-key");if(ho[r]!=null)throw Bt.create("already-exists",{id:r});if(!Jg){GP(Bu);const{wrappedGtag:s,gtagCore:o}=QP(ho,Kg,Yg,Bu,dA);px=s,Qg=o,Jg=!0}return ho[r]=cA(t,Kg,Yg,e,Qg,Bu,n),new uA(t)}function pA(t=gc()){t=W(t);const e=Ei(t,Jl);return e.isInitialized()?e.getImmediate():mA(t)}function mA(t,e={}){const n=Ei(t,Jl);if(n.isInitialized()){const i=n.getImmediate();if(Lr(e,n.getOptions()))return i;throw Bt.create("already-initialized")}return n.initialize({options:e})}async function gA(){if(df()||!Nv()||!hf())return!1;try{return await ff()}catch{return!1}}function yA(t,e,n,r){t=W(t),aA(px,ho[t.app.options.appId],e,n,r).catch(i=>jt.error(i))}const Xg="@firebase/analytics",Zg="0.10.18";function vA(){An(new Gt(Jl,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return fA(r,i,n)},"PUBLIC")),An(new Gt("analytics-internal",t,"PRIVATE")),sn(Xg,Zg),sn(Xg,Zg,"esm2020");function t(e){try{const n=e.getProvider(Jl).getImmediate();return{logEvent:(r,i,s)=>yA(n,r,i,s)}}catch(n){throw Bt.create("interop-component-reg-failed",{reason:n})}}}vA();const mx={apiKey:"AIzaSyAdJ3lRxhgZWhnqH8SNQsT1bTFB8E0-cDg",authDomain:"quitarena-a97de.firebaseapp.com",databaseURL:"https://quitarena-a97de-default-rtdb.europe-west1.firebasedatabase.app",projectId:"quitarena-a97de",storageBucket:"quitarena-a97de.firebasestorage.app",messagingSenderId:"693525963288",appId:"1:693525963288:web:a175e9a8bd56fffb35596d",measurementId:"G-H2CCRXYY74"},xp=Ib().length?gc():Av(mx),$=YC(xp,mx.databaseURL),ni=JR(xp);Ik(ni,Dw).then(()=>{console.log("Firebase Auth persistence configured for 30 days")}).catch(t=>{console.error("Error setting auth persistence:",t)});let _A=null;(async()=>{try{await gA()&&(_A=pA(xp))}catch(t){console.debug("Analytics not initialized:",t==null?void 0:t.message)}})();class Sp{constructor(e,n){this.db=e,this.userUID=n,this.userRef=Q(e,`users/${n}`),this.statsRef=Q(e,`users/${n}/stats`),this.profileRef=Q(e,`users/${n}/profile`),this.behaviorLogRef=Q(e,`users/${n}/behaviorLog`)}async updateStat(e,n,r=""){try{const i=await Me(this.statsRef);if(!i.exists())return!1;const s=i.val(),o=s[e]||0,a=Math.max(0,Math.min(100,o+n));return await Ze(this.statsRef,{...s,[e]:a}),await this.logBehavior(e,n,r),this.showStatNotification(e,n,r),console.log(`${e}: ${n>0?"+":""}${n} (${r})`),!0}catch(i){return console.error(`Error updating ${e}:`,i),!1}}async updateAddictionFromCleanTime(){try{const e=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`)),n=await Me(this.userRef);if(!n.exists())return;const r=n.val(),i=e.exists()?new Date(e.val()):new Date(r.quitDate||Date.now()),o=Math.floor((new Date-i)/(1e3*60*60*24*7));if(o>=1){const a=o*2;await this.updateStat("addictionLevel",-a,`Clean time: ${o} week(s)`),o>=1&&await this.resetRelapsePenaltyLevel()}}catch(e){console.error("Error updating addiction from clean time:",e)}}async handleRelapse(){try{const e=new Date,n=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`));let r=1;if(n.exists()){const s=new Date(n.val()),o=Math.floor((e-s)/(1e3*60*60*24));o<=3?r=3:o<=7?r=2:r=1}let i=0;switch(r){case 1:i=4;break;case 2:i=6;break;case 3:i=8;break}return await Promise.all([this.updateStat("addictionLevel",i,`Relapse penalty level ${r}`),this.updateStat("mentalStrength",-3,"Relapse setback"),this.updateStat("triggerDefense",-3,"Relapse to known trigger")]),await Ze(Q(this.db,`users/${this.userUID}/profile/relapseDate`),e.toISOString()),await this.logBehavior("relapse",r,`Penalty level ${r} - ${i} addiction, -3 mental, -3 trigger defense`),!0}catch(e){return console.error("Error handling relapse:",e),!1}}async resetRelapsePenaltyLevel(){try{await Ze(Q(this.db,`users/${this.userUID}/profile/relapsePenaltyLevel`),1),console.log("Relapse penalty level reset")}catch(e){console.error("Error resetting relapse penalty level:",e)}}async handleCravingResistance(){try{return await Promise.all([this.updateStat("mentalStrength",1,"Successful craving resistance"),this.updateStat("triggerDefense",3,"Surviving trigger situation")]),await this.trackAppUsageDuringCravings(),!0}catch(e){return console.error("Error handling craving resistance:",e),!1}}async handleBreathingExercise(){try{const e=new Date().toDateString();return await Ze(Q(this.db,`users/${this.userUID}/profile/daily/${e}/breathing`),!0),await this.checkBreathingStreak()>=3&&await this.updateStat("mentalStrength",1,"3-day breathing exercise streak"),!0}catch(e){return console.error("Error handling breathing exercise:",e),!1}}async handleHydrationUpdate(e){try{const n=new Date().toDateString();return await Ze(Q(this.db,`users/${this.userUID}/profile/daily/${n}/water`),e),await this.checkHydrationStreak()>=3&&await this.updateStat("mentalStrength",1,"3-day hydration streak"),!0}catch(n){return console.error("Error handling hydration update:",n),!1}}async checkMilestoneBonuses(){try{const e=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`)),n=await Me(this.userRef);if(!n.exists())return;const r=n.val(),i=e.exists()?new Date(e.val()):new Date(r.quitDate||Date.now()),o=Math.floor((new Date-i)/(1e3*60*60*24)),a=[{days:7,bonus:5,name:"First week"},{days:30,bonus:10,name:"First month"},{days:90,bonus:15,name:"Three months"}];for(const c of a)if(o>=c.days){const u=`milestone_${c.days}`;(await Me(Q(this.db,`users/${this.userUID}/profile/${u}`))).exists()||await Promise.all([this.updateStat("mentalStrength",c.bonus,`${c.name} milestone bonus`),Ze(Q(this.db,`users/${this.userUID}/profile/${u}`),!0)])}}catch(e){console.error("Error checking milestone bonuses:",e)}}async trackLoggingActivity(){try{const e=new Date().toDateString();return await Ze(Q(this.db,`users/${this.userUID}/profile/daily/${e}/logged`),!0),await this.checkWeeklyLoggingFrequency()>=3&&await this.updateStat("motivation",2,"Regular logging (3+ days this week)"),await this.checkInactivityPenalty(),!0}catch(e){return console.error("Error tracking logging activity:",e),!1}}async handleAchievementShare(){try{return await this.updateStat("motivation",3,"Sharing achievement"),!0}catch(e){return console.error("Error handling achievement share:",e),!1}}async checkMoneyMilestones(){var e;try{const n=await Me(Q(this.db,`users/${this.userUID}/profile/relapseDate`)),r=await Me(this.userRef);if(!r.exists())return;const i=r.val(),s=n.exists()?new Date(n.val()):new Date(i.quitDate||Date.now()),u=Math.floor((new Date-s)/(1e3*60*60*24))*10,d=[50,100,200,500,1e3];for(const h of d)if(u>=h){const f=`moneyMilestone_${h}`;(await Me(Q(this.db,`users/${this.userUID}/profile/${f}`))).exists()||await Promise.all([this.updateStat("motivation",2,`$${h} saved milestone`),Ze(Q(this.db,`users/${this.userUID}/profile/${f}`),!0)])}await this.updateStat("moneySaved",u-(((e=r.val().stats)==null?void 0:e.moneySaved)||0),"Money saved calculation")}catch(n){console.error("Error checking money milestones:",n)}}async handleTriggerPlanning(){try{return await this.updateStat("triggerDefense",1,"Pre-planning for known triggers"),!0}catch(e){return console.error("Error handling trigger planning:",e),!1}}async handleTriggerListUpdate(){try{return await this.updateStat("triggerDefense",1,"Updating trigger list"),!0}catch(e){return console.error("Error handling trigger list update:",e),!1}}async handleUnpreparedTrigger(){try{return await this.updateStat("triggerDefense",-1,"Entering trigger situation unprepared"),!0}catch(e){return console.error("Error handling unprepared trigger:",e),!1}}async checkBreathingStreak(){try{let e=0;for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n);const i=r.toDateString(),s=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${i}/breathing`));if(s.exists()&&s.val())e++;else break}return e}catch(e){return console.error("Error checking breathing streak:",e),0}}async checkHydrationStreak(){try{let e=0;for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n);const i=r.toDateString(),s=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${i}/water`));if(s.exists()&&s.val()>0)e++;else break}return e}catch(e){return console.error("Error checking hydration streak:",e),0}}async checkWeeklyLoggingFrequency(){try{let e=0;for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n);const i=r.toDateString(),s=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${i}/logged`));s.exists()&&s.val()&&e++}return e}catch(e){return console.error("Error checking weekly logging frequency:",e),0}}async checkInactivityPenalty(){try{let e=null;for(let n=0;n<10;n++){const r=new Date;r.setDate(r.getDate()-n);const i=r.toDateString(),s=await Me(Q(this.db,`users/${this.userUID}/profile/daily/${i}/logged`));if(s.exists()&&s.val()){e=n;break}}(e===null||e>=7)&&await this.updateStat("motivation",-3,"Long period inactive (7+ days)")}catch(e){console.error("Error checking inactivity penalty:",e)}}async trackAppUsageDuringCravings(){try{const n=`appUsage_${new Date().toDateString()}`,r=await Me(Q(this.db,`users/${this.userUID}/profile/${n}`));let i=r.exists()?r.val():0;i++,await Ze(Q(this.db,`users/${this.userUID}/profile/${n}`),i),i===3&&await this.updateStat("mentalStrength",1,"Using app during cravings (3 times, no relapse)")}catch(e){console.error("Error tracking app usage during cravings:",e)}}async logBehavior(e,n,r){try{const i={timestamp:Date.now(),statName:e,change:n,reason:r,date:new Date().toISOString()};await Y_(Q(this.db,`users/${this.userUID}/behaviorLog`),i)}catch(i){console.error("Error logging behavior:",i)}}showStatNotification(e,n,r){const i=document.createElement("div");i.className=`fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-500 transform translate-x-full ${n>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,i.innerHTML=`
      <div class="flex items-center gap-2">
        <span class="text-lg">${n>0?"↗":"↘"}</span>
        <span class="font-bold">${e}</span>
        <span class="text-xl">${n>0?"+":""}${n}</span>
      </div>
      <div class="text-sm opacity-90">${r}</div>
    `,document.body.appendChild(i),setTimeout(()=>{i.classList.remove("translate-x-full")},100),setTimeout(()=>{i.classList.add("translate-x-full"),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},500)},3e3)}async runDailyUpdates(){try{await Promise.all([this.updateAddictionFromCleanTime(),this.checkMilestoneBonuses(),this.checkMoneyMilestones(),this.checkInactivityPenalty()])}catch(e){console.error("Error running daily updates:",e)}}async initialize(){try{setInterval(()=>{this.runDailyUpdates()},24*60*60*1e3),await this.runDailyUpdates(),console.log("StatManager initialized successfully")}catch(e){console.error("Error initializing StatManager:",e)}}}class wA{constructor(e){this.db=e,this.matchingPoolRef=Q(e,"matchingPool"),this.buddyPairsRef=Q(e,"buddyPairs"),this.usersRef=Q(e,"users")}async addToMatchingPool(e,n){var r;try{const i={userId:e,quitStartDate:n.quitDate||new Date().toISOString(),addictionLevel:((r=n.stats)==null?void 0:r.addictionLevel)||50,triggers:n.triggers||[],timezone:n.timezone||"UTC",quitExperience:n.quitExperience||"first-timer",availableForMatching:!0,lastActive:new Date().toISOString(),createdAt:new Date().toISOString(),archetype:n.archetype||"DETERMINED",dailyPatterns:n.dailyPatterns||[],copingStrategies:n.copingStrategies||[],confidence:n.confidence||5,preferredContactMethod:"chat",availabilityHours:n.availabilityHours||"anytime",language:n.language||"en"};return await Ze(Q(this.db,`matchingPool/${e}`),i),console.log(`✅ User ${e} added to matching pool`),!0}catch(i){return console.error("❌ Error adding user to matching pool:",i),!1}}async removeFromMatchingPool(e){try{return await DC(Q(this.db,`matchingPool/${e}`)),console.log(`✅ User ${e} removed from matching pool`),!0}catch(n){return console.error("❌ Error removing user from matching pool:",n),!1}}async updateMatchingAvailability(e,n){try{return await Ze(Q(this.db,`matchingPool/${e}/availableForMatching`),n),await Ze(Q(this.db,`matchingPool/${e}/lastActive`),new Date().toISOString()),console.log(`✅ User ${e} matching availability updated to: ${n}`),!0}catch(r){return console.error("❌ Error updating matching availability:",r),!1}}async updateLastActive(e){try{return await Ze(Q(this.db,`matchingPool/${e}/lastActive`),new Date().toISOString()),!0}catch(n){return console.error("❌ Error updating last active:",n),!1}}async findCompatibleMatches(e,n=5){try{const r=await Me(Q(this.db,`matchingPool/${e}`));if(!r.exists())return console.log("❌ User not found in matching pool"),[];const i=r.val(),s=await Me(this.matchingPoolRef);if(!s.exists())return console.log("❌ No users in matching pool"),[];const o=s.val(),a=[];for(const[c,u]of Object.entries(o)){if(c===e||!u.availableForMatching)continue;const d=this.calculateCompatibilityScore(i,u);d>=.1&&a.push({userId:c,profile:u,compatibilityScore:d,matchReasons:this.getMatchReasons(i,u)})}return a.sort((c,u)=>u.compatibilityScore-c.compatibilityScore),a.slice(0,n)}catch(r){return console.error("❌ Error finding compatible matches:",r),[]}}calculateCompatibilityScore(e,n){let r=0,i=0;const s=new Date(e.quitStartDate),o=new Date(n.quitStartDate),a=Math.abs(s-o)/(1e3*60*60*24),c=Math.max(0,1-a/30);r+=c*.3,i+=.3;const u=Math.abs(e.addictionLevel-n.addictionLevel),d=Math.max(0,1-u/100);r+=d*.25,i+=.25;const h=e.timezone===n.timezone?1:.5;r+=h*.2,i+=.2;const f=e.quitExperience===n.quitExperience?1:.7;r+=f*.15,i+=.15;const y=e.triggers.filter(x=>n.triggers.includes(x)).length,w=Math.min(1,y/Math.max(e.triggers.length,1));return r+=w*.1,i+=.1,r/i}getMatchReasons(e,n){const r=[],i=new Date(e.quitStartDate),s=new Date(n.quitStartDate),o=Math.abs(i-s)/(1e3*60*60*24);o<=7?r.push("Started quitting around the same time"):o<=30&&r.push("Similar quit journey timeline"),Math.abs(e.addictionLevel-n.addictionLevel)<=10&&r.push("Similar addiction levels"),e.timezone===n.timezone&&r.push("Same timezone for easy communication"),e.quitExperience===n.quitExperience&&r.push(`Both ${e.quitExperience}s`);const c=e.triggers.filter(u=>n.triggers.includes(u));return c.length>0&&r.push(`Shared triggers: ${c.join(", ")}`),r}async createBuddyPair(e,n,r={}){try{const i=Y_(this.buddyPairsRef).key,s={pairId:i,users:[e,n],matchedAt:new Date().toISOString(),compatibilityScore:r.compatibilityScore||0,matchReasons:r.matchReasons||[],status:"active",lastMessageAt:new Date().toISOString(),user1RemovedFromPool:!1,user2RemovedFromPool:!1};return await Ze(Q(this.db,`buddyPairs/${i}`),s),await Promise.all([this.removeFromMatchingPool(e),this.removeFromMatchingPool(n)]),await Promise.all([Ze(Q(this.db,`users/${e}/buddyInfo`),{hasBuddy:!0,buddyId:n,pairId:i,matchedAt:s.matchedAt}),Ze(Q(this.db,`users/${n}/buddyInfo`),{hasBuddy:!0,buddyId:e,pairId:i,matchedAt:s.matchedAt})]),console.log(`✅ Buddy pair created between ${e} and ${n}`),!0}catch(i){return console.error("❌ Error creating buddy pair:",i),!1}}async getUserBuddyInfo(e){try{const n=await Me(Q(this.db,`users/${e}/buddyInfo`));return n.exists()?n.val():null}catch(n){return console.error("❌ Error getting user buddy info:",n),null}}async getBuddyPairInfo(e){try{const n=await Me(Q(this.db,`buddyPairs/${e}`));return n.exists()?n.val():null}catch(n){return console.error("❌ Error getting buddy pair info:",n),null}}async forceMatchUsers(e,n){try{console.log(`🔧 Force matching users ${e} and ${n}`);const r={compatibilityScore:.95,matchReasons:["Force matched for testing","High compatibility detected"],matchedAt:Date.now()},i=await this.createBuddyPair(e,n,r);return i&&console.log(`✅ Force match successful between ${e} and ${n}`),i}catch(r){return console.error("❌ Error force matching users:",r),!1}}async cleanupInactiveUsers(e=30){try{const n=await Me(this.matchingPoolRef);if(!n.exists())return 0;const r=n.val(),i=new Date;i.setDate(i.getDate()-e);let s=0;for(const[o,a]of Object.entries(r))new Date(a.lastActive)<i&&(await this.removeFromMatchingPool(o),s++);return console.log(`✅ Cleaned up ${s} inactive users from matching pool`),s}catch(n){return console.error("❌ Error cleaning up inactive users:",n),0}}async getMatchingPoolStats(){try{const e=await Me(this.matchingPoolRef);if(!e.exists())return{totalUsers:0,availableUsers:0,averageAddictionLevel:0,topTriggers:[],timezoneDistribution:{}};const n=e.val(),r=Object.values(n);return{totalUsers:r.length,availableUsers:r.filter(s=>s.availableForMatching).length,averageAddictionLevel:r.reduce((s,o)=>s+(o.addictionLevel||0),0)/r.length,topTriggers:this.getTopTriggers(r),timezoneDistribution:this.getTimezoneDistribution(r),quitExperienceDistribution:this.getQuitExperienceDistribution(r)}}catch(e){return console.error("❌ Error getting matching pool stats:",e),null}}getTopTriggers(e){const n={};return e.forEach(r=>{var i;(i=r.triggers)==null||i.forEach(s=>{n[s]=(n[s]||0)+1})}),Object.entries(n).sort(([,r],[,i])=>i-r).slice(0,5).map(([r,i])=>({trigger:r,count:i}))}getTimezoneDistribution(e){const n={};return e.forEach(r=>{const i=r.timezone||"Unknown";n[i]=(n[i]||0)+1}),n}getQuitExperienceDistribution(e){const n={};return e.forEach(r=>{const i=r.quitExperience||"unknown";n[i]=(n[i]||0)+1}),n}listenToMatchingPoolStatus(e,n){const r=Q(this.db,`matchingPool/${e}`);return ah(r,s=>{s.exists()?n(s.val()):n(null)})}listenToBuddyPair(e,n){const r=Q(this.db,`buddyPairs/${e}`);return ah(r,s=>{s.exists()?n(s.val()):n(null)})}async getAllMatchingPoolUsers(){try{const e=await Me(this.matchingPoolRef);if(!e.exists())return console.log("❌ No users in matching pool"),[];const n=e.val(),r=Object.entries(n).map(([i,s])=>({id:i,...s}));return console.log("📊 Matching pool users:",r),r}catch(e){return console.error("❌ Error getting matching pool users:",e),[]}}async forceMatchUsers(e,n){try{console.log(`🔧 Force matching users ${e} and ${n}`);const r={compatibilityScore:.95,matchReasons:["Force matched for testing","High compatibility detected"],matchedAt:Date.now()},i=await this.createBuddyPair(e,n,r);return i&&console.log(`✅ Force match successful between ${e} and ${n}`),i}catch(r){return console.error("❌ Error force matching users:",r),!1}}}const xA=({onAuthSuccess:t,isNewUser:e})=>{const[n,r]=I.useState("signin"),[i,s]=I.useState(""),[o,a]=I.useState(""),[c,u]=I.useState(""),[d,h]=I.useState(!1),[f,y]=I.useState(!1),[w,x]=I.useState(""),[O,g]=I.useState(""),[p,v]=I.useState(!1);I.useEffect(()=>()=>{f&&y(!1)},[f]);const S=new Un;S.addScope("email"),S.addScope("profile"),S.setCustomParameters({prompt:"select_account",access_type:"offline",include_granted_scopes:"true"});const C=()=>{s(""),a(""),u(""),x(""),g("")},N=async()=>{h(!0),y(!0),x("");try{console.log("Starting Google sign-in process..."),console.log("Opening Google authentication popup..."),console.log("Google provider configuration:",{scopes:S.scopes,customParameters:S.customParameters});const _=iR(ni,S),j=new Promise((V,K)=>{setTimeout(()=>K(new Error("Popup timeout - please try again")),6e4)}),k=await Promise.race([_,j]);if(k&&k.user){const V=k.user;console.log("Google sign-in successful for:",V.email,"UID:",V.uid),console.log("User display name:",V.displayName),console.log("User photo URL:",V.photoURL),await new Promise(K=>setTimeout(K,800)),t(V)}else throw new Error("No user data received from Google authentication")}catch(_){console.error("Google sign-in error:",_),_.code==="auth/popup-closed-by-user"?x("Google sign-in was cancelled. Please try again and complete the account selection in the popup window."):_.code==="auth/popup-blocked"?x("Google sign-in popup was blocked by your browser. Please allow popups for this site and try again."):_.code==="auth/cancelled-popup-request"?x("Google sign-in was cancelled. Please try again and complete the authentication process."):_.code==="auth/account-exists-with-different-credential"?x("An account already exists with this email using a different sign-in method. Please use email/password instead."):_.message==="Popup timeout - please try again"?x("Google sign-in popup timed out. Please try again and complete the account selection quickly."):_.code==="auth/network-request-failed"?x("Network error during Google sign-in. Please check your internet connection and try again."):_.code==="auth/operation-not-allowed"?x("Google sign-in is not enabled for this app. Please contact support."):x(m(_.code))}finally{h(!1),y(!1)}},T=async _=>{_.preventDefault(),h(!0),x("");try{const k=(await mk(ni,i,o)).user;console.log("Email sign-in successful for:",k.email),t(k)}catch(j){console.error("Email sign-in error:",j),x(m(j.code))}finally{h(!1)}},b=async _=>{if(_.preventDefault(),h(!0),x(""),o!==c){x("Passwords do not match"),h(!1);return}if(o.length<6){x("Password must be at least 6 characters long"),h(!1);return}try{const k=(await pk(ni,i,o)).user;console.log("Email sign-up successful for:",k.email),await yk(k),t(k)}catch(j){console.error("Email sign-up error:",j),x(m(j.code))}finally{h(!1)}},D=async _=>{if(_.preventDefault(),!i){x("Please enter your email address");return}h(!0),x("");try{await hk(ni,i),g("Password reset email sent! Check your inbox.")}catch(j){console.error("Password reset error:",j),x(m(j.code))}finally{h(!1)}},m=_=>{switch(_){case"auth/user-not-found":return"No account found with this email address";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password is too weak. Use at least 6 characters";case"auth/invalid-email":return"Invalid email address";case"auth/popup-closed-by-user":return"Google sign-in was cancelled. Please try again and complete the account selection.";case"auth/popup-blocked":return"Google sign-in popup was blocked. Please allow popups for this site and try again.";case"auth/cancelled-popup-request":return"Google sign-in was cancelled. Please try again.";case"auth/account-exists-with-different-credential":return"An account already exists with this email using a different sign-in method.";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/operation-not-allowed":return"Google sign-in is not enabled. Please contact support.";case"auth/too-many-requests":return"Too many sign-in attempts. Please try again later.";default:return"Authentication failed. Please try again"}};return p?l.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-white",children:"Reset Password"}),l.jsx("p",{className:"mt-2 text-gray-400",children:"Enter your email to receive a reset link"})]}),l.jsxs("form",{onSubmit:D,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),l.jsx("input",{id:"email",type:"email",value:i,onChange:_=>s(_.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),w&&l.jsx("div",{className:"text-red-400 text-sm",children:w}),O&&l.jsx("div",{className:"text-green-400 text-sm",children:O}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>{v(!1),x(""),g("")},className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Back to Login"}),l.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-blue-600 border border-transparent rounded-md text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Sending...":"Send Reset Link"})]})]})]})}):l.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QuitCard Arena"}),l.jsx("p",{className:"text-gray-400",children:"Your journey to quit starts here"})]}),l.jsxs("div",{children:[f&&l.jsx("div",{className:"mb-3 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-center text-blue-300 text-sm",children:[l.jsx("div",{className:"animate-pulse mr-2",children:"🔐"}),"Google popup is open - please complete your account selection"]})}),l.jsx("button",{onClick:N,disabled:d,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-md text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:d?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Opening Google Sign-in..."]}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),l.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:f?l.jsx("span",{className:"text-blue-400 font-medium",children:"🔐 Google popup is open - please complete account selection"}):"Click to open Google account selection popup"}),w&&l.jsxs("div",{className:"mt-3 p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:[l.jsx("div",{className:"text-red-300 text-sm mb-2",children:w}),w.includes("Google sign-in")&&!f&&l.jsx("button",{onClick:N,disabled:d,className:"w-full px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-md transition-colors disabled:opacity-50",children:d?"Retrying...":"Try Google Sign-in Again"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-600"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Or continue with email"})})]}),l.jsxs("div",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{r("signin"),C()},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="signin"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sign In"}),l.jsx("button",{onClick:()=>{r("signup"),C()},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="signup"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sign Up"})]}),n==="signin"&&l.jsxs("form",{onSubmit:T,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signin-email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),l.jsx("input",{id:"signin-email",type:"email",value:i,onChange:_=>s(_.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signin-password",className:"block text-sm font-medium text-gray-300",children:"Password"}),l.jsx("input",{id:"signin-password",type:"password",value:o,onChange:_=>a(_.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password"})]}),l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"Forgot your password?"})}),w&&l.jsx("div",{className:"text-red-400 text-sm",children:w}),l.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Signing in...":"Sign In"})]}),n==="signup"&&l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),l.jsx("input",{id:"signup-email",type:"email",value:i,onChange:_=>s(_.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-300",children:"Password"}),l.jsx("input",{id:"signup-password",type:"password",value:o,onChange:_=>a(_.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Create a password (min 6 characters)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-300",children:"Confirm Password"}),l.jsx("input",{id:"confirm-password",type:"password",value:c,onChange:_=>u(_.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your password"})]}),w&&l.jsx("div",{className:"text-red-400 text-sm",children:w}),O&&l.jsx("div",{className:"text-green-400 text-sm",children:O}),l.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Creating account...":"Create Account"})]})]})})},SA=()=>{const[t,e]=I.useState(navigator.onLine),[n,r]=I.useState(!1);return I.useEffect(()=>{const i=()=>{e(!0),r(!1),console.log("🌐 Connection restored")},s=()=>{e(!1),r(!0),console.log("📡 Connection lost")};return window.addEventListener("online",i),window.addEventListener("offline",s),e(navigator.onLine),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[]),t?null:l.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-600 text-white p-3 text-center shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),l.jsx("span",{className:"font-medium",children:"You're offline. Some features may be limited."}),l.jsx("button",{onClick:()=>r(!1),className:"ml-2 text-white hover:text-yellow-200 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&l.jsxs("div",{className:"mt-2 text-sm bg-yellow-700 p-2 rounded",children:[l.jsx("p",{className:"mb-2",children:"While offline, you can:"}),l.jsxs("ul",{className:"text-left space-y-1 ml-4",children:[l.jsx("li",{children:"• View your current stats and progress"}),l.jsx("li",{children:"• Track habits and cravings"}),l.jsx("li",{children:"• Play distraction games"}),l.jsx("li",{children:"• View your profile information"})]}),l.jsx("p",{className:"mt-2 text-yellow-200",children:"Changes will sync when you're back online."})]})]})};var EA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bA=(t,e)=>{const n=I.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...c},u)=>I.createElement("svg",{ref:u,...EA,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${IA(t)}`,...c},[...e.map(([d,h])=>I.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var Nt=bA;const NA=Nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),CA=Nt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),gx=Nt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),yx=Nt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),TA=Nt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),kA=Nt("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Fa=Nt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),vx=Nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ho=Nt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),RA=Nt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),_x=Nt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),PA=Nt("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),wx=Nt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),xx=Nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Sx=Nt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),dr=(t,e="adventurer")=>{const n="https://api.dicebear.com/7.x",r={seed:t||Math.random().toString(36).substring(7),backgroundColor:["b6e3f4","c0aede","ffdfbf","ffd5dc"],radius:50,size:200},i=new URLSearchParams(r).toString();return`${n}/${e}/svg?${i}`},Ua=t=>{const e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],n=e[t.charCodeAt(0)%e.length],r=t.substring(0,2).toUpperCase();return`data:image/svg+xml,${encodeURIComponent(`
    <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="200" fill="${n}"/>
      <text x="100" y="120" font-family="Arial, sans-serif" font-size="80" font-weight="bold" text-anchor="middle" fill="white">${r}</text>
    </svg>
  `)}`},AA=({onComplete:t,authUser:e})=>{const[n,r]=I.useState(1),[i,s]=I.useState({heroName:"",archetype:"",avatar:null,avatarSeed:Math.random().toString(36).substring(7),triggers:[],dailyPatterns:[],copingStrategies:[],vapePodsPerWeek:0,nicotineStrength:"",quitAttempts:"",confidence:5}),[o,a]=I.useState(!1),[c,u]=I.useState(!1),[d,h]=I.useState(null),[f,y]=I.useState(null),w=[{id:"DETERMINED",name:"The Determined",description:"Unstoppable willpower and determination",color:"bg-red-500",icon:Ho},{id:"SOCIAL_FIGHTER",name:"The Social Fighter",description:"Thrives on community support",color:"bg-blue-500",icon:Sx},{id:"HEALTH_WARRIOR",name:"The Health Warrior",description:"Focused on physical and mental wellness",color:"bg-green-500",icon:yx},{id:"MONEY_SAVER",name:"The Money Saver",description:"Motivated by financial freedom",color:"bg-yellow-500",icon:gx}],x=["Stress/anxiety","Social situations","Boredom","After meals","Drinking alcohol","Work breaks","Driving"],O=["Morning routine","Work breaks","After meals","Evening wind-down","Social events","Throughout the day"],g=["Breathing exercises","Nicotine replacement therapy","Exercise/physical activity","Distraction techniques","Nothing - this is new to me"],p=()=>{console.log("Calculating stats with userData:",i);let m=40;i.vapePodsPerWeek<=1?m+=5:i.vapePodsPerWeek<=3?m+=15:i.vapePodsPerWeek<=5?m+=25:i.vapePodsPerWeek<=7?m+=35:m+=40;const _=i.nicotineStrength||"",j=parseInt(_.replace("mg",""))||0;j<=5?m+=0:j<=11?m+=10:j<=20?m+=20:m+=25,i.dailyPatterns.includes("Throughout the day")?m+=20:i.dailyPatterns.length>2?m+=10:m+=0,m=Math.min(m,100);let k=25;i.confidence>=9?k+=35:i.confidence>=7?k+=25:i.confidence>=4?k+=15:k+=0,i.quitAttempts==="first"?k+=15:parseInt(i.quitAttempts)<=3?k+=10:k+=5,i.copingStrategies.length>=3?k+=15:i.copingStrategies.length>=1?k+=10:k+=0,k=Math.min(k,80);let V=35;V+={DETERMINED:20,HEALTH_WARRIOR:15,SOCIAL_FIGHTER:15,MONEY_SAVER:10}[i.archetype]||0,i.confidence>=8?V+=25:i.confidence>=5?V+=15:V+=0,i.quitAttempts==="first"?V+=10:parseInt(i.quitAttempts)<=3?V+=5:V+=15,V=Math.min(V,90);let G=15;i.triggers.length<=2?G+=15:i.triggers.length<=4?G+=10:G+=5;const de=i.triggers.includes("Drinking alcohol"),L=i.triggers.includes("Social situations");return de&&L?G+=0:i.triggers.length>3?G+=5:G+=10,i.copingStrategies.length>=3?G+=25:i.copingStrategies.length>=1?G+=15:G+=0,i.dailyPatterns.includes("Throughout the day")?G+=0:i.dailyPatterns.length>2?G+=5:G+=10,G=Math.min(G,60),{addictionLevel:m,mentalStrength:k,motivation:V,triggerDefense:G}},v=m=>{const _=m.target.files[0];if(_){h(_);const j=new FileReader;j.onload=k=>y(k.target.result),j.readAsDataURL(_)}},S=async()=>{if(d){u(!0);try{const m=document.createElement("canvas"),_=m.getContext("2d"),j=new Image;j.onload=()=>{m.width=200,m.height=200,_.filter="contrast(1.2) saturate(1.3) brightness(1.1)",_.drawImage(j,0,0,200,200),_.globalCompositeOperation="overlay",_.fillStyle="rgba(255, 200, 200, 0.1)",_.fillRect(0,0,200,200);const k=m.toDataURL("image/png"),V={...i,avatar:k};s(V),D(V,3),u(!1)},j.src=f}catch(m){console.error("Photo processing failed:",m);const _=Ua(i.avatarSeed);s(j=>({...j,avatar:_})),u(!1)}}},C=()=>{a(!0);const m=Math.random().toString(36).substring(7);(async()=>{try{const j=dr(m),k={...i,avatarSeed:m,avatar:j};s(k),D(k,3)}catch{const k=Ua(m),V={...i,avatarSeed:m,avatar:k};s(V),D(V,3)}})(),setTimeout(()=>a(!1),500)},N=async()=>{if(n<10)await D(i,n),r(n+1);else try{console.log("Completing onboarding with userData:",i);const m=p();console.log("Calculated stats:",m);const _={...i,stats:{...m,streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date};await D(_,10),console.log("Final user data:",_),t(_)}catch(m){console.error("Error completing onboarding:",m);const j={...i,stats:{...{addictionLevel:50,mentalStrength:50,motivation:50,triggerDefense:30},streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date};try{await D(j,10)}catch(k){console.error("Failed to save fallback data to Firebase:",k)}console.log("Using fallback stats:",j),t(j)}},T=()=>{n>1&&r(n-1)},b=()=>{switch(n){case 1:return i.heroName.trim().length>0;case 2:return i.archetype!=="";case 3:return i.avatar!==null;case 4:return i.triggers.length>0;case 5:return i.dailyPatterns.length>0;case 6:return i.copingStrategies.length>0;case 7:return i.vapePodsPerWeek>0;case 8:return i.nicotineStrength!=="";case 9:return i.quitAttempts!=="";case 10:return i.confidence>0;default:return!1}},D=async(m,_)=>{if(e)try{const{ref:j,set:k}=await be(()=>import("./index.esm-409cdec0.js"),[]),V=j($,`users/${e.uid}/onboarding`);await k(j($,`users/${e.uid}/onboarding/step${_}`),{...m,stepNumber:_,timestamp:Date.now()}),await k(j($,`users/${e.uid}/onboarding/progress`),{currentStep:_,completedSteps:Array.from({length:_},(K,G)=>G+1),lastUpdated:Date.now()}),console.log(`Step ${_} saved to Firebase successfully`)}catch(j){console.error(`Error saving step ${_} to Firebase:`,j)}};return I.useEffect(()=>{if(!i.avatar){const m=dr(i.avatarSeed);s(_=>({..._,avatar:m}))}},[]),l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-8 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsx("div",{className:"flex justify-between items-center mb-8 overflow-x-auto",children:[1,2,3,4,5,6,7,8,9,10].map(m=>l.jsxs("div",{className:"flex items-center flex-shrink-0",children:[l.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${m<=n?"bg-blue-500 text-white":"bg-slate-600 text-gray-400"}`,children:m<n?"✓":m}),m<10&&l.jsx("div",{className:`w-4 h-1 mx-1 ${m<n?"bg-blue-500":"bg-slate-600"}`})]},m))}),n===1&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(RA,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Welcome to QuitCard Arena"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Your journey to freedom starts here. Let's create your hero identity."}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-left text-white text-sm font-medium mb-2",children:"What's your hero name?"}),l.jsx("input",{type:"text",value:i.heroName,onChange:m=>{const _={...i,heroName:m.target.value};s(_),m.target.value.trim().length>0&&D(_,1)},placeholder:"e.g., FreedomSeeker, HealthGuardian",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n===2&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Ho,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Choose Your Archetype"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Select the warrior type that resonates with your journey."}),l.jsx("div",{className:"space-y-3 mb-6",children:w.map(m=>{const _=m.icon;return l.jsx("button",{onClick:()=>{const j={...i,archetype:m.id};s(j),D(j,2)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${i.archetype===m.id?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 ${m.color} rounded-lg flex items-center justify-center`,children:l.jsx(_,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold",children:m.name}),l.jsx("p",{className:"text-gray-400 text-sm",children:m.description})]})]})},m.id)})})]}),n===3&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(xx,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Create Your Avatar"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Choose your battle card identity in the arena."}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full overflow-hidden border-4 border-slate-600 bg-slate-700",children:i.avatar?l.jsx("img",{src:i.avatar,alt:"Avatar",className:"w-full h-full object-cover",onError:()=>{s(m=>({...m,avatar:Ua(m.avatarSeed)}))}}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Fa,{className:"w-8 h-8 text-gray-400 animate-spin"})})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Upload Your Photo"}),l.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",id:"photo-upload"}),l.jsx("label",{htmlFor:"photo-upload",className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 justify-center cursor-pointer",children:"📷 Upload Photo"})]}),f&&l.jsx("div",{className:"mb-4",children:l.jsx("button",{onClick:S,disabled:c,className:"w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 text-white rounded-lg transition-colors flex items-center gap-2 justify-center",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Fa,{className:"w-4 h-4 animate-spin"}),"Converting to Anime..."]}):l.jsx(l.Fragment,{children:"✨ Convert to Anime"})})}),l.jsx("div",{className:"text-gray-400 text-sm",children:"- OR -"}),l.jsx("button",{onClick:C,disabled:o,className:"w-full px-6 py-3 bg-slate-600 hover:bg-slate-500 disabled:bg-slate-700 text-white rounded-lg transition-colors flex items-center gap-2 justify-center",children:o?l.jsxs(l.Fragment,{children:[l.jsx(Fa,{className:"w-4 h-4 animate-spin"}),"Generate Random Avatar"]}):l.jsxs(l.Fragment,{children:[l.jsx(Fa,{className:"w-4 h-4"}),"Generate Random Avatar"]})}),l.jsx("button",{onClick:()=>{const m=Ua(i.avatarSeed),_={...i,avatar:m};s(_),D(_,3)},className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Use Fallback Avatar"})]})]})]}),n===4&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"🎯"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Trigger Identification"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"What usually makes you want to vape? (Select all that apply)"}),l.jsx("div",{className:"space-y-3 mb-6",children:x.map(m=>l.jsx("button",{onClick:()=>{const _={...i,triggers:i.triggers.includes(m)?i.triggers.filter(j=>j!==m):[...i.triggers,m]};s(_),D(_,4)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${i.triggers.includes(m)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${i.triggers.includes(m)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:i.triggers.includes(m)&&l.jsx("span",{className:"text-white text-sm",children:"✓"})}),l.jsx("span",{className:"text-white font-semibold",children:m})]})},m))})]}),n===5&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"📅"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Daily Routine"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"When do you vape most? (Select all that apply)"}),l.jsx("div",{className:"space-y-3 mb-6",children:O.map(m=>l.jsx("button",{onClick:()=>{const _={...i,dailyPatterns:i.dailyPatterns.includes(m)?i.dailyPatterns.filter(j=>j!==m):[...i.dailyPatterns,m]};s(_),D(_,5)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${i.dailyPatterns.includes(m)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${i.dailyPatterns.includes(m)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:i.dailyPatterns.includes(m)&&l.jsx("span",{className:"text-white text-sm",children:"✓"})}),l.jsx("span",{className:"text-white font-semibold",children:m})]})},m))})]}),n===6&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"🛡️"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Coping Experience"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Have you tried any of these strategies before? (Select all that apply)"}),l.jsx("div",{className:"space-y-3 mb-6",children:g.map(m=>l.jsx("button",{onClick:()=>{const _={...i,copingStrategies:i.copingStrategies.includes(m)?i.copingStrategies.filter(j=>j!==m):[...i.copingStrategies,m]};s(_),D(_,6)},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${i.copingStrategies.includes(m)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${i.copingStrategies.includes(m)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:i.copingStrategies.includes(m)&&l.jsx("span",{className:"text-white text-sm",children:"✓"})}),l.jsx("span",{className:"text-white font-semibold",children:m})]})},m))})]}),n===7&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"🚬"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Vape Usage"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"How many vape pods do you typically use per week?"}),l.jsx("div",{className:"mb-6",children:l.jsxs("select",{value:i.vapePodsPerWeek,onChange:m=>{const _={...i,vapePodsPerWeek:parseFloat(m.target.value)||0};s(_),_.vapePodsPerWeek>0&&D(_,7)},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select pods per week"}),l.jsx("option",{value:"0.5",children:"0.5 pods"}),l.jsx("option",{value:"1",children:"1 pod"}),l.jsx("option",{value:"2",children:"2 pods"}),l.jsx("option",{value:"3",children:"3 pods"}),l.jsx("option",{value:"4",children:"4 pods"}),l.jsx("option",{value:"5",children:"5 pods"}),l.jsx("option",{value:"6",children:"6 pods"}),l.jsx("option",{value:"7",children:"7 pods"}),l.jsx("option",{value:"8",children:"8+ pods"})]})})]}),n===8&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"⚡"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Nicotine Strength"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"What nicotine strength do you typically use?"}),l.jsx("div",{className:"mb-6",children:l.jsxs("select",{value:i.nicotineStrength,onChange:m=>{const _={...i,nicotineStrength:m.target.value};s(_),_.nicotineStrength&&D(_,8)},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select nicotine strength"}),l.jsx("option",{value:"3mg",children:"3mg"}),l.jsx("option",{value:"6mg",children:"6mg"}),l.jsx("option",{value:"12mg",children:"12mg"}),l.jsx("option",{value:"18mg",children:"18mg"}),l.jsx("option",{value:"20mg",children:"20mg"}),l.jsx("option",{value:"50mg",children:"50mg"})]})})]}),n===9&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"📚"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Previous Attempts"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"How many times have you tried to quit before?"}),l.jsx("div",{className:"mb-6",children:l.jsxs("select",{value:i.quitAttempts,onChange:m=>{const _={...i,quitAttempts:m.target.value};s(_),_.quitAttempts&&D(_,9)},className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select option"}),l.jsx("option",{value:"first",children:"This is my first attempt"}),l.jsx("option",{value:"1",children:"Once before"}),l.jsx("option",{value:"2",children:"Twice before"}),l.jsx("option",{value:"3",children:"3-5 times"}),l.jsx("option",{value:"5",children:"More than 5 times"})]})})]}),n===10&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:"🎯"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Confidence Level"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"How confident are you this time? (1-10 scale)"}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"1"}),l.jsx("input",{type:"range",min:"1",max:"10",value:i.confidence,onChange:m=>{const _={...i,confidence:parseInt(m.target.value)};s(_),D(_,10)},className:"flex-1 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer slider"}),l.jsx("span",{className:"text-gray-400 text-sm",children:"10"})]}),l.jsxs("div",{className:"text-center mt-2",children:[l.jsx("span",{className:"text-white font-bold text-lg",children:i.confidence}),l.jsx("span",{className:"text-gray-400 text-sm ml-2",children:"/ 10"})]})]})]}),l.jsxs("div",{className:"flex justify-between",children:[n>1&&l.jsx("button",{onClick:T,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Back"}),l.jsxs("button",{onClick:N,disabled:!b(),className:`ml-auto px-6 py-3 rounded-lg transition-colors flex items-center gap-2 ${b()?"bg-blue-600 hover:bg-blue-700 text-white":"bg-slate-700 text-gray-400 cursor-not-allowed"}`,children:[n===10?"Start Journey":"Next",l.jsx(NA,{className:"w-4 h-4"})]})]})]})})},ey={DETERMINED:{name:"The Determined",color:"bg-red-500",icon:Ho},SOCIAL_FIGHTER:{name:"The Social Fighter",color:"bg-blue-500",icon:Sx},HEALTH_WARRIOR:{name:"The Health Warrior",color:"bg-green-500",icon:yx},MONEY_SAVER:{name:"The Money Saver",color:"bg-yellow-500",icon:gx}},DA={COMMON:{name:"Common",color:"border-gray-400",glow:"",days:0},UNCOMMON:{name:"Uncommon",color:"border-gray-300",glow:"shadow-lg",days:7},RARE:{name:"Rare",color:"border-yellow-400",glow:"shadow-yellow-400/50 shadow-lg",days:14},EPIC:{name:"Epic",color:"border-purple-400",glow:"shadow-purple-400/50 shadow-xl",days:30},LEGENDARY:{name:"Legendary",color:"border-orange-400",glow:"shadow-orange-400/50 shadow-2xl animate-pulse",days:90}},ty={WEEK_WARRIOR:{name:"Week Warrior",icon:CA,description:"7 days clean"},MONTH_MASTER:{name:"Month Master",icon:wx,description:"30 days clean"},LEGEND:{name:"Legend",icon:_x,description:"90 days clean"}},OA=t=>t>=90?"LEGENDARY":t>=30?"EPIC":t>=14?"RARE":t>=7?"UNCOMMON":"COMMON",jA=({isOpen:t,onClose:e,statType:n})=>{if(!t)return null;const i={addiction:{title:"Addiction",description:"Time since last vape - decreases as your body heals",impacts:["What decreases it:","• Clean time: -2 points per week (standard recovery)","• Cold turkey approach: -3 points per week (faster healing)","• Tapering approach: -1.5 points per week (gentler decline)","","What increases it:","• First relapse (after clean period): +4 points","• Second relapse (within 7 days): +6 additional points","• Third relapse and on (within 3 days): +8 additional points","• Reset: Penalty level resets after 7 clean days"]},mentalStrength:{title:"Mental Strength",description:"Your ability to resist urges and stay strong",impacts:["What increases it:","• Successful craving resistance: +1 point","• Using app during cravings every 3 times with no relapse: +1 point","• Completing breathing exercises 3 days straight: +1 point","• Staying hydrated for 3 days straight: +1 point","• Milestone bonuses: First 7 days +5 points, 30 days +10 points, 90 days +15 points","","What decreases it:","• Giving in to cravings: -3 points","• Each relapse: -3 points"]},motivation:{title:"Motivation",description:"Your drive to quit - boosted by staying engaged",impacts:["What increases it:","• Regular logging (3+ days per week): +2 points (weekly)","• Sharing achievements: +3 points per share (weekly)","• Reaching money saved milestones: +2 points","","What decreases it:","• Long periods inactive (7+ days no logging): -3 points"]},triggerDefense:{title:"Trigger Defense",description:"Protection against your personal vaping triggers",impacts:["What increases it:","• Surviving trigger situations without vaping: +3 points","• Pre-planning for known triggers: +1 point","• Updating your trigger list: +1 point","","What decreases it:","• Relapsing to known triggers: -3 points","• Entering trigger situations unprepared: -1 point"]}}[n];return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:i.title}),l.jsx("p",{className:"text-gray-300 text-sm",children:i.description})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-white font-semibold mb-3 text-left",children:"What impacts it:"}),l.jsx("ul",{className:"space-y-2 text-left",children:i.impacts.map((s,o)=>l.jsxs("li",{className:"text-gray-300 text-sm flex items-start",children:[l.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),s]},o))})]}),l.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-all duration-300",children:"Got it"})]})}):null},$a=({label:t,value:e,max:n,color:r,statType:i,onInfoClick:s})=>{const o=Math.min(e,n);return l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex justify-between text-white text-xs mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{children:t}),i&&s&&l.jsx("button",{onClick:()=>s(i),className:"w-4 h-4 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center text-white text-xs font-bold transition-colors",title:`Learn about ${t}`,children:"i"})]}),l.jsxs("span",{children:[o,"/",n]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:`${r} h-2 rounded-full transition-all duration-500`,style:{width:`${o/n*100}%`}})})]})},ny=({user:t,isNemesis:e=!1,showComparison:n=!1,nemesisUser:r=null,onInfoClick:i})=>{const[s,o]=I.useState(!1),[a,c]=I.useState(null),[u,d]=I.useState([]);if(I.useEffect(()=>{let S=!1;return(async()=>{try{if(t&&t.uid){const N=await w(t);S||d(N)}else S||d([])}catch{S||d([])}})(),()=>{S=!0}},[t==null?void 0:t.uid]),t.isEmpty)return l.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-slate-600 p-4 text-white text-center mx-auto flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-4xl text-slate-400",children:"🔍"})}),l.jsx("h3",{className:"text-slate-300 text-lg font-semibold mb-2",children:"Looking for Buddy"}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"We are searching for a suitable quit buddy for you. This may take a few minutes."}),l.jsx("div",{className:"mt-4 p-3 bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-300 text-xs",children:"💡 Tip: Complete your profile to help us find better matches"})})]})});if(!t||!t.archetype||!t.stats)return l.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-gray-400 p-4 text-white text-center mx-auto flex items-center justify-center",children:l.jsx("div",{className:"animate-pulse",children:"Loading Card..."})});const h=ey[t.archetype];if(!h)return console.error("Invalid archetype:",t.archetype,"Available:",Object.keys(ey)),l.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-red-400 p-4 text-white text-center mx-auto flex items-center justify-center",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-red-400 mb-2",children:"Invalid Archetype"}),l.jsx("p",{className:"text-gray-300 text-sm",children:t.archetype})]})});const f=DA[OA(t.stats.streakDays)],y=h.icon,w=async S=>{let C=null;if(S.uid)try{const{ref:b,get:D}=await be(()=>import("./index.esm-409cdec0.js"),[]),m=b($,`users/${S.uid}/specialFeatures`),_=await D(m);_.exists()&&(C=_.val())}catch(b){console.error("Error fetching special features from Firebase:",b)}if(!C){const b=`specialFeatures_${S.heroName||S.id||"default"}`,D=localStorage.getItem(b);D&&(C=JSON.parse(D))}if(C)return C;const N=[];for(S.triggers&&S.triggers.length>0&&S.triggers.forEach(b=>{switch(b){case"Stress/anxiety":N.push("Stress Vaper");break;case"Social situations":N.push("Social Vaper");break;case"Boredom":N.push("Boredom Vaper");break;case"After meals":N.push("Habit Vaper");break;case"Drinking alcohol":N.push("Party Vaper");break;case"Work breaks":N.push("Break Vaper");break;case"Driving":N.push("Driving Vaper");break}}),S.dailyPatterns&&S.dailyPatterns.length>0&&S.dailyPatterns.forEach(b=>{switch(b){case"Morning routine":N.push("Morning Struggler");break;case"Evening wind-down":N.push("Late Night Lurker");break;case"Throughout the day":N.push("All-Day Addict");break}}),S.copingStrategies&&S.copingStrategies.length>0&&(S.copingStrategies.includes("Nothing - this is new to me")?N.push("First Timer"):S.copingStrategies.length>2&&N.push("Veteran Quitter"));N.length<4;){const b=["Nicotine Fighter","Health Seeker","Freedom Chaser","Willpower Warrior"],D=b[Math.floor(Math.random()*b.length)];N.includes(D)||N.push(D)}const T=N.slice(0,4);if(S.uid)try{const{ref:b,set:D}=await be(()=>import("./index.esm-409cdec0.js"),[]),m=b($,`users/${S.uid}/specialFeatures`);await D(m,T),console.log("Special features saved to Firebase successfully")}catch(b){console.error("Error saving special features to Firebase:",b);const D=`specialFeatures_${S.heroName||S.id||"default"}`;localStorage.setItem(D,JSON.stringify(T))}else{const b=`specialFeatures_${S.heroName||S.id||"default"}`;localStorage.setItem(b,JSON.stringify(T))}return T},x=t.stats.addictionLevel||50,O=t.stats.mentalStrength||50,g=t.stats.motivation||50,p=t.stats.triggerDefense||30;t.stats.nemesisVictories||(Math.floor(Math.random()*8)+1,Math.floor(Math.random()*5)+1);const v=S=>{c(S),o(!0)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`relative w-80 h-[520px] rounded-xl ${f.color} border-4 ${f.glow} bg-gradient-to-br from-slate-800 to-slate-900 p-4 transform transition-all duration-300 hover:scale-105 mx-auto overflow-hidden`,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("h3",{className:"text-white font-bold text-lg leading-tight break-words px-1",children:t.heroName}),l.jsx("p",{className:"text-gray-300 text-base",children:h.name})]}),l.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full overflow-hidden bg-slate-700 flex items-center justify-center ring-2 ring-blue-400/50",children:t.avatar?l.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover",onError:()=>{console.log("Avatar failed to load, using fallback")}}):l.jsx("div",{className:`w-full h-full ${h.color} flex items-center justify-center`,children:l.jsx(y,{className:"w-12 h-12 text-white"})})}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsx($a,{label:"Addiction",value:x,max:100,color:"bg-red-500",statType:e?null:"addiction",onInfoClick:e?null:v}),l.jsx($a,{label:"Mental Strength",value:O,max:100,color:"bg-blue-500",statType:e?null:"mentalStrength",onInfoClick:e?null:v}),l.jsx($a,{label:"Motivation",value:g,max:100,color:"bg-green-500",statType:e?null:"motivation",onInfoClick:e?null:v}),l.jsx($a,{label:"Trigger Defense",value:p,max:100,color:"bg-orange-500",statType:e?null:"triggerDefense",onInfoClick:e?null:v})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"text-white text-xs font-semibold mb-2 text-center",children:"Special Features"}),l.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:u.map((S,C)=>l.jsx("div",{className:"px-2 py-1 bg-blue-600/80 text-white text-xs rounded-full font-medium",title:S,children:S},C))})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-3 space-y-2 mb-3 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex justify-between text-white text-sm",children:[l.jsx("span",{className:"text-gray-300",children:"Streak:"}),l.jsxs("span",{className:"font-bold text-green-400 flex items-center gap-1",children:[t.stats.streakDays," days",t.stats.streakDays>0&&l.jsx("span",{className:"text-xs",children:"🔥"})]})]}),l.jsxs("div",{className:"flex justify-between text-white text-sm",children:[l.jsx("span",{className:"text-gray-300",children:"Cravings Resisted:"}),l.jsxs("span",{className:"font-bold text-blue-400 flex items-center gap-1",children:[t.stats.cravingsResisted||0,l.jsx("span",{className:"text-xs",children:"💪"})]})]})]}),t.achievements&&t.achievements.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[t.achievements.slice(0,4).map((S,C)=>{var T,b;const N=((T=ty[S])==null?void 0:T.icon)||_x;return l.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center shadow-lg",title:(b=ty[S])==null?void 0:b.description,children:l.jsx(N,{className:"w-3 h-3 text-white"})},C)}),t.achievements.length>4&&l.jsxs("div",{className:"w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:["+",t.achievements.length-4]})]})]}),l.jsx(jA,{isOpen:s,onClose:()=>o(!1),statType:a})]})},LA=({activeTab:t,onTabChange:e,dataLoadingState:n,onRefreshData:r,offlineManager:i})=>{const s=[{id:"arena",label:"Arena",icon:TA},{id:"craving-support",label:"Craving Support",icon:Ho},{id:"profile",label:"Profile",icon:xx},{id:"buddy-chat",label:"Chat with Buddy",icon:kA},{id:"settings",label:"Explore",icon:vx}];return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-slate-700/90 backdrop-blur-sm border-t border-slate-600 px-4 py-2 z-30",children:l.jsxs("div",{className:"flex justify-center items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-green-400",children:"🔐"}),l.jsx("span",{className:"text-white",children:"Session Active"}),l.jsx("span",{className:"text-gray-400",children:"•"}),l.jsx("span",{className:"text-gray-300",children:"30 days persistence"}),n&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400",children:"•"}),n.isComplete?l.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"✓"}),l.jsx("span",{children:"Synced"})]}):n.error?l.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"⚠"}),l.jsx("span",{children:"Sync Error"})]}):l.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"⟳"}),l.jsx("span",{children:"Syncing..."})]}),n.isComplete&&l.jsx("button",{onClick:r,className:"ml-2 px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:"Refresh data from server",children:"🔄"})]}),i&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400",children:"•"}),i.isOnline?l.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"🌐"}),l.jsx("span",{children:"Online"})]}):l.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"📡"}),l.jsx("span",{children:"Offline"})]}),i.syncQueue.length>0&&l.jsxs("span",{className:"text-blue-400 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"📝"}),l.jsxs("span",{children:[i.syncQueue.length," pending"]})]})]})]})}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-800 border-t border-slate-700 px-4 py-2 z-40",children:l.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:s.map(o=>{const a=o.icon,c=t===o.id;return l.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center transition-colors ${c?"text-blue-400":"text-gray-400 hover:text-blue-300"}`,children:[l.jsx(a,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs",children:o.label})]},o.id)})})})]})},MA=({user:t,nemesis:e,onBackToLogin:n,onResetForTesting:r,buddyLoading:i,buddyError:s,realBuddy:o})=>{const[a,c]=I.useState(!1),[u,d]=I.useState(null);I.useEffect(()=>{o&&console.log("🔍 Arena: Real buddy loaded:",o.heroName)},[o]);const h=async()=>{u&&await u.handleAchievementShare()},f=async m=>{const _={...m.stats};if(!(m!=null&&m.uid)){const j=localStorage.getItem("quitCoachRelapseDate");if(j){const K=new Date(j),de=new Date().getTime()-K.getTime(),L=Math.floor(de/(1e3*3600*24));_.streakDays=L}else{const K=m.quitDate?new Date(m.quitDate):new Date,de=new Date().getTime()-K.getTime();_.streakDays=Math.floor(de/(1e3*3600*24))}const k=parseInt(localStorage.getItem("cravingWins")||0);_.cravingsResisted=k,new Date().toDateString();let V=0;for(let K=0;K<7;K++){const G=new Date;G.setDate(G.getDate()-K);const de=G.toDateString(),L=localStorage.getItem(`water_${de}`);if(L&&parseInt(L)>0)V++;else break}return V>=3&&(_.mentalStrength=Math.min(80,(_.mentalStrength||50)+1)),_}try{const{ref:j,get:k}=await be(()=>import("./index.esm-409cdec0.js"),[]),V=j($,`users/${m.uid}/profile/relapseDate`),K=await k(V);if(K.exists()){const B=new Date(K.val()),ne=new Date().getTime()-B.getTime(),Z=Math.floor(ne/(1e3*3600*24));_.streakDays=Z}else{const B=m.quitDate?new Date(m.quitDate):new Date,ne=new Date().getTime()-B.getTime();_.streakDays=Math.floor(ne/(1e3*3600*24))}const G=j($,`users/${m.uid}/profile/cravingsResisted`),de=await k(G);_.cravingsResisted=de.exists()?de.val():0;const L=new Date().toDateString();let z=0;for(let B=0;B<7;B++){const ie=new Date;ie.setDate(ie.getDate()-B);const ne=ie.toDateString(),Z=j($,`users/${m.uid}/profile/daily/${ne}/water`),he=await k(Z);if(he.exists()&&he.val()>0)z++;else break}z>=3&&(_.mentalStrength=Math.min(80,(_.mentalStrength||50)+1))}catch(j){console.error("Error fetching profile data from Firebase:",j);const k=localStorage.getItem("quitCoachRelapseDate");if(k){const G=new Date(k),L=new Date().getTime()-G.getTime(),z=Math.floor(L/(1e3*3600*24));_.streakDays=z}else{const G=m.quitDate?new Date(m.quitDate):new Date,L=new Date().getTime()-G.getTime();_.streakDays=Math.floor(L/(1e3*3600*24))}const V=parseInt(localStorage.getItem("cravingWins")||0);_.cravingsResisted=V,new Date().toDateString();let K=0;for(let G=0;G<7;G++){const de=new Date;de.setDate(de.getDate()-G);const L=de.toDateString(),z=localStorage.getItem(`water_${L}`);if(z&&parseInt(z)>0)K++;else break}K>=3&&(_.mentalStrength=Math.min(80,(_.mentalStrength||50)+1))}return _},[y,w]=I.useState({...t==null?void 0:t.stats}),[x,O]=I.useState({...e==null?void 0:e.stats});I.useEffect(()=>{if(!(t!=null&&t.uid))return;const m=async()=>{try{const k=new Sp($,t.uid);await k.initialize(),d(k)}catch(k){console.error("Error initializing StatManager:",k)}},_=async()=>{try{const k=new wA($);setBuddyMatchingService(k),console.log("✅ BuddyMatchingService initialized successfully")}catch(k){console.error("Error initializing BuddyMatchingService:",k)}};m(),_(),(async()=>{if(t){const k=await f(t);w(k)}if(e){const k=await f(e);O(k)}})()},[t,e]);const g=m=>{const _=m.stats.mentalStrength||50,j=m.stats.motivation||50,k=m.stats.triggerDefense||30,V=m.stats.addictionLevel||50;return _*1.5+j*1+k*1.2-V*1},p=g({...t,stats:y}),v=g({...e,stats:x}),S=p>v?"WINNING":p===v?"TIED":"LOSING",C=()=>{if(S==="WINNING")return null;const m=v-p+1,_=[],j=y.mentalStrength||50,k=y.motivation||50,V=y.triggerDefense||30,K=y.addictionLevel||50,G=x.mentalStrength||50,de=x.motivation||50;x.triggerDefense;const L=x.addictionLevel||50,z=G-j,B=de-k,ie=K-L,ne=[{name:"Mental Strength",multiplier:1.5,gap:z,current:j,max:100},{name:"Trigger Defense",multiplier:1.2,gap:B,current:V,max:100},{name:"Motivation",multiplier:1,gap:B,current:k,max:100},{name:"Addiction",multiplier:1,gap:ie,current:K,min:0,isReduction:!0}];if(ne.sort((Z,he)=>Z.multiplier!==he.multiplier?he.multiplier-Z.multiplier:Math.abs(he.gap)-Math.abs(Z.gap)),ne.forEach(Z=>{if(Z.isReduction){const he=Math.min(Z.current-Z.min,50),vt=he*Z.multiplier;vt>0&&_.push({stat:Z.name,change:he,action:N(he),priority:vt,canWin:vt>=m,isReduction:!0,efficiency:Z.multiplier,gap:Z.gap})}else{const he=Math.min(Z.max-Z.current,50),vt=he*Z.multiplier;vt>0&&_.push({stat:Z.name,change:he,action:T(Z.name,he),priority:vt,canWin:vt>=m,efficiency:Z.multiplier,gap:Z.gap})}}),_.sort((Z,he)=>he.priority-Z.priority),_.length>0&&!_.some(Z=>Z.canWin)){const Z=b(_,m);Z&&_.unshift(Z)}return _.slice(0,3)},N=m=>m>=30?"Stay completely clean, avoid all triggers, use nicotine replacement therapy":m>=20?"Reduce nicotine intake significantly, avoid high-risk situations":m>=10?"Cut back on vaping frequency, identify and avoid main triggers":"Small reduction in nicotine intake, practice trigger avoidance",T=(m,_)=>{switch(m){case"Mental Strength":return _>=30?"Complete daily breathing exercises, stay hydrated for 3+ days, practice meditation":_>=20?"Complete breathing exercises 3 days straight, stay hydrated, use stress management":"Complete breathing exercises, stay hydrated for 3 days straight";case"Motivation":return _>=30?"Log progress daily, share achievements weekly, track money saved milestones":_>=20?"Log progress 5+ days per week, share achievements, track progress":"Regular logging (3+ days per week), share achievements, reach milestones";case"Trigger Defense":return _>=30?"Survive multiple trigger situations, pre-plan for all triggers, update trigger list":_>=20?"Survive trigger situations, pre-plan for known triggers, practice coping":"Survive trigger situations without vaping, pre-plan for known triggers";default:return"Focus on improving this stat through consistent practice"}},b=(m,_)=>{let j=0;const k=[];for(const V of m){if(j>=_)break;const K=_-j,G=Math.min(V.priority,K);G>0&&(k.push({stat:V.stat,change:Math.ceil(G/V.efficiency),contribution:G}),j+=G)}return k.length>0?{stat:"Combination Strategy",change:Math.ceil(_),action:`Focus on: ${k.map(V=>`${V.stat} (+${V.change})`).join(", ")}`,priority:j,canWin:j>=_,isCombination:!0,strategy:k}:null},D=C();return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[l.jsxs("div",{className:"flex justify-start mb-6 gap-3",children:[l.jsx("button",{onClick:n,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",children:"← Back to Login"}),!1]}),l.jsx("div",{className:"text-center mb-8",children:l.jsxs("div",{className:"inline-flex items-center gap-4",children:[l.jsxs("div",{className:`inline-flex items-center px-6 py-3 rounded-full font-bold text-lg shadow-xl ${S==="WINNING"?"bg-green-600":S==="TIED"?"bg-yellow-600":"bg-red-600"} text-white`,children:[S==="WINNING"?l.jsx(wx,{className:"w-5 h-5 mr-2"}):S==="TIED"?l.jsx(Ho,{className:"w-5 h-5 mr-2"}):l.jsx("span",{className:"mr-2",children:"📉"}),"You are ",S]}),l.jsx("button",{onClick:()=>c(!0),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg",title:"Battle Algorithm Info",children:l.jsx("span",{className:"text-lg font-bold",children:"i"})})]})}),l.jsxs("div",{className:"flex justify-center gap-12 mb-6",children:[l.jsx("div",{className:"w-80 text-center",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-sm shadow-lg ${S==="WINNING"?"bg-green-600":S==="TIED"?"bg-yellow-600":"bg-red-600"} text-white`,children:S==="WINNING"?"WINNING":S==="TIED"?"TIED":"LOSING"})}),l.jsx("div",{className:"w-24"})," ",l.jsx("div",{className:"w-80 text-center",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-sm shadow-lg ${S==="WINNING"?"bg-red-600":S==="TIED"?"bg-yellow-600":"bg-green-600"} text-white`,children:S==="WINNING"?"LOSING":S==="TIED"?"TIED":"WINNING"})})]}),l.jsxs("div",{className:"flex flex-row items-center justify-center gap-12 mb-8 w-full max-w-7xl mx-auto",children:[l.jsx("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:l.jsx(ny,{user:{...t,stats:y},showComparison:!1,nemesisUser:e})}),l.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-red-500 to-purple-600 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:l.jsx(PA,{className:"w-12 h-12 text-white"})}),l.jsx("div",{className:"bg-red-600 px-8 py-3 rounded-full",children:l.jsx("p",{className:"text-white font-bold text-2xl",children:"VS"})})]}),l.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:[e.isEmpty&&!o&&l.jsx("div",{className:"mb-2 text-center",children:l.jsxs("div",{className:"bg-slate-600/20 border border-slate-500/50 rounded-lg px-4 py-2",children:[l.jsx("p",{className:"text-slate-400 text-sm font-semibold",children:"🔍 Looking for Buddy"}),l.jsx("p",{className:"text-slate-300 text-xs",children:"We are searching for a suitable match"})]})}),i&&l.jsx("div",{className:"mb-2 text-center",children:l.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-500/50 rounded-lg px-4 py-2",children:[l.jsx("p",{className:"text-yellow-400 text-sm font-semibold",children:"🔍 Loading Buddy..."}),l.jsx("p",{className:"text-yellow-300 text-xs",children:"Please wait while we find your match"})]})}),s&&l.jsx("div",{className:"mb-2 text-center",children:l.jsxs("div",{className:"bg-red-600/20 border border-red-500/50 rounded-lg px-4 py-2 mb-2",children:[l.jsx("p",{className:"text-red-400 text-sm font-semibold",children:"❌ Error Loading Buddy"}),l.jsx("p",{className:"text-red-300 text-xs",children:s})]})}),o&&l.jsx("div",{className:"mb-2 text-center",children:l.jsxs("div",{className:"bg-green-600/20 border border-green-500/50 rounded-lg px-4 py-2",children:[l.jsx("p",{className:"text-green-400 text-sm font-semibold",children:"✅ Connected with Buddy"}),l.jsxs("p",{className:"text-green-300 text-xs",children:["You're battling ",o.heroName,"!"]})]})}),l.jsx(ny,{user:o||e,isNemesis:!0,showComparison:!1,nemesisUser:t})]})]}),S==="LOSING"&&D&&D.length>0&&l.jsxs("div",{className:"max-w-4xl mx-auto bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"🎯 Quick Win Strategy"}),l.jsx("div",{className:"space-y-4",children:D.slice(0,3).map((m,_)=>l.jsx("div",{className:"bg-slate-700/50 rounded-lg p-4 border-l-4 border-blue-500",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:m.isReduction?l.jsxs(l.Fragment,{children:["🎯 Reduce your ",m.stat," by ",m.change," points!"]}):m.isCombination?l.jsxs(l.Fragment,{children:["🎯 Best Strategy: Improve multiple stats by ",m.change," total points!"]}):m.isMajor?l.jsxs(l.Fragment,{children:["🎯 Major improvement needed: ",m.change," total points!"]}):l.jsxs(l.Fragment,{children:["🎯 Increase your ",m.stat," by ",m.change," points!"]})}),l.jsxs("p",{className:"text-gray-300 text-sm",children:["💡 ",m.action]})]}),l.jsxs("div",{className:`font-bold text-2xl ml-4 ${m.isReduction?"text-green-400":m.isCombination?"text-purple-400":m.isMajor?"text-orange-400":"text-blue-400"}`,children:[m.isReduction?"-":"+",m.change]})]})},_))}),l.jsx("div",{className:"text-center mt-4",children:l.jsx("p",{className:"text-gray-400 text-sm",children:"Focus on the top recommendation for the fastest path to victory!"})})]})]}),a&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-600",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Battle Algorithm"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm transition-colors",title:"Share achievement for Motivation bonus",children:"📤 Share"}),l.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]})]}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Formula:"}),l.jsx("p",{className:"text-gray-300 font-mono",children:"(Mental Strength × 1.5) + (Motivation × 1.0) + (Trigger Defense × 1.2) - (Addiction × 1.0)"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Your Score:"}),l.jsxs("p",{className:"text-green-400 font-mono",children:["(",y.mentalStrength||50," × 1.5) + (",y.motivation||50," × 1.0) + (",y.triggerDefense||30," × 1.2) - (",y.addictionLevel||50," × 1.0) = ",p.toFixed(1)]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Nemesis Score:"}),l.jsxs("p",{className:"text-red-400 font-mono",children:["(",x.mentalStrength||50," × 1.5) + (",x.motivation||50," × 1.0) + (",x.triggerDefense||30," × 1.2) - (",x.addictionLevel||50," × 1.0) = ",v.toFixed(1)]})]}),l.jsx("div",{className:"bg-slate-700/50 rounded-lg p-3",children:l.jsxs("p",{className:"text-gray-300 text-xs",children:[l.jsx("strong",{children:"Mental Strength (×1.5):"})," Your resilience and coping ability",l.jsx("br",{}),l.jsx("strong",{children:"Motivation (×1.0):"})," Your drive to quit",l.jsx("br",{}),l.jsx("strong",{children:"Trigger Defense (×1.2):"})," Your ability to resist triggers",l.jsx("br",{}),l.jsx("strong",{children:"Addiction (×1.0):"})," Your nicotine dependence level"]})})]})]})})]})},FA=({isOpen:t,onClose:e,title:n,message:r,type:i="info"})=>{if(!t)return null;const s=()=>{switch(i){case"success":return"🎉";case"warning":return"⚠️";case"info":return"ℹ️";default:return"💡"}},o=()=>{switch(i){case"success":return"from-green-600 to-green-700";case"warning":return"from-yellow-600 to-yellow-700";case"info":return"from-blue-600 to-blue-700";default:return"from-slate-600 to-slate-700"}};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full border border-slate-600 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-600 to-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-3xl",children:s()})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:n}),l.jsx("div",{className:"text-gray-300 mb-6 whitespace-pre-line text-sm leading-relaxed",children:r}),l.jsx("button",{onClick:e,className:`w-full bg-gradient-to-r ${o()} hover:from-slate-700 hover:to-slate-800 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105`,children:"Got it"})]})})})},UA=({gameType:t,onClose:e})=>{I.useState(0);const[n,r]=I.useState(!1),i=()=>r(!n),s=()=>{const c=I.useRef(null),[u,d]=I.useState([{x:7,y:7}]),[h,f]=I.useState({x:1,y:0}),[y,w]=I.useState({x:1,y:0}),[x,O]=I.useState({x:10,y:10}),[g,p]=I.useState(!1),[v,S]=I.useState(0),[C,N]=I.useState(1),T={1:160,2:Math.round(160/1.25),3:Math.round(160/1.25/1.25)},b={1:2,2:5,3:10};return I.useEffect(()=>{const D=m=>{if(g){m.preventDefault(),d([{x:7,y:7}]),f({x:1,y:0}),w({x:1,y:0}),O({x:10,y:10}),p(!1),S(0),N(1);return}switch(m.key){case"ArrowUp":m.preventDefault(),h.y!==1&&w({x:0,y:-1});break;case"ArrowDown":m.preventDefault(),h.y!==-1&&w({x:0,y:1});break;case"ArrowLeft":m.preventDefault(),h.x!==1&&w({x:-1,y:0});break;case"ArrowRight":m.preventDefault(),h.x!==-1&&w({x:1,y:0});break}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[h,g]),I.useEffect(()=>{if(n||g)return;const D=setInterval(()=>{d(m=>{const _={x:m[0].x+h.x,y:m[0].y+h.y};if(_.x<0&&(_.x=14),_.x>=15&&(_.x=0),_.y<0&&(_.y=14),_.y>=15&&(_.y=0),m.slice(0,-1).some(K=>K.x===_.x&&K.y===_.y))return p(!0),m;const k=_.x===x.x&&_.y===x.y;let V;return k?(S(K=>K+b[C]),O({x:Math.floor(Math.random()*15),y:Math.floor(Math.random()*15)}),V=[_,...m]):V=[_,...m.slice(0,-1)],(y.x!==h.x||y.y!==h.y)&&setTimeout(()=>{f(y)},0),V})},T[C]);return()=>clearInterval(D)},[h,y,x,n,g]),I.useEffect(()=>{const D=c.current;if(!D)return;const m=D.getContext("2d"),_=20,j=15;m.fillStyle="#1f2937",m.fillRect(0,0,300,300),m.strokeStyle="#374151",m.lineWidth=1;for(let k=0;k<=j;k++)m.beginPath(),m.moveTo(k*_,0),m.lineTo(k*_,300),m.stroke(),m.beginPath(),m.moveTo(0,k*_),m.lineTo(300,k*_),m.stroke();u.forEach((k,V)=>{V===0?m.fillStyle="#fbbf24":m.fillStyle="#10b981",m.fillRect(k.x*_+1,k.y*_+1,_-2,_-2)}),m.fillStyle="#ef4444",m.fillRect(x.x*_+2,x.y*_+2,_-4,_-4)},[u,x]),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[l.jsx("span",{className:"text-white mr-2 text-sm",children:"Level:"}),[1,2,3].map(D=>l.jsxs("button",{onClick:()=>N(D),className:`
                  px-4 py-2 text-sm font-mono border-2 border-green-500 transition-all
                  ${C===D?"bg-green-500 text-black":"bg-green-900 text-green-400"}
                  hover:bg-green-600 cursor-pointer
                `,style:{minWidth:"80px"},children:[l.jsxs("div",{children:["Level ",D]}),l.jsxs("div",{className:"text-xs mt-1",children:[D===1&&"Normal",D===2&&"Fast",D===3&&"Insane"]})]},D))]}),l.jsxs("div",{className:"text-center text-yellow-400 text-xs mb-3",children:[l.jsxs("div",{children:["Speed: ",T[C],"ms | Points: ",b[C]," per food"]}),C===1&&"Good for beginners",C===2&&"For experienced players",C===3&&"Ultimate challenge"]})]}),l.jsx("canvas",{ref:c,width:"300",height:"300",className:"border-2 border-gray-300 mx-auto",style:{imageRendering:"pixelated"}}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Score: ",v," | Level: ",C]}),l.jsxs("div",{className:"flex justify-center gap-4 mb-2 text-sm",children:[l.jsxs("div",{className:"text-gray-600",children:[l.jsx("span",{className:"font-semibold",children:"Current:"}),h.x===1&&"→",h.x===-1&&"←",h.y===1&&"↓",h.y===-1&&"↑"]}),y.x!==h.x||y.y!==h.y?l.jsxs("div",{className:"text-blue-600",children:[l.jsx("span",{className:"font-semibold",children:"Next:"}),y.x===1&&"→",y.x===-1&&"←",y.y===1&&"↓",y.y===-1&&"↑"]}):null]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Use arrow keys to control the snake"}),g&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-red-600 font-bold mb-2",children:"Game Over!"}),l.jsx("button",{onClick:()=>{d([{x:7,y:7}]),f({x:1,y:0}),w({x:1,y:0}),O({x:10,y:10}),p(!1),S(0),N(1)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Restart Game"})]})]})]})},o=()=>{const[c,u]=I.useState(0),[d,h]=I.useState(0),[f]=I.useState(Date.now()),y=()=>{u(w=>w+1)};return I.useEffect(()=>{const w=(Date.now()-f)/1e3;w>0&&h((c/w).toFixed(1))},[c,f]),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Click as Fast as You Can!"}),l.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:["Total Clicks: ",c]}),l.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:["Clicks/Second: ",d]}),l.jsx("button",{onClick:y,className:"w-48 h-48 text-2xl font-bold bg-orange-500 hover:bg-orange-600 border-none rounded-full text-white cursor-pointer transition-colors shadow-lg",children:"CLICK ME!"}),l.jsx("div",{className:"mt-4 text-sm text-gray-600",children:"Challenge: Try to reach 500 clicks!"})]})},a=()=>{try{switch(t){case"snake":return l.jsx(s,{});case"click-counter":return l.jsx(o,{});default:return l.jsx("div",{children:"Game not found"})}}catch(c){return console.error("Error rendering game:",c),l.jsxs("div",{className:"text-center text-red-600",children:[l.jsx("p",{className:"text-lg font-bold mb-2",children:"⚠️ Game Error"}),l.jsx("p",{className:"text-sm",children:"Something went wrong loading the game."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm",children:"Reload Game"})]})}};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[t==="snake"&&"🐍 Snake Game",t==="puzzle"&&"🧠 Memory Puzzle"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:i,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",children:n?"Resume":"Pause"}),l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]})]}),l.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 min-h-[500px] flex items-center justify-center relative",children:[a(),l.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white p-2 rounded text-xs max-w-48",children:[l.jsx("p",{className:"font-bold mb-1",children:"Controls:"}),t==="snake"&&l.jsx("p",{children:"Arrow keys to move"}),t==="click-counter"&&l.jsx("p",{children:"Click the button rapidly!"})]}),l.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white p-2 rounded text-xs",children:[l.jsx("p",{className:"font-bold mb-1",children:"Status:"}),l.jsx("p",{children:n?"⏸️ Paused":"▶️ Playing"})]})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("p",{className:"text-sm text-gray-500",children:"Games now run without time limits - play as long as you need!"})})]})})},$A=({user:t,nemesis:e,onBackToLogin:n,onResetForTesting:r})=>{const[i,s]=I.useState(!1),[o,a]=I.useState(!1),[c,u]=I.useState(null),[d,h]=I.useState(!1),[f,y]=I.useState({title:"",message:"",type:"info"}),[w,x]=I.useState(0),[O,g]=I.useState(null);I.useEffect(()=>{if(!(t!=null&&t.uid))return;(async()=>{try{const D=new Sp($,t.uid);await D.initialize(),g(D)}catch(D){console.error("Error initializing StatManager:",D)}})(),(async()=>{try{const{ref:D,get:m,onValue:_}=await be(()=>import("./index.esm-409cdec0.js"),[]),j=D($,`users/${t.uid}/profile/cravingsResisted`),k=await m(j);if(k.exists())x(k.val()||0);else{const K=parseInt(localStorage.getItem("cravingWins")||0);x(K)}return _(j,K=>{K.exists()&&x(K.val()||0)})}catch(D){console.error("Error loading cravings resisted from Firebase:",D);const m=parseInt(localStorage.getItem("cravingWins")||0);x(m)}})()},[t==null?void 0:t.uid]);const p=()=>{console.log("SOS sent to nemesis:",e.heroName);const T={timestamp:new Date().toISOString(),nemesis:e.heroName,status:"sent"};localStorage.setItem("lastSOS",JSON.stringify(T)),a(!0),setTimeout(()=>a(!1),5e3),O&&O.trackAppUsageDuringCravings()},v=T=>{u(T),s(!0)},S=()=>{u(null),s(!1)},C=async()=>{try{const T=w;if(localStorage.setItem("cravingWins",T+1),t&&t.uid){const{ref:b,set:D}=await be(()=>import("./index.esm-409cdec0.js"),[]),m=b($,`users/${t.uid}/profile/cravingsResisted`);await D(m,T+1),x(T+1),console.log("Cravings resisted updated in profile:",T+1)}O&&await O.handleCravingResistance(),y({title:"Congratulations!",message:`🎉 Great job resisting that craving!

Every trigger survival increases:
• Mental Strength +1 point
• Trigger Defense +3 points

Keep up the amazing work!`,type:"success"}),h(!0)}catch(T){console.error("Error updating stats:",T),y({title:"Congratulations!",message:`🎉 Great job resisting that craving!

Your progress has been recorded locally.

Keep up the amazing work!`,type:"success"}),h(!0)}},N=(T,b)=>{y({title:T,message:b,type:"info"}),h(!0)};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex justify-start gap-3",children:[l.jsx("button",{onClick:n,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",children:"← Back to Login"}),!1]})}),l.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border-2 border-red-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:l.jsx("span",{className:"text-4xl",children:"🆘"})}),l.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Need Immediate Help?"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Press the SOS button to alert your nemesis and get instant support"}),l.jsx("button",{onClick:p,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-6 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"🆘 SOS - Get Help Now"}),(()=>{const T=localStorage.getItem("lastSOS");if(T){const b=JSON.parse(T),D=Math.floor((Date.now()-new Date(b.timestamp))/(1e3*60));return l.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:l.jsxs("p",{className:"text-sm text-red-600",children:["Last SOS sent ",D," minutes ago to ",b.nemesis]})})}return null})()]})}),l.jsx("div",{className:"bg-slate-800/50 rounded-xl p-6 mb-6 border border-slate-600",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"🎮 Distract Yourself"}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsx("button",{onClick:()=>v("snake"),className:"w-full bg-gradient-to-r from-orange-500/20 to-orange-600/20 hover:from-orange-500/30 hover:to-orange-600/30 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 border border-orange-500/30",children:"🐍 Play Snake"}),l.jsx("button",{onClick:()=>v("click-counter"),className:"w-full bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 border border-blue-500/30",children:"⚡ Click Counter"})]})]})}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-600",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"⚡ Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>N("💧 Drink Water",`Hydration helps reduce cravings!

Drink a full glass of water slowly.

This will help you feel full and reduce the urge to vape.`),className:"bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-blue-500/30 hover:scale-105",children:"💧 Drink Water"}),l.jsx("button",{onClick:()=>N("🫁 Breathe",`Take 3 deep breaths:

1. Inhale for 4 seconds
2. Hold for 4 seconds
3. Exhale for 4 seconds

Repeat 3 times`),className:"bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-blue-500/30 hover:scale-105",children:"🫁 Breathe"}),l.jsx("button",{onClick:()=>N("🚶‍♂️ Walk",`Take a 5-minute walk:

Physical activity releases endorphins that can help reduce cravings.

Walk around your room or step outside if possible.`),className:"bg-gradient-to-r from-purple-500/20 to-purple-600/20 hover:from-purple-500/30 hover:to-purple-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-purple-500/30 hover:scale-105",children:"🚶‍♂️ Walk"}),l.jsx("button",{onClick:()=>N("🧘‍♀️ Meditate",`Quick Meditation:

1. Close your eyes
2. Focus on your breath
3. Count to 10 slowly
4. Repeat 3 times

This helps calm your mind and reduce stress.`),className:"bg-gradient-to-r from-green-500/20 to-green-600/20 hover:from-green-500/30 hover:to-green-600/30 text-white font-semibold py-4 px-4 rounded-xl transition-all duration-300 border border-green-500/30 hover:scale-105",children:"🧘‍♀️ Meditate"})]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-2xl",children:"✅"})}),l.jsx("h3",{className:"text-xl font-bold text-green-600 mb-2",children:"Help is on the way!"}),l.jsxs("p",{className:"text-gray-600 mb-4",children:["Your nemesis ",l.jsx("strong",{children:e.heroName})," has been notified and will reach out soon."]}),l.jsx("button",{onClick:()=>a(!1),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Got it"})]})}),i&&c&&l.jsx(UA,{gameType:c,onClose:S}),l.jsx(FA,{isOpen:d,onClose:()=>h(!1),title:f.title,message:f.message,type:f.type}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-600 mt-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"📊 Cravings Resisted"}),l.jsxs("div",{className:"text-center p-6 bg-slate-700/50 rounded-lg border border-slate-500/30",children:[l.jsx("div",{className:"text-4xl mb-3",children:"🎯"}),l.jsx("p",{className:"text-lg font-bold text-white mb-2",children:"Total Wins"}),l.jsx("p",{className:"text-3xl font-bold text-green-400 mb-3",children:w}),l.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Times you successfully resisted cravings"}),l.jsx("button",{onClick:C,className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"🎯 I Resisted a Craving!"})]})]})]})})},VA=({user:t,onNavigate:e})=>{var pa;const[n,r]=I.useState(null),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[f,y]=I.useState(!1),[w,x]=I.useState(null),[O,g]=I.useState(0),[p,v]=I.useState(null),[S,C]=I.useState(!1),[N,T]=I.useState([]),[b,D]=I.useState(null);I.useEffect(()=>{if(!(t!=null&&t.uid))return;(async()=>{try{const q=new Sp($,t.uid);await q.initialize(),D(q)}catch(q){console.error("Error initializing StatManager:",q)}})();const Y=async()=>{try{const{ref:q,get:me,onValue:Ge}=await be(()=>import("./index.esm-409cdec0.js"),[]),Ct=q($,`users/${t.uid}/profile/relapseDate`),Mt=await me(Ct);Mt.exists()&&r(new Date(Mt.val()));const Ln=q($,`users/${t.uid}/profile/scheduledTriggers`),qe=await me(Ln);qe.exists()&&T(qe.val());const ot=new Date().toDateString(),Tt=q($,`users/${t.uid}/profile/daily/${ot}/water`),Jt=Ge(Tt,Ft=>{Ft.exists()&&g(Ft.val()||0)}),Gc=q($,`users/${t.uid}/profile/daily/${ot}/mood`),ma=Ge(Gc,Ft=>{Ft.exists()&&v(Ft.val())}),ga=q($,`users/${t.uid}/profile/daily/${ot}/breathing`),qc=Ge(ga,Ft=>{Ft.exists()&&C(Ft.val()||!1)}),Kc=q($,`users/${t.uid}/profile/scheduledTriggers`),Yc=Ge(Kc,Ft=>{Ft.exists()&&T(Ft.val()||[])});return()=>{Jt(),ma(),qc(),Yc()}}catch(q){console.error("Error loading profile data from Firebase:",q),pe()}},pe=()=>{const q=localStorage.getItem("quitCoachRelapseDate");q&&r(new Date(q));const me=new Date().toDateString(),Ge=localStorage.getItem(`water_${me}`),Ct=localStorage.getItem(`mood_${me}`),Mt=localStorage.getItem(`breathing_${me}`);Ge&&g(parseInt(Ge)),Ct&&v(JSON.parse(Ct)),Mt&&C(Mt==="true");const Ln=localStorage.getItem("scheduledTriggers");Ln&&T(JSON.parse(Ln))};Y()},[t==null?void 0:t.uid]),I.useEffect(()=>{b&&b.trackLoggingActivity()},[b]),I.useEffect(()=>{if(!(t!=null&&t.uid))return;(async()=>{try{const{ref:Y,get:pe,set:q}=await be(()=>import("./index.esm-409cdec0.js"),[]),me=Y($,`users/${t.uid}/profile`),Ge=await pe(me);if(!Ge.exists()||Object.keys(Ge.val()).length===0){console.log("Migrating localStorage data to Firebase...");const Ct=localStorage.getItem("quitCoachRelapseDate");Ct&&(await q(Y($,`users/${t.uid}/profile/relapseDate`),Ct),r(new Date(Ct)));const Mt=parseInt(localStorage.getItem("cravingWins")||0);Mt>0&&await q(Y($,`users/${t.uid}/profile/cravingsResisted`),Mt);for(let qe=0;qe<7;qe++){const ot=new Date;ot.setDate(ot.getDate()-qe);const Tt=ot.toDateString(),Jt=localStorage.getItem(`water_${Tt}`);Jt&&await q(Y($,`users/${t.uid}/profile/daily/${Tt}/water`),parseInt(Jt))}for(let qe=0;qe<7;qe++){const ot=new Date;ot.setDate(ot.getDate()-qe);const Tt=ot.toDateString(),Jt=localStorage.getItem(`mood_${Tt}`);Jt&&await q(Y($,`users/${t.uid}/profile/daily/${Tt}/mood`),JSON.parse(Jt))}for(let qe=0;qe<7;qe++){const ot=new Date;ot.setDate(ot.getDate()-qe);const Tt=ot.toDateString(),Jt=localStorage.getItem(`breathing_${Tt}`);Jt&&await q(Y($,`users/${t.uid}/profile/daily/${Tt}/breathing`),Jt==="true")}const Ln=localStorage.getItem("scheduledTriggers");if(Ln){const qe=JSON.parse(Ln);await q(Y($,`users/${t.uid}/profile/scheduledTriggers`),qe),T(qe)}console.log("localStorage data migration to Firebase completed")}}catch(Y){console.error("Error migrating localStorage data to Firebase:",Y)}})()},[t==null?void 0:t.uid]);const m=()=>n&&n>((t==null?void 0:t.quitDate)||new Date(0))?n:(t==null?void 0:t.quitDate)||new Date,_=()=>{const re=new Date,Y=new Date(re);Y.setHours(24,0,0,0);const pe=Y-re,q=Math.floor(pe/(1e3*60*60)),me=Math.floor(pe%(1e3*60*60)/(1e3*60)),Ge=Math.floor(pe%(1e3*60)/1e3);return{hours:q,minutes:me,seconds:Ge}},[j,k]=I.useState(_()),[V,K]=I.useState(0),[G,de]=I.useState(0),[L,z]=I.useState(0),[B,ie]=I.useState(0);I.useEffect(()=>{const re=setInterval(()=>{k(_());const Y=m(),q=new Date-Y,me=Math.floor(q/(1e3*60*60*24)),Ge=Math.floor(q%(1e3*60*60*24)/(1e3*60*60)),Ct=Math.floor(q%(1e3*60*60)/(1e3*60)),Mt=Math.floor(q%(1e3*60)/1e3);K(me),de(Ge),z(Ct),ie(Mt)},1e3);return()=>clearInterval(re)},[n,t==null?void 0:t.quitDate]);const ne=async(re,Y)=>{if(!(t!=null&&t.uid))return!1;try{const{ref:pe,set:q}=await be(()=>import("./index.esm-409cdec0.js"),[]),me=pe($,`users/${t.uid}/profile/${re}`);return await q(me,Y),!0}catch(pe){return console.error("Error saving to Firebase:",pe),!1}},Z=async()=>{const re=new Date;r(re),b&&await b.handleRelapse(),await ne("relapseDate",re.toISOString())||localStorage.setItem("quitCoachRelapseDate",re.toISOString())},vt=(()=>{const re=new Date,Y=re.getDay(),pe=Y===0?6:Y-1,q=[{name:"Mon",color:"bg-slate-700"},{name:"Tue",color:"bg-slate-700"},{name:"Wed",color:"bg-slate-700"},{name:"Thu",color:"bg-slate-700"},{name:"Fri",color:"bg-slate-700"},{name:"Sat",color:"bg-slate-700"},{name:"Sun",color:"bg-slate-700"}];for(let me=0;me<=pe;me++)q[me].color="bg-green-500";return n&&n.toDateString()===re.toDateString()&&(q[pe].color="bg-red-500"),q})(),un=async re=>{g(re);const Y=new Date().toDateString();b&&await b.handleHydrationUpdate(re),await ne(`daily/${Y}/water`,re)||localStorage.setItem(`water_${Y}`,re.toString()),s(!1)},sr=async re=>{v(re);const Y=new Date().toDateString();await ne(`daily/${Y}/mood`,re)||localStorage.setItem(`mood_${Y}`,JSON.stringify(re)),u(!1)},Hc=async()=>{C(!0);const re=new Date().toDateString();b&&await b.handleBreathingExercise(),await ne(`daily/${re}/breathing`,!0)||localStorage.setItem(`breathing_${re}`,"true"),a(!1)},fa=async(re,Y,pe)=>{const q={day:re,triggerType:Y,time:pe,id:Date.now()},me=[...N,q];T(me),b&&await b.handleTriggerPlanning(),await ne("scheduledTriggers",me)||localStorage.setItem("scheduledTriggers",JSON.stringify(me)),h(!1)},Ep=async()=>{b&&await b.handleTriggerListUpdate()};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 pb-20",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 pt-16",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:t!=null&&t.avatar?l.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):l.jsx("span",{className:"text-white font-bold text-lg",children:t!=null&&t.heroName?t.heroName.charAt(0).toUpperCase():"H"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-lg",children:"Hello,"}),l.jsx("p",{className:"text-white text-2xl font-bold",children:(t==null?void 0:t.heroName)||"Hero"})]})]}),l.jsx("div",{className:"bg-yellow-500 px-3 py-1 rounded-full",children:l.jsx("span",{className:"font-bold text-slate-900",children:V})})]}),l.jsxs("div",{className:"px-4 space-y-6",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:Z,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:"⚠️"}),l.jsx("span",{className:"text-lg",children:"RELAPSE"}),l.jsx("span",{className:"text-2xl",children:"⚠️"})]}),l.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Reset progress and start over"})]})}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-white text-xl font-bold",children:"My week"}),l.jsxs("div",{className:"bg-green-500 px-3 py-1 rounded-full flex items-center gap-1",children:[l.jsx("span",{className:"text-white text-sm",children:"✓"}),l.jsx("span",{className:"text-white font-bold",children:"0"})]})]}),l.jsx("div",{className:"flex justify-between items-center mb-4",children:vt.map((re,Y)=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`w-8 h-8 rounded-full mb-1 ${re.color}`}),l.jsx("p",{className:"text-gray-400 text-xs",children:re.name})]},re.name))})]}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Remaining time for Today"}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-white text-3xl font-bold",children:[j.hours.toString().padStart(2,"0"),":",j.minutes.toString().padStart(2,"0"),":",j.seconds.toString().padStart(2,"0")]}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Countdown to midnight"})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"My progress"}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-yellow-400 text-lg",children:"⏰"}),l.jsx("span",{className:"text-gray-300",children:"Clean for"})]}),l.jsxs("div",{className:"flex items-baseline gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-3xl font-bold",children:V.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"days"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-3xl font-bold",children:G.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"hours"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-3xl font-bold",children:L.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"minutes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-2xl font-bold animate-pulse",children:B.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"seconds"})]})]}),n&&l.jsx("div",{className:"mt-3 text-center",children:l.jsxs("p",{className:"text-red-400 text-sm",children:["Last relapse: ",n.toLocaleDateString()," at ",n.toLocaleTimeString()]})})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Habit Tracking"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>s(!0),className:"w-full bg-gradient-to-r from-blue-500/20 to-blue-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:"💧"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Stay hydrated"}),l.jsx("p",{className:"text-gray-300 text-sm",children:O>0?`${O} glasses today`:"Tap to log water intake"})]}),l.jsx("div",{className:"text-blue-400 text-2xl",children:"→"})]})}),l.jsx("button",{onClick:()=>a(!0),className:"w-full bg-gradient-to-r from-purple-500/20 to-purple-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:"🫁"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Complete breathing exercise"}),l.jsx("p",{className:"text-gray-300 text-sm",children:S?"Completed! Stay calm!":"Tap to start 4-cycle breathing"})]}),l.jsx("div",{className:"text-purple-400 text-2xl",children:"→"})]})}),l.jsx("button",{onClick:()=>u(!0),className:"w-full bg-gradient-to-r from-green-500/20 to-green-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:"🌤️"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Mood tracking"}),l.jsx("p",{className:"text-gray-300 text-sm",children:p?`You feel ${p.name.toLowerCase()}`:"How do you feel today?"})]}),l.jsx("div",{className:"text-green-400 text-2xl",children:"→"})]})})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"This Week's Battle Plan"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>h(!0),className:"w-full bg-gradient-to-r from-orange-500/20 to-orange-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:"🛡️"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Trigger defense planning"}),l.jsx("p",{className:"text-gray-300 text-sm",children:N.length>0?`${N.length} triggers planned`:"Plan your trigger defense strategy"})]}),l.jsx("div",{className:"text-orange-400 text-2xl",children:"→"})]})}),l.jsx("button",{onClick:Ep,className:"w-full bg-gradient-to-r from-purple-500/20 to-purple-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:"📝"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Update trigger list"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Review and update your personal triggers for +1 Trigger Defense"})]}),l.jsx("div",{className:"text-purple-400 text-2xl",children:"→"})]})})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Benefits Monitor"}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-yellow-400",children:"$"}),l.jsx("span",{className:"text-gray-300 text-sm",children:"Money saved"})]}),l.jsx("div",{className:"text-white text-2xl font-bold",children:((pa=t==null?void 0:t.stats)==null?void 0:pa.moneySaved)||0}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Work in progress"})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Diary"}),l.jsx("button",{onClick:()=>y(!0),className:"w-full bg-gradient-to-r from-indigo-500/20 to-indigo-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:"📅"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Monthly overview"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"View your progress and daily activities"})]}),l.jsx("div",{className:"text-indigo-400 text-2xl",children:"→"})]})})]})]}),l.jsx(WA,{isOpen:i,onClose:()=>s(!1),onConfirm:un,currentWater:O}),l.jsx(zA,{isOpen:o,onClose:()=>a(!1),onComplete:Hc}),l.jsx(BA,{isOpen:c,onClose:()=>u(!1),onSelect:sr,selectedMood:p}),l.jsx(HA,{isOpen:d,onClose:()=>h(!1),onSchedule:fa,scheduledTriggers:N}),l.jsx(GA,{isOpen:f,onClose:()=>y(!1),selectedDate:w,onDateSelect:x,dailyData:{water:O,mood:p,breathing:S,relapseDate:n}})]})},WA=({isOpen:t,onClose:e,onConfirm:n,currentWater:r})=>{const[i,s]=I.useState(r);return t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"💧 Water Intake"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"How many glasses of water today?"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("input",{type:"number",min:"0",max:"20",value:i,onChange:o=>s(parseInt(o.target.value)||0),className:"w-full bg-slate-700 text-white text-center text-2xl font-bold py-4 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",placeholder:"0"}),l.jsx("p",{className:"text-gray-400 text-sm text-center mt-2",children:"0-20 glasses"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:e,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:()=>n(i),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Confirm"})]})]})}):null},zA=({isOpen:t,onClose:e,onComplete:n})=>{const[r,i]=I.useState(1),[s,o]=I.useState("exhale"),[a,c]=I.useState(5),[u,d]=I.useState(!1);I.useEffect(()=>{if(!t||!u)return;const w=setInterval(()=>{c(x=>{if(x<=1){if(s==="exhale")o("inhale"),c(4);else if(s==="inhale")o("hold"),c(7);else if(s==="hold")if(r<4)i(O=>O+1),o("exhale"),c(5);else return d(!1),n(),0;return x}return x-1})},1e3);return()=>clearInterval(w)},[t,u,s,r,n]);const h=()=>{d(!0),i(1),o("exhale"),c(5)};if(!t)return null;const f=()=>{switch(s){case"exhale":return"Exhale, empty lungs";case"inhale":return"Inhale quietly through nose";case"hold":return"Hold your breath";default:return""}},y=()=>{switch(s){case"exhale":return"w-32 h-32";case"inhale":return"w-48 h-48";case"hold":return"w-40 h-40";default:return"w-40 h-40"}};return l.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"text-center text-white",children:u?l.jsxs(l.Fragment,{children:[l.jsxs("h3",{className:"text-2xl font-bold mb-4",children:["Cycle ",r,"/4"]}),l.jsx("p",{className:"text-xl text-gray-300 mb-8",children:f()}),l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("div",{className:`${y()} rounded-full border-4 border-blue-400 flex items-center justify-center transition-all duration-1000 ${s==="hold"?"animate-pulse":""}`,children:l.jsx("span",{className:"text-4xl font-bold",children:a})})}),l.jsx("button",{onClick:e,className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Stop"})]}):l.jsxs("div",{className:"mb-8",children:[l.jsx("h3",{className:"text-3xl font-bold mb-4",children:"🫁 Breathing Exercise"}),l.jsx("p",{className:"text-xl text-gray-300 mb-6",children:"4-cycle breathing pattern"}),l.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl text-xl transition-colors",children:"Start Exercise"})]})})})},BA=({isOpen:t,onClose:e,onSelect:n,selectedMood:r})=>{const i=[{name:"Anger",icon:"😠",color:"bg-red-500"},{name:"Disgust",icon:"🤢",color:"bg-orange-500"},{name:"Enjoyment",icon:"😊",color:"bg-yellow-500"},{name:"Calm",icon:"😌",color:"bg-blue-500"},{name:"Fear",icon:"😨",color:"bg-purple-500"},{name:"Sadness",icon:"😢",color:"bg-indigo-500"},{name:"Indifferent",icon:"😐",color:"bg-gray-500"}];return t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"🌤️ How do you feel?"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Select your current mood"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:i.map(s=>l.jsxs("button",{onClick:()=>n(s),className:`p-4 rounded-xl text-center transition-all duration-300 hover:scale-105 ${(r==null?void 0:r.name)===s.name?"ring-2 ring-blue-400":"bg-slate-700 hover:bg-slate-600"}`,children:[l.jsx("div",{className:`w-12 h-12 ${s.color} rounded-full flex items-center justify-center text-2xl mx-auto mb-2`,children:s.icon}),l.jsx("p",{className:"text-white font-semibold",children:s.name})]},s.name))}),l.jsx("button",{onClick:e,className:"w-full bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})}):null},HA=({isOpen:t,onClose:e,onSchedule:n,scheduledTriggers:r})=>{const[i,s]=I.useState(""),[o,a]=I.useState(""),[c,u]=I.useState("12:00"),d=["Social event","Drinks","High-stress event","Social pressure"],h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"🛡️ Trigger Defense Planning"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Schedule your trigger defense strategy"})]}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Day of the week"}),l.jsxs("select",{value:i,onChange:f=>s(f.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"Select a day"}),h.map(f=>l.jsx("option",{value:f,children:f},f))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Trigger type"}),l.jsxs("select",{value:o,onChange:f=>a(f.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"Select trigger type"}),d.map(f=>l.jsx("option",{value:f,children:f},f))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Time"}),l.jsx("input",{type:"time",value:c,onChange:f=>u(f.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:e,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:()=>{i&&o&&c&&n(i,o,c)},disabled:!i||!o||!c,className:"flex-1 bg-orange-600 hover:bg-orange-700 disabled:bg-slate-600 text-white font-bold py-3 rounded-lg transition-colors disabled:cursor-not-allowed",children:"Schedule"})]})]})}):null},GA=({isOpen:t,onClose:e,selectedDate:n,onDateSelect:r,dailyData:i})=>t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"📅 Daily Summary"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Your activities and progress"})]}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"💧 Water Intake"}),l.jsxs("p",{className:"text-gray-300",children:[i.water," glasses"]})]}),l.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"🌤️ Mood"}),l.jsx("p",{className:"text-gray-300",children:i.mood?i.mood.name:"Not logged"})]}),l.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"🫁 Breathing Exercise"}),l.jsx("p",{className:"text-gray-300",children:i.breathing?"✓ Completed":"✗ Not completed"})]}),i.relapseDate&&l.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4 border border-red-500",children:[l.jsx("h4",{className:"text-red-300 font-semibold mb-2",children:"⚠️ Relapse"}),l.jsxs("p",{className:"text-red-300",children:[i.relapseDate.toLocaleDateString()," at ",i.relapseDate.toLocaleTimeString()]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Close"})]})}):null,qA=({onResetApp:t})=>l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 pb-20",children:l.jsxs("div",{className:"max-w-md mx-auto px-4 pt-16",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx(vx,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Settings"}),l.jsx("p",{className:"text-gray-300",children:"Manage your app preferences"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsx("h3",{className:"text-white font-semibold mb-2",children:"App Data"}),l.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Reset your progress and start over"}),l.jsx("button",{onClick:t,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg transition-colors",children:"Reset App & Start Over"})]}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsx("h3",{className:"text-white font-semibold mb-2",children:"About"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"QuitCard Arena v1.0.0"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Your journey to freedom starts here"})]})]})]})}),KA=({user:t,nemesis:e,buddyMatchingService:n})=>{const[r,i]=I.useState([{id:1,sender:"buddy",text:"Hey! How's your quit journey going?",timestamp:new Date(Date.now()-6e4).toLocaleTimeString()},{id:2,sender:"user",text:"Going strong! Day 3 now.",timestamp:new Date(Date.now()-3e4).toLocaleTimeString()}]),[s,o]=I.useState(""),[a,c]=I.useState(!1);I.useState(null),I.useState(!1);const[u,d]=I.useState(null);I.useState(!1),I.useState(null);const[h,f]=I.useState(null);I.useEffect(()=>{(async()=>{if(!(!n||!(t!=null&&t.uid)))try{console.log("🔍 Checking for existing buddy pair...");const O=await n.getUserBuddyInfo(t.uid);if(O){console.log("✅ Found existing buddy pair:",O),f(O);const g=await n.getBuddyPairInfo(O.id);g&&d(g)}}catch(O){console.error("Error loading existing buddy pair:",O)}})()},[n,t==null?void 0:t.uid]);const y=()=>{if(s.trim().length===0)return;const x=s.trim().slice(0,20),O={id:Date.now(),sender:"user",text:x,timestamp:new Date().toLocaleTimeString()};i(g=>[...g,O]),o(""),c(!0),setTimeout(()=>{const g=["Keep it up! 💪","You're doing great!","Stay strong today!","One day at a time!","I believe in you!","You've got this!","Every day counts!","Stay focused! 🎯"],p=g[Math.floor(Math.random()*g.length)],v={id:Date.now()+1,sender:"buddy",text:p,timestamp:new Date().toLocaleTimeString()};i(S=>[...S,v]),c(!1)},1500)},w=x=>{x.key==="Enter"&&y()};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"💬 Chat with Buddy"}),l.jsx("p",{className:"text-gray-300",children:"Stay connected with your quit buddy for support"})]}),l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:[r.map(x=>l.jsx("div",{className:`flex ${x.sender==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-2xl ${x.sender==="user"?"bg-blue-600 text-white":"bg-slate-700 text-gray-200"}`,children:[l.jsx("div",{className:"text-sm",children:x.text}),l.jsx("div",{className:"text-xs opacity-70 mt-1",children:x.timestamp})]})},x.id)),a&&l.jsx("div",{className:"flex justify-start",children:l.jsx("div",{className:"bg-slate-700 text-gray-200 px-4 py-2 rounded-2xl",children:l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("span",{className:"text-sm",children:"Buddy is typing"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:s,onChange:x=>o(x.target.value),onKeyPress:w,placeholder:"Type your message (max 20 chars)...",maxLength:20,className:"flex-1 bg-slate-700 text-white px-4 py-3 rounded-xl border border-slate-600 focus:border-blue-500 focus:outline-none"}),l.jsx("button",{onClick:y,disabled:s.trim().length===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white px-6 py-3 rounded-xl transition-colors disabled:cursor-not-allowed",children:"Send"})]}),l.jsx("div",{className:"text-right mt-2",children:l.jsxs("span",{className:`text-xs ${s.length>=18?"text-yellow-400":"text-gray-400"}`,children:[s.length,"/20"]})})]}),l.jsx("div",{className:"mt-6 bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:e.heroName.charAt(0)}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:e.heroName}),l.jsx("p",{className:"text-gray-300",children:"Your Quit Buddy"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Always here to support you"})]})]})})]})})},YA=()=>{const[t,e]=I.useState("arena"),[n,r]=I.useState("auth"),[i,s]=I.useState(null),[o,a]=I.useState(null),[c,u]=I.useState(!1),[d,h]=I.useState(null),[f,y]=I.useState(!0),[w,x]=I.useState({isLoading:!1,progress:0,currentStep:"",error:null,isComplete:!1}),[O,g]=I.useState([]),[p,v]=I.useState(null),S=()=>({mentalStrength:50,motivation:50,triggerDefense:30,addictionLevel:50,moneySaved:0}),C=()=>({dailyWater:0,dailyMood:null,dailyBreathing:!1,scheduledTriggers:[],relapseDate:null,cravingsResisted:0}),N=E=>{E.relapseDate&&z(new Date(E.relapseDate)),E.dailyWater!==void 0&&ie(E.dailyWater),E.dailyMood!==void 0&&Z(E.dailyMood),E.dailyBreathing!==void 0&&vt(E.dailyBreathing),E.scheduledTriggers&&sr(E.scheduledTriggers)},T=(E,F)=>{const M=document.createElement("div");M.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg bg-red-500 text-white max-w-sm",M.innerHTML=`
      <div class="font-bold">${E}</div>
      <div class="text-sm opacity-90">${F}</div>
      <button class="mt-2 text-sm underline" onclick="this.parentElement.remove()">Dismiss</button>
    `,document.body.appendChild(M),setTimeout(()=>{M.parentNode&&M.parentNode.removeChild(M)},1e4)},b=async E=>{if(!E)return!1;x({isLoading:!0,progress:0,currentStep:"Initializing...",error:null,isComplete:!1});try{const{ref:F,get:M,onValue:se}=await be(()=>import("./index.esm-409cdec0.js"),[]);x(Le=>({...Le,currentStep:"Loading profile data...",progress:20}));const Te=F($,`users/${E}`),ke=await M(Te);if(!ke.exists())throw new Error("User profile not found");const ze=ke.val(),$e=D(ze);x(Le=>({...Le,currentStep:"Loading battle stats...",progress:40}));const je=F($,`users/${E}/stats`),at=await M(je),or=at.exists()?m(at.val()):S();x(Le=>({...Le,currentStep:"Loading habits and progress...",progress:60}));const Je=F($,`users/${E}/profile`),ge=await M(Je),Ut=ge.exists()?_(ge.val()):C();x(Le=>({...Le,currentStep:"Loading achievements...",progress:80}));const Ve=F($,`users/${E}/profile/cravingsResisted`),lt=await M(Ve),ht=lt.exists()?Math.max(0,parseInt(lt.val())||0):0;x(Le=>({...Le,currentStep:"Setting up live sync...",progress:90}));const Ie=se(je,Le=>{if(Le.exists()){const Ri=m(Le.val());if(pa(Ri),n==="arena"&&o){const Ex={...o,stats:Ri};calculateRealTimeStats(Ex).then(setRealTimeUserStats)}}}),ki=se(Je,Le=>{if(Le.exists()){const Ri=_(Le.val());n==="profile"&&N(Ri)}}),Qc=se(Ve,Le=>{if(Le.exists()){const Ri=Math.max(0,parseInt(Le.val())||0);n==="craving-support"&&fa(Ri)}});return g([Ie,ki,Qc]),x(Le=>({...Le,currentStep:"Finalizing...",progress:100})),a(Le=>({...Le,...$e,stats:or})),N(Ut),fa(ht),$e.onboardingCompleted&&u(!0),x({isLoading:!1,progress:100,currentStep:"Data loaded successfully!",error:null,isComplete:!0}),console.log("✅ All user data loaded successfully:",{profile:$e,stats:or,profileData:Ut,cravingsResisted:ht}),!0}catch(F){return console.error("❌ Error loading user data:",F),x({isLoading:!1,progress:0,currentStep:"Failed to load data",error:F.message,isComplete:!1}),T("Failed to load user data",F.message),!1}},D=E=>E?{uid:E.uid||"",email:E.email||"",heroName:E.heroName||"Hero",archetype:E.archetype||"The Determined",avatar:E.avatar||dr("default"),quitDate:E.quitDate||new Date().toISOString(),onboardingCompleted:!!E.onboardingCompleted,updatedAt:E.updatedAt||Date.now(),...E}:j(),m=E=>E?{mentalStrength:Math.max(0,Math.min(100,parseInt(E.mentalStrength)||50)),motivation:Math.max(0,Math.min(100,parseInt(E.motivation)||50)),triggerDefense:Math.max(0,Math.min(100,parseInt(E.triggerDefense)||30)),addictionLevel:Math.max(0,Math.min(100,parseInt(E.addictionLevel)||50)),moneySaved:Math.max(0,parseInt(E.moneySaved)||0),...E}:S(),_=E=>E?{dailyWater:Math.max(0,parseInt(E.dailyWater)||0),dailyMood:E.dailyMood||null,dailyBreathing:!!E.dailyBreathing,scheduledTriggers:Array.isArray(E.scheduledTriggers)?E.scheduledTriggers:[],relapseDate:E.relapseDate?new Date(E.relapseDate).toISOString():null,cravingsResisted:Math.max(0,parseInt(E.cravingsResisted)||0),...E}:C(),j=()=>({uid:"",email:"",heroName:"Hero",archetype:"The Determined",avatar:dr("default"),quitDate:new Date().toISOString(),onboardingCompleted:!1,updatedAt:Date.now()});I.useEffect(()=>()=>{O.forEach(E=>{typeof E=="function"&&E()})},[O]),I.useEffect(()=>{const E=()=>{console.log("🌐 Internet connection restored"),d!=null&&d.uid&&w.isComplete&&(console.log("🔄 Auto-refreshing data after connection restore..."),b(d.uid))},F=()=>{console.log("📡 Internet connection lost"),x(M=>({...M,currentStep:"Offline mode - data will sync when connection is restored",error:"No internet connection"}))};return window.addEventListener("online",E),window.addEventListener("offline",F),()=>{window.removeEventListener("online",E),window.removeEventListener("offline",F)}},[d==null?void 0:d.uid,w.isComplete]);const[k,V]=I.useState(null);I.useEffect(()=>{(async()=>{try{const F=(await be(()=>import("./offlineManager-a30ccd03.js"),[])).default,M=new F;V(M),window.refreshUserData=de,console.log("✅ Offline manager initialized")}catch(F){console.error("Error initializing offline manager:",F)}})()},[]);const K=async E=>{if(!E)return!1;const F=await b(E);if(F&&k&&(await k.cacheUserData(o),await k.cacheProfileData({dailyWater:B,dailyMood:ne,dailyBreathing:he,scheduledTriggers:un,relapseDate:L,cravingsResisted:Hc})),!F&&k){console.log("📱 Loading offline data...");const M=await k.getCachedUserData(),se=await k.getCachedProfileData();if(M)return console.log("📱 Using offline user data"),a(M),u(M.onboardingCompleted),se&&N(se),!0}return F},G=async()=>d!=null&&d.uid?(console.log("🔄 Refreshing user data with offline support..."),await K(d.uid)):!1,de=async()=>{if(!(d!=null&&d.uid)){T("Cannot Refresh","No authenticated user found");return}if(console.log("🔄 Manually refreshing user data..."),await G()){const F=document.createElement("div");F.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg bg-green-500 text-white max-w-sm",F.innerHTML=`
        <div class="font-bold">✅ Data Refreshed!</div>
        <div class="text-sm opacity-90">Your data has been synced across all devices</div>
        <button class="mt-2 text-sm underline" onclick="this.parentElement.remove()">Dismiss</button>
      `,document.body.appendChild(F),setTimeout(()=>{F.parentNode&&F.parentNode.removeChild(F)},5e3)}else T("Refresh Failed","Could not refresh data. Please try again.")},[L,z]=I.useState(null),[B,ie]=I.useState(0),[ne,Z]=I.useState(null),[he,vt]=I.useState(!1),[un,sr]=I.useState([]),[Hc,fa]=I.useState(0),[Ep,pa]=I.useState(S());I.useEffect(()=>{const E=M=>{if(M.message&&M.message.includes("content_script")){console.warn("Browser extension error (ignored):",M.message);return}if(M.message&&(M.message.includes("FrameDoesNotExistError")||M.message.includes("background.js"))){console.warn("Background frame error (ignored):",M.message);return}console.error("Global error caught:",M)},F=M=>{if(M.reason&&M.reason.message&&M.reason.message.includes("content_script")){console.warn("Browser extension promise rejection (ignored):",M.reason.message);return}if(M.reason&&M.reason.message&&(M.reason.message.includes("FrameDoesNotExistError")||M.reason.message.includes("background.js"))){console.warn("Background frame promise rejection (ignored):",M.reason.message);return}console.error("Unhandled promise rejection:",M.reason)};return window.addEventListener("error",E),window.addEventListener("unhandledrejection",F),()=>{window.removeEventListener("error",E),window.removeEventListener("unhandledrejection",F)}},[]),I.useEffect(()=>{const E=async(F=0)=>{try{const{ref:M,set:se,get:Te,child:ke}=await be(()=>import("./index.esm-409cdec0.js"),[]),ze=M($),$e=ke(ze,"healthchecks/vite_dev");await se($e,{lastRun:Date.now()});const je=await Te($e);console.log("🔥 Firebase RTDB connected. Healthcheck exists:",je.exists())}catch(M){if(console.error("Firebase connectivity test failed:",(M==null?void 0:M.message)||M),F<3){const se=Math.pow(2,F)*1e3;console.log(`Retrying Firebase connection in ${se}ms... (attempt ${F+1}/3)`),setTimeout(()=>E(F+1),se)}else console.error("Firebase connection failed after 3 retries. Check your internet connection and Firebase configuration.")}};E()},[]),I.useEffect(()=>{let E=!0,F=null;return(async()=>{try{console.log("Initializing authentication state..."),y(!0);const{onAuthStateChanged:se}=await be(()=>import("./index.esm-e74f6a4d.js"),[]);F=se(ni,async ke=>{if(E)if(console.log("Auth state changed:",ke?`User: ${ke.uid}`:"No user"),ke){h(ke),console.log("User authenticated, checking database for user data...");try{const{ref:ze,get:$e}=await be(()=>import("./index.esm-409cdec0.js"),[]),je=ze($,`users/${ke.uid}`),at=await $e(je);if(at.exists()){const or=at.val();console.log("Existing user data found - auto-login successful"),a(or),u(!0),r("arena"),console.log("User auto-logged in and redirected to Arena")}else console.log("No user data found - new user needs onboarding"),r("onboarding")}catch(ze){console.error("Error fetching user data during auto-login:",ze),r("onboarding")}}else console.log("No authenticated user - showing login screen"),h(null),a(null),u(!1),r("auth")});const Te=setTimeout(()=>{E&&(console.warn("Auth initialization timeout - forcing to auth screen"),y(!1),r("auth"))},1e4);F&&clearTimeout(Te)}catch(se){console.error("Error initializing authentication:",se),E&&(y(!1),r("auth"))}finally{E&&y(!1)}})(),()=>{E=!1,F&&F()}},[]);const re=async E=>{console.log("Authentication successful, checking for existing user data...",{uid:E==null?void 0:E.uid,email:E==null?void 0:E.email});try{const{ref:F,get:M}=await be(()=>import("./index.esm-409cdec0.js"),[]);console.log("Checking database for existing user data...");const se=F($,`users/${E.uid}`),Te=await M(se);if(Te.exists()){const ke=Te.val();if(console.log("Existing user data found - loading all user data..."),await K(E.uid))console.log("✅ All user data loaded successfully, going to Arena"),r("arena");else{console.log("⚠️ Data loading failed, but proceeding to Arena with basic data"),a(ke);const $e=!!ke.onboardingCompleted;u($e),r("arena")}}else console.log("No user data found - starting onboarding"),r("onboarding")}catch(F){console.error("Database check failed:",F),r("onboarding")}},[Y,pe]=I.useState(null),[q,me]=I.useState(!1),[Ge,Ct]=I.useState(null),Mt=async()=>{var E,F,M,se,Te,ke,ze,$e;if(!(!(o!=null&&o.uid)||q)){me(!0),Ct(null);try{const{ref:je,get:at}=await be(()=>import("./index.esm-409cdec0.js"),[]),or=je($,"buddyPairs"),Je=await at(or);if(!Je.exists()){pe(null);return}const ge=Je.val();let Ut=null,Ve=null;for(const[lt,ht]of Object.entries(ge))if(ht.users&&Array.isArray(ht.users)&&ht.users.includes(o.uid)){Ut={...ht,pairId:lt},Ve=ht.users.find(Ie=>Ie!==o.uid);break}if(Ut&&Ve){const lt=je($,`users/${Ve}`),ht=await at(lt);if(!ht.exists()){const{remove:Qc}=await be(()=>import("./index.esm-409cdec0.js"),[]);await Qc(je($,`buddyPairs/${Ut.pairId}`)),pe(null);return}const Ie=ht.val(),ki={heroName:Ie.heroName||"Buddy",stats:{streakDays:((E=Ie.stats)==null?void 0:E.streakDays)||0,addictionLevel:((F=Ie.stats)==null?void 0:F.addictionLevel)||50,willpower:((M=Ie.stats)==null?void 0:M.mentalStrength)||50,motivation:((se=Ie.stats)==null?void 0:se.mentalStrength)||50,cravingResistance:((Te=Ie.stats)==null?void 0:Te.mentalStrength)||50,triggerDefense:((ke=Ie.stats)==null?void 0:ke.triggerDefense)||30,moneySaved:((ze=Ie.stats)==null?void 0:ze.moneySaved)||0,experiencePoints:(($e=Ie.stats)==null?void 0:$e.experiencePoints)||0},achievements:Ie.achievements||[],archetype:Ie.archetype||"The Determined",avatar:Ie.avatar||dr(Ie.heroName||"buddy","adventurer"),userId:Ve,isRealBuddy:!0,pairId:Ut.pairId};pe(ki),await Ln(o.uid,Ve)}else pe(null)}catch(je){console.error("Error loading buddy:",je),Ct("Failed to load buddy data"),pe(null)}finally{me(!1)}}},Ln=async(E,F)=>{try{const{ref:M,remove:se,set:Te}=await be(()=>import("./index.esm-409cdec0.js"),[]);await se(M($,`matchingPool/${E}`)),await se(M($,`matchingPool/${F}`)),Y!=null&&Y.pairId&&(await Te(M($,`buddyPairs/${Y.pairId}/user1RemovedFromPool`),!0),await Te(M($,`buddyPairs/${Y.pairId}/user2RemovedFromPool`),!0))}catch(M){console.error("Error removing users from matching pool:",M)}};I.useEffect(()=>{o!=null&&o.uid&&!Y&&!q&&Mt()},[o==null?void 0:o.uid,Y,q]);const qe=async()=>{try{const{ref:E,get:F,set:M,push:se,remove:Te}=await be(()=>import("./index.esm-409cdec0.js"),[]),ke=E($,"matchingPool"),ze=await F(ke);if(!ze.exists())return;const $e=ze.val(),je=[];if(Object.entries($e).forEach(([Je,ge])=>{typeof ge=="string"?je.push(ge):ge&&typeof ge=="object"?ge.uid?je.push(ge.uid):ge.userId?je.push(ge.userId):je.push(Je):je.push(Je)}),je.length<2)return;const at=[];for(const Je of je)try{const ge=E($,`users/${Je}`);(await F(ge)).exists()?at.push(Je):Object.keys($e).forEach(async Ve=>{const lt=$e[Ve];((lt==null?void 0:lt.uid)||(lt==null?void 0:lt.userId)||Ve)===Je&&await Te(E($,`matchingPool/${Ve}`))})}catch(ge){console.error("Error validating user:",ge)}if(at.length<2)return;let or=0;for(let Je=0;Je<at.length-1;Je+=2){const ge=at[Je],Ut=at[Je+1];try{const Ve=se(E($,"buddyPairs")).key,lt={pairId:Ve,users:[ge,Ut],matchedAt:new Date().toISOString(),compatibilityScore:.85,matchReasons:["Sequential auto-match","First-come, first-served pairing"],status:"active",lastMessageAt:new Date().toISOString(),user1RemovedFromPool:!1,user2RemovedFromPool:!1};await M(E($,`buddyPairs/${Ve}`),lt),await M(E($,`users/${ge}/buddyInfo`),{hasBuddy:!0,buddyId:Ut,pairId:Ve,matchedAt:lt.matchedAt}),await M(E($,`users/${Ut}/buddyInfo`),{hasBuddy:!0,buddyId:ge,pairId:Ve,matchedAt:lt.matchedAt}),Object.keys($e).forEach(async ht=>{const Ie=$e[ht],ki=(Ie==null?void 0:Ie.uid)||(Ie==null?void 0:Ie.userId)||ht;(ki===ge||ki===Ut)&&await Te(E($,`matchingPool/${ht}`))}),await M(E($,`buddyPairs/${Ve}/user1RemovedFromPool`),!0),await M(E($,`buddyPairs/${Ve}/user2RemovedFromPool`),!0),or++}catch(Ve){console.error("Error creating buddy pair:",Ve)}}if(o!=null&&o.uid&&at.some(ge=>ge===o.uid))try{await Mt()}catch(ge){console.error("Error reloading buddy data:",ge)}}catch(E){console.error("Error in auto-matching:",E)}};I.useEffect(()=>{const E=F=>{const M=F.detail;console.log("Navigating to tab:",M),M==="buddy-chat"&&(r("buddy-chat"),e("buddy-chat"))};return window.addEventListener("navigateToTab",E),()=>{window.removeEventListener("navigateToTab",E)}},[]);const ot={heroName:"",stats:{streakDays:0,addictionLevel:0,willpower:0,motivation:0,cravingResistance:0,triggerDefense:0,moneySaved:0,experiencePoints:0},achievements:[],archetype:"",avatar:null,isEmpty:!0,message:"We are looking for a suitable buddy for you"},Tt=()=>q?{heroName:"Loading Buddy...",stats:{streakDays:0,addictionLevel:50,willpower:50,motivation:50,cravingResistance:50,triggerDefense:30,moneySaved:0,experiencePoints:0},achievements:[],archetype:"LOADING",avatar:dr("loading","adventurer"),isLoading:!0}:Ge?{heroName:"Error Loading Buddy",stats:{streakDays:0,addictionLevel:50,willpower:50,motivation:50,cravingResistance:50,triggerDefense:30,moneySaved:0,experiencePoints:0},achievements:[],archetype:"ERROR",avatar:dr("error","adventurer"),isError:!0,errorMessage:Ge}:Y||ot,Jt=async E=>{console.log("Onboarding completed with user data:",E);try{if(!E||!E.heroName||!E.stats)throw new Error("Invalid user data received from onboarding");if(!d)throw new Error("No authenticated user found");const F={...E,uid:d.uid,email:d.email,displayName:d.displayName||E.heroName,photoURL:d.photoURL,onboardingCompleted:!0,updatedAt:Date.now()};console.log("Saving user data to Firebase:",F);const{ref:M,set:se}=await be(()=>import("./index.esm-409cdec0.js"),[]),Te=M($,`users/${d.uid}`);await se(Te,F),console.log("Firebase save successful, updating app state..."),a(F),u(!0);try{console.log("Adding user to buddy matching pool...");const{ref:ze,set:$e}=await be(()=>import("./index.esm-409cdec0.js"),[]),je={quitStartDate:F.quitDate||new Date().toISOString(),addictionLevel:F.stats.addictionLevel||50,triggers:F.triggers||[],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,quitExperience:F.quitAttempts||"first",availableForMatching:!0,lastActive:Date.now(),userId:d.uid,heroName:F.heroName,archetype:F.archetype};await $e(ze($,`matchingPool/${d.uid}`),je);try{await qe()}catch(at){console.error("Automatic matching failed:",at)}}catch(ze){console.error("⚠️ Failed to add user to buddy matching pool:",ze)}const ke=await K(d.uid);r("arena")}catch(F){console.error("Error in handleOnboardingComplete:",F);const M={heroName:(E==null?void 0:E.heroName)||"Hero",archetype:(E==null?void 0:E.archetype)||"The Determined",avatar:(E==null?void 0:E.avatar)||dr("fallback"),stats:{addictionLevel:50,mentalStrength:50,motivation:50,triggerDefense:30,streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date,uid:d==null?void 0:d.uid,email:d==null?void 0:d.email,onboardingCompleted:!0};if(d)try{const{ref:se,set:Te}=await be(()=>import("./index.esm-409cdec0.js"),[]),ke=se($,`users/${d.uid}`);await Te(ke,M)}catch(se){console.error("Failed to save fallback data to Firebase:",se)}a(M),u(!0),r("arena")}},Gc=()=>{a(null),u(!1),r("onboarding"),e("arena"),s(null),localStorage.removeItem("quitCoachUser")},ma=async()=>{try{console.log("Logging out user...");const{signOut:E}=await be(()=>import("./index.esm-e74f6a4d.js"),[]);await E(ni),a(null),h(null),u(!1),r("auth"),localStorage.removeItem("lastSOS"),localStorage.removeItem("cravingWins"),localStorage.removeItem("specialFeatures"),console.log("User successfully logged out and redirected to login screen")}catch(E){console.error("Error during logout:",E),a(null),h(null),u(!1),r("auth")}},ga=async()=>{if(!d){console.error("No authenticated user to reset");return}try{console.log("Resetting ALL user data for testing...");const{ref:E,set:F,remove:M}=await be(()=>import("./index.esm-409cdec0.js"),[]),se=E($,`users/${d.uid}`);await F(se,null);const Te=E($,"users");await F(Te,null);const ke=E($,"buddyPairs");await F(ke,null);const ze=E($,"matchingPool");await F(ze,null),console.log("All user data and buddy matching data cleared from database"),a(null),u(!1),r("onboarding"),pe(null),me(!1),Ct(null),console.log("Account reset successful - ready for fresh onboarding")}catch(E){console.error("Error resetting account for testing:",E)}},qc=E=>{console.log("Tab changed to:",E),e(E),r(E)},Kc=E=>{r(E==="mood-selector"?"mood-selector":"profile")},Yc=E=>{s(E),r("profile")},Ft=()=>{r("profile")};return f?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-white",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-6"}),l.jsx("h2",{className:"text-3xl font-bold mb-4",children:"🔐 Restoring Session..."}),l.jsx("p",{className:"text-xl text-gray-300 mb-4",children:"Checking authentication state"}),l.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto",children:l.jsxs("div",{className:"text-sm text-gray-400 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Checking Firebase Auth persistence"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Verifying user session (30 days)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Loading user data from database"]})]})}),l.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"This should take only a few seconds"})]})}):n==="auth"?l.jsx(xA,{onAuthSuccess:re}):w.isLoading?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-white",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-6"}),l.jsx("h2",{className:"text-3xl font-bold mb-4",children:"📊 Loading Your Data..."}),l.jsx("p",{className:"text-xl text-gray-300 mb-4",children:w.currentStep}),l.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto mb-6",children:[l.jsx("div",{className:"w-full bg-slate-700 rounded-full h-3 mb-3",children:l.jsx("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${w.progress}%`}})}),l.jsxs("div",{className:"text-sm text-gray-400",children:[w.progress,"% Complete"]})]}),l.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 max-w-md mx-auto",children:l.jsxs("div",{className:"text-sm text-gray-400 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Profile and onboarding data"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Battle stats and progress"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Habits and achievements"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-blue-400",children:"✓"}),"Setting up live sync"]})]})}),w.error&&l.jsxs("div",{className:"mt-4 p-3 bg-red-600/20 border border-red-500/30 rounded-lg max-w-md mx-auto",children:[l.jsxs("p",{className:"text-red-300 text-sm",children:[l.jsx("span",{className:"font-semibold",children:"Error:"})," ",w.error]}),l.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Don't worry, you can still use the app with basic functionality"})]}),l.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Syncing your data across all devices..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[l.jsx(SA,{}),!1,n==="onboarding"&&l.jsxs("div",{children:[console.log("Rendering OnboardingFlow"),l.jsx(AA,{onComplete:Jt,authUser:d})]}),c&&o?l.jsxs(l.Fragment,{children:[console.log("Main app rendering with user:",o,"view:",n),n==="arena"&&l.jsxs("div",{children:[console.log("Rendering ArenaView with user:",o),(()=>{try{const E=Tt();return l.jsx(MA,{user:o,nemesis:E,onBackToLogin:ma,onResetForTesting:ga,buddyLoading:q,buddyError:Ge,realBuddy:Y})}catch(E){return console.error("Error rendering ArenaView:",E),l.jsxs("div",{className:"text-white text-center p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Error Loading Arena"}),l.jsx("p",{className:"text-gray-300 mb-4",children:E.message}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:"Reload App"})]})}})()]}),n==="craving-support"&&l.jsxs("div",{children:[console.log("Rendering CravingSupportView with user:",o),l.jsx($A,{user:o,nemesis:Tt(),onBackToLogin:ma,onResetForTesting:ga})]}),n==="profile"&&l.jsxs("div",{children:[console.log("Rendering ProfileView with user:",o),l.jsx(VA,{user:o,onNavigate:Kc})]}),n==="mood-selector"&&l.jsx(MoodSelector,{onMoodSelect:Yc,onBack:Ft}),n==="buddy-chat"&&l.jsx(KA,{user:o,nemesis:Tt(),buddyMatchingService:p}),n==="settings"&&l.jsx(qA,{onResetApp:Gc}),l.jsx(LA,{activeTab:t,onTabChange:qc,dataLoadingState:w,onRefreshData:de,offlineManager:k})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen text-white",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),l.jsx("p",{className:"text-gray-300",children:c?"User data missing":"Onboarding not completed"}),l.jsxs("p",{className:"text-gray-300",children:["Current view: ",n]}),l.jsxs("p",{className:"text-gray-300",children:["User data: ",o?JSON.stringify(o,null,2):"None"]}),l.jsx("button",{onClick:()=>{console.log("Debug button clicked"),console.log("Current state:",{hasCompletedOnboarding:c,user:o,currentView:n}),console.log("User data:",o)},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Debug State"})]})})]})};Hu.createRoot(document.getElementById("root")).render(l.jsx($x.StrictMode,{children:l.jsx(YA,{})}));export{eD as $,nD as A,rD as B,iD as C,gi as D,JA as E,ah as F,hD as G,fD as H,pD as I,mD as J,Y_ as K,yD as L,Q as M,QA as N,AC as O,DC as P,En as Q,Sn as R,bD as S,ZC as T,ED as U,Ze as V,XA as W,ZA as X,cD as Y,lD as Z,TD as _,KC as a,hk as a$,DD as a0,ua as a1,ca as a2,jD as a3,Wo as a4,Ci as a5,pr as a6,kD as a7,mr as a8,Un as a9,XD as aA,JR as aB,LD as aC,fT as aD,a2 as aE,w2 as aF,kg as aG,Hk as aH,UT as aI,ZD as aJ,HD as aK,ck as aL,h2 as aM,g2 as aN,_2 as aO,l2 as aP,t2 as aQ,bk as aR,MD as aS,tT as aT,uk as aU,f2 as aV,m2 as aW,v2 as aX,gT as aY,s2 as aZ,yk as a_,tr as aa,tl as ab,AD as ac,oi as ad,ns as ae,zR as af,RD as ag,u2 as ah,uh as ai,PD as aj,BR as ak,mp as al,gr as am,WD as an,Nk as ao,c2 as ap,Dw as aq,WR as ar,Lw as as,fk as at,VD as au,VT as av,pk as aw,OD as ax,o2 as ay,qD as az,Qt as b,BD as b0,Ik as b1,FD as b2,ip as b3,$D as b4,mk as b5,GD as b6,d2 as b7,iR as b8,y2 as b9,i2 as ba,UD as bb,r2 as bc,QD as bd,JD as be,p2 as bf,YD as bg,n2 as bh,e2 as bi,KD as bj,zD as bk,be as bl,Nf as c,Cn as d,ms as e,CD as f,QC as g,ND as h,SD as i,oD as j,aD as k,gD as l,_D as m,vD as n,Me as o,YC as p,wD as q,Z_ as r,Lv as s,xD as t,ID as u,Hf as v,uD as w,dD as x,sD as y,tD as z};
