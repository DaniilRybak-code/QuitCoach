(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bm={exports:{}},Ja={},Nm={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yi=Symbol.for("react.element"),Lv=Symbol.for("react.portal"),Fv=Symbol.for("react.fragment"),Uv=Symbol.for("react.strict_mode"),Wv=Symbol.for("react.profiler"),Bv=Symbol.for("react.provider"),zv=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),Hv=Symbol.for("react.memo"),Gv=Symbol.for("react.lazy"),qh=Symbol.iterator;function Kv(t){return t===null||typeof t!="object"?null:(t=qh&&t[qh]||t["@@iterator"],typeof t=="function"?t:null)}var Im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},km=Object.assign,Tm={};function bs(t,e,n){this.props=t,this.context=e,this.refs=Tm,this.updater=n||Im}bs.prototype.isReactComponent={};bs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pm(){}Pm.prototype=bs.prototype;function qu(t,e,n){this.props=t,this.context=e,this.refs=Tm,this.updater=n||Im}var Yu=qu.prototype=new Pm;Yu.constructor=qu;km(Yu,bs.prototype);Yu.isPureReactComponent=!0;var Yh=Array.isArray,Rm=Object.prototype.hasOwnProperty,Qu={current:null},Am={key:!0,ref:!0,__self:!0,__source:!0};function jm(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Rm.call(e,r)&&!Am.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Yi,type:t,key:i,ref:o,props:s,_owner:Qu.current}}function qv(t,e){return{$$typeof:Yi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ju(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yi}function Yv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qh=/\/+/g;function Fl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yv(""+t.key):e.toString(36)}function Fo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yi:case Lv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fl(o,0):r,Yh(s)?(n="",t!=null&&(n=t.replace(Qh,"$&/")+"/"),Fo(s,e,n,"",function(u){return u})):s!=null&&(Ju(s)&&(s=qv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Qh,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Yh(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Fl(i,a);o+=Fo(i,e,n,c,s)}else if(c=Kv(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Fl(i,a++),o+=Fo(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mo(t,e,n){if(t==null)return t;var r=[],s=0;return Fo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Qv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},Uo={transition:null},Jv={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:Qu};function Dm(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:mo,forEach:function(t,e,n){mo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mo(t,function(){e++}),e},toArray:function(t){return mo(t,function(e){return e})||[]},only:function(t){if(!Ju(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=bs;G.Fragment=Fv;G.Profiler=Wv;G.PureComponent=qu;G.StrictMode=Uv;G.Suspense=Vv;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jv;G.act=Dm;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=km({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Rm.call(e,c)&&!Am.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Yi,type:t.type,key:s,ref:i,props:r,_owner:o}};G.createContext=function(t){return t={$$typeof:zv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bv,_context:t},t.Consumer=t};G.createElement=jm;G.createFactory=function(t){var e=jm.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:$v,render:t}};G.isValidElement=Ju;G.lazy=function(t){return{$$typeof:Gv,_payload:{_status:-1,_result:t},_init:Qv}};G.memo=function(t,e){return{$$typeof:Hv,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=Uo.transition;Uo.transition={};try{t()}finally{Uo.transition=e}};G.unstable_act=Dm;G.useCallback=function(t,e){return Be.current.useCallback(t,e)};G.useContext=function(t){return Be.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};G.useEffect=function(t,e){return Be.current.useEffect(t,e)};G.useId=function(){return Be.current.useId()};G.useImperativeHandle=function(t,e,n){return Be.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return Be.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return Be.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return Be.current.useMemo(t,e)};G.useReducer=function(t,e,n){return Be.current.useReducer(t,e,n)};G.useRef=function(t){return Be.current.useRef(t)};G.useState=function(t){return Be.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return Be.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return Be.current.useTransition()};G.version="18.3.1";Nm.exports=G;var k=Nm.exports;const Xv=Mv(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=k,ex=Symbol.for("react.element"),tx=Symbol.for("react.fragment"),nx=Object.prototype.hasOwnProperty,rx=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sx={key:!0,ref:!0,__self:!0,__source:!0};function Om(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nx.call(e,r)&&!sx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ex,type:t,key:i,ref:o,props:s,_owner:rx.current}}Ja.Fragment=tx;Ja.jsx=Om;Ja.jsxs=Om;bm.exports=Ja;var l=bm.exports,Ic={},Mm={exports:{}},at={},Lm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,W){var B=j.length;j.push(W);e:for(;0<B;){var fe=B-1>>>1,ge=j[fe];if(0<s(ge,W))j[fe]=W,j[B]=ge,B=fe;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var W=j[0],B=j.pop();if(B!==W){j[0]=B;e:for(var fe=0,ge=j.length,Fr=ge>>>1;fe<Fr;){var qt=2*(fe+1)-1,Ls=j[qt],Yt=qt+1,nr=j[Yt];if(0>s(Ls,B))Yt<ge&&0>s(nr,Ls)?(j[fe]=nr,j[Yt]=B,fe=Yt):(j[fe]=Ls,j[qt]=B,fe=qt);else if(Yt<ge&&0>s(nr,B))j[fe]=nr,j[Yt]=B,fe=Yt;else break e}}return W}function s(j,W){var B=j.sortIndex-W.sortIndex;return B!==0?B:j.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,d=null,h=3,_=!1,x=!1,w=!1,P=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(j){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=j)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function S(j){if(w=!1,m(j),!x)if(n(c)!==null)x=!0,z(N);else{var W=n(u);W!==null&&ee(S,W.startTime-j)}}function N(j,W){x=!1,w&&(w=!1,g(y),y=-1),_=!0;var B=h;try{for(m(W),d=n(c);d!==null&&(!(d.expirationTime>W)||j&&!I());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,h=d.priorityLevel;var ge=fe(d.expirationTime<=W);W=t.unstable_now(),typeof ge=="function"?d.callback=ge:d===n(c)&&r(c),m(W)}else r(c);d=n(c)}if(d!==null)var Fr=!0;else{var qt=n(u);qt!==null&&ee(S,qt.startTime-W),Fr=!1}return Fr}finally{d=null,h=B,_=!1}}var b=!1,C=null,y=-1,v=5,E=-1;function I(){return!(t.unstable_now()-E<v)}function A(){if(C!==null){var j=t.unstable_now();E=j;var W=!0;try{W=C(!0,j)}finally{W?D():(b=!1,C=null)}}else b=!1}var D;if(typeof p=="function")D=function(){p(A)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=A,D=function(){U.postMessage(null)}}else D=function(){P(A,0)};function z(j){C=j,b||(b=!0,D())}function ee(j,W){y=P(function(){j(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){x||_||(x=!0,z(N))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var B=h;h=W;try{return j()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,W){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=h;h=j;try{return W()}finally{h=B}},t.unstable_scheduleCallback=function(j,W,B){var fe=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?fe+B:fe):B=fe,j){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=B+ge,j={id:f++,callback:W,priorityLevel:j,startTime:B,expirationTime:ge,sortIndex:-1},B>fe?(j.sortIndex=B,e(u,j),n(c)===null&&j===n(u)&&(w?(g(y),y=-1):w=!0,ee(S,B-fe))):(j.sortIndex=ge,e(c,j),x||_||(x=!0,z(N))),j},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(j){var W=h;return function(){var B=h;h=W;try{return j.apply(this,arguments)}finally{h=B}}}})(Fm);Lm.exports=Fm;var ix=Lm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox=k,st=ix;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Um=new Set,vi={};function Rr(t,e){hs(t,e),hs(t+"Capture",e)}function hs(t,e){for(vi[t]=e,t=0;t<e.length;t++)Um.add(e[t])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kc=Object.prototype.hasOwnProperty,ax=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jh={},Xh={};function lx(t){return kc.call(Xh,t)?!0:kc.call(Jh,t)?!1:ax.test(t)?Xh[t]=!0:(Jh[t]=!0,!1)}function cx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ux(t,e,n,r){if(e===null||typeof e>"u"||cx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ze(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xu=/[\-:]([a-z])/g;function Zu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xu,Zu);Pe[e]=new ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xu,Zu);Pe[e]=new ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xu,Zu);Pe[e]=new ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new ze(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,e,n,r){var s=Pe.hasOwnProperty(e)?Pe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ux(e,n,s,r)&&(n=null),r||s===null?lx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pn=ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,go=Symbol.for("react.element"),zr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Tc=Symbol.for("react.profiler"),Wm=Symbol.for("react.provider"),Bm=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),Pc=Symbol.for("react.suspense"),Rc=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),zm=Symbol.for("react.offscreen"),Zh=Symbol.iterator;function Fs(t){return t===null||typeof t!="object"?null:(t=Zh&&t[Zh]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,Ul;function Js(t){if(Ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ul=e&&e[1]||""}return`
`+Ul+t}var Wl=!1;function Bl(t,e){if(!t||Wl)return"";Wl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Wl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Js(t):""}function dx(t){switch(t.tag){case 5:return Js(t.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 2:case 15:return t=Bl(t.type,!1),t;case 11:return t=Bl(t.type.render,!1),t;case 1:return t=Bl(t.type,!0),t;default:return""}}function Ac(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case zr:return"Portal";case Tc:return"Profiler";case td:return"StrictMode";case Pc:return"Suspense";case Rc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bm:return(t.displayName||"Context")+".Consumer";case Wm:return(t._context.displayName||"Context")+".Provider";case nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rd:return e=t.displayName||null,e!==null?e:Ac(t.type)||"Memo";case xn:e=t._payload,t=t._init;try{return Ac(t(e))}catch{}}return null}function hx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ac(e);case 8:return e===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $m(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fx(t){var e=$m(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yo(t){t._valueTracker||(t._valueTracker=fx(t))}function Vm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$m(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jc(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ef(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hm(t,e){e=e.checked,e!=null&&ed(t,"checked",e,!1)}function Dc(t,e){Hm(t,e);var n=Vn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oc(t,e.type,Vn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oc(t,e,n){(e!=="number"||ea(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xs=Array.isArray;function ts(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Xs(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vn(n)}}function Gm(t,e){var n=Vn(e.value),r=Vn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Km(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Km(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _o,qm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_o.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},px=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){px.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function Ym(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function Qm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ym(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var mx=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fc(t,e){if(e){if(mx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Uc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=null;function sd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bc=null,ns=null,rs=null;function sf(t){if(t=Xi(t)){if(typeof Bc!="function")throw Error(T(280));var e=t.stateNode;e&&(e=nl(e),Bc(t.stateNode,t.type,e))}}function Jm(t){ns?rs?rs.push(t):rs=[t]:ns=t}function Xm(){if(ns){var t=ns,e=rs;if(rs=ns=null,sf(t),e)for(t=0;t<e.length;t++)sf(e[t])}}function Zm(t,e){return t(e)}function eg(){}var zl=!1;function tg(t,e,n){if(zl)return t(e,n);zl=!0;try{return Zm(t,e,n)}finally{zl=!1,(ns!==null||rs!==null)&&(eg(),Xm())}}function wi(t,e){var n=t.stateNode;if(n===null)return null;var r=nl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var zc=!1;if(an)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){zc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{zc=!1}function gx(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var si=!1,ta=null,na=!1,$c=null,yx={onError:function(t){si=!0,ta=t}};function _x(t,e,n,r,s,i,o,a,c){si=!1,ta=null,gx.apply(yx,arguments)}function vx(t,e,n,r,s,i,o,a,c){if(_x.apply(this,arguments),si){if(si){var u=ta;si=!1,ta=null}else throw Error(T(198));na||(na=!0,$c=u)}}function Ar(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ng(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function of(t){if(Ar(t)!==t)throw Error(T(188))}function xx(t){var e=t.alternate;if(!e){if(e=Ar(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return of(s),t;if(i===r)return of(s),e;i=i.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function rg(t){return t=xx(t),t!==null?sg(t):null}function sg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sg(t);if(e!==null)return e;t=t.sibling}return null}var ig=st.unstable_scheduleCallback,af=st.unstable_cancelCallback,wx=st.unstable_shouldYield,Sx=st.unstable_requestPaint,me=st.unstable_now,Ex=st.unstable_getCurrentPriorityLevel,id=st.unstable_ImmediatePriority,og=st.unstable_UserBlockingPriority,ra=st.unstable_NormalPriority,Cx=st.unstable_LowPriority,ag=st.unstable_IdlePriority,Xa=null,Wt=null;function bx(t){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Xa,t,void 0,(t.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:kx,Nx=Math.log,Ix=Math.LN2;function kx(t){return t>>>=0,t===0?32:31-(Nx(t)/Ix|0)|0}var vo=64,xo=4194304;function Zs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zs(a):(i&=o,i!==0&&(r=Zs(i)))}else o=n&~s,o!==0?r=Zs(o):i!==0&&(r=Zs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kt(e),s=1<<n,r|=t[n],e&=~s;return r}function Tx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Px(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-kt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Tx(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Vc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lg(){var t=vo;return vo<<=1,!(vo&4194240)&&(vo=64),t}function $l(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kt(e),t[e]=n}function Rx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-kt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function od(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Q=0;function cg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ug,ad,dg,hg,fg,Hc=!1,wo=[],An=null,jn=null,Dn=null,Si=new Map,Ei=new Map,En=[],Ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lf(t,e){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(e.pointerId)}}function Ws(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xi(e),e!==null&&ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function jx(t,e,n,r,s){switch(e){case"focusin":return An=Ws(An,t,e,n,r,s),!0;case"dragenter":return jn=Ws(jn,t,e,n,r,s),!0;case"mouseover":return Dn=Ws(Dn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Si.set(i,Ws(Si.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ei.set(i,Ws(Ei.get(i)||null,t,e,n,r,s)),!0}return!1}function pg(t){var e=lr(t.target);if(e!==null){var n=Ar(e);if(n!==null){if(e=n.tag,e===13){if(e=ng(n),e!==null){t.blockedOn=e,fg(t.priority,function(){dg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wc=r,n.target.dispatchEvent(r),Wc=null}else return e=Xi(n),e!==null&&ad(e),t.blockedOn=n,!1;e.shift()}return!0}function cf(t,e,n){Wo(t)&&n.delete(e)}function Dx(){Hc=!1,An!==null&&Wo(An)&&(An=null),jn!==null&&Wo(jn)&&(jn=null),Dn!==null&&Wo(Dn)&&(Dn=null),Si.forEach(cf),Ei.forEach(cf)}function Bs(t,e){t.blockedOn===e&&(t.blockedOn=null,Hc||(Hc=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Dx)))}function Ci(t){function e(s){return Bs(s,t)}if(0<wo.length){Bs(wo[0],t);for(var n=1;n<wo.length;n++){var r=wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(An!==null&&Bs(An,t),jn!==null&&Bs(jn,t),Dn!==null&&Bs(Dn,t),Si.forEach(e),Ei.forEach(e),n=0;n<En.length;n++)r=En[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)pg(n),n.blockedOn===null&&En.shift()}var ss=pn.ReactCurrentBatchConfig,ia=!0;function Ox(t,e,n,r){var s=Q,i=ss.transition;ss.transition=null;try{Q=1,ld(t,e,n,r)}finally{Q=s,ss.transition=i}}function Mx(t,e,n,r){var s=Q,i=ss.transition;ss.transition=null;try{Q=4,ld(t,e,n,r)}finally{Q=s,ss.transition=i}}function ld(t,e,n,r){if(ia){var s=Gc(t,e,n,r);if(s===null)Zl(t,e,r,oa,n),lf(t,r);else if(jx(s,t,e,n,r))r.stopPropagation();else if(lf(t,r),e&4&&-1<Ax.indexOf(t)){for(;s!==null;){var i=Xi(s);if(i!==null&&ug(i),i=Gc(t,e,n,r),i===null&&Zl(t,e,r,oa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zl(t,e,r,null,n)}}var oa=null;function Gc(t,e,n,r){if(oa=null,t=sd(r),t=lr(t),t!==null)if(e=Ar(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ng(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oa=t,null}function mg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ex()){case id:return 1;case og:return 4;case ra:case Cx:return 16;case ag:return 536870912;default:return 16}default:return 16}}var kn=null,cd=null,Bo=null;function gg(){if(Bo)return Bo;var t,e=cd,n=e.length,r,s="value"in kn?kn.value:kn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Bo=s.slice(t,1<r?1-r:void 0)}function zo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function So(){return!0}function uf(){return!1}function lt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?So:uf,this.isPropagationStopped=uf,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),e}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=lt(Ns),Ji=he({},Ns,{view:0,detail:0}),Lx=lt(Ji),Vl,Hl,zs,Za=he({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zs&&(zs&&t.type==="mousemove"?(Vl=t.screenX-zs.screenX,Hl=t.screenY-zs.screenY):Hl=Vl=0,zs=t),Vl)},movementY:function(t){return"movementY"in t?t.movementY:Hl}}),df=lt(Za),Fx=he({},Za,{dataTransfer:0}),Ux=lt(Fx),Wx=he({},Ji,{relatedTarget:0}),Gl=lt(Wx),Bx=he({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),zx=lt(Bx),$x=he({},Ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vx=lt($x),Hx=he({},Ns,{data:0}),hf=lt(Hx),Gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qx[t])?!!e[t]:!1}function dd(){return Yx}var Qx=he({},Ji,{key:function(t){if(t.key){var e=Gx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(t){return t.type==="keypress"?zo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jx=lt(Qx),Xx=he({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=lt(Xx),Zx=he({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),ew=lt(Zx),tw=he({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=lt(tw),rw=he({},Za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=lt(rw),iw=[9,13,27,32],hd=an&&"CompositionEvent"in window,ii=null;an&&"documentMode"in document&&(ii=document.documentMode);var ow=an&&"TextEvent"in window&&!ii,yg=an&&(!hd||ii&&8<ii&&11>=ii),pf=String.fromCharCode(32),mf=!1;function _g(t,e){switch(t){case"keyup":return iw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function aw(t,e){switch(t){case"compositionend":return vg(e);case"keypress":return e.which!==32?null:(mf=!0,pf);case"textInput":return t=e.data,t===pf&&mf?null:t;default:return null}}function lw(t,e){if(Vr)return t==="compositionend"||!hd&&_g(t,e)?(t=gg(),Bo=cd=kn=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yg&&e.locale!=="ko"?null:e.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cw[t.type]:e==="textarea"}function xg(t,e,n,r){Jm(r),e=aa(e,"onChange"),0<e.length&&(n=new ud("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oi=null,bi=null;function uw(t){Rg(t,0)}function el(t){var e=Kr(t);if(Vm(e))return t}function dw(t,e){if(t==="change")return e}var wg=!1;if(an){var Kl;if(an){var ql="oninput"in document;if(!ql){var yf=document.createElement("div");yf.setAttribute("oninput","return;"),ql=typeof yf.oninput=="function"}Kl=ql}else Kl=!1;wg=Kl&&(!document.documentMode||9<document.documentMode)}function _f(){oi&&(oi.detachEvent("onpropertychange",Sg),bi=oi=null)}function Sg(t){if(t.propertyName==="value"&&el(bi)){var e=[];xg(e,bi,t,sd(t)),tg(uw,e)}}function hw(t,e,n){t==="focusin"?(_f(),oi=e,bi=n,oi.attachEvent("onpropertychange",Sg)):t==="focusout"&&_f()}function fw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return el(bi)}function pw(t,e){if(t==="click")return el(e)}function mw(t,e){if(t==="input"||t==="change")return el(e)}function gw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var At=typeof Object.is=="function"?Object.is:gw;function Ni(t,e){if(At(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kc.call(e,s)||!At(t[s],e[s]))return!1}return!0}function vf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xf(t,e){var n=vf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vf(n)}}function Eg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Eg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cg(){for(var t=window,e=ea();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ea(t.document)}return e}function fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yw(t){var e=Cg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Eg(n.ownerDocument.documentElement,n)){if(r!==null&&fd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=xf(n,i);var o=xf(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _w=an&&"documentMode"in document&&11>=document.documentMode,Hr=null,Kc=null,ai=null,qc=!1;function wf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qc||Hr==null||Hr!==ea(r)||(r=Hr,"selectionStart"in r&&fd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ai&&Ni(ai,r)||(ai=r,r=aa(Kc,"onSelect"),0<r.length&&(e=new ud("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hr)))}function Eo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gr={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionend:Eo("Transition","TransitionEnd")},Yl={},bg={};an&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function tl(t){if(Yl[t])return Yl[t];if(!Gr[t])return t;var e=Gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bg)return Yl[t]=e[n];return t}var Ng=tl("animationend"),Ig=tl("animationiteration"),kg=tl("animationstart"),Tg=tl("transitionend"),Pg=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(t,e){Pg.set(t,e),Rr(e,[t])}for(var Ql=0;Ql<Sf.length;Ql++){var Jl=Sf[Ql],vw=Jl.toLowerCase(),xw=Jl[0].toUpperCase()+Jl.slice(1);Xn(vw,"on"+xw)}Xn(Ng,"onAnimationEnd");Xn(Ig,"onAnimationIteration");Xn(kg,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(Tg,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ww=new Set("cancel close invalid load scroll toggle".split(" ").concat(ei));function Ef(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vx(r,e,void 0,t),t.currentTarget=null}function Rg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Ef(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Ef(s,a,u),i=c}}}if(na)throw t=$c,na=!1,$c=null,t}function ie(t,e){var n=e[Zc];n===void 0&&(n=e[Zc]=new Set);var r=t+"__bubble";n.has(r)||(Ag(e,t,2,!1),n.add(r))}function Xl(t,e,n){var r=0;e&&(r|=4),Ag(n,t,r,e)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Ii(t){if(!t[Co]){t[Co]=!0,Um.forEach(function(n){n!=="selectionchange"&&(ww.has(n)||Xl(n,!1,t),Xl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Co]||(e[Co]=!0,Xl("selectionchange",!1,e))}}function Ag(t,e,n,r){switch(mg(e)){case 1:var s=Ox;break;case 4:s=Mx;break;default:s=ld}n=s.bind(null,e,n,t),s=void 0,!zc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=lr(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}tg(function(){var u=i,f=sd(n),d=[];e:{var h=Pg.get(t);if(h!==void 0){var _=ud,x=t;switch(t){case"keypress":if(zo(n)===0)break e;case"keydown":case"keyup":_=Jx;break;case"focusin":x="focus",_=Gl;break;case"focusout":x="blur",_=Gl;break;case"beforeblur":case"afterblur":_=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=ew;break;case Ng:case Ig:case kg:_=zx;break;case Tg:_=nw;break;case"scroll":_=Lx;break;case"wheel":_=sw;break;case"copy":case"cut":case"paste":_=Vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=ff}var w=(e&4)!==0,P=!w&&t==="scroll",g=w?h!==null?h+"Capture":null:h;w=[];for(var p=u,m;p!==null;){m=p;var S=m.stateNode;if(m.tag===5&&S!==null&&(m=S,g!==null&&(S=wi(p,g),S!=null&&w.push(ki(p,S,m)))),P)break;p=p.return}0<w.length&&(h=new _(h,x,null,n,f),d.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",h&&n!==Wc&&(x=n.relatedTarget||n.fromElement)&&(lr(x)||x[ln]))break e;if((_||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=u,x=x?lr(x):null,x!==null&&(P=Ar(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(_=null,x=u),_!==x)){if(w=df,S="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=ff,S="onPointerLeave",g="onPointerEnter",p="pointer"),P=_==null?h:Kr(_),m=x==null?h:Kr(x),h=new w(S,p+"leave",_,n,f),h.target=P,h.relatedTarget=m,S=null,lr(f)===u&&(w=new w(g,p+"enter",x,n,f),w.target=m,w.relatedTarget=P,S=w),P=S,_&&x)t:{for(w=_,g=x,p=0,m=w;m;m=Wr(m))p++;for(m=0,S=g;S;S=Wr(S))m++;for(;0<p-m;)w=Wr(w),p--;for(;0<m-p;)g=Wr(g),m--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=Wr(w),g=Wr(g)}w=null}else w=null;_!==null&&Cf(d,h,_,w,!1),x!==null&&P!==null&&Cf(d,P,x,w,!0)}}e:{if(h=u?Kr(u):window,_=h.nodeName&&h.nodeName.toLowerCase(),_==="select"||_==="input"&&h.type==="file")var N=dw;else if(gf(h))if(wg)N=mw;else{N=fw;var b=hw}else(_=h.nodeName)&&_.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=pw);if(N&&(N=N(t,u))){xg(d,N,n,f);break e}b&&b(t,h,u),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&Oc(h,"number",h.value)}switch(b=u?Kr(u):window,t){case"focusin":(gf(b)||b.contentEditable==="true")&&(Hr=b,Kc=u,ai=null);break;case"focusout":ai=Kc=Hr=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,wf(d,n,f);break;case"selectionchange":if(_w)break;case"keydown":case"keyup":wf(d,n,f)}var C;if(hd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vr?_g(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(yg&&n.locale!=="ko"&&(Vr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Vr&&(C=gg()):(kn=f,cd="value"in kn?kn.value:kn.textContent,Vr=!0)),b=aa(u,y),0<b.length&&(y=new hf(y,t,null,n,f),d.push({event:y,listeners:b}),C?y.data=C:(C=vg(n),C!==null&&(y.data=C)))),(C=ow?aw(t,n):lw(t,n))&&(u=aa(u,"onBeforeInput"),0<u.length&&(f=new hf("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}Rg(d,e)})}function ki(t,e,n){return{instance:t,listener:e,currentTarget:n}}function aa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wi(t,n),i!=null&&r.unshift(ki(t,i,s)),i=wi(t,e),i!=null&&r.push(ki(t,i,s))),t=t.return}return r}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cf(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=wi(n,i),c!=null&&o.unshift(ki(n,c,a))):s||(c=wi(n,i),c!=null&&o.push(ki(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Sw=/\r\n?/g,Ew=/\u0000|\uFFFD/g;function bf(t){return(typeof t=="string"?t:""+t).replace(Sw,`
`).replace(Ew,"")}function bo(t,e,n){if(e=bf(e),bf(t)!==e&&n)throw Error(T(425))}function la(){}var Yc=null,Qc=null;function Jc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xc=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Nf=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Nf<"u"?function(t){return Nf.resolve(null).then(t).catch(Nw)}:Xc;function Nw(t){setTimeout(function(){throw t})}function ec(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ci(e)}function On(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function If(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Is=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Is,Ti="__reactProps$"+Is,ln="__reactContainer$"+Is,Zc="__reactEvents$"+Is,Iw="__reactListeners$"+Is,kw="__reactHandles$"+Is;function lr(t){var e=t[Ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ln]||n[Ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=If(t);t!==null;){if(n=t[Ft])return n;t=If(t)}return e}t=n,n=t.parentNode}return null}function Xi(t){return t=t[Ft]||t[ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function nl(t){return t[Ti]||null}var eu=[],qr=-1;function Zn(t){return{current:t}}function oe(t){0>qr||(t.current=eu[qr],eu[qr]=null,qr--)}function ne(t,e){qr++,eu[qr]=t.current,t.current=e}var Hn={},Oe=Zn(Hn),Ke=Zn(!1),yr=Hn;function fs(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function qe(t){return t=t.childContextTypes,t!=null}function ca(){oe(Ke),oe(Oe)}function kf(t,e,n){if(Oe.current!==Hn)throw Error(T(168));ne(Oe,e),ne(Ke,n)}function jg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(T(108,hx(t)||"Unknown",s));return he({},n,r)}function ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,yr=Oe.current,ne(Oe,t),ne(Ke,Ke.current),!0}function Tf(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=jg(t,e,yr),r.__reactInternalMemoizedMergedChildContext=t,oe(Ke),oe(Oe),ne(Oe,t)):oe(Ke),ne(Ke,n)}var Jt=null,rl=!1,tc=!1;function Dg(t){Jt===null?Jt=[t]:Jt.push(t)}function Tw(t){rl=!0,Dg(t)}function er(){if(!tc&&Jt!==null){tc=!0;var t=0,e=Q;try{var n=Jt;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jt=null,rl=!1}catch(s){throw Jt!==null&&(Jt=Jt.slice(t+1)),ig(id,er),s}finally{Q=e,tc=!1}}return null}var Yr=[],Qr=0,da=null,ha=0,dt=[],ht=0,_r=null,Zt=1,en="";function sr(t,e){Yr[Qr++]=ha,Yr[Qr++]=da,da=t,ha=e}function Og(t,e,n){dt[ht++]=Zt,dt[ht++]=en,dt[ht++]=_r,_r=t;var r=Zt;t=en;var s=32-kt(r)-1;r&=~(1<<s),n+=1;var i=32-kt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zt=1<<32-kt(e)+s|n<<s|r,en=i+t}else Zt=1<<i|n<<s|r,en=t}function pd(t){t.return!==null&&(sr(t,1),Og(t,1,0))}function md(t){for(;t===da;)da=Yr[--Qr],Yr[Qr]=null,ha=Yr[--Qr],Yr[Qr]=null;for(;t===_r;)_r=dt[--ht],dt[ht]=null,en=dt[--ht],dt[ht]=null,Zt=dt[--ht],dt[ht]=null}var nt=null,tt=null,ae=!1,bt=null;function Mg(t,e){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nt=t,tt=On(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nt=t,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_r!==null?{id:Zt,overflow:en}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nt=t,tt=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(ae){var e=tt;if(e){var n=e;if(!Pf(t,e)){if(tu(t))throw Error(T(418));e=On(n.nextSibling);var r=nt;e&&Pf(t,e)?Mg(r,n):(t.flags=t.flags&-4097|2,ae=!1,nt=t)}}else{if(tu(t))throw Error(T(418));t.flags=t.flags&-4097|2,ae=!1,nt=t}}}function Rf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nt=t}function No(t){if(t!==nt)return!1;if(!ae)return Rf(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jc(t.type,t.memoizedProps)),e&&(e=tt)){if(tu(t))throw Lg(),Error(T(418));for(;e;)Mg(t,e),e=On(e.nextSibling)}if(Rf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tt=On(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tt=null}}else tt=nt?On(t.stateNode.nextSibling):null;return!0}function Lg(){for(var t=tt;t;)t=On(t.nextSibling)}function ps(){tt=nt=null,ae=!1}function gd(t){bt===null?bt=[t]:bt.push(t)}var Pw=pn.ReactCurrentBatchConfig;function $s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Io(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Af(t){var e=t._init;return e(t._payload)}function Fg(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Un(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,m,S){return p===null||p.tag!==6?(p=lc(m,g.mode,S),p.return=g,p):(p=s(p,m),p.return=g,p)}function c(g,p,m,S){var N=m.type;return N===$r?f(g,p,m.props.children,S,m.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xn&&Af(N)===p.type)?(S=s(p,m.props),S.ref=$s(g,p,m),S.return=g,S):(S=Yo(m.type,m.key,m.props,null,g.mode,S),S.ref=$s(g,p,m),S.return=g,S)}function u(g,p,m,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=cc(m,g.mode,S),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function f(g,p,m,S,N){return p===null||p.tag!==7?(p=mr(m,g.mode,S,N),p.return=g,p):(p=s(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=lc(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case go:return m=Yo(p.type,p.key,p.props,null,g.mode,m),m.ref=$s(g,null,p),m.return=g,m;case zr:return p=cc(p,g.mode,m),p.return=g,p;case xn:var S=p._init;return d(g,S(p._payload),m)}if(Xs(p)||Fs(p))return p=mr(p,g.mode,m,null),p.return=g,p;Io(g,p)}return null}function h(g,p,m,S){var N=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return N!==null?null:a(g,p,""+m,S);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case go:return m.key===N?c(g,p,m,S):null;case zr:return m.key===N?u(g,p,m,S):null;case xn:return N=m._init,h(g,p,N(m._payload),S)}if(Xs(m)||Fs(m))return N!==null?null:f(g,p,m,S,null);Io(g,m)}return null}function _(g,p,m,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(m)||null,a(p,g,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case go:return g=g.get(S.key===null?m:S.key)||null,c(p,g,S,N);case zr:return g=g.get(S.key===null?m:S.key)||null,u(p,g,S,N);case xn:var b=S._init;return _(g,p,m,b(S._payload),N)}if(Xs(S)||Fs(S))return g=g.get(m)||null,f(p,g,S,N,null);Io(p,S)}return null}function x(g,p,m,S){for(var N=null,b=null,C=p,y=p=0,v=null;C!==null&&y<m.length;y++){C.index>y?(v=C,C=null):v=C.sibling;var E=h(g,C,m[y],S);if(E===null){C===null&&(C=v);break}t&&C&&E.alternate===null&&e(g,C),p=i(E,p,y),b===null?N=E:b.sibling=E,b=E,C=v}if(y===m.length)return n(g,C),ae&&sr(g,y),N;if(C===null){for(;y<m.length;y++)C=d(g,m[y],S),C!==null&&(p=i(C,p,y),b===null?N=C:b.sibling=C,b=C);return ae&&sr(g,y),N}for(C=r(g,C);y<m.length;y++)v=_(C,g,y,m[y],S),v!==null&&(t&&v.alternate!==null&&C.delete(v.key===null?y:v.key),p=i(v,p,y),b===null?N=v:b.sibling=v,b=v);return t&&C.forEach(function(I){return e(g,I)}),ae&&sr(g,y),N}function w(g,p,m,S){var N=Fs(m);if(typeof N!="function")throw Error(T(150));if(m=N.call(m),m==null)throw Error(T(151));for(var b=N=null,C=p,y=p=0,v=null,E=m.next();C!==null&&!E.done;y++,E=m.next()){C.index>y?(v=C,C=null):v=C.sibling;var I=h(g,C,E.value,S);if(I===null){C===null&&(C=v);break}t&&C&&I.alternate===null&&e(g,C),p=i(I,p,y),b===null?N=I:b.sibling=I,b=I,C=v}if(E.done)return n(g,C),ae&&sr(g,y),N;if(C===null){for(;!E.done;y++,E=m.next())E=d(g,E.value,S),E!==null&&(p=i(E,p,y),b===null?N=E:b.sibling=E,b=E);return ae&&sr(g,y),N}for(C=r(g,C);!E.done;y++,E=m.next())E=_(C,g,y,E.value,S),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?y:E.key),p=i(E,p,y),b===null?N=E:b.sibling=E,b=E);return t&&C.forEach(function(A){return e(g,A)}),ae&&sr(g,y),N}function P(g,p,m,S){if(typeof m=="object"&&m!==null&&m.type===$r&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case go:e:{for(var N=m.key,b=p;b!==null;){if(b.key===N){if(N=m.type,N===$r){if(b.tag===7){n(g,b.sibling),p=s(b,m.props.children),p.return=g,g=p;break e}}else if(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xn&&Af(N)===b.type){n(g,b.sibling),p=s(b,m.props),p.ref=$s(g,b,m),p.return=g,g=p;break e}n(g,b);break}else e(g,b);b=b.sibling}m.type===$r?(p=mr(m.props.children,g.mode,S,m.key),p.return=g,g=p):(S=Yo(m.type,m.key,m.props,null,g.mode,S),S.ref=$s(g,p,m),S.return=g,g=S)}return o(g);case zr:e:{for(b=m.key;p!==null;){if(p.key===b)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=cc(m,g.mode,S),p.return=g,g=p}return o(g);case xn:return b=m._init,P(g,p,b(m._payload),S)}if(Xs(m))return x(g,p,m,S);if(Fs(m))return w(g,p,m,S);Io(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,m),p.return=g,g=p):(n(g,p),p=lc(m,g.mode,S),p.return=g,g=p),o(g)):n(g,p)}return P}var ms=Fg(!0),Ug=Fg(!1),fa=Zn(null),pa=null,Jr=null,yd=null;function _d(){yd=Jr=pa=null}function vd(t){var e=fa.current;oe(fa),t._currentValue=e}function ru(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function is(t,e){pa=t,yd=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function vt(t){var e=t._currentValue;if(yd!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(pa===null)throw Error(T(308));Jr=t,pa.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var cr=null;function xd(t){cr===null?cr=[t]:cr.push(t)}function Wg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xd(e)):(n.next=s.next,s.next=n),e.interleaved=n,cn(t,r)}function cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wn=!1;function wd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cn(t,n)}return s=r.interleaved,s===null?(e.next=e,xd(r)):(e.next=s.next,s.next=e),r.interleaved=e,cn(t,n)}function $o(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}function jf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ma(t,e,n,r){var s=t.updateQueue;wn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,f=u=c=null,a=i;do{var h=a.lane,_=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,w=a;switch(h=e,_=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){d=x.call(_,d,h);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,h=typeof x=="function"?x.call(_,d,h):x,h==null)break e;d=he({},d,h);break e;case 2:wn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else _={eventTime:_,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=_,c=d):f=f.next=_,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xr|=o,t.lanes=o,t.memoizedState=d}}function Df(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var Zi={},Bt=Zn(Zi),Pi=Zn(Zi),Ri=Zn(Zi);function ur(t){if(t===Zi)throw Error(T(174));return t}function Sd(t,e){switch(ne(Ri,e),ne(Pi,t),ne(Bt,Zi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lc(e,t)}oe(Bt),ne(Bt,e)}function gs(){oe(Bt),oe(Pi),oe(Ri)}function zg(t){ur(Ri.current);var e=ur(Bt.current),n=Lc(e,t.type);e!==n&&(ne(Pi,t),ne(Bt,n))}function Ed(t){Pi.current===t&&(oe(Bt),oe(Pi))}var ce=Zn(0);function ga(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nc=[];function Cd(){for(var t=0;t<nc.length;t++)nc[t]._workInProgressVersionPrimary=null;nc.length=0}var Vo=pn.ReactCurrentDispatcher,rc=pn.ReactCurrentBatchConfig,vr=0,de=null,_e=null,Ee=null,ya=!1,li=!1,Ai=0,Rw=0;function Re(){throw Error(T(321))}function bd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!At(t[n],e[n]))return!1;return!0}function Nd(t,e,n,r,s,i){if(vr=i,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vo.current=t===null||t.memoizedState===null?Ow:Mw,t=n(r,s),li){i=0;do{if(li=!1,Ai=0,25<=i)throw Error(T(301));i+=1,Ee=_e=null,e.updateQueue=null,Vo.current=Lw,t=n(r,s)}while(li)}if(Vo.current=_a,e=_e!==null&&_e.next!==null,vr=0,Ee=_e=de=null,ya=!1,e)throw Error(T(300));return t}function Id(){var t=Ai!==0;return Ai=0,t}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?de.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function xt(){if(_e===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=Ee===null?de.memoizedState:Ee.next;if(e!==null)Ee=e,_e=t;else{if(t===null)throw Error(T(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Ee===null?de.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function ji(t,e){return typeof e=="function"?e(t):e}function sc(t){var e=xt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=_e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var f=u.lane;if((vr&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,de.lanes|=f,xr|=f}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,At(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,de.lanes|=i,xr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ic(t){var e=xt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);At(i,e.memoizedState)||(He=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $g(){}function Vg(t,e){var n=de,r=xt(),s=e(),i=!At(r.memoizedState,s);if(i&&(r.memoizedState=s,He=!0),r=r.queue,kd(Kg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,Di(9,Gg.bind(null,n,r,s,e),void 0,null),Ne===null)throw Error(T(349));vr&30||Hg(n,e,s)}return s}function Hg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gg(t,e,n,r){e.value=n,e.getSnapshot=r,qg(e)&&Yg(t)}function Kg(t,e,n){return n(function(){qg(e)&&Yg(t)})}function qg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!At(t,n)}catch{return!0}}function Yg(t){var e=cn(t,1);e!==null&&Tt(e,t,1,-1)}function Of(t){var e=Lt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},e.queue=t,t=t.dispatch=Dw.bind(null,de,t),[e.memoizedState,t]}function Di(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qg(){return xt().memoizedState}function Ho(t,e,n,r){var s=Lt();de.flags|=t,s.memoizedState=Di(1|e,n,void 0,r===void 0?null:r)}function sl(t,e,n,r){var s=xt();r=r===void 0?null:r;var i=void 0;if(_e!==null){var o=_e.memoizedState;if(i=o.destroy,r!==null&&bd(r,o.deps)){s.memoizedState=Di(e,n,i,r);return}}de.flags|=t,s.memoizedState=Di(1|e,n,i,r)}function Mf(t,e){return Ho(8390656,8,t,e)}function kd(t,e){return sl(2048,8,t,e)}function Jg(t,e){return sl(4,2,t,e)}function Xg(t,e){return sl(4,4,t,e)}function Zg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ey(t,e,n){return n=n!=null?n.concat([t]):null,sl(4,4,Zg.bind(null,e,t),n)}function Td(){}function ty(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ny(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ry(t,e,n){return vr&21?(At(n,e)||(n=lg(),de.lanes|=n,xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function Aw(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=rc.transition;rc.transition={};try{t(!1),e()}finally{Q=n,rc.transition=r}}function sy(){return xt().memoizedState}function jw(t,e,n){var r=Fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iy(t))oy(e,n);else if(n=Wg(t,e,n,r),n!==null){var s=Ue();Tt(n,t,r,s),ay(n,e,r)}}function Dw(t,e,n){var r=Fn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iy(t))oy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,At(a,o)){var c=e.interleaved;c===null?(s.next=s,xd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Wg(t,e,s,r),n!==null&&(s=Ue(),Tt(n,t,r,s),ay(n,e,r))}}function iy(t){var e=t.alternate;return t===de||e!==null&&e===de}function oy(t,e){li=ya=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ay(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}var _a={readContext:vt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Ow={readContext:vt,useCallback:function(t,e){return Lt().memoizedState=[t,e===void 0?null:e],t},useContext:vt,useEffect:Mf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ho(4194308,4,Zg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ho(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ho(4,2,t,e)},useMemo:function(t,e){var n=Lt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jw.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=Lt();return t={current:t},e.memoizedState=t},useState:Of,useDebugValue:Td,useDeferredValue:function(t){return Lt().memoizedState=t},useTransition:function(){var t=Of(!1),e=t[0];return t=Aw.bind(null,t[1]),Lt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,s=Lt();if(ae){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Ne===null)throw Error(T(349));vr&30||Hg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Mf(Kg.bind(null,r,i,t),[t]),r.flags|=2048,Di(9,Gg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lt(),e=Ne.identifierPrefix;if(ae){var n=en,r=Zt;n=(r&~(1<<32-kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ai++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Rw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mw={readContext:vt,useCallback:ty,useContext:vt,useEffect:kd,useImperativeHandle:ey,useInsertionEffect:Jg,useLayoutEffect:Xg,useMemo:ny,useReducer:sc,useRef:Qg,useState:function(){return sc(ji)},useDebugValue:Td,useDeferredValue:function(t){var e=xt();return ry(e,_e.memoizedState,t)},useTransition:function(){var t=sc(ji)[0],e=xt().memoizedState;return[t,e]},useMutableSource:$g,useSyncExternalStore:Vg,useId:sy,unstable_isNewReconciler:!1},Lw={readContext:vt,useCallback:ty,useContext:vt,useEffect:kd,useImperativeHandle:ey,useInsertionEffect:Jg,useLayoutEffect:Xg,useMemo:ny,useReducer:ic,useRef:Qg,useState:function(){return ic(ji)},useDebugValue:Td,useDeferredValue:function(t){var e=xt();return _e===null?e.memoizedState=t:ry(e,_e.memoizedState,t)},useTransition:function(){var t=ic(ji)[0],e=xt().memoizedState;return[t,e]},useMutableSource:$g,useSyncExternalStore:Vg,useId:sy,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function su(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var il={isMounted:function(t){return(t=t._reactInternals)?Ar(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ue(),s=Fn(t),i=sn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Mn(t,i,s),e!==null&&(Tt(e,t,s,r),$o(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ue(),s=Fn(t),i=sn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Mn(t,i,s),e!==null&&(Tt(e,t,s,r),$o(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),r=Fn(t),s=sn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Mn(t,s,r),e!==null&&(Tt(e,t,r,n),$o(e,t,r))}};function Lf(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ni(n,r)||!Ni(s,i):!0}function ly(t,e,n){var r=!1,s=Hn,i=e.contextType;return typeof i=="object"&&i!==null?i=vt(i):(s=qe(e)?yr:Oe.current,r=e.contextTypes,i=(r=r!=null)?fs(t,s):Hn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=il,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ff(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&il.enqueueReplaceState(e,e.state,null)}function iu(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vt(i):(i=qe(e)?yr:Oe.current,s.context=fs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(su(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&il.enqueueReplaceState(s,s.state,null),ma(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ys(t,e){try{var n="",r=e;do n+=dx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function oc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ou(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fw=typeof WeakMap=="function"?WeakMap:Map;function cy(t,e,n){n=sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xa||(xa=!0,gu=r),ou(t,e)},n}function uy(t,e,n){n=sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ou(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ou(t,e),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Uf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Fw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Xw.bind(null,t,e,n),e.then(t,t))}function Wf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bf(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sn(-1,1),e.tag=2,Mn(n,e,1))),n.lanes|=1),t)}var Uw=pn.ReactCurrentOwner,He=!1;function Le(t,e,n,r){e.child=t===null?Ug(e,null,n,r):ms(e,t.child,n,r)}function zf(t,e,n,r,s){n=n.render;var i=e.ref;return is(e,s),r=Nd(t,e,n,r,i,s),n=Id(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,un(t,e,s)):(ae&&n&&pd(e),e.flags|=1,Le(t,e,r,s),e.child)}function $f(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ld(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dy(t,e,i,r,s)):(t=Yo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(o,r)&&t.ref===e.ref)return un(t,e,s)}return e.flags|=1,t=Un(i,r),t.ref=e.ref,t.return=e,e.child=t}function dy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ni(i,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,un(t,e,s)}return au(t,e,n,r,s)}function hy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Zr,Xe),Xe|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ne(Zr,Xe),Xe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ne(Zr,Xe),Xe|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ne(Zr,Xe),Xe|=r;return Le(t,e,s,n),e.child}function fy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function au(t,e,n,r,s){var i=qe(n)?yr:Oe.current;return i=fs(e,i),is(e,s),n=Nd(t,e,n,r,i,s),r=Id(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,un(t,e,s)):(ae&&r&&pd(e),e.flags|=1,Le(t,e,n,s),e.child)}function Vf(t,e,n,r,s){if(qe(n)){var i=!0;ua(e)}else i=!1;if(is(e,s),e.stateNode===null)Go(t,e),ly(e,n,r),iu(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=vt(u):(u=qe(n)?yr:Oe.current,u=fs(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Ff(e,o,r,u),wn=!1;var h=e.memoizedState;o.state=h,ma(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Ke.current||wn?(typeof f=="function"&&(su(e,n,f,r),c=e.memoizedState),(a=wn||Lf(e,n,a,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Et(e.type,a),o.props=u,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=vt(c):(c=qe(n)?yr:Oe.current,c=fs(e,c));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&Ff(e,o,r,c),wn=!1,h=e.memoizedState,o.state=h,ma(e,r,o,s);var x=e.memoizedState;a!==d||h!==x||Ke.current||wn?(typeof _=="function"&&(su(e,n,_,r),x=e.memoizedState),(u=wn||Lf(e,n,u,r,h,x,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return lu(t,e,n,r,i,s)}function lu(t,e,n,r,s,i){fy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Tf(e,n,!1),un(t,e,i);r=e.stateNode,Uw.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ms(e,t.child,null,i),e.child=ms(e,null,a,i)):Le(t,e,a,i),e.memoizedState=r.state,s&&Tf(e,n,!0),e.child}function py(t){var e=t.stateNode;e.pendingContext?kf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kf(t,e.context,!1),Sd(t,e.containerInfo)}function Hf(t,e,n,r,s){return ps(),gd(s),e.flags|=256,Le(t,e,n,r),e.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function my(t,e,n){var r=e.pendingProps,s=ce.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ne(ce,s&1),t===null)return nu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ll(o,r,0,null),t=mr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uu(n),e.memoizedState=cu,t):Pd(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Ww(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Un(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Un(a,i):(i=mr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cu,r}return i=t.child,t=i.sibling,r=Un(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pd(t,e){return e=ll({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ko(t,e,n,r){return r!==null&&gd(r),ms(e,t.child,null,n),t=Pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ww(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=oc(Error(T(422))),ko(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ll({mode:"visible",children:r.children},s,0,null),i=mr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ms(e,t.child,null,o),e.child.memoizedState=uu(o),e.memoizedState=cu,i);if(!(e.mode&1))return ko(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(T(419)),r=oc(i,r,void 0),ko(t,e,o,r)}if(a=(o&t.childLanes)!==0,He||a){if(r=Ne,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cn(t,s),Tt(r,t,s,-1))}return Md(),r=oc(Error(T(421))),ko(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Zw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,tt=On(s.nextSibling),nt=e,ae=!0,bt=null,t!==null&&(dt[ht++]=Zt,dt[ht++]=en,dt[ht++]=_r,Zt=t.id,en=t.overflow,_r=e),e=Pd(e,r.children),e.flags|=4096,e)}function Gf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ru(t.return,e,n)}function ac(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function gy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Le(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gf(t,n,e);else if(t.tag===19)Gf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ne(ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ga(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ac(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ga(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ac(e,!0,n,null,i);break;case"together":ac(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Go(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bw(t,e,n){switch(e.tag){case 3:py(e),ps();break;case 5:zg(e);break;case 1:qe(e.type)&&ua(e);break;case 4:Sd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ne(fa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ne(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?my(t,e,n):(ne(ce,ce.current&1),t=un(t,e,n),t!==null?t.sibling:null);ne(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,hy(t,e,n)}return un(t,e,n)}var yy,du,_y,vy;yy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};du=function(){};_y=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ur(Bt.current);var i=null;switch(n){case"input":s=jc(t,s),r=jc(t,r),i=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":s=Mc(t,s),r=Mc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=la)}Fc(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ie("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};vy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vs(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ae(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zw(t,e,n){var r=e.pendingProps;switch(md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(e),null;case 1:return qe(e.type)&&ca(),Ae(e),null;case 3:return r=e.stateNode,gs(),oe(Ke),oe(Oe),Cd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(No(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bt!==null&&(vu(bt),bt=null))),du(t,e),Ae(e),null;case 5:Ed(e);var s=ur(Ri.current);if(n=e.type,t!==null&&e.stateNode!=null)_y(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return Ae(e),null}if(t=ur(Bt.current),No(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ft]=e,r[Ti]=i,t=(e.mode&1)!==0,n){case"dialog":ie("cancel",r),ie("close",r);break;case"iframe":case"object":case"embed":ie("load",r);break;case"video":case"audio":for(s=0;s<ei.length;s++)ie(ei[s],r);break;case"source":ie("error",r);break;case"img":case"image":case"link":ie("error",r),ie("load",r);break;case"details":ie("toggle",r);break;case"input":ef(r,i),ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ie("invalid",r);break;case"textarea":nf(r,i),ie("invalid",r)}Fc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&bo(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&bo(r.textContent,a,t),s=["children",""+a]):vi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ie("scroll",r)}switch(n){case"input":yo(r),tf(r,i,!0);break;case"textarea":yo(r),rf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=la)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Km(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ft]=e,t[Ti]=r,yy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uc(n,r),n){case"dialog":ie("cancel",t),ie("close",t),s=r;break;case"iframe":case"object":case"embed":ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<ei.length;s++)ie(ei[s],t);s=r;break;case"source":ie("error",t),s=r;break;case"img":case"image":case"link":ie("error",t),ie("load",t),s=r;break;case"details":ie("toggle",t),s=r;break;case"input":ef(t,r),s=jc(t,r),ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),ie("invalid",t);break;case"textarea":nf(t,r),s=Mc(t,r),ie("invalid",t);break;default:s=r}Fc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Qm(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qm(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xi(t,c):typeof c=="number"&&xi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ie("scroll",t):c!=null&&ed(t,i,c,o))}switch(n){case"input":yo(t),tf(t,r,!1);break;case"textarea":yo(t),rf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ts(t,!!r.multiple,i,!1):r.defaultValue!=null&&ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=la)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ae(e),null;case 6:if(t&&e.stateNode!=null)vy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=ur(Ri.current),ur(Bt.current),No(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ft]=e,(i=r.nodeValue!==n)&&(t=nt,t!==null))switch(t.tag){case 3:bo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ft]=e,e.stateNode=r}return Ae(e),null;case 13:if(oe(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&tt!==null&&e.mode&1&&!(e.flags&128))Lg(),ps(),e.flags|=98560,i=!1;else if(i=No(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[Ft]=e}else ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ae(e),i=!1}else bt!==null&&(vu(bt),bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?xe===0&&(xe=3):Md())),e.updateQueue!==null&&(e.flags|=4),Ae(e),null);case 4:return gs(),du(t,e),t===null&&Ii(e.stateNode.containerInfo),Ae(e),null;case 10:return vd(e.type._context),Ae(e),null;case 17:return qe(e.type)&&ca(),Ae(e),null;case 19:if(oe(ce),i=e.memoizedState,i===null)return Ae(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vs(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ga(t),o!==null){for(e.flags|=128,Vs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ne(ce,ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&me()>_s&&(e.flags|=128,r=!0,Vs(i,!1),e.lanes=4194304)}else{if(!r)if(t=ga(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Ae(e),null}else 2*me()-i.renderingStartTime>_s&&n!==1073741824&&(e.flags|=128,r=!0,Vs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=me(),e.sibling=null,n=ce.current,ne(ce,r?n&1|2:n&1),e):(Ae(e),null);case 22:case 23:return Od(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xe&1073741824&&(Ae(e),e.subtreeFlags&6&&(e.flags|=8192)):Ae(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function $w(t,e){switch(md(e),e.tag){case 1:return qe(e.type)&&ca(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gs(),oe(Ke),oe(Oe),Cd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ed(e),null;case 13:if(oe(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ce),null;case 4:return gs(),null;case 10:return vd(e.type._context),null;case 22:case 23:return Od(),null;case 24:return null;default:return null}}var To=!1,je=!1,Vw=typeof WeakSet=="function"?WeakSet:Set,O=null;function Xr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function hu(t,e,n){try{n()}catch(r){pe(t,e,r)}}var Kf=!1;function Hw(t,e){if(Yc=ia,t=Cg(),fd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var _;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)h=d,d=_;for(;;){if(d===t)break t;if(h===n&&++u===s&&(a=o),h===i&&++f===r&&(c=o),(_=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=_}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qc={focusedElem:t,selectionRange:n},ia=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,P=x.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Et(e.type,w),P);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(S){pe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return x=Kf,Kf=!1,x}function ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hu(e,n,i)}s=s.next}while(s!==r)}}function ol(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xy(t){var e=t.alternate;e!==null&&(t.alternate=null,xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ft],delete e[Ti],delete e[Zc],delete e[Iw],delete e[kw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wy(t){return t.tag===5||t.tag===3||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=la));else if(r!==4&&(t=t.child,t!==null))for(pu(t,e,n),t=t.sibling;t!==null;)pu(t,e,n),t=t.sibling}function mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mu(t,e,n),t=t.sibling;t!==null;)mu(t,e,n),t=t.sibling}var ke=null,Ct=!1;function _n(t,e,n){for(n=n.child;n!==null;)Sy(t,e,n),n=n.sibling}function Sy(t,e,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Xa,n)}catch{}switch(n.tag){case 5:je||Xr(n,e);case 6:var r=ke,s=Ct;ke=null,_n(t,e,n),ke=r,Ct=s,ke!==null&&(Ct?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(Ct?(t=ke,n=n.stateNode,t.nodeType===8?ec(t.parentNode,n):t.nodeType===1&&ec(t,n),Ci(t)):ec(ke,n.stateNode));break;case 4:r=ke,s=Ct,ke=n.stateNode.containerInfo,Ct=!0,_n(t,e,n),ke=r,Ct=s;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hu(n,e,o),s=s.next}while(s!==r)}_n(t,e,n);break;case 1:if(!je&&(Xr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,e,a)}_n(t,e,n);break;case 21:_n(t,e,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,_n(t,e,n),je=r):_n(t,e,n);break;default:_n(t,e,n)}}function Yf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vw),e.forEach(function(r){var s=e1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function St(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ke=a.stateNode,Ct=!1;break e;case 3:ke=a.stateNode.containerInfo,Ct=!0;break e;case 4:ke=a.stateNode.containerInfo,Ct=!0;break e}a=a.return}if(ke===null)throw Error(T(160));Sy(i,o,s),ke=null,Ct=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){pe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ey(e,t),e=e.sibling}function Ey(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(St(e,t),Mt(t),r&4){try{ci(3,t,t.return),ol(3,t)}catch(w){pe(t,t.return,w)}try{ci(5,t,t.return)}catch(w){pe(t,t.return,w)}}break;case 1:St(e,t),Mt(t),r&512&&n!==null&&Xr(n,n.return);break;case 5:if(St(e,t),Mt(t),r&512&&n!==null&&Xr(n,n.return),t.flags&32){var s=t.stateNode;try{xi(s,"")}catch(w){pe(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Hm(s,i),Uc(a,o);var u=Uc(a,i);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?Qm(s,d):f==="dangerouslySetInnerHTML"?qm(s,d):f==="children"?xi(s,d):ed(s,f,d,u)}switch(a){case"input":Dc(s,i);break;case"textarea":Gm(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?ts(s,!!i.multiple,_,!1):h!==!!i.multiple&&(i.defaultValue!=null?ts(s,!!i.multiple,i.defaultValue,!0):ts(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ti]=i}catch(w){pe(t,t.return,w)}}break;case 6:if(St(e,t),Mt(t),r&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){pe(t,t.return,w)}}break;case 3:if(St(e,t),Mt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(e.containerInfo)}catch(w){pe(t,t.return,w)}break;case 4:St(e,t),Mt(t);break;case 13:St(e,t),Mt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jd=me())),r&4&&Yf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(je=(u=je)||f,St(e,t),je=u):St(e,t),Mt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(O=t,f=t.child;f!==null;){for(d=O=f;O!==null;){switch(h=O,_=h.child,h.tag){case 0:case 11:case 14:case 15:ci(4,h,h.return);break;case 1:Xr(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){pe(r,n,w)}}break;case 5:Xr(h,h.return);break;case 22:if(h.memoizedState!==null){Jf(d);continue}}_!==null?(_.return=h,O=_):Jf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Ym("display",o))}catch(w){pe(t,t.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){pe(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:St(e,t),Mt(t),r&4&&Yf(t);break;case 21:break;default:St(e,t),Mt(t)}}function Mt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wy(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xi(s,""),r.flags&=-33);var i=qf(t);mu(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qf(t);pu(t,a,o);break;default:throw Error(T(161))}}catch(c){pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gw(t,e,n){O=t,Cy(t)}function Cy(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||To;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||je;a=To;var u=je;if(To=o,(je=c)&&!u)for(O=s;O!==null;)o=O,c=o.child,o.tag===22&&o.memoizedState!==null?Xf(s):c!==null?(c.return=o,O=c):Xf(s);for(;i!==null;)O=i,Cy(i),i=i.sibling;O=s,To=a,je=u}Qf(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):Qf(t)}}function Qf(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||ol(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!je)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Et(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Df(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Df(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ci(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}je||e.flags&512&&fu(e)}catch(h){pe(e,e.return,h)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function Jf(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function Xf(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ol(4,e)}catch(c){pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){pe(e,s,c)}}var i=e.return;try{fu(e)}catch(c){pe(e,i,c)}break;case 5:var o=e.return;try{fu(e)}catch(c){pe(e,o,c)}}}catch(c){pe(e,e.return,c)}if(e===t){O=null;break}var a=e.sibling;if(a!==null){a.return=e.return,O=a;break}O=e.return}}var Kw=Math.ceil,va=pn.ReactCurrentDispatcher,Rd=pn.ReactCurrentOwner,gt=pn.ReactCurrentBatchConfig,K=0,Ne=null,ye=null,Te=0,Xe=0,Zr=Zn(0),xe=0,Oi=null,xr=0,al=0,Ad=0,ui=null,Ve=null,jd=0,_s=1/0,Qt=null,xa=!1,gu=null,Ln=null,Po=!1,Tn=null,wa=0,di=0,yu=null,Ko=-1,qo=0;function Ue(){return K&6?me():Ko!==-1?Ko:Ko=me()}function Fn(t){return t.mode&1?K&2&&Te!==0?Te&-Te:Pw.transition!==null?(qo===0&&(qo=lg()),qo):(t=Q,t!==0||(t=window.event,t=t===void 0?16:mg(t.type)),t):1}function Tt(t,e,n,r){if(50<di)throw di=0,yu=null,Error(T(185));Qi(t,n,r),(!(K&2)||t!==Ne)&&(t===Ne&&(!(K&2)&&(al|=n),xe===4&&Cn(t,Te)),Ye(t,r),n===1&&K===0&&!(e.mode&1)&&(_s=me()+500,rl&&er()))}function Ye(t,e){var n=t.callbackNode;Px(t,e);var r=sa(t,t===Ne?Te:0);if(r===0)n!==null&&af(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&af(n),e===1)t.tag===0?Tw(Zf.bind(null,t)):Dg(Zf.bind(null,t)),bw(function(){!(K&6)&&er()}),n=null;else{switch(cg(r)){case 1:n=id;break;case 4:n=og;break;case 16:n=ra;break;case 536870912:n=ag;break;default:n=ra}n=Ay(n,by.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function by(t,e){if(Ko=-1,qo=0,K&6)throw Error(T(327));var n=t.callbackNode;if(os()&&t.callbackNode!==n)return null;var r=sa(t,t===Ne?Te:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sa(t,r);else{e=r;var s=K;K|=2;var i=Iy();(Ne!==t||Te!==e)&&(Qt=null,_s=me()+500,pr(t,e));do try{Qw();break}catch(a){Ny(t,a)}while(1);_d(),va.current=i,K=s,ye!==null?e=0:(Ne=null,Te=0,e=xe)}if(e!==0){if(e===2&&(s=Vc(t),s!==0&&(r=s,e=_u(t,s))),e===1)throw n=Oi,pr(t,0),Cn(t,r),Ye(t,me()),n;if(e===6)Cn(t,r);else{if(s=t.current.alternate,!(r&30)&&!qw(s)&&(e=Sa(t,r),e===2&&(i=Vc(t),i!==0&&(r=i,e=_u(t,i))),e===1))throw n=Oi,pr(t,0),Cn(t,r),Ye(t,me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:ir(t,Ve,Qt);break;case 3:if(Cn(t,r),(r&130023424)===r&&(e=jd+500-me(),10<e)){if(sa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ue(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xc(ir.bind(null,t,Ve,Qt),e);break}ir(t,Ve,Qt);break;case 4:if(Cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-kt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kw(r/1960))-r,10<r){t.timeoutHandle=Xc(ir.bind(null,t,Ve,Qt),r);break}ir(t,Ve,Qt);break;case 5:ir(t,Ve,Qt);break;default:throw Error(T(329))}}}return Ye(t,me()),t.callbackNode===n?by.bind(null,t):null}function _u(t,e){var n=ui;return t.current.memoizedState.isDehydrated&&(pr(t,e).flags|=256),t=Sa(t,e),t!==2&&(e=Ve,Ve=n,e!==null&&vu(e)),t}function vu(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function qw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!At(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~Ad,e&=~al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kt(e),r=1<<n;t[n]=-1,e&=~r}}function Zf(t){if(K&6)throw Error(T(327));os();var e=sa(t,0);if(!(e&1))return Ye(t,me()),null;var n=Sa(t,e);if(t.tag!==0&&n===2){var r=Vc(t);r!==0&&(e=r,n=_u(t,r))}if(n===1)throw n=Oi,pr(t,0),Cn(t,e),Ye(t,me()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ir(t,Ve,Qt),Ye(t,me()),null}function Dd(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(_s=me()+500,rl&&er())}}function wr(t){Tn!==null&&Tn.tag===0&&!(K&6)&&os();var e=K;K|=1;var n=gt.transition,r=Q;try{if(gt.transition=null,Q=1,t)return t()}finally{Q=r,gt.transition=n,K=e,!(K&6)&&er()}}function Od(){Xe=Zr.current,oe(Zr)}function pr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Cw(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ca();break;case 3:gs(),oe(Ke),oe(Oe),Cd();break;case 5:Ed(r);break;case 4:gs();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:vd(r.type._context);break;case 22:case 23:Od()}n=n.return}if(Ne=t,ye=t=Un(t.current,null),Te=Xe=e,xe=0,Oi=null,Ad=al=xr=0,Ve=ui=null,cr!==null){for(e=0;e<cr.length;e++)if(n=cr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cr=null}return t}function Ny(t,e){do{var n=ye;try{if(_d(),Vo.current=_a,ya){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ya=!1}if(vr=0,Ee=_e=de=null,li=!1,Ai=0,Rd.current=null,n===null||n.return===null){xe=1,Oi=e,ye=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Te,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=Wf(o);if(_!==null){_.flags&=-257,Bf(_,o,a,i,e),_.mode&1&&Uf(i,u,e),e=_,c=u;var x=e.updateQueue;if(x===null){var w=new Set;w.add(c),e.updateQueue=w}else x.add(c);break e}else{if(!(e&1)){Uf(i,u,e),Md();break e}c=Error(T(426))}}else if(ae&&a.mode&1){var P=Wf(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Bf(P,o,a,i,e),gd(ys(c,a));break e}}i=c=ys(c,a),xe!==4&&(xe=2),ui===null?ui=[i]:ui.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=cy(i,c,e);jf(i,g);break e;case 1:a=c;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ln===null||!Ln.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=uy(i,a,e);jf(i,S);break e}}i=i.return}while(i!==null)}Ty(n)}catch(N){e=N,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(1)}function Iy(){var t=va.current;return va.current=_a,t===null?_a:t}function Md(){(xe===0||xe===3||xe===2)&&(xe=4),Ne===null||!(xr&268435455)&&!(al&268435455)||Cn(Ne,Te)}function Sa(t,e){var n=K;K|=2;var r=Iy();(Ne!==t||Te!==e)&&(Qt=null,pr(t,e));do try{Yw();break}catch(s){Ny(t,s)}while(1);if(_d(),K=n,va.current=r,ye!==null)throw Error(T(261));return Ne=null,Te=0,xe}function Yw(){for(;ye!==null;)ky(ye)}function Qw(){for(;ye!==null&&!wx();)ky(ye)}function ky(t){var e=Ry(t.alternate,t,Xe);t.memoizedProps=t.pendingProps,e===null?Ty(t):ye=e,Rd.current=null}function Ty(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$w(n,e),n!==null){n.flags&=32767,ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ye=null;return}}else if(n=zw(n,e,Xe),n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);xe===0&&(xe=5)}function ir(t,e,n){var r=Q,s=gt.transition;try{gt.transition=null,Q=1,Jw(t,e,n,r)}finally{gt.transition=s,Q=r}return null}function Jw(t,e,n,r){do os();while(Tn!==null);if(K&6)throw Error(T(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Rx(t,i),t===Ne&&(ye=Ne=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Po||(Po=!0,Ay(ra,function(){return os(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=gt.transition,gt.transition=null;var o=Q;Q=1;var a=K;K|=4,Rd.current=null,Hw(t,n),Ey(n,t),yw(Qc),ia=!!Yc,Qc=Yc=null,t.current=n,Gw(n),Sx(),K=a,Q=o,gt.transition=i}else t.current=n;if(Po&&(Po=!1,Tn=t,wa=s),i=t.pendingLanes,i===0&&(Ln=null),bx(n.stateNode),Ye(t,me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xa)throw xa=!1,t=gu,gu=null,t;return wa&1&&t.tag!==0&&os(),i=t.pendingLanes,i&1?t===yu?di++:(di=0,yu=t):di=0,er(),null}function os(){if(Tn!==null){var t=cg(wa),e=gt.transition,n=Q;try{if(gt.transition=null,Q=16>t?16:t,Tn===null)var r=!1;else{if(t=Tn,Tn=null,wa=0,K&6)throw Error(T(331));var s=K;for(K|=4,O=t.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(O=u;O!==null;){var f=O;switch(f.tag){case 0:case 11:case 15:ci(8,f,i)}var d=f.child;if(d!==null)d.return=f,O=d;else for(;O!==null;){f=O;var h=f.sibling,_=f.return;if(xy(f),f===u){O=null;break}if(h!==null){h.return=_,O=h;break}O=_}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var P=w.sibling;w.sibling=null,w=P}while(w!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ci(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,O=g;break e}O=i.return}}var p=t.current;for(O=p;O!==null;){o=O;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,O=m;else e:for(o=p;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ol(9,a)}}catch(N){pe(a,a.return,N)}if(a===o){O=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,O=S;break e}O=a.return}}if(K=s,er(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Xa,t)}catch{}r=!0}return r}finally{Q=n,gt.transition=e}}return!1}function ep(t,e,n){e=ys(n,e),e=cy(t,e,1),t=Mn(t,e,1),e=Ue(),t!==null&&(Qi(t,1,e),Ye(t,e))}function pe(t,e,n){if(t.tag===3)ep(t,t,n);else for(;e!==null;){if(e.tag===3){ep(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){t=ys(n,t),t=uy(e,t,1),e=Mn(e,t,1),t=Ue(),e!==null&&(Qi(e,1,t),Ye(e,t));break}}e=e.return}}function Xw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Te&n)===n&&(xe===4||xe===3&&(Te&130023424)===Te&&500>me()-jd?pr(t,0):Ad|=n),Ye(t,e)}function Py(t,e){e===0&&(t.mode&1?(e=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):e=1);var n=Ue();t=cn(t,e),t!==null&&(Qi(t,e,n),Ye(t,n))}function Zw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Py(t,n)}function e1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),Py(t,n)}var Ry;Ry=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ke.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,Bw(t,e,n);He=!!(t.flags&131072)}else He=!1,ae&&e.flags&1048576&&Og(e,ha,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Go(t,e),t=e.pendingProps;var s=fs(e,Oe.current);is(e,n),s=Nd(null,e,r,t,s,n);var i=Id();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qe(r)?(i=!0,ua(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wd(e),s.updater=il,e.stateNode=s,s._reactInternals=e,iu(e,r,t,n),e=lu(null,e,r,!0,i,n)):(e.tag=0,ae&&i&&pd(e),Le(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Go(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=n1(r),t=Et(r,t),s){case 0:e=au(null,e,r,t,n);break e;case 1:e=Vf(null,e,r,t,n);break e;case 11:e=zf(null,e,r,t,n);break e;case 14:e=$f(null,e,r,Et(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),au(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),Vf(t,e,r,s,n);case 3:e:{if(py(e),t===null)throw Error(T(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Bg(t,e),ma(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ys(Error(T(423)),e),e=Hf(t,e,r,n,s);break e}else if(r!==s){s=ys(Error(T(424)),e),e=Hf(t,e,r,n,s);break e}else for(tt=On(e.stateNode.containerInfo.firstChild),nt=e,ae=!0,bt=null,n=Ug(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ps(),r===s){e=un(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return zg(e),t===null&&nu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jc(r,s)?o=null:i!==null&&Jc(r,i)&&(e.flags|=32),fy(t,e),Le(t,e,o,n),e.child;case 6:return t===null&&nu(e),null;case 13:return my(t,e,n);case 4:return Sd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ms(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),zf(t,e,r,s,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ne(fa,r._currentValue),r._currentValue=o,i!==null)if(At(i.value,o)){if(i.children===s.children&&!Ke.current){e=un(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=sn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ru(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ru(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Le(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,is(e,n),s=vt(s),r=r(s),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,s=Et(r,e.pendingProps),s=Et(r.type,s),$f(t,e,r,s,n);case 15:return dy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),Go(t,e),e.tag=1,qe(r)?(t=!0,ua(e)):t=!1,is(e,n),ly(e,r,s),iu(e,r,s,n),lu(null,e,r,!0,t,n);case 19:return gy(t,e,n);case 22:return hy(t,e,n)}throw Error(T(156,e.tag))};function Ay(t,e){return ig(t,e)}function t1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,e,n,r){return new t1(t,e,n,r)}function Ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n1(t){if(typeof t=="function")return Ld(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nd)return 11;if(t===rd)return 14}return 2}function Un(t,e){var n=t.alternate;return n===null?(n=pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ld(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $r:return mr(n.children,s,i,e);case td:o=8,s|=8;break;case Tc:return t=pt(12,n,e,s|2),t.elementType=Tc,t.lanes=i,t;case Pc:return t=pt(13,n,e,s),t.elementType=Pc,t.lanes=i,t;case Rc:return t=pt(19,n,e,s),t.elementType=Rc,t.lanes=i,t;case zm:return ll(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wm:o=10;break e;case Bm:o=9;break e;case nd:o=11;break e;case rd:o=14;break e;case xn:o=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=pt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function mr(t,e,n,r){return t=pt(7,t,r,e),t.lanes=n,t}function ll(t,e,n,r){return t=pt(22,t,r,e),t.elementType=zm,t.lanes=n,t.stateNode={isHidden:!1},t}function lc(t,e,n){return t=pt(6,t,null,e),t.lanes=n,t}function cc(t,e,n){return e=pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fd(t,e,n,r,s,i,o,a,c){return t=new r1(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wd(i),t}function s1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jy(t){if(!t)return Hn;t=t._reactInternals;e:{if(Ar(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(qe(n))return jg(t,n,e)}return e}function Dy(t,e,n,r,s,i,o,a,c){return t=Fd(n,r,!0,t,s,i,o,a,c),t.context=jy(null),n=t.current,r=Ue(),s=Fn(n),i=sn(r,s),i.callback=e??null,Mn(n,i,s),t.current.lanes=s,Qi(t,s,r),Ye(t,r),t}function cl(t,e,n,r){var s=e.current,i=Ue(),o=Fn(s);return n=jy(n),e.context===null?e.context=n:e.pendingContext=n,e=sn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mn(s,e,o),t!==null&&(Tt(t,s,o,i),$o(t,s,o)),o}function Ea(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ud(t,e){tp(t,e),(t=t.alternate)&&tp(t,e)}function i1(){return null}var Oy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wd(t){this._internalRoot=t}ul.prototype.render=Wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));cl(t,e,null,null)};ul.prototype.unmount=Wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wr(function(){cl(null,t,null,null)}),e[ln]=null}};function ul(t){this._internalRoot=t}ul.prototype.unstable_scheduleHydration=function(t){if(t){var e=hg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<En.length&&e!==0&&e<En[n].priority;n++);En.splice(n,0,t),n===0&&pg(t)}};function Bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function np(){}function o1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ea(o);i.call(u)}}var o=Dy(e,r,t,0,null,!1,!1,"",np);return t._reactRootContainer=o,t[ln]=o.current,Ii(t.nodeType===8?t.parentNode:t),wr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Ea(c);a.call(u)}}var c=Fd(t,0,!1,null,null,!1,!1,"",np);return t._reactRootContainer=c,t[ln]=c.current,Ii(t.nodeType===8?t.parentNode:t),wr(function(){cl(e,c,n,r)}),c}function hl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Ea(o);a.call(c)}}cl(e,o,t,s)}else o=o1(n,e,t,s,r);return Ea(o)}ug=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zs(e.pendingLanes);n!==0&&(od(e,n|1),Ye(e,me()),!(K&6)&&(_s=me()+500,er()))}break;case 13:wr(function(){var r=cn(t,1);if(r!==null){var s=Ue();Tt(r,t,1,s)}}),Ud(t,1)}};ad=function(t){if(t.tag===13){var e=cn(t,134217728);if(e!==null){var n=Ue();Tt(e,t,134217728,n)}Ud(t,134217728)}};dg=function(t){if(t.tag===13){var e=Fn(t),n=cn(t,e);if(n!==null){var r=Ue();Tt(n,t,e,r)}Ud(t,e)}};hg=function(){return Q};fg=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};Bc=function(t,e,n){switch(e){case"input":if(Dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nl(r);if(!s)throw Error(T(90));Vm(r),Dc(r,s)}}}break;case"textarea":Gm(t,n);break;case"select":e=n.value,e!=null&&ts(t,!!n.multiple,e,!1)}};Zm=Dd;eg=wr;var a1={usingClientEntryPoint:!1,Events:[Xi,Kr,nl,Jm,Xm,Dd]},Hs={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l1={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rg(t),t===null?null:t.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||i1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{Xa=Ro.inject(l1),Wt=Ro}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1;at.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(e))throw Error(T(200));return s1(t,e,null,n)};at.createRoot=function(t,e){if(!Bd(t))throw Error(T(299));var n=!1,r="",s=Oy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fd(t,1,!1,null,null,n,!1,r,s),t[ln]=e.current,Ii(t.nodeType===8?t.parentNode:t),new Wd(e)};at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=rg(e),t=t===null?null:t.stateNode,t};at.flushSync=function(t){return wr(t)};at.hydrate=function(t,e,n){if(!dl(e))throw Error(T(200));return hl(null,t,e,!0,n)};at.hydrateRoot=function(t,e,n){if(!Bd(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Oy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Dy(e,null,t,1,n??null,s,!1,i,o),t[ln]=e.current,Ii(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ul(e)};at.render=function(t,e,n){if(!dl(e))throw Error(T(200));return hl(null,t,e,!1,n)};at.unmountComponentAtNode=function(t){if(!dl(t))throw Error(T(40));return t._reactRootContainer?(wr(function(){hl(null,null,t,!1,function(){t._reactRootContainer=null,t[ln]=null})}),!0):!1};at.unstable_batchedUpdates=Dd;at.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dl(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return hl(t,e,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function My(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(My)}catch(t){console.error(t)}}My(),Mm.exports=at;var c1=Mm.exports,rp=c1;Ic.createRoot=rp.createRoot,Ic.hydrateRoot=rp.hydrateRoot;const u1="modulepreload",d1=function(t){return"/"+t},sp={},Sn=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=d1(i),i in sp)return;sp[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const d=s[f];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":u1,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},h1=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=function(t,e){if(!t)throw ks(e)},ks=function(t){return new Error("Firebase Database ("+Ly.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},f1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,f=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|u>>6,_=u&63;c||(_=64,o||(h=64)),r.push(n[f],n[d],n[h],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new p1;const h=i<<2|a>>4;if(r.push(h),u!==64){const _=a<<4&240|u>>2;if(r.push(_),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class p1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uy=function(t){const e=Fy(t);return zd.encodeByteArray(e,!0)},Ca=function(t){return Uy(t).replace(/\./g,"")},ba=function(t){try{return zd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){return Wy(void 0,t)}function Wy(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!g1(n)||(t[n]=Wy(t[n],e[n]));return t}function g1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=()=>y1().__FIREBASE_DEFAULTS__,v1=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ba(t[1]);return e&&JSON.parse(e)},$d=()=>{try{return h1()||_1()||v1()||x1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},By=t=>{var e,n;return(n=(e=$d())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},w1=t=>{const e=By(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zy=()=>{var t;return(t=$d())==null?void 0:t.config},$y=t=>{var e;return(e=$d())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Ca(JSON.stringify(n)),Ca(JSON.stringify(o)),a].join(".")}const hi={};function E1(){const t={prod:[],emulator:[]};for(const e of Object.keys(hi))hi[e]?t.emulator.push(e):t.prod.push(e);return t}function C1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ip=!1;function Hy(t,e){if(typeof window>"u"||typeof document>"u"||!Ts(window.location.host)||hi[t]===e||hi[t]||ip)return;hi[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",i=E1().prod.length>0;function o(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,_){h.setAttribute("width","24"),h.setAttribute("id",_),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{ip=!0,o()},h}function f(h,_){h.setAttribute("id",_),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=C1(r),_=n("text"),x=document.getElementById(_)||document.createElement("span"),w=n("learnmore"),P=document.getElementById(w)||document.createElement("a"),g=n("preprendIcon"),p=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const m=h.element;a(m),f(P,w);const S=u();c(p,g),m.append(p,x,P,S),document.body.appendChild(m)}i?(x.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function b1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hd(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Gy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N1(){const t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ky(){return Ly.NODE_ADMIN===!0}function Gd(){try{return typeof indexedDB=="object"}catch{return!1}}function Kd(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function qy(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="FirebaseError";class Kt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I1,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jr.prototype.create)}}class jr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?k1(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Kt(s,a,r)}}function k1(t,e){return t.replace(T1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const T1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){return JSON.parse(t)}function ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Mi(ba(i[0])||""),n=Mi(ba(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},P1=function(t){const e=Yy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},R1=function(t){const e=Yy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Na(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ia(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Gn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(op(i)&&op(o)){if(!Gn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function op(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ti(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ni(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),f=1518500249):(u=i^o^a,f=1859775393):d<60?(u=i&o|a&(i|o),f=2400959708):(u=i^o^a,f=3395469782);const h=(s<<5|s>>>27)+u+c+f+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function j1(t,e){const n=new D1(t,e);return n.subscribe.bind(n)}class D1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");O1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=uc),s.error===void 0&&(s.error=uc),s.complete===void 0&&(s.complete=uc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uc(){}function Er(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,R(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1e3,F1=2,U1=4*60*60*1e3,W1=.5;function ap(t,e=L1,n=F1){const r=e*Math.pow(n,t),s=Math.round(W1*r*(Math.random()-.5)*2);return Math.min(U1,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t){return t&&t._delegate?t._delegate:t}class it{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ze;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z1(e))try{this.getOrInitializeService({instanceIdentifier:or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=or){return this.instances.has(e)}getOptions(e=or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=or){return this.component?this.component.multipleInstances?e:or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B1(t){return t===or?void 0:t}function z1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xu(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(J||(J={}));const $1={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},V1=J.INFO,H1={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},G1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=H1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pl{constructor(e){this.name=e,this._logLevel=V1,this._logHandler=G1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const K1=(t,e)=>e.some(n=>t instanceof n);let lp,cp;function q1(){return lp||(lp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y1(){return cp||(cp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jy=new WeakMap,wu=new WeakMap,Xy=new WeakMap,dc=new WeakMap,qd=new WeakMap;function Q1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Wn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Jy.set(n,t)}).catch(()=>{}),qd.set(e,t),e}function J1(t){if(wu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wu.set(t,e)}let Su={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X1(t){Su=t(Su)}function Z1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hc(this),e,...n);return Xy.set(r,e.sort?e.sort():[e]),Wn(r)}:Y1().includes(t)?function(...e){return t.apply(hc(this),e),Wn(Jy.get(this))}:function(...e){return Wn(t.apply(hc(this),e))}}function eS(t){return typeof t=="function"?Z1(t):(t instanceof IDBTransaction&&J1(t),K1(t,q1())?new Proxy(t,Su):t)}function Wn(t){if(t instanceof IDBRequest)return Q1(t);if(dc.has(t))return dc.get(t);const e=eS(t);return e!==t&&(dc.set(t,e),qd.set(e,t)),e}const hc=t=>qd.get(t);function Zy(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Wn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Wn(o.result),c.oldVersion,c.newVersion,Wn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const tS=["get","getKey","getAll","getAllKeys","count"],nS=["put","add","delete","clear"],fc=new Map;function up(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fc.get(e))return fc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=nS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tS.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return fc.set(e,i),i}X1(t=>({...t,get:(e,n,r)=>up(e,n)||t.get(e,n,r),has:(e,n)=>!!up(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eu="@firebase/app",dp="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new pl("@firebase/app"),iS="@firebase/app-compat",oS="@firebase/analytics-compat",aS="@firebase/analytics",lS="@firebase/app-check-compat",cS="@firebase/app-check",uS="@firebase/auth",dS="@firebase/auth-compat",hS="@firebase/database",fS="@firebase/data-connect",pS="@firebase/database-compat",mS="@firebase/functions",gS="@firebase/functions-compat",yS="@firebase/installations",_S="@firebase/installations-compat",vS="@firebase/messaging",xS="@firebase/messaging-compat",wS="@firebase/performance",SS="@firebase/performance-compat",ES="@firebase/remote-config",CS="@firebase/remote-config-compat",bS="@firebase/storage",NS="@firebase/storage-compat",IS="@firebase/firestore",kS="@firebase/ai",TS="@firebase/firestore-compat",PS="firebase",RS="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="[DEFAULT]",AS={[Eu]:"fire-core",[iS]:"fire-core-compat",[aS]:"fire-analytics",[oS]:"fire-analytics-compat",[cS]:"fire-app-check",[lS]:"fire-app-check-compat",[uS]:"fire-auth",[dS]:"fire-auth-compat",[hS]:"fire-rtdb",[fS]:"fire-data-connect",[pS]:"fire-rtdb-compat",[mS]:"fire-fn",[gS]:"fire-fn-compat",[yS]:"fire-iid",[_S]:"fire-iid-compat",[vS]:"fire-fcm",[xS]:"fire-fcm-compat",[wS]:"fire-perf",[SS]:"fire-perf-compat",[ES]:"fire-rc",[CS]:"fire-rc-compat",[bS]:"fire-gcs",[NS]:"fire-gcs-compat",[IS]:"fire-fst",[TS]:"fire-fst-compat",[kS]:"fire-vertex","fire-js":"fire-js",[PS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new Map,jS=new Map,bu=new Map;function hp(t,e){try{t.container.addComponent(e)}catch(n){dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vt(t){const e=t.name;if(bu.has(e))return dn.debug(`There were multiple attempts to register component ${e}.`),!1;bu.set(e,t);for(const n of Li.values())hp(n,t);for(const n of jS.values())hp(n,t);return!0}function Dr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function et(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bn=new jr("app","Firebase",DS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new it("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=RS;function e0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Cu,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Bn.create("bad-app-name",{appName:String(s)});if(n||(n=zy()),!n)throw Bn.create("no-options");const i=Li.get(s);if(i){if(Gn(n,i.options)&&Gn(r,i.config))return i;throw Bn.create("duplicate-app",{appName:s})}const o=new Qy(s);for(const c of bu.values())o.addComponent(c);const a=new OS(n,r,o);return Li.set(s,a),a}function Yd(t=Cu){const e=Li.get(t);if(!e&&t===Cu&&zy())return e0();if(!e)throw Bn.create("no-app",{appName:t});return e}function fp(){return Array.from(Li.values())}function yt(t,e,n){let r=AS[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dn.warn(o.join(" "));return}Vt(new it(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firebase-heartbeat-database",LS=1,Fi="firebase-heartbeat-store";let pc=null;function t0(){return pc||(pc=Zy(MS,LS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bn.create("idb-open",{originalErrorMessage:t.message})})),pc}async function FS(t){try{const n=(await t0()).transaction(Fi),r=await n.objectStore(Fi).get(n0(t));return await n.done,r}catch(e){if(e instanceof Kt)dn.warn(e.message);else{const n=Bn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dn.warn(n.message)}}}async function pp(t,e){try{const r=(await t0()).transaction(Fi,"readwrite");await r.objectStore(Fi).put(e,n0(t)),await r.done}catch(n){if(n instanceof Kt)dn.warn(n.message);else{const r=Bn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dn.warn(r.message)}}}function n0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=1024,WS=30;class BS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $S(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>WS){const o=VS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){dn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mp(),{heartbeatsToSend:r,unsentEntries:s}=zS(this._heartbeatsCache.heartbeats),i=Ca(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return dn.warn(n),""}}}function mp(){return new Date().toISOString().substring(0,10)}function zS(t,e=US){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $S{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gd()?Kd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gp(t){return Ca(JSON.stringify({version:2,heartbeats:t})).length}function VS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){Vt(new it("platform-logger",e=>new rS(e),"PRIVATE")),Vt(new it("heartbeat",e=>new BS(e),"PRIVATE")),yt(Eu,dp,t),yt(Eu,dp,"esm2020"),yt("fire-js","")}HS("");var GS="firebase",KS="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt(GS,KS,"app");function r0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qS=r0,s0=new jr("auth","Firebase",r0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new pl("@firebase/auth");function YS(t,...e){ka.logLevel<=J.WARN&&ka.warn(`Auth (${Rs}): ${t}`,...e)}function Qo(t,...e){ka.logLevel<=J.ERROR&&ka.error(`Auth (${Rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,...e){throw Jd(t,...e)}function Pt(t,...e){return Jd(t,...e)}function Qd(t,e,n){const r={...qS(),[e]:n};return new jr("auth","Firebase",r).create(e,{appName:t.name})}function on(t){return Qd(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wt(t,"argument-error"),Qd(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jd(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return s0.create(t,...e)}function L(t,e,...n){if(!t)throw Jd(e,...n)}function tn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qo(e),new Error(e)}function hn(t,e){t||tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function JS(){return yp()==="http:"||yp()==="https:"}function yp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JS()||Hd()||"connection"in navigator)?navigator.onLine:!0}function ZS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.shortDelay=e,this.longDelay=n,hn(n>e,"Short delay should be less than long delay!"),this.isMobile=Vd()||Gy()}get(){return XS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e){hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nE=new eo(3e4,6e4);function mn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function gn(t,e,n,r,s={}){return o0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ps({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return b1()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ts(t.emulatorConfig.host)&&(u.credentials="include"),i0.fetch()(await a0(t,t.config.apiHost,n,a),u)})}async function o0(t,e,n){t._canInitEmulator=!1;const r={...eE,...e};try{const s=new sE(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ao(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ao(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ao(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ao(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qd(t,f,u);wt(t,f)}}catch(s){if(s instanceof Kt)throw s;wt(t,"network-request-failed",{message:String(s)})}}async function to(t,e,n,r,s={}){const i=await gn(t,e,n,r,s);return"mfaPendingCredential"in i&&wt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function a0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Xd(t.config,s):`${t.config.apiScheme}://${s}`;return tE.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rE(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pt(this.auth,"network-request-failed")),nE.get())})}}function Ao(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Pt(t,e,r);return s.customData._tokenResponse=n,s}function _p(t){return t!==void 0&&t.enterprise!==void 0}class iE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rE(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oE(t,e){return gn(t,"GET","/v2/recaptchaConfig",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t,e){return gn(t,"POST","/v1/accounts:delete",e)}async function Ta(t,e){return gn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lE(t,e=!1){const n=se(t),r=await n.getIdToken(e),s=Zd(r);L(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:fi(mc(s.auth_time)),issuedAtTime:fi(mc(s.iat)),expirationTime:fi(mc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mc(t){return Number(t)*1e3}function Zd(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qo("JWT malformed, contained fewer than 3 sections"),null;try{const s=ba(n);return s?JSON.parse(s):(Qo("Failed to decode base64 JWT payload"),null)}catch(s){return Qo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vp(t){const e=Zd(t);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kt&&cE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Ui(t,Ta(e,{idToken:n}));L(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?l0(s.providerUserInfo):[],o=hE(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Iu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function dE(t){const e=se(t);await Pa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hE(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function l0(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(t,e){const n=await o0(t,{},async()=>{const r=Ps({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await a0(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ts(t.emulatorConfig.host)&&(c.credentials="include"),i0.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pE(t,e){return gn(t,"POST","/v2/accounts:revokeToken",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){L(e.length!==0,"internal-error");const n=vp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fE(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new as;return r&&(L(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(L(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(L(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new as,this.toJSON())}_performRefresh(){return tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,e){L(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new uE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Iu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return L(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lE(this,e)}reload(){return dE(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(et(this.auth.app))return Promise.reject(on(this.auth));const e=await this.getIdToken();return await Ui(this,aE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:_,providerData:x,stsTokenManager:w}=n;L(d&&w,e,"internal-error");const P=as.fromJSON(this.name,w);L(typeof d=="string",e,"internal-error"),vn(r,e.name),vn(s,e.name),L(typeof h=="boolean",e,"internal-error"),L(typeof _=="boolean",e,"internal-error"),vn(i,e.name),vn(o,e.name),vn(a,e.name),vn(c,e.name),vn(u,e.name),vn(f,e.name);const g=new Nt({uid:d,auth:e,email:s,emailVerified:h,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:f});return x&&Array.isArray(x)&&(g.providerData=x.map(p=>({...p}))),c&&(g._redirectEventId=c),g}static async _fromIdTokenResponse(e,n,r=!1){const s=new as;s.updateFromServerResponse(n);const i=new Nt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pa(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];L(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?l0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new as;a.updateFromIdToken(r);const c=new Nt({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Iu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Map;function nn(t){hn(t instanceof Function,"Expected a class definition");let e=xp.get(t);return e?(hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c0.type="NONE";const wp=c0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e,n){return`firebase:${t}:${e}:${n}`}class ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Jo(this.userKey,s.apiKey,i),this.fullPersistenceKey=Jo("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ta(this.auth,{idToken:e}).catch(()=>{});return n?Nt._fromGetAccountInfoResponse(this.auth,n,e):null}return Nt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ls(nn(wp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||nn(wp);const o=Jo(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(o);if(f){let d;if(typeof f=="string"){const h=await Ta(e,{idToken:f}).catch(()=>{});if(!h)break;d=await Nt._fromGetAccountInfoResponse(e,h,f)}else d=Nt._fromJSON(e,f);u!==i&&(a=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ls(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ls(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m0(e))return"Blackberry";if(g0(e))return"Webos";if(d0(e))return"Safari";if((e.includes("chrome/")||h0(e))&&!e.includes("edge/"))return"Chrome";if(p0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u0(t=We()){return/firefox\//i.test(t)}function d0(t=We()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h0(t=We()){return/crios\//i.test(t)}function f0(t=We()){return/iemobile/i.test(t)}function p0(t=We()){return/android/i.test(t)}function m0(t=We()){return/blackberry/i.test(t)}function g0(t=We()){return/webos/i.test(t)}function eh(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mE(t=We()){var e;return eh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function gE(){return N1()&&document.documentMode===10}function y0(t=We()){return eh(t)||p0(t)||g0(t)||m0(t)||/windows phone/i.test(t)||f0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e=[]){let n;switch(t){case"Browser":n=Sp(We());break;case"Worker":n=`${Sp(We())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(t,e={}){return gn(t,"GET","/v2/passwordPolicy",mn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=6;class xE{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vE,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ep(this),this.idTokenSubscription=new Ep(this),this.beforeStateQueue=new yE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ls.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ta(this,{idToken:e}),r=await Nt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(et(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(et(this.app))return Promise.reject(on(this));const n=e?se(e):null;return n&&L(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return et(this.app)?Promise.reject(on(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return et(this.app)?Promise.reject(on(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _E(this),n=new xE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pE(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nn(e)||this._popupRedirectResolver;L(n,this,"argument-error"),this.redirectPersistenceManager=await ls.create(this,[nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&YS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yn(t){return se(t)}class Ep{constructor(e){this.auth=e,this.observer=null,this.addObserver=j1(n=>this.observer=n)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SE(t){ml=t}function v0(t){return ml.loadJS(t)}function EE(){return ml.recaptchaEnterpriseScript}function CE(){return ml.gapiScript}function bE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class NE{constructor(){this.enterprise=new IE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IE{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kE="recaptcha-enterprise",x0="NO_RECAPTCHA";class TE{constructor(e){this.type=kE,this.auth=yn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{oE(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new iE(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;_p(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(x0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NE().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&_p(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=EE();c.length!==0&&(c+=a),v0(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Gs(t,e,n,r=!1,s=!1){const i=new TE(t);let o;if(s)o=x0;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ra(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Gs(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Gs(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Gs(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await Gs(t,e,n,!1,!0);return r(t,f)}return Promise.reject(c)})}else{const a=await Gs(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(s+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e){const n=Dr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Gn(i,e??{}))return s;wt(s,"already-initialized")}return n.initialize({options:e})}function RE(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AE(t,e,n){const r=yn(t);L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=w0(e),{host:o,port:a}=jE(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){L(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),L(Gn(u,r.config.emulator)&&Gn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ts(o)?(Vy(`${i}//${o}${c}`),Hy("Auth",!0)):s||DE()}function w0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jE(t){const e=w0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cp(o)}}}function Cp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DE(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tn("not implemented")}_getIdTokenResponse(e){return tn("not implemented")}_linkToIdToken(e,n){return tn("not implemented")}_getReauthenticationResolver(e){return tn("not implemented")}}async function OE(t,e){return gn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(t,e){return to(t,"POST","/v1/accounts:signInWithPassword",mn(t,e))}async function S0(t,e){return gn(t,"POST","/v1/accounts:sendOobCode",mn(t,e))}async function LE(t,e){return S0(t,e)}async function FE(t,e){return S0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(t,e){return to(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,e))}async function WE(t,e){return to(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends th{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ra(e,n,"signInWithPassword",ME,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return UE(e,{email:this._email,oobCode:this._password});default:wt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ra(e,r,"signUpPassword",OE,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return WE(e,{idToken:n,email:this._email,oobCode:this._password});default:wt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(t,e){return to(t,"POST","/v1/accounts:signInWithIdp",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="http://localhost";class Cr extends th{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Cr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return cs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cs(e,n)}buildRequest(){const e={requestUri:BE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ps(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $E(t){const e=ti(ni(t)).link,n=e?ti(ni(e)).deep_link_id:null,r=ti(ni(t)).deep_link_id;return(r?ti(ni(r)).link:null)||r||n||e||t}class nh{constructor(e){const n=ti(ni(e)),r=n.apiKey??null,s=n.oobCode??null,i=zE(n.mode??null);L(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$E(e);try{return new nh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.providerId=As.PROVIDER_ID}static credential(e,n){return Wi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nh.parseLink(n);return L(r,"argument-error"),Wi._fromEmailAndCode(e,r.code,r.tenantId)}}As.PROVIDER_ID="password";As.EMAIL_PASSWORD_SIGN_IN_METHOD="password";As.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends rh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends no{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bn.credential(e.oauthAccessToken)}catch{return null}}}bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cr._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xt.credentialFromTaggedObject(e)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xt.credential(n,r)}catch{return null}}}Xt.GOOGLE_SIGN_IN_METHOD="google.com";Xt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends no{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nn.credential(e.oauthAccessToken)}catch{return null}}}Nn.GITHUB_SIGN_IN_METHOD="github.com";Nn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends no{constructor(){super("twitter.com")}static credential(e,n){return Cr._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return In.credential(n,r)}catch{return null}}}In.TWITTER_SIGN_IN_METHOD="twitter.com";In.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VE(t,e){return to(t,"POST","/v1/accounts:signUp",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Nt._fromIdTokenResponse(e,r,s),o=bp(r);return new br({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=bp(r);return new br({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function bp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Kt{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Aa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Aa(e,n,r,s)}}function E0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Aa._fromErrorAndOperation(t,i,e,r):i})}async function HE(t,e,n=!1){const r=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return br._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(t,e,n=!1){const{auth:r}=t;if(et(r.app))return Promise.reject(on(r));const s="reauthenticate";try{const i=await Ui(t,E0(r,s,e,t),n);L(i.idToken,r,"internal-error");const o=Zd(i.idToken);L(o,r,"internal-error");const{sub:a}=o;return L(t.uid===a,r,"user-mismatch"),br._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&wt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C0(t,e,n=!1){if(et(t.app))return Promise.reject(on(t));const r="signIn",s=await E0(t,r,e),i=await br._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function KE(t,e){return C0(yn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t,e,n){var r;L(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),L(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),L(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(L(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(L(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0(t){const e=yn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qE(t,e,n){const r=yn(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&b0(r,s,n),await Ra(r,s,"getOobCode",FE,"EMAIL_PASSWORD_PROVIDER")}async function YE(t,e,n){if(et(t.app))return Promise.reject(on(t));const r=yn(t),o=await Ra(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VE,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&N0(t),c}),a=await br._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function QE(t,e,n){return et(t.app)?Promise.reject(on(t)):KE(se(t),As.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N0(t),r})}async function JE(t,e){const n=se(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&b0(n.auth,s,e);const{email:i}=await LE(n.auth,s);i!==t.email&&await t.reload()}function XE(t,e,n,r){return se(t).onIdTokenChanged(e,n,r)}function ZE(t,e,n){return se(t).beforeAuthStateChanged(e,n)}function eC(t,e,n,r){return se(t).onAuthStateChanged(e,n,r)}function tC(t){return se(t).signOut()}const ja="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ja,"1"),this.storage.removeItem(ja),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=1e3,rC=10;class k0 extends I0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gE()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k0.type="LOCAL";const sC=k0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends I0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T0.type="SESSION";const P0=T0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await iC(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=sh("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return window}function aC(t){zt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){return typeof zt().WorkerGlobalScope<"u"&&typeof zt().importScripts=="function"}async function lC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function uC(){return R0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebaseLocalStorageDb",dC=1,Da="firebaseLocalStorage",j0="fbase_key";class ro{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yl(t,e){return t.transaction([Da],e?"readwrite":"readonly").objectStore(Da)}function hC(){const t=indexedDB.deleteDatabase(A0);return new ro(t).toPromise()}function ku(){const t=indexedDB.open(A0,dC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Da,{keyPath:j0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Da)?e(r):(r.close(),await hC(),e(await ku()))})})}async function Np(t,e,n){const r=yl(t,!0).put({[j0]:e,value:n});return new ro(r).toPromise()}async function fC(t,e){const n=yl(t,!1).get(e),r=await new ro(n).toPromise();return r===void 0?null:r.value}function Ip(t,e){const n=yl(t,!0).delete(e);return new ro(n).toPromise()}const pC=800,mC=3;class D0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ku(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gl._getInstance(uC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await lC(),!this.activeServiceWorker)return;this.sender=new oC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ku();return await Np(e,ja,"1"),await Ip(e,ja),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Np(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ip(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=yl(s,!1).getAll();return new ro(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D0.type="LOCAL";const gC=D0;new eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t,e){return e?nn(e):(L(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends th{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yC(t){return C0(t.auth,new ih(t),t.bypassAuthState)}function _C(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),GE(n,new ih(t),t.bypassAuthState)}async function vC(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),HE(n,new ih(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yC;case"linkViaPopup":case"linkViaRedirect":return vC;case"reauthViaPopup":case"reauthViaRedirect":return _C;default:wt(this.auth,"internal-error")}}resolve(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new eo(2e3,1e4);async function wC(t,e,n){if(et(t.app))return Promise.reject(Pt(t,"operation-not-supported-in-this-environment"));const r=yn(t);QS(t,e,rh);const s=O0(r,n);return new dr(r,"signInViaPopup",e,s).executeNotNull()}class dr extends M0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,dr.currentPopupAction&&dr.currentPopupAction.cancel(),dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return L(e,this.auth,"internal-error"),e}async onExecution(){hn(this.filter.length===1,"Popup operations only handle one event");const e=sh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}dr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",Xo=new Map;class EC extends M0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xo.get(this.auth._key());if(!e){try{const r=await CC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xo.set(this.auth._key(),e)}return this.bypassAuthState||Xo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CC(t,e){const n=IC(e),r=NC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bC(t,e){Xo.set(t._key(),e)}function NC(t){return nn(t._redirectPersistence)}function IC(t){return Jo(SC,t.config.apiKey,t.name)}async function kC(t,e,n=!1){if(et(t.app))return Promise.reject(on(t));const r=yn(t),s=O0(r,e),o=await new EC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class PC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!L0(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(kp(e))}saveEventToCache(e){this.cachedEventUids.add(kp(e)),this.lastProcessedEventTime=Date.now()}}function kp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function L0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,e={}){return gn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DC=/^https?/;async function OC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AC(t);for(const n of e)try{if(MC(n))return}catch{}wt(t,"unauthorized-domain")}function MC(t){const e=Nu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DC.test(n))return!1;if(jC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new eo(3e4,6e4);function Tp(){const t=zt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FC(t){return new Promise((e,n)=>{var s,i,o;function r(){Tp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tp(),n(Pt(t,"network-request-failed"))},timeout:LC.get()})}if((i=(s=zt().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=zt().gapi)!=null&&o.load)r();else{const a=bE("iframefcb");return zt()[a]=()=>{gapi.load?r():n(Pt(t,"network-request-failed"))},v0(`${CE()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Zo=null,e})}let Zo=null;function UC(t){return Zo=Zo||FC(t),Zo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new eo(5e3,15e3),BC="__/auth/iframe",zC="emulator/auth/iframe",$C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HC(t){const e=t.config;L(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xd(e,zC):`https://${t.config.authDomain}/${BC}`,r={apiKey:e.apiKey,appName:t.name,v:Rs},s=VC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ps(r).slice(1)}`}async function GC(t){const e=await UC(t),n=zt().gapi;return L(n,t,"internal-error"),e.open({where:document.body,url:HC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$C,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Pt(t,"network-request-failed"),a=zt().setTimeout(()=>{i(o)},WC.get());function c(){zt().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,YC=600,QC="_blank",JC="http://localhost";class Pp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XC(t,e,n,r=qC,s=YC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...KC,width:r.toString(),height:s.toString(),top:i,left:o},u=We().toLowerCase();n&&(a=h0(u)?QC:n),u0(u)&&(e=e||JC,c.scrollbars="yes");const f=Object.entries(c).reduce((h,[_,x])=>`${h}${_}=${x},`,"");if(mE(u)&&a!=="_self")return ZC(e||"",a),new Pp(null);const d=window.open(e||"",a,f);L(d,t,"popup-blocked");try{d.focus()}catch{}return new Pp(d)}function ZC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="__/auth/handler",tb="emulator/auth/handler",nb=encodeURIComponent("fac");async function Rp(t,e,n,r,s,i){L(t.config.authDomain,t,"auth-domain-config-required"),L(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rs,eventId:s};if(e instanceof rh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Na(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries(i||{}))o[f]=d}if(e instanceof no){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),u=c?`#${nb}=${encodeURIComponent(c)}`:"";return`${rb(t)}?${Ps(a).slice(1)}${u}`}function rb({config:t}){return t.emulator?Xd(t,tb):`https://${t.authDomain}/${eb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="webStorageSupport";class sb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P0,this._completeRedirectFn=kC,this._overrideRedirectResult=bC}async _openPopup(e,n,r,s){var o;hn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Rp(e,n,r,Nu(),s);return XC(e,i,sh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Rp(e,n,r,Nu(),s);return aC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(hn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GC(e),r=new PC(e);return n.register("authEvent",s=>(L(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gc,{type:gc},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[gc];i!==void 0&&n(!!i),wt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y0()||d0()||eh()}}const ib=sb;var Ap="@firebase/auth",jp="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lb(t){Vt(new it("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;L(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_0(t)},u=new wE(r,s,i,c);return RE(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vt(new it("auth-internal",e=>{const n=yn(e.getProvider("auth").getImmediate());return(r=>new ob(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yt(Ap,jp,ab(t)),yt(Ap,jp,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=5*60,ub=$y("authIdTokenMaxAge")||cb;let Dp=null;const db=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ub)return;const s=n==null?void 0:n.token;Dp!==s&&(Dp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hb(t=Yd()){const e=Dr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PE(t,{popupRedirectResolver:ib,persistence:[gC,sC,P0]}),r=$y("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=db(i.toString());ZE(n,o,()=>o(n.currentUser)),XE(n,a=>o(a))}}const s=By("auth");return s&&AE(n,`http://${s}`),n}function fb(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}SE({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Pt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lb("Browser");const Op="@firebase/database",Mp="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0="";function U0(t){F0=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Mi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return jt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pb(e)}}catch{}return new mb},hr=W0("localStorage"),Tu=W0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new pl("@firebase/database"),B0=function(){let t=1;return function(){return t++}}(),z0=function(t){const e=M1(t),n=new A1;n.update(e);const r=n.digest();return zd.encodeByteArray(r)},so=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=so.apply(null,r):typeof r=="object"?e+=ve(r):e+=r,e+=" "}return e};let gr=null,Lp=!0;const $0=function(t,e){R(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(us.logLevel=J.VERBOSE,gr=us.log.bind(us),e&&Tu.set("logging_enabled",!0)):typeof t=="function"?gr=t:(gr=null,Tu.remove("logging_enabled"))},be=function(...t){if(Lp===!0&&(Lp=!1,gr===null&&Tu.get("logging_enabled")===!0&&$0(!0)),gr){const e=so.apply(null,t);gr(e)}},io=function(t){return function(...e){be(t,...e)}},Pu=function(...t){const e="FIREBASE INTERNAL ERROR: "+so(...t);us.error(e)},Ht=function(...t){const e=`FIREBASE FATAL ERROR: ${so(...t)}`;throw us.error(e),new Error(e)},De=function(...t){const e="FIREBASE WARNING: "+so(...t);us.warn(e)},gb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&De("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_l=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Kn="[MIN_NAME]",fn="[MAX_NAME]",Or=function(t,e){if(t===e)return 0;if(t===Kn||e===fn)return-1;if(e===Kn||t===fn)return 1;{const n=Fp(t),r=Fp(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},_b=function(t,e){return t===e?0:t<e?-1:1},Ks=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ve(e))},oh=function(t){if(typeof t!="object"||t===null)return ve(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ve(e[r]),n+=":",n+=oh(t[e[r]]);return n+="}",n},V0=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Ie(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const H0=function(t){R(!_l(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(f.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},vb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function wb(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Sb=new RegExp("^-?(0*)\\d{1,10}$"),Eb=-2147483648,Cb=2147483647,Fp=function(t){if(Sb.test(t)){const e=Number(t);if(e>=Eb&&e<=Cb)return e}return null},js=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw De("Exception was thrown by user callback.",n),e},Math.floor(0))}},bb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,et(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){De(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',De(e)}}class ds{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ds.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="5",G0="v",K0="s",q0="r",Y0="f",Q0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,J0="ls",X0="p",Ru="ac",Z0="websocket",e_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function kb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function n_(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let r;if(e===Z0)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===e_)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);kb(t)&&(n.ns=t.namespace);const s=[];return Ie(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.counters_={}}incrementCounter(e,n=1){jt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return m1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc={},_c={};function lh(t){const e=t.toString();return yc[e]||(yc[e]=new Tb),yc[e]}function Pb(t,e){const n=t.toString();return _c[n]||(_c[n]=e()),_c[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&js(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="start",Ab="close",jb="pLPCommand",Db="pRTLPCB",r_="id",s_="pw",i_="ser",Ob="cb",Mb="seg",Lb="ts",Fb="d",Ub="dframe",o_=1870,a_=30,Wb=o_-a_,Bb=25e3,zb=3e4;class Pn{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=io(e),this.stats_=lh(n),this.urlFn=c=>(this.appCheckToken&&(c[Ru]=this.appCheckToken),n_(n,e_,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Rb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zb)),yb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ch((...i)=>{const[o,a,c,u,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Up)this.id=a,this.password=c;else if(o===Ab)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Up]="t",r[i_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Ob]=this.scriptTagHolder.uniqueCallbackIdentifier),r[G0]=ah,this.transportSessionId&&(r[K0]=this.transportSessionId),this.lastSessionId&&(r[J0]=this.lastSessionId),this.applicationId&&(r[X0]=this.applicationId),this.appCheckToken&&(r[Ru]=this.appCheckToken),typeof location<"u"&&location.hostname&&Q0.test(location.hostname)&&(r[q0]=Y0);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pn.forceAllow_=!0}static forceDisallow(){Pn.forceDisallow_=!0}static isAvailable(){return Pn.forceAllow_?!0:!Pn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vb()&&!xb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Uy(n),s=V0(r,Wb);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Ub]="t",r[r_]=e,r[s_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ch{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=B0(),window[jb+this.uniqueCallbackIdentifier]=e,window[Db+this.uniqueCallbackIdentifier]=n,this.myIFrame=ch.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){be("frame writing exception"),a.stack&&be(a.stack),be(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||be("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[r_]=this.myID,e[s_]=this.myPW,e[i_]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+a_+r.length<=o_;){const o=this.pendingSegs.shift();r=r+"&"+Mb+s+"="+o.seg+"&"+Lb+s+"="+o.ts+"&"+Fb+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Bb)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{be("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=16384,Vb=45e3;let Oa=null;typeof MozWebSocket<"u"?Oa=MozWebSocket:typeof WebSocket<"u"&&(Oa=WebSocket);class ft{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=io(this.connId),this.stats_=lh(n),this.connURL=ft.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[G0]=ah,typeof location<"u"&&location.hostname&&Q0.test(location.hostname)&&(o[q0]=Y0),n&&(o[K0]=n),r&&(o[J0]=r),s&&(o[Ru]=s),i&&(o[X0]=i),n_(e,Z0,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hr.set("previous_websocket_failure",!0);try{let r;Ky(),this.mySock=new Oa(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ft.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Oa!==null&&!ft.forceDisallow_}static previouslyFailed(){return hr.isInMemoryStorage||hr.get("previous_websocket_failure")===!0}markConnectionHealthy(){hr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Mi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(R(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=V0(n,$b);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vb))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ft.responsesRequiredToBeHealthy=2;ft.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{static get ALL_TRANSPORTS(){return[Pn,ft]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ft&&ft.isAvailable();let r=n&&!ft.previouslyFailed();if(e.webSocketOnly&&(n||De("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ft];else{const s=this.transports_=[];for(const i of vs.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);vs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=6e4,Gb=5e3,Kb=10*1024,qb=100*1024,vc="t",Wp="d",Yb="s",Bp="r",Qb="e",zp="o",$p="a",Vp="n",Hp="p",Jb="h";class Xb{constructor(e,n,r,s,i,o,a,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=io("c:"+this.id+":"),this.transportManager_=new vs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=pi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>qb?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Kb?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vc in e){const n=e[vc];n===$p?this.upgradeIfSecondaryHealthy_():n===Bp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ks("t",e),r=Ks("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$p,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ks("t",e),r=Ks("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ks(vc,e);if(Wp in e){const r=e[Wp];if(n===Jb){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Vp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Yb?this.onConnectionShutdown_(r):n===Bp?this.onReset_(r):n===Qb?Pu("Server Error: "+r):n===zp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ah!==r&&De("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Hb))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Gb))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends c_{static getInstance(){return new Ma}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=32,Kp=768;class Y{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function q(){return new Y("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function qn(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Y(t.pieces_,e)}function uh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Zb(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Bi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function u_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Y(e,0)}function le(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Y)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Y(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function Fe(t,e){const n=$(t),r=$(e);if(n===null)return e;if(n===r)return Fe(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function eN(t,e){const n=Bi(t,0),r=Bi(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Or(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function dh(t,e){if(qn(t)!==qn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(qn(t)>qn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class tN{constructor(e,n){this.errorPrefix_=n,this.parts_=Bi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fl(this.parts_[r]);d_(this)}}function nN(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=fl(e),d_(t)}function rN(t){const e=t.parts_.pop();t.byteLength_-=fl(e),t.parts_.length>0&&(t.byteLength_-=1)}function d_(t){if(t.byteLength_>Kp)throw new Error(t.errorPrefix_+"has a key path longer than "+Kp+" bytes ("+t.byteLength_+").");if(t.parts_.length>Gp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Gp+") or object contains a cycle "+ar(t))}function ar(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends c_{static getInstance(){return new hh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=1e3,sN=60*5*1e3,qp=30*1e3,iN=1.3,oN=3e4,aN="server_kill",Yp=3;class _t extends l_{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=_t.nextPersistentConnectionId_++,this.log_=io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qs,this.maxReconnectDelay_=sN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ky())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ma.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ve(i)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Ze,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;_t.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&jt(e,"w")){const r=Sr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();De(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||R1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=P1(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Pu("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oN&&(this.reconnectDelay_=qs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*iN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+_t.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){R(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?be("getToken() completed but was canceled"):(be("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Xb(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{De(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(aN)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&De(d),c())}}}interrupt(e){be("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){be("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Na(this.interruptReasons_)&&(this.reconnectDelay_=qs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>oh(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Y(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){be("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Yp&&(this.reconnectDelay_=qp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){be("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Yp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+F0.replace(/\./g,"-")]=1,Vd()?e["framework.cordova"]=1:Gy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ma.getInstance().currentlyOnline();return Na(this.interruptReasons_)&&e}}_t.nextPersistentConnectionId_=0;_t.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new H(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new H(Kn,e),s=new H(Kn,n);return this.compare(r,s)!==0}minPost(){return H.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo;class h_ extends vl{static get __EMPTY_NODE(){return jo}static set __EMPTY_NODE(e){jo=e}compare(e,n){return Or(e.name,n.name)}isDefinedOn(e){throw ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return H.MIN}maxPost(){return new H(fn,jo)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new H(e,jo)}toString(){return".key"}}const $t=new h_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ce{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ce.RED,this.left=s??Ge.EMPTY_NODE,this.right=i??Ge.EMPTY_NODE}copy(e,n,r,s,i){return new Ce(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ge.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ge.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ce.RED=!0;Ce.BLACK=!1;class lN{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ce(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ge{constructor(e,n=Ge.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ge(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ce.BLACK,null,null))}remove(e){return new Ge(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Do(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Do(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Do(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Do(this.root_,null,this.comparator_,!0,e)}}Ge.EMPTY_NODE=new lN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e){return Or(t.name,e.name)}function fh(t,e){return Or(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au;function uN(t){Au=t}const f_=function(t){return typeof t=="number"?"number:"+H0(t):"string:"+t},p_=function(t){if(t.isLeafNode()){const e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&jt(e,".sv"),"Priority must be a string or number.")}else R(t===Au||t.isEmpty(),"priority of unexpected type.");R(t===Au||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp;class Se{static set __childrenNodeConstructor(e){Qp=e}static get __childrenNodeConstructor(){return Qp}constructor(e,n=Se.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),p_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Se(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Se.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return V(e)?this:$(e)===".priority"?this.priorityNode_:Se.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Se.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(R(r!==".priority"||qn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Se.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+f_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=H0(this.value_):e+=this.value_,this.lazyHash_=z0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Se.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Se.__childrenNodeConstructor?-1:(R(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Se.VALUE_TYPE_ORDER.indexOf(n),i=Se.VALUE_TYPE_ORDER.indexOf(r);return R(s>=0,"Unknown leaf type: "+n),R(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Se.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m_,g_;function dN(t){m_=t}function hN(t){g_=t}class fN extends vl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Or(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return H.MIN}maxPost(){return new H(fn,new Se("[PRIORITY-POST]",g_))}makePost(e,n){const r=m_(e);return new H(n,new Se("[PRIORITY-POST]",r))}toString(){return".priority"}}const re=new fN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=Math.log(2);class mN{constructor(e){const n=i=>parseInt(Math.log(i)/pN,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const La=function(t,e,n,r){t.sort(e);const s=function(c,u){const f=u-c;let d,h;if(f===0)return null;if(f===1)return d=t[c],h=n?n(d):d,new Ce(h,d.node,Ce.BLACK,null,null);{const _=parseInt(f/2,10)+c,x=s(c,_),w=s(_+1,u);return d=t[_],h=n?n(d):d,new Ce(h,d.node,Ce.BLACK,x,w)}},i=function(c){let u=null,f=null,d=t.length;const h=function(x,w){const P=d-x,g=d;d-=x;const p=s(P+1,g),m=t[P],S=n?n(m):m;_(new Ce(S,m.node,w,null,p))},_=function(x){u?(u.left=x,u=x):(f=x,u=x)};for(let x=0;x<c.count;++x){const w=c.nextBitIsOne(),P=Math.pow(2,c.count-(x+1));w?h(P,Ce.BLACK):(h(P,Ce.BLACK),h(P,Ce.RED))}return f},o=new mN(t.length),a=i(o);return new Ge(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc;const Br={};class rn{static get Default(){return R(Br&&re,"ChildrenNode.ts has not been loaded"),xc=xc||new rn({".priority":Br},{".priority":re}),xc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Sr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ge?n:null}hasIndex(e){return jt(this.indexSet_,e.toString())}addIndex(e,n){R(e!==$t,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(H.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=La(r,e.getCompare()):a=Br;const c=e.toString(),u={...this.indexSet_};u[c]=e;const f={...this.indexes_};return f[c]=a,new rn(f,u)}addToIndexes(e,n){const r=Ia(this.indexes_,(s,i)=>{const o=Sr(this.indexSet_,i);if(R(o,"Missing index implementation for "+i),s===Br)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(H.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),La(a,o.getCompare())}else return Br;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new H(e.name,a))),c.insert(e,e.node)}});return new rn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ia(this.indexes_,s=>{if(s===Br)return s;{const i=n.get(e.name);return i?s.remove(new H(e.name,i)):s}});return new rn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ys;class F{static get EMPTY_NODE(){return Ys||(Ys=new F(new Ge(fh),null,rn.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&p_(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ys}updatePriority(e){return this.children_.isEmpty()?this:new F(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ys:n}}getChild(e){const n=$(e);return n===null?this:this.getImmediateChild(n).getChild(Z(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(R(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new H(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Ys:this.priorityNode_;return new F(s,o,i)}}updateChild(e,n){const r=$(e);if(r===null)return n;{R($(e)!==".priority"||qn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Z(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(re,(o,a)=>{n[o]=a.val(e),r++,i&&F.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+f_(this.getPriority().val())+":"),this.forEachChild(re,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":z0(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new H(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new H(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new H(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,H.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,H.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oo?-1:0}withIndex(e){if(e===$t||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new F(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===$t||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(re),s=n.getIterator(re);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===$t?null:this.indexMap_.get(e.toString())}}F.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gN extends F{constructor(){super(new Ge(fh),F.EMPTY_NODE,rn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return F.EMPTY_NODE}isEmpty(){return!1}}const oo=new gN;Object.defineProperties(H,{MIN:{value:new H(Kn,F.EMPTY_NODE)},MAX:{value:new H(fn,oo)}});h_.__EMPTY_NODE=F.EMPTY_NODE;Se.__childrenNodeConstructor=F;uN(oo);hN(oo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=!0;function ue(t,e=null){if(t===null)return F.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Se(n,ue(e))}if(!(t instanceof Array)&&yN){const n=[];let r=!1;if(Ie(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ue(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new H(o,c)))}}),n.length===0)return F.EMPTY_NODE;const i=La(n,cN,o=>o.name,fh);if(r){const o=La(n,re.getCompare());return new F(i,ue(e),new rn({".priority":o},{".priority":re}))}else return new F(i,ue(e),rn.Default)}else{let n=F.EMPTY_NODE;return Ie(t,(r,s)=>{if(jt(t,r)&&r.substring(0,1)!=="."){const i=ue(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ue(e))}}dN(ue);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends vl{constructor(e){super(),this.indexPath_=e,R(!V(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Or(e.name,n.name):i}makePost(e,n){const r=ue(e),s=F.EMPTY_NODE.updateChild(this.indexPath_,r);return new H(n,s)}maxPost(){const e=F.EMPTY_NODE.updateChild(this.indexPath_,oo);return new H(fn,e)}toString(){return Bi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N extends vl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Or(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return H.MIN}maxPost(){return H.MAX}makePost(e,n){const r=ue(e);return new H(n,r)}toString(){return".value"}}const mh=new _N;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){return{type:"value",snapshotNode:t}}function xs(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $i(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function vN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(zi(n,a)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(xs(n,r)):o.trackChildChange($i(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(re,(s,i)=>{n.hasChild(s)||r.trackChildChange(zi(s,i))}),n.isLeafNode()||n.forEachChild(re,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange($i(s,i,o))}else r.trackChildChange(xs(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?F.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.indexedFilter_=new gh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vi.getStartPost_(e),this.endPost_=Vi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new H(n,r))||(r=F.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=F.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(F.EMPTY_NODE);const i=this;return n.forEachChild(re,(o,a)=>{i.matches(new H(o,a))||(s=s.updateImmediateChild(o,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Vi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new H(n,r))||(r=F.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=F.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(F.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,_)=>d(_,h)}else o=this.index_.getCompare();const a=e;R(a.numChildren()===this.limit_,"");const c=new H(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const _=h==null?1:o(h,c);if(f&&!r.isEmpty()&&_>=0)return i!=null&&i.trackChildChange($i(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(zi(n,d));const w=a.updateImmediateChild(n,F.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(xs(h.name,h.node)),w.updateImmediateChild(h.name,h.node)):w}}else return r.isEmpty()?e:f&&o(u,c)>=0?(i!=null&&(i.trackChildChange(zi(u.name,u.node)),i.trackChildChange(xs(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,F.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=re}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kn}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===re}copy(){const e=new yh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wN(t){return t.loadsAllData()?new gh(t.getIndex()):t.hasLimit()?new xN(t):new Vi(t)}function SN(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function EN(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function ju(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function CN(t,e,n){let r;return t.index_===$t||n?r=ju(t,e,n):r=ju(t,e,fn),r.startAfterSet_=!0,r}function Du(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function bN(t,e,n){let r;return t.index_===$t||n?r=Du(t,e,n):r=Du(t,e,Kn),r.endBeforeSet_=!0,r}function xl(t,e){const n=t.copy();return n.index_=e,n}function Jp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===re?n="$priority":t.index_===mh?n="$value":t.index_===$t?n="$key":(R(t.index_ instanceof ph,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ve(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ve(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ve(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ve(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Xp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==re&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends l_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=io("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Fa.getListenId_(e,r),a={};this.listens_[o]=a;const c=Jp(e._queryParams);this.restRequest_(i+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),Sr(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const r=Fa.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Jp(e._queryParams),r=e._path.toString(),s=new Ze;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ps(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Mi(a.responseText)}catch{De("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&De("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(){return{value:null,children:new Map}}function Ds(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$(e);t.children.has(r)||t.children.set(r,Ua());const s=t.children.get(r);e=Z(e),Ds(s,e,n)}}function Ou(t,e){if(V(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(re,(r,s)=>{Ds(t,new Y(r),s)}),Ou(t,e)}}else if(t.children.size>0){const n=$(e);return e=Z(e),t.children.has(n)&&Ou(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Mu(t,e,n){t.value!==null?n(e,t.value):IN(t,(r,s)=>{const i=new Y(e.toString()+"/"+r);Mu(s,i,n)})}function IN(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ie(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=10*1e3,TN=30*1e3,PN=5*60*1e3;class RN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new kN(e);const r=Zp+(TN-Zp)*Math.random();pi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ie(e,(s,i)=>{i>0&&jt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),pi(this.reportStats_.bind(this),Math.floor(Math.random()*2*PN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(It||(It={}));function _h(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=It.ACK_USER_WRITE,this.source=_h()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Y(e));return new Wa(q(),n,this.revert)}}else return R($(this.path)===e,"operationForChild called for unrelated child."),new Wa(Z(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.source=e,this.path=n,this.type=It.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new Hi(this.source,q()):new Hi(this.source,Z(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=It.OVERWRITE}operationForChild(e){return V(this.path)?new Nr(this.source,q(),this.snap.getImmediateChild(e)):new Nr(this.source,Z(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=It.MERGE}operationForChild(e){if(V(this.path)){const n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new Nr(this.source,q(),n.value):new ws(this.source,q(),n)}else return R($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ws(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;const n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jN(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(vN(o.childName,o.snapshotNode))}),Qs(t,s,"child_removed",e,r,n),Qs(t,s,"child_added",e,r,n),Qs(t,s,"child_moved",i,r,n),Qs(t,s,"child_changed",e,r,n),Qs(t,s,"value",e,r,n),s}function Qs(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>ON(t,a,c)),o.forEach(a=>{const c=DN(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function DN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ON(t,e,n){if(e.childName==null||n.childName==null)throw ks("Should only compare child_ events.");const r=new H(e.childName,e.snapshotNode),s=new H(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e){return{eventCache:t,serverCache:e}}function mi(t,e,n,r){return wl(new Yn(e,n,r),t.serverCache)}function __(t,e,n,r){return wl(t.eventCache,new Yn(e,n,r))}function Ba(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ir(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc;const MN=()=>(wc||(wc=new Ge(_b)),wc);class te{static fromObject(e){let n=new te(null);return Ie(e,(r,s)=>{n=n.set(new Y(r),s)}),n}constructor(e,n=MN()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:q(),value:this.value};if(V(e))return null;{const r=$(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Z(e),n);return i!=null?{path:le(new Y(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{const n=$(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new te(null)}}set(e,n){if(V(e))return new te(n,this.children);{const r=$(e),i=(this.children.get(r)||new te(null)).set(Z(e),n),o=this.children.insert(r,i);return new te(this.value,o)}}remove(e){if(V(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const n=$(e),r=this.children.get(n);if(r){const s=r.remove(Z(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new te(null):new te(this.value,i)}else return this}}get(e){if(V(e))return this.value;{const n=$(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(V(e))return n;{const r=$(e),i=(this.children.get(r)||new te(null)).setTree(Z(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new te(this.value,o)}}fold(e){return this.fold_(q(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(le(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,q(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(V(e))return null;{const i=$(e),o=this.children.get(i);return o?o.findOnPath_(Z(e),le(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,q(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);const s=$(e),i=this.children.get(s);return i?i.foreachOnPath_(Z(e),le(n,s),r):new te(null)}}foreach(e){this.foreach_(q(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(le(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.writeTree_=e}static empty(){return new Rt(new te(null))}}function gi(t,e,n){if(V(e))return new Rt(new te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Fe(s,e);return i=i.updateChild(o,n),new Rt(t.writeTree_.set(s,i))}else{const s=new te(n),i=t.writeTree_.setTree(e,s);return new Rt(i)}}}function Lu(t,e,n){let r=t;return Ie(n,(s,i)=>{r=gi(r,le(e,s),i)}),r}function em(t,e){if(V(e))return Rt.empty();{const n=t.writeTree_.setTree(e,new te(null));return new Rt(n)}}function Fu(t,e){return Mr(t,e)!=null}function Mr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Fe(n.path,e)):null}function tm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(re,(r,s)=>{e.push(new H(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new H(r,s.value))}),e}function zn(t,e){if(V(e))return t;{const n=Mr(t,e);return n!=null?new Rt(new te(n)):new Rt(t.writeTree_.subtree(e))}}function Uu(t){return t.writeTree_.isEmpty()}function Ss(t,e){return v_(q(),t.writeTree_,e)}function v_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(R(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=v_(le(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(le(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e){return E_(e,t)}function LN(t,e,n,r,s){R(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=gi(t.visibleWrites,e,n)),t.lastWriteId=r}function FN(t,e,n,r){R(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Lu(t.visibleWrites,e,n),t.lastWriteId=r}function UN(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function WN(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&BN(a,r.path)?s=!1:mt(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return zN(t),!0;if(r.snap)t.visibleWrites=em(t.visibleWrites,r.path);else{const a=r.children;Ie(a,c=>{t.visibleWrites=em(t.visibleWrites,le(r.path,c))})}return!0}else return!1}function BN(t,e){if(t.snap)return mt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mt(le(t.path,n),e))return!0;return!1}function zN(t){t.visibleWrites=x_(t.allWrites,$N,q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $N(t){return t.visible}function x_(t,e,n){let r=Rt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)mt(n,o)?(a=Fe(n,o),r=gi(r,a,i.snap)):mt(o,n)&&(a=Fe(o,n),r=gi(r,q(),i.snap.getChild(a)));else if(i.children){if(mt(n,o))a=Fe(n,o),r=Lu(r,a,i.children);else if(mt(o,n))if(a=Fe(o,n),V(a))r=Lu(r,q(),i.children);else{const c=Sr(i.children,$(a));if(c){const u=c.getChild(Z(a));r=gi(r,q(),u)}}}else throw ks("WriteRecord should have .snap or .children")}}return r}function w_(t,e,n,r,s){if(!r&&!s){const i=Mr(t.visibleWrites,e);if(i!=null)return i;{const o=zn(t.visibleWrites,e);if(Uu(o))return n;if(n==null&&!Fu(o,q()))return null;{const a=n||F.EMPTY_NODE;return Ss(o,a)}}}else{const i=zn(t.visibleWrites,e);if(!s&&Uu(i))return n;if(!s&&n==null&&!Fu(i,q()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(mt(u.path,e)||mt(e,u.path))},a=x_(t.allWrites,o,e),c=n||F.EMPTY_NODE;return Ss(a,c)}}}function VN(t,e,n){let r=F.EMPTY_NODE;const s=Mr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(re,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=zn(t.visibleWrites,e);return n.forEachChild(re,(o,a)=>{const c=Ss(zn(i,new Y(o)),a);r=r.updateImmediateChild(o,c)}),tm(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=zn(t.visibleWrites,e);return tm(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function HN(t,e,n,r,s){R(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=le(e,n);if(Fu(t.visibleWrites,i))return null;{const o=zn(t.visibleWrites,i);return Uu(o)?s.getChild(n):Ss(o,s.getChild(n))}}function GN(t,e,n,r){const s=le(e,n),i=Mr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=zn(t.visibleWrites,s);return Ss(o,r.getNode().getImmediateChild(n))}else return null}function KN(t,e){return Mr(t.visibleWrites,e)}function qN(t,e,n,r,s,i,o){let a;const c=zn(t.visibleWrites,e),u=Mr(c,q());if(u!=null)a=u;else if(n!=null)a=Ss(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const f=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=h.getNext();for(;_&&f.length<s;)d(_,r)!==0&&f.push(_),_=h.getNext();return f}else return[]}function YN(){return{visibleWrites:Rt.empty(),allWrites:[],lastWriteId:-1}}function za(t,e,n,r){return w_(t.writeTree,t.treePath,e,n,r)}function wh(t,e){return VN(t.writeTree,t.treePath,e)}function nm(t,e,n,r){return HN(t.writeTree,t.treePath,e,n,r)}function $a(t,e){return KN(t.writeTree,le(t.treePath,e))}function QN(t,e,n,r,s,i){return qN(t.writeTree,t.treePath,e,n,r,s,i)}function Sh(t,e,n){return GN(t.writeTree,t.treePath,e,n)}function S_(t,e){return E_(le(t.treePath,e),t.writeTree)}function E_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,$i(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,zi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,xs(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,$i(r,e.snapshotNode,s.oldSnap));else throw ks("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const C_=new XN;class Eh{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Yn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sh(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ir(this.viewCache_),i=QN(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){return{filter:t}}function eI(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function tI(t,e,n,r,s){const i=new JN;let o,a;if(n.type===It.OVERWRITE){const u=n;u.source.fromUser?o=Wu(t,e,u.path,u.snap,r,s,i):(R(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!V(u.path),o=Va(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===It.MERGE){const u=n;u.source.fromUser?o=rI(t,e,u.path,u.children,r,s,i):(R(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Bu(t,e,u.path,u.children,r,s,a,i))}else if(n.type===It.ACK_USER_WRITE){const u=n;u.revert?o=oI(t,e,u.path,r,s,i):o=sI(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===It.LISTEN_COMPLETE)o=iI(t,e,n.path,r,i);else throw ks("Unknown operation type: "+n.type);const c=i.getChanges();return nI(e,o,c),{viewCache:o,changes:c}}function nI(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Ba(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(y_(Ba(e)))}}function b_(t,e,n,r,s,i){const o=e.eventCache;if($a(r,n)!=null)return e;{let a,c;if(V(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ir(e),f=u instanceof F?u:F.EMPTY_NODE,d=wh(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=za(r,Ir(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=$(n);if(u===".priority"){R(qn(n)===1,"Can't have a priority with additional path components");const f=o.getNode();c=e.serverCache.getNode();const d=nm(r,n,f,c);d!=null?a=t.filter.updatePriority(f,d):a=o.getNode()}else{const f=Z(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const h=nm(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(f,h):d=o.getNode().getImmediateChild(u)}else d=Sh(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,f,s,i):a=o.getNode()}}return mi(e,a,o.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function Va(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(V(n))u=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(n,r);u=f.updateFullNode(c.getNode(),_,null)}else{const _=$(n);if(!c.isCompleteForPath(n)&&qn(n)>1)return e;const x=Z(n),P=c.getNode().getImmediateChild(_).updateChild(x,r);_===".priority"?u=f.updatePriority(c.getNode(),P):u=f.updateChild(c.getNode(),_,P,x,C_,null)}const d=__(e,u,c.isFullyInitialized()||V(n),f.filtersNodes()),h=new Eh(s,d,i);return b_(t,d,n,s,h,a)}function Wu(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const f=new Eh(s,e,i);if(V(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=mi(e,u,!0,t.filter.filtersNodes());else{const d=$(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=mi(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=Z(n),_=a.getNode().getImmediateChild(d);let x;if(V(h))x=r;else{const w=f.getCompleteChild(d);w!=null?uh(h)===".priority"&&w.getChild(u_(h)).isEmpty()?x=w:x=w.updateChild(h,r):x=F.EMPTY_NODE}if(_.equals(x))c=e;else{const w=t.filter.updateChild(a.getNode(),d,x,h,f,o);c=mi(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function rm(t,e){return t.eventCache.isCompleteForChild(e)}function rI(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const f=le(n,c);rm(e,$(f))&&(a=Wu(t,a,f,u,s,i,o))}),r.foreach((c,u)=>{const f=le(n,c);rm(e,$(f))||(a=Wu(t,a,f,u,s,i,o))}),a}function sm(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Bu(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;V(n)?u=r:u=new te(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),x=sm(t,_,h);c=Va(t,c,new Y(d),x,s,i,o,a)}}),u.children.inorderTraversal((d,h)=>{const _=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!_){const x=e.serverCache.getNode().getImmediateChild(d),w=sm(t,x,h);c=Va(t,c,new Y(d),w,s,i,o,a)}}),c}function sI(t,e,n,r,s,i,o){if($a(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(V(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Va(t,e,n,c.getNode().getChild(n),s,i,a,o);if(V(n)){let u=new te(null);return c.getNode().forEachChild($t,(f,d)=>{u=u.set(new Y(f),d)}),Bu(t,e,n,u,s,i,a,o)}else return e}else{let u=new te(null);return r.foreach((f,d)=>{const h=le(n,f);c.isCompleteForPath(h)&&(u=u.set(f,c.getNode().getChild(h)))}),Bu(t,e,n,u,s,i,a,o)}}function iI(t,e,n,r,s){const i=e.serverCache,o=__(e,i.getNode(),i.isFullyInitialized()||V(n),i.isFiltered());return b_(t,o,n,r,C_,s)}function oI(t,e,n,r,s,i){let o;if($a(r,n)!=null)return e;{const a=new Eh(r,e,s),c=e.eventCache.getNode();let u;if(V(n)||$(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=za(r,Ir(e));else{const d=e.serverCache.getNode();R(d instanceof F,"serverChildren would be complete if leaf node"),f=wh(r,d)}f=f,u=t.filter.updateFullNode(c,f,i)}else{const f=$(n);let d=Sh(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,Z(n),a,i):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,F.EMPTY_NODE,Z(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=za(r,Ir(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||$a(r,q())!=null,mi(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new gh(r.getIndex()),i=wN(r);this.processor_=ZN(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(F.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(F.EMPTY_NODE,a.getNode(),null),f=new Yn(c,o.isFullyInitialized(),s.filtersNodes()),d=new Yn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=wl(d,f),this.eventGenerator_=new AN(this.query_)}get query(){return this.query_}}function lI(t){return t.viewCache_.serverCache.getNode()}function cI(t){return Ba(t.viewCache_)}function uI(t,e){const n=Ir(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function im(t){return t.eventRegistrations_.length===0}function dI(t,e){t.eventRegistrations_.push(e)}function om(t,e,n){const r=[];if(n){R(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function am(t,e,n,r){e.type===It.MERGE&&e.source.queryId!==null&&(R(Ir(t.viewCache_),"We should always have a full cache before handling merges"),R(Ba(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=tI(t.processor_,s,e,n,r);return eI(t.processor_,i.viewCache),R(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,N_(t,i.changes,i.viewCache.eventCache.getNode(),null)}function hI(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(re,(i,o)=>{r.push(xs(i,o))}),n.isFullyInitialized()&&r.push(y_(n.getNode())),N_(t,r,n.getNode(),e)}function N_(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return jN(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha;class I_{constructor(){this.views=new Map}}function fI(t){R(!Ha,"__referenceConstructor has already been defined"),Ha=t}function pI(){return R(Ha,"Reference.ts has not been loaded"),Ha}function mI(t){return t.views.size===0}function Ch(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return R(i!=null,"SyncTree gave us an op for an invalid query."),am(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(am(o,e,n,r));return i}}function k_(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=za(n,s?r:null),c=!1;a?c=!0:r instanceof F?(a=wh(n,r),c=!1):(a=F.EMPTY_NODE,c=!1);const u=wl(new Yn(a,c,!1),new Yn(r,s,!1));return new aI(e,u)}return o}function gI(t,e,n,r,s,i){const o=k_(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),dI(o,n),hI(o,n)}function yI(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Qn(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(om(u,n,r)),im(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(om(c,n,r)),im(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Qn(t)&&i.push(new(pI())(e._repo,e._path)),{removed:i,events:o}}function T_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $n(t,e){let n=null;for(const r of t.views.values())n=n||uI(r,e);return n}function P_(t,e){if(e._queryParams.loadsAllData())return El(t);{const r=e._queryIdentifier;return t.views.get(r)}}function R_(t,e){return P_(t,e)!=null}function Qn(t){return El(t)!=null}function El(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga;function _I(t){R(!Ga,"__referenceConstructor has already been defined"),Ga=t}function vI(){return R(Ga,"Reference.ts has not been loaded"),Ga}let xI=1;class lm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=YN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bh(t,e,n,r,s){return LN(t.pendingWriteTree_,e,n,r,s),s?Os(t,new Nr(_h(),e,n)):[]}function wI(t,e,n,r){FN(t.pendingWriteTree_,e,n,r);const s=te.fromObject(n);return Os(t,new ws(_h(),e,s))}function Rn(t,e,n=!1){const r=UN(t.pendingWriteTree_,e);if(WN(t.pendingWriteTree_,e)){let i=new te(null);return r.snap!=null?i=i.set(q(),!0):Ie(r.children,o=>{i=i.set(new Y(o),!0)}),Os(t,new Wa(r.path,i,n))}else return[]}function ao(t,e,n){return Os(t,new Nr(vh(),e,n))}function SI(t,e,n){const r=te.fromObject(n);return Os(t,new ws(vh(),e,r))}function EI(t,e){return Os(t,new Hi(vh(),e))}function CI(t,e,n){const r=Nh(t,n);if(r){const s=Ih(r),i=s.path,o=s.queryId,a=Fe(i,e),c=new Hi(xh(o),a);return kh(t,i,c)}else return[]}function Ka(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||R_(o,e))){const c=yI(o,e,n,r);mI(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const f=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,_)=>Qn(_));if(f&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const _=II(h);for(let x=0;x<_.length;++x){const w=_[x],P=w.query,g=O_(t,w);t.listenProvider_.startListening(yi(P),Gi(t,P),g.hashFn,g.onComplete)}}}!d&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(yi(e),null):u.forEach(h=>{const _=t.queryToTagMap.get(bl(h));t.listenProvider_.stopListening(yi(h),_)}))}kI(t,u)}return a}function A_(t,e,n,r){const s=Nh(t,r);if(s!=null){const i=Ih(s),o=i.path,a=i.queryId,c=Fe(o,e),u=new Nr(xh(a),c,n);return kh(t,o,u)}else return[]}function bI(t,e,n,r){const s=Nh(t,r);if(s){const i=Ih(s),o=i.path,a=i.queryId,c=Fe(o,e),u=te.fromObject(n),f=new ws(xh(a),c,u);return kh(t,o,f)}else return[]}function zu(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,_)=>{const x=Fe(h,s);i=i||$n(_,x),o=o||Qn(_)});let a=t.syncPointTree_.get(s);a?(o=o||Qn(a),i=i||$n(a,q())):(a=new I_,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=F.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((_,x)=>{const w=$n(x,q());w&&(i=i.updateImmediateChild(_,w))}));const u=R_(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=bl(e);R(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const _=TI();t.queryToTagMap.set(h,_),t.tagToQueryMap.set(_,h)}const f=Sl(t.pendingWriteTree_,s);let d=gI(a,e,n,f,i,c);if(!u&&!o&&!r){const h=P_(a,e);d=d.concat(PI(t,e,h))}return d}function Cl(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Fe(o,e),u=$n(a,c);if(u)return u});return w_(s,e,i,n,!0)}function NI(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=Fe(u,n);r=r||$n(f,d)});let s=t.syncPointTree_.get(n);s?r=r||$n(s,q()):(s=new I_,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Yn(r,!0,!1):null,a=Sl(t.pendingWriteTree_,e._path),c=k_(s,e,a,i?o.getNode():F.EMPTY_NODE,i);return cI(c)}function Os(t,e){return j_(e,t.syncPointTree_,null,Sl(t.pendingWriteTree_,q()))}function j_(t,e,n,r){if(V(t.path))return D_(t,e,n,r);{const s=e.get(q());n==null&&s!=null&&(n=$n(s,q()));let i=[];const o=$(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,f=S_(r,o);i=i.concat(j_(a,c,u,f))}return s&&(i=i.concat(Ch(s,t,r,n))),i}}function D_(t,e,n,r){const s=e.get(q());n==null&&s!=null&&(n=$n(s,q()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=S_(r,o),f=t.operationForChild(o);f&&(i=i.concat(D_(f,a,c,u)))}),s&&(i=i.concat(Ch(s,t,r,n))),i}function O_(t,e){const n=e.query,r=Gi(t,n);return{hashFn:()=>(lI(e)||F.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?CI(t,n._path,r):EI(t,n._path);{const i=wb(s,n);return Ka(t,n,null,i)}}}}function Gi(t,e){const n=bl(e);return t.queryToTagMap.get(n)}function bl(t){return t._path.toString()+"$"+t._queryIdentifier}function Nh(t,e){return t.tagToQueryMap.get(e)}function Ih(t){const e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}}function kh(t,e,n){const r=t.syncPointTree_.get(e);R(r,"Missing sync point for query tag that we're tracking");const s=Sl(t.pendingWriteTree_,e);return Ch(r,n,s,null)}function II(t){return t.fold((e,n,r)=>{if(n&&Qn(n))return[El(n)];{let s=[];return n&&(s=T_(n)),Ie(r,(i,o)=>{s=s.concat(o)}),s}})}function yi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(vI())(t._repo,t._path):t}function kI(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=bl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function TI(){return xI++}function PI(t,e,n){const r=e._path,s=Gi(t,e),i=O_(t,n),o=t.listenProvider_.startListening(yi(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)R(!Qn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,f,d)=>{if(!V(u)&&f&&Qn(f))return[El(f).query];{let h=[];return f&&(h=h.concat(T_(f).map(_=>_.query))),Ie(d,(_,x)=>{h=h.concat(x)}),h}});for(let u=0;u<c.length;++u){const f=c[u];t.listenProvider_.stopListening(yi(f),Gi(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Th(n)}node(){return this.node_}}class Ph{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=le(this.path_,e);return new Ph(this.syncTree_,n)}node(){return Cl(this.syncTree_,this.path_)}}const RI=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},cm=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return AI(t[".sv"],e,n);if(typeof t[".sv"]=="object")return jI(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},AI=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},jI=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&R(!1,"Unexpected increment value: "+r);const s=e.node();if(R(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},M_=function(t,e,n,r){return Ah(e,new Ph(n,t),r)},Rh=function(t,e,n){return Ah(t,new Th(e),n)};function Ah(t,e,n){const r=t.getPriority().val(),s=cm(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=cm(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Se(a,ue(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Se(s))),o.forEachChild(re,(a,c)=>{const u=Ah(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Nl(t,e){let n=e instanceof Y?e:new Y(e),r=t,s=$(n);for(;s!==null;){const i=Sr(r.node.children,s)||{children:{},childCount:0};r=new jh(s,r,i),n=Z(n),s=$(n)}return r}function Lr(t){return t.node.value}function Dh(t,e){t.node.value=e,$u(t)}function L_(t){return t.node.childCount>0}function DI(t){return Lr(t)===void 0&&!L_(t)}function Il(t,e){Ie(t.node.children,(n,r)=>{e(new jh(n,t,r))})}function F_(t,e,n,r){n&&!r&&e(t),Il(t,s=>{F_(s,e,!0,r)}),n&&r&&e(t)}function OI(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function lo(t){return new Y(t.parent===null?t.name:lo(t.parent)+"/"+t.name)}function $u(t){t.parent!==null&&MI(t.parent,t.name,t)}function MI(t,e,n){const r=DI(n),s=jt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,$u(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,$u(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=/[\[\].#$\/\u0000-\u001F\u007F]/,FI=/[\[\].#$\u0000-\u001F\u007F]/,Sc=10*1024*1024,kl=function(t){return typeof t=="string"&&t.length!==0&&!LI.test(t)},U_=function(t){return typeof t=="string"&&t.length!==0&&!FI.test(t)},UI=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),U_(t)},Ki=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!_l(t)||t&&typeof t=="object"&&jt(t,".sv")},Gt=function(t,e,n,r){r&&e===void 0||co(Er(t,"value"),e,n)},co=function(t,e,n){const r=n instanceof Y?new tN(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ar(r));if(typeof e=="function")throw new Error(t+"contains a function "+ar(r)+" with contents = "+e.toString());if(_l(e))throw new Error(t+"contains "+e.toString()+" "+ar(r));if(typeof e=="string"&&e.length>Sc/3&&fl(e)>Sc)throw new Error(t+"contains a string greater than "+Sc+" utf8 bytes "+ar(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ie(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!kl(o)))throw new Error(t+" contains an invalid key ("+o+") "+ar(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nN(r,o),co(t,a,r),rN(r)}),s&&i)throw new Error(t+' contains ".value" child '+ar(r)+" in addition to actual children.")}},WI=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Bi(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!kl(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(eN);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&mt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},W_=function(t,e,n,r){if(r&&e===void 0)return;const s=Er(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Ie(e,(o,a)=>{const c=new Y(o);if(co(s,a,le(n,c)),uh(c)===".priority"&&!Ki(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),WI(s,i)},Oh=function(t,e,n){if(!(n&&e===void 0)){if(_l(e))throw new Error(Er(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ki(e))throw new Error(Er(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uo=function(t,e,n,r){if(!(r&&n===void 0)&&!kl(n))throw new Error(Er(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Mh=function(t,e,n,r){if(!(r&&n===void 0)&&!U_(n))throw new Error(Er(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},BI=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Mh(t,e,n,r)},Ut=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},B_=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kl(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!UI(n))throw new Error(Er(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tl(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!dh(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function z_(t,e,n){Tl(t,n),$_(t,r=>dh(r,e))}function ot(t,e,n){Tl(t,n),$_(t,r=>mt(r,e)||mt(e,r))}function $_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?($I(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $I(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();gr&&be("event: "+n.toString()),js(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="repo_interrupt",VI=25;class HI{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ua(),this.transactionQueueTree_=new jh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GI(t,e,n){if(t.stats_=lh(t.repoInfo_),t.forceRestClient_||bb())t.server_=new Fa(t.repoInfo_,(r,s,i,o)=>{um(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>dm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new _t(t.repoInfo_,e,(r,s,i,o)=>{um(t,r,s,i,o)},r=>{dm(t,r)},r=>{KI(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Pb(t.repoInfo_,()=>new RN(t.stats_,t.server_)),t.infoData_=new NN,t.infoSyncTree_=new lm({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ao(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Lh(t,"connected",!1),t.serverSyncTree_=new lm({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);ot(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function H_(t){const n=t.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ho(t){return RI({timestamp:H_(t)})}function um(t,e,n,r,s){t.dataUpdateCount++;const i=new Y(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Ia(n,u=>ue(u));o=bI(t.serverSyncTree_,i,c,s)}else{const c=ue(n);o=A_(t.serverSyncTree_,i,c,s)}else if(r){const c=Ia(n,u=>ue(u));o=SI(t.serverSyncTree_,i,c)}else{const c=ue(n);o=ao(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Es(t,i)),ot(t.eventQueue_,a,o)}function dm(t,e){Lh(t,"connected",e),e===!1&&QI(t)}function KI(t,e){Ie(e,(n,r)=>{Lh(t,n,r)})}function Lh(t,e,n){const r=new Y("/.info/"+e),s=ue(n);t.infoData_.updateSnapshot(r,s);const i=ao(t.infoSyncTree_,r,s);ot(t.eventQueue_,r,i)}function Pl(t){return t.nextWriteId_++}function qI(t,e,n){const r=NI(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ue(s).withIndex(e._queryParams.getIndex());zu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ao(t.serverSyncTree_,e._path,i);else{const a=Gi(t.serverSyncTree_,e);o=A_(t.serverSyncTree_,e._path,i,a)}return ot(t.eventQueue_,e._path,o),Ka(t.serverSyncTree_,e,n,null,!0),i},s=>(Ms(t,"get for query "+ve(e)+" failed: "+s),Promise.reject(new Error(s))))}function Fh(t,e,n,r,s){Ms(t,"set",{path:e.toString(),value:n,priority:r});const i=ho(t),o=ue(n,r),a=Cl(t.serverSyncTree_,e),c=Rh(o,a,i),u=Pl(t),f=bh(t.serverSyncTree_,e,c,u,!0);Tl(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(h,_)=>{const x=h==="ok";x||De("set at "+e+" failed: "+h);const w=Rn(t.serverSyncTree_,u,!x);ot(t.eventQueue_,e,w),Jn(t,s,h,_)});const d=Wh(t,e);Es(t,d),ot(t.eventQueue_,d,[])}function YI(t,e,n,r){Ms(t,"update",{path:e.toString(),value:n});let s=!0;const i=ho(t),o={};if(Ie(n,(a,c)=>{s=!1,o[a]=M_(le(e,a),ue(c),t.serverSyncTree_,i)}),s)be("update() called with empty data.  Don't do anything."),Jn(t,r,"ok",void 0);else{const a=Pl(t),c=wI(t.serverSyncTree_,e,o,a);Tl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||De("update at "+e+" failed: "+u);const h=Rn(t.serverSyncTree_,a,!d),_=h.length>0?Es(t,e):e;ot(t.eventQueue_,_,h),Jn(t,r,u,f)}),Ie(n,u=>{const f=Wh(t,le(e,u));Es(t,f)}),ot(t.eventQueue_,e,[])}}function QI(t){Ms(t,"onDisconnectEvents");const e=ho(t),n=Ua();Mu(t.onDisconnect_,q(),(s,i)=>{const o=M_(s,i,t.serverSyncTree_,e);Ds(n,s,o)});let r=[];Mu(n,q(),(s,i)=>{r=r.concat(ao(t.serverSyncTree_,s,i));const o=Wh(t,s);Es(t,o)}),t.onDisconnect_=Ua(),ot(t.eventQueue_,q(),r)}function JI(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&Ou(t.onDisconnect_,e),Jn(t,n,r,s)})}function hm(t,e,n,r){const s=ue(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(i,o)=>{i==="ok"&&Ds(t.onDisconnect_,e,s),Jn(t,r,i,o)})}function XI(t,e,n,r,s){const i=ue(n,r);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,a)=>{o==="ok"&&Ds(t.onDisconnect_,e,i),Jn(t,s,o,a)})}function ZI(t,e,n,r){if(Na(n)){be("onDisconnect().update() called with empty data.  Don't do anything."),Jn(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,i)=>{s==="ok"&&Ie(n,(o,a)=>{const c=ue(a);Ds(t.onDisconnect_,le(e,o),c)}),Jn(t,r,s,i)})}function ek(t,e,n){let r;$(e._path)===".info"?r=zu(t.infoSyncTree_,e,n):r=zu(t.serverSyncTree_,e,n),z_(t.eventQueue_,e._path,r)}function Vu(t,e,n){let r;$(e._path)===".info"?r=Ka(t.infoSyncTree_,e,n):r=Ka(t.serverSyncTree_,e,n),z_(t.eventQueue_,e._path,r)}function G_(t){t.persistentConnection_&&t.persistentConnection_.interrupt(V_)}function tk(t){t.persistentConnection_&&t.persistentConnection_.resume(V_)}function Ms(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),be(n,...e)}function Jn(t,e,n,r){e&&js(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function nk(t,e,n,r,s,i){Ms(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:B0(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Uh(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{co("transaction failed: Data returned ",c,o.path),o.status=0;const u=Nl(t.transactionQueueTree_,e),f=Lr(u)||[];f.push(o),Dh(u,f);let d;typeof c=="object"&&c!==null&&jt(c,".priority")?(d=Sr(c,".priority"),R(Ki(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Cl(t.serverSyncTree_,e)||F.EMPTY_NODE).getPriority().val();const h=ho(t),_=ue(c,d),x=Rh(_,a,h);o.currentOutputSnapshotRaw=_,o.currentOutputSnapshotResolved=x,o.currentWriteId=Pl(t);const w=bh(t.serverSyncTree_,e,x,o.currentWriteId,o.applyLocally);ot(t.eventQueue_,e,w),Rl(t,t.transactionQueueTree_)}}function Uh(t,e,n){return Cl(t.serverSyncTree_,e,n)||F.EMPTY_NODE}function Rl(t,e=t.transactionQueueTree_){if(e||Al(t,e),Lr(e)){const n=q_(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&rk(t,lo(e),n)}else L_(e)&&Il(e,n=>{Rl(t,n)})}function rk(t,e,n){const r=n.map(u=>u.currentWriteId),s=Uh(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const f=n[u];R(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=Fe(e,f.path);i=i.updateChild(d,f.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{Ms(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(Rn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Al(t,Nl(t.transactionQueueTree_,e)),Rl(t,t.transactionQueueTree_),ot(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)js(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{De("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Es(t,e)}},o)}function Es(t,e){const n=K_(t,e),r=lo(n),s=q_(t,n);return sk(t,s,r),r}function sk(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Fe(n,c.path);let f=!1,d;if(R(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,s=s.concat(Rn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=VI)f=!0,d="maxretry",s=s.concat(Rn(t.serverSyncTree_,c.currentWriteId,!0));else{const h=Uh(t,c.path,o);c.currentInputSnapshot=h;const _=e[a].update(h.val());if(_!==void 0){co("transaction failed: Data returned ",_,c.path);let x=ue(_);typeof _=="object"&&_!=null&&jt(_,".priority")||(x=x.updatePriority(h.getPriority()));const P=c.currentWriteId,g=ho(t),p=Rh(x,h,g);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=p,c.currentWriteId=Pl(t),o.splice(o.indexOf(P),1),s=s.concat(bh(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),s=s.concat(Rn(t.serverSyncTree_,P,!0))}else f=!0,d="nodata",s=s.concat(Rn(t.serverSyncTree_,c.currentWriteId,!0))}ot(t.eventQueue_,n,s),s=[],f&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Al(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)js(r[a]);Rl(t,t.transactionQueueTree_)}function K_(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);n!==null&&Lr(r)===void 0;)r=Nl(r,n),e=Z(e),n=$(e);return r}function q_(t,e){const n=[];return Y_(t,e,n),n.sort((r,s)=>r.order-s.order),n}function Y_(t,e,n){const r=Lr(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Il(e,s=>{Y_(t,s,n)})}function Al(t,e){const n=Lr(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Dh(e,n.length>0?n:void 0)}Il(e,r=>{Al(t,r)})}function Wh(t,e){const n=lo(K_(t,e)),r=Nl(t.transactionQueueTree_,e);return OI(r,s=>{Ec(t,s)}),Ec(t,r),F_(r,s=>{Ec(t,s)}),n}function Ec(t,e){const n=Lr(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(R(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(R(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Rn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Dh(e,void 0):n.length=i+1,ot(t.eventQueue_,lo(e),s);for(let o=0;o<r.length;o++)js(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ok(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):De(`Invalid query segment '${n}' in query '${t}'`)}return e}const Hu=function(t,e){const n=ak(t),r=n.namespace;n.domain==="firebase.com"&&Ht(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||gb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new t_(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Y(n.pathString)}},ak=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(s=ik(t.substring(f,d)));const h=ok(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lk=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=fm.charAt(n%64),n=Math.floor(n/64);R(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=fm.charAt(e[s]);return R(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}}class J_{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Ze;return JI(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ut("OnDisconnect.remove",this._path);const e=new Ze;return hm(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ut("OnDisconnect.set",this._path),Gt("OnDisconnect.set",e,this._path,!1);const n=new Ze;return hm(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Ut("OnDisconnect.setWithPriority",this._path),Gt("OnDisconnect.setWithPriority",e,this._path,!1),Oh("OnDisconnect.setWithPriority",n,!1);const r=new Ze;return XI(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Ut("OnDisconnect.update",this._path),W_("OnDisconnect.update",e,this._path,!1);const n=new Ze;return ZI(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return V(this._path)?null:uh(this._path)}get ref(){return new Dt(this._repo,this._path)}get _queryIdentifier(){const e=Xp(this._queryParams),n=oh(e);return n==="{}"?"default":n}get _queryObject(){return Xp(this._queryParams)}isEqual(e){if(e=se(e),!(e instanceof ct))return!1;const n=this._repo===e._repo,r=dh(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Zb(this._path)}}function jl(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function tr(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===$t){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Kn)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==fn)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===re){if(e!=null&&!Ki(e)||n!=null&&!Ki(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(R(t.getIndex()instanceof ph||t.getIndex()===mh,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Dl(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Dt extends ct{constructor(e,n){super(e,n,new yh,!1)}get parent(){const e=u_(this._path);return e===null?null:new Dt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class kr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Y(e),r=Cs(this.ref,e);return new kr(this._node.getChild(n),r,re)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new kr(s,Cs(this.ref,r),re)))}hasChild(e){const n=new Y(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uk(t,e){return t=se(t),t._checkNotDeleted("ref"),e!==void 0?Cs(t._root,e):t._root}function NP(t,e){t=se(t),t._checkNotDeleted("refFromURL");const n=Hu(e,t._repo.repoInfo_.nodeAdmin);B_("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Ht("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),uk(t,n.path.toString())}function Cs(t,e){return t=se(t),$(t._path)===null?BI("child","path",e,!1):Mh("child","path",e,!1),new Dt(t._repo,le(t._path,e))}function IP(t){return t=se(t),new ck(t._repo,t._path)}function kP(t,e){t=se(t),Ut("push",t._path),Gt("push",e,t._path,!0);const n=H_(t._repo),r=lk(n),s=Cs(t,r),i=Cs(t,r);let o;return e!=null?o=X_(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function TP(t){return Ut("remove",t._path),X_(t,null)}function X_(t,e){t=se(t),Ut("set",t._path),Gt("set",e,t._path,!1);const n=new Ze;return Fh(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function PP(t,e){t=se(t),Ut("setPriority",t._path),Oh("setPriority",e,!1);const n=new Ze;return Fh(t._repo,le(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function RP(t,e,n){if(Ut("setWithPriority",t._path),Gt("setWithPriority",e,t._path,!1),Oh("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Ze;return Fh(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function AP(t,e){W_("update",e,t._path,!1);const n=new Ze;return YI(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function jP(t){t=se(t);const e=new Bh(()=>{}),n=new fo(e);return qI(t._repo,t,n).then(r=>new kr(r,new Dt(t._repo,t._path),t._queryParams.getIndex()))}class fo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Q_("value",this,new kr(e.snapshotNode,new Dt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new J_(this,e,n):null}matches(e){return e instanceof fo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Ol{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new J_(this,e,n):null}createEvent(e,n){R(e.childName!=null,"Child events should have a childName.");const r=Cs(new Dt(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new Q_(e.type,this,new kr(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ol?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function po(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const c=n,u=(f,d)=>{Vu(t._repo,t,a),c(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Bh(n,i||void 0),a=e==="value"?new fo(o):new Ol(e,o);return ek(t._repo,t,a),()=>Vu(t._repo,t,a)}function dk(t,e,n,r){return po(t,"value",e,n,r)}function DP(t,e,n,r){return po(t,"child_added",e,n,r)}function OP(t,e,n,r){return po(t,"child_changed",e,n,r)}function MP(t,e,n,r){return po(t,"child_moved",e,n,r)}function LP(t,e,n,r){return po(t,"child_removed",e,n,r)}function FP(t,e,n){let r=null;const s=n?new Bh(n):null;e==="value"?r=new fo(s):e&&(r=new Ol(e,s)),Vu(t._repo,t,r)}class Ot{}class Z_ extends Ot{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Gt("endAt",this._value,e._path,!0);const n=Du(e._queryParams,this._value,this._key);if(Dl(n),tr(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ct(e._repo,e._path,n,e._orderByCalled)}}function UP(t,e){return uo("endAt","key",e,!0),new Z_(t,e)}class hk extends Ot{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Gt("endBefore",this._value,e._path,!1);const n=bN(e._queryParams,this._value,this._key);if(Dl(n),tr(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ct(e._repo,e._path,n,e._orderByCalled)}}function WP(t,e){return uo("endBefore","key",e,!0),new hk(t,e)}class ev extends Ot{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Gt("startAt",this._value,e._path,!0);const n=ju(e._queryParams,this._value,this._key);if(Dl(n),tr(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ct(e._repo,e._path,n,e._orderByCalled)}}function BP(t=null,e){return uo("startAt","key",e,!0),new ev(t,e)}class fk extends Ot{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Gt("startAfter",this._value,e._path,!1);const n=CN(e._queryParams,this._value,this._key);if(Dl(n),tr(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ct(e._repo,e._path,n,e._orderByCalled)}}function zP(t,e){return uo("startAfter","key",e,!0),new fk(t,e)}class pk extends Ot{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ct(e._repo,e._path,SN(e._queryParams,this._limit),e._orderByCalled)}}function $P(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new pk(t)}class mk extends Ot{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ct(e._repo,e._path,EN(e._queryParams,this._limit),e._orderByCalled)}}function VP(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mk(t)}class gk extends Ot{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){jl(e,"orderByChild");const n=new Y(this._path);if(V(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ph(n),s=xl(e._queryParams,r);return tr(s),new ct(e._repo,e._path,s,!0)}}function HP(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Mh("orderByChild","path",t,!1),new gk(t)}class yk extends Ot{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){jl(e,"orderByKey");const n=xl(e._queryParams,$t);return tr(n),new ct(e._repo,e._path,n,!0)}}function GP(){return new yk}class _k extends Ot{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){jl(e,"orderByPriority");const n=xl(e._queryParams,re);return tr(n),new ct(e._repo,e._path,n,!0)}}function KP(){return new _k}class vk extends Ot{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){jl(e,"orderByValue");const n=xl(e._queryParams,mh);return tr(n),new ct(e._repo,e._path,n,!0)}}function qP(){return new vk}class xk extends Ot{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Gt("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Z_(this._value,this._key)._apply(new ev(this._value,this._key)._apply(e))}}function YP(t,e){return uo("equalTo","key",e,!0),new xk(t,e)}function QP(t,...e){let n=se(t);for(const r of e)n=r._apply(n);return n}fI(Dt);_I(Dt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="FIREBASE_DATABASE_EMULATOR_HOST",Gu={};let tv=!1;function Sk(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Ts(i);t.repoInfo_=new t_(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function nv(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),be("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Hu(i,s),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[wk]),u?(c=!0,i=`http://${u}?ns=${a.namespace}`,o=Hu(i,s),a=o.repoInfo):c=!o.repoInfo.secure;const f=s&&c?new ds(ds.OWNER):new Ib(t.name,t.options,e);B_("Invalid Firebase Database URL",o),V(o.path)||Ht("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Ck(a,t,f,new Nb(t,n));return new Nk(d,t)}function Ek(t,e){const n=Gu[e];(!n||n[t.key]!==t)&&Ht(`Database ${e}(${t.repoInfo_}) has already been deleted.`),G_(t),delete n[t.key]}function Ck(t,e,n,r){let s=Gu[e.name];s||(s={},Gu[e.name]=s);let i=s[t.toURLString()];return i&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new HI(t,tv,n,r),s[t.toURLString()]=i,i}function bk(t){tv=t}class Nk{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(GI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dt(this._repo,q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ek(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ht("Cannot call "+e+" on a deleted database.")}}function rv(){vs.IS_TRANSPORT_INITIALIZED&&De("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function JP(){rv(),Pn.forceDisallow()}function XP(){rv(),ft.forceDisallow(),Pn.forceAllow()}function Ik(t=Yd(),e){const n=Dr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=w1("database");r&&kk(n,...r)}return n}function kk(t,e,n,r={}){t=se(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Gn(r,i.repoInfo_.emulatorOptions))return;Ht("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ht('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ds(ds.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:S1(r.mockUserToken,t.app.options.projectId);o=new ds(a)}Ts(e)&&(Vy(e),Hy("Database",!0)),Sk(i,s,r,o)}function ZP(t){t=se(t),t._checkNotDeleted("goOffline"),G_(t._repo)}function eR(t){t=se(t),t._checkNotDeleted("goOnline"),tk(t._repo)}function tR(t,e){$0(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){U0(Rs),Vt(new it("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return nv(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),yt(Op,Mp,t),yt(Op,Mp,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk={".sv":"timestamp"};function nR(){return Pk}function rR(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function sR(t,e,n){if(t=se(t),Ut("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=(n==null?void 0:n.applyLocally)??!0,s=new Ze,i=(a,c,u)=>{let f=null;a?s.reject(a):(f=new kr(u,new Dt(t._repo,t._path),re),s.resolve(new Rk(c,f)))},o=dk(t,()=>{});return nk(t._repo,t._path,e,i,o,r),s.promise}_t.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};_t.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const iR=function(t){const e=_t.prototype.put;return _t.prototype.put=function(n,r,s,i){i!==void 0&&(i=t()),e.call(this,n,r,s,i)},function(){_t.prototype.put=e}},oR=function(t){bk(t)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:s,nodeAdmin:i=!1}){U0(n);const o=new Qy("database-standalone"),a=new xu("auth-internal",o);let c;return s&&(c=new xu("app-check-internal",o),c.setComponent(new it("app-check-internal",()=>s,"PRIVATE"))),a.setComponent(new it("auth-internal",()=>r,"PRIVATE")),nv(t,a,c,e,i)}Tk();const sv="@firebase/installations",zh="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=1e4,ov=`w:${zh}`,av="FIS_v2",Ak="https://firebaseinstallations.googleapis.com/v1",jk=60*60*1e3,Dk="installations",Ok="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Tr=new jr(Dk,Ok,Mk);function lv(t){return t instanceof Kt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv({projectId:t}){return`${Ak}/projects/${t}/installations`}function uv(t){return{token:t.token,requestStatus:2,expiresIn:Fk(t.expiresIn),creationTime:Date.now()}}async function dv(t,e){const r=(await e.json()).error;return Tr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Lk(t,{refreshToken:e}){const n=hv(t);return n.append("Authorization",Uk(e)),n}async function fv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Fk(t){return Number(t.replace("s","000"))}function Uk(t){return`${av} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=cv(t),s=hv(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:av,appId:t.appId,sdkVersion:ov},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await fv(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:uv(u.authToken)}}else throw await dv("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=/^[cdef][\w-]{21}$/,Ku="";function $k(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Vk(t);return zk.test(n)?n:Ku}catch{return Ku}}function Vk(t){return Bk(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;function gv(t,e){const n=Ml(t);yv(n,e),Hk(n,e)}function yv(t,e){const n=mv.get(t);if(n)for(const r of n)r(e)}function Hk(t,e){const n=Gk();n&&n.postMessage({key:t,fid:e}),Kk()}let fr=null;function Gk(){return!fr&&"BroadcastChannel"in self&&(fr=new BroadcastChannel("[Firebase] FID Change"),fr.onmessage=t=>{yv(t.data.key,t.data.fid)}),fr}function Kk(){mv.size===0&&fr&&(fr.close(),fr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="firebase-installations-database",Yk=1,Pr="firebase-installations-store";let Cc=null;function $h(){return Cc||(Cc=Zy(qk,Yk,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pr)}}})),Cc}async function qa(t,e){const n=Ml(t),s=(await $h()).transaction(Pr,"readwrite"),i=s.objectStore(Pr),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&gv(t,e.fid),e}async function _v(t){const e=Ml(t),r=(await $h()).transaction(Pr,"readwrite");await r.objectStore(Pr).delete(e),await r.done}async function Ll(t,e){const n=Ml(t),s=(await $h()).transaction(Pr,"readwrite"),i=s.objectStore(Pr),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&gv(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t){let e;const n=await Ll(t.appConfig,r=>{const s=Qk(r),i=Jk(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Ku?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Qk(t){const e=t||{fid:$k(),registrationStatus:0};return vv(e)}function Jk(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Tr.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Xk(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Zk(t)}:{installationEntry:e}}async function Xk(t,e){try{const n=await Wk(t,e);return qa(t.appConfig,n)}catch(n){throw lv(n)&&n.customData.serverCode===409?await _v(t.appConfig):await qa(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Zk(t){let e=await pm(t.appConfig);for(;e.registrationStatus===1;)await pv(100),e=await pm(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Vh(t);return r||n}return e}function pm(t){return Ll(t,e=>{if(!e)throw Tr.create("installation-not-found");return vv(e)})}function vv(t){return eT(t)?{fid:t.fid,registrationStatus:0}:t}function eT(t){return t.registrationStatus===1&&t.registrationTime+iv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT({appConfig:t,heartbeatServiceProvider:e},n){const r=nT(t,n),s=Lk(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:ov,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await fv(()=>fetch(r,a));if(c.ok){const u=await c.json();return uv(u)}else throw await dv("Generate Auth Token",c)}function nT(t,{fid:e}){return`${cv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t,e=!1){let n;const r=await Ll(t.appConfig,i=>{if(!xv(i))throw Tr.create("not-registered");const o=i.authToken;if(!e&&iT(o))return i;if(o.requestStatus===1)return n=rT(t,e),i;{if(!navigator.onLine)throw Tr.create("app-offline");const a=aT(i);return n=sT(t,a),a}});return n?await n:r.authToken}async function rT(t,e){let n=await mm(t.appConfig);for(;n.authToken.requestStatus===1;)await pv(100),n=await mm(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hh(t,e):r}function mm(t){return Ll(t,e=>{if(!xv(e))throw Tr.create("not-registered");const n=e.authToken;return lT(n)?{...e,authToken:{requestStatus:0}}:e})}async function sT(t,e){try{const n=await tT(t,e),r={...e,authToken:n};return await qa(t.appConfig,r),n}catch(n){if(lv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await _v(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await qa(t.appConfig,r)}throw n}}function xv(t){return t!==void 0&&t.registrationStatus===2}function iT(t){return t.requestStatus===2&&!oT(t)}function oT(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+jk}function aT(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function lT(t){return t.requestStatus===1&&t.requestTime+iv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t){const e=t,{installationEntry:n,registrationPromise:r}=await Vh(e);return r?r.catch(console.error):Hh(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t,e=!1){const n=t;return await dT(n),(await Hh(n,e)).token}async function dT(t){const{registrationPromise:e}=await Vh(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){if(!t||!t.options)throw bc("App Configuration");if(!t.name)throw bc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw bc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function bc(t){return Tr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="installations",fT="installations-internal",pT=t=>{const e=t.getProvider("app").getImmediate(),n=hT(e),r=Dr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},mT=t=>{const e=t.getProvider("app").getImmediate(),n=Dr(e,wv).getImmediate();return{getId:()=>cT(n),getToken:s=>uT(n,s)}};function gT(){Vt(new it(wv,pT,"PUBLIC")),Vt(new it(fT,mT,"PRIVATE"))}gT();yt(sv,zh);yt(sv,zh,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="analytics",yT="firebase_id",_T="origin",vT=60*1e3,xT="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gh="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe=new pl("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rt=new jr("analytics","Analytics",wT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){if(!t.startsWith(Gh)){const e=rt.create("invalid-gtag-resource",{gtagURL:t});return Qe.warn(e.message),""}return t}function Sv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ET(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function CT(t,e){const n=ET("firebase-js-sdk-policy",{createScriptURL:ST}),r=document.createElement("script"),s=`${Gh}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function bT(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function NT(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Sv(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){Qe.error(a)}t("config",s,i)}async function IT(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Sv(n);for(const c of o){const u=a.find(d=>d.measurementId===c),f=u&&e[u.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Qe.error(i)}}function kT(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await IT(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await NT(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Qe.error(a)}}return s}function TT(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=kT(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function PT(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gh)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=30,AT=1e3;class jT{constructor(e={},n=AT){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ev=new jT;function DT(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function OT(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:DT(n)},s=xT.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw rt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function MT(t,e=Ev,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw rt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw rt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new UT;return setTimeout(async()=>{a.abort()},n!==void 0?n:vT),Cv({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Cv(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Ev){var a;const{appId:i,measurementId:o}=t;try{await LT(r,e)}catch(c){if(o)return Qe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await OT(t);return s.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!FT(u)){if(s.deleteThrottleMetadata(i),o)return Qe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw c}const f=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?ap(n,s.intervalMillis,RT):ap(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,d),Qe.debug(`Calling attemptFetch again in ${f} millis`),Cv(t,d,r,s)}}function LT(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(rt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function FT(t){if(!(t instanceof Kt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class UT{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WT(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(){if(Gd())try{await Kd()}catch(t){return Qe.warn(rt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Qe.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zT(t,e,n,r,s,i,o){const a=MT(t);a.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Qe.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Qe.error(h)),e.push(a);const c=BT().then(h=>{if(h)return r.getId()}),[u,f]=await Promise.all([a,c]);PT(i)||CT(i,u.measurementId),s("js",new Date);const d=(o==null?void 0:o.config)??{};return d[_T]="firebase",d.update=!0,f!=null&&(d[yT]=f),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.app=e}_delete(){return delete _i[this.app.options.appId],Promise.resolve()}}let _i={},gm=[];const ym={};let Nc="dataLayer",VT="gtag",_m,bv,vm=!1;function HT(){const t=[];if(Hd()&&t.push("This is a browser extension environment."),qy()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=rt.create("invalid-analytics-context",{errorInfo:e});Qe.warn(n.message)}}function GT(t,e,n){HT();const r=t.options.appId;if(!r)throw rt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Qe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rt.create("no-api-key");if(_i[r]!=null)throw rt.create("already-exists",{id:r});if(!vm){bT(Nc);const{wrappedGtag:i,gtagCore:o}=TT(_i,gm,ym,Nc,VT);bv=i,_m=o,vm=!0}return _i[r]=zT(t,gm,ym,e,_m,Nc,n),new $T(t)}function KT(t=Yd()){t=se(t);const e=Dr(t,Ya);return e.isInitialized()?e.getImmediate():qT(t)}function qT(t,e={}){const n=Dr(t,Ya);if(n.isInitialized()){const s=n.getImmediate();if(Gn(e,n.getOptions()))return s;throw rt.create("already-initialized")}return n.initialize({options:e})}async function YT(){if(Hd()||!qy()||!Gd())return!1;try{return await Kd()}catch{return!1}}function QT(t,e,n,r){t=se(t),WT(bv,_i[t.app.options.appId],e,n,r).catch(s=>Qe.error(s))}const xm="@firebase/analytics",wm="0.10.18";function JT(){Vt(new it(Ya,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return GT(r,s,n)},"PUBLIC")),Vt(new it("analytics-internal",t,"PRIVATE")),yt(xm,wm),yt(xm,wm,"esm2020");function t(e){try{const n=e.getProvider(Ya).getImmediate();return{logEvent:(r,s,i)=>QT(n,r,s,i)}}catch(n){throw rt.create("interop-component-reg-failed",{reason:n})}}}JT();const Nv={apiKey:"AIzaSyAdJ3lRxhgZWhnqH8SNQsT1bTFB8E0-cDg",authDomain:"quitarena-a97de.firebaseapp.com",databaseURL:"https://quitarena-a97de-default-rtdb.europe-west1.firebasedatabase.app",projectId:"quitarena-a97de",storageBucket:"quitarena-a97de.firebasestorage.app",messagingSenderId:"693525963288",appId:"1:693525963288:web:a175e9a8bd56fffb35596d",measurementId:"G-H2CCRXYY74"},Kh=fp().length?fp()[0]:e0(Nv),es=hb(Kh),rr=Ik(Kh,Nv.databaseURL);let XT=null;(async()=>{try{await YT()&&(XT=KT(Kh))}catch(t){console.debug("Analytics not initialized:",t==null?void 0:t.message)}})();const ZT=({onAuthSuccess:t,isNewUser:e})=>{const[n,r]=k.useState("signin"),[s,i]=k.useState(""),[o,a]=k.useState(""),[c,u]=k.useState(""),[f,d]=k.useState(!1),[h,_]=k.useState(""),[x,w]=k.useState(""),[P,g]=k.useState(!1),p=new Xt,m=()=>{i(""),a(""),u(""),_(""),w("")},S=async()=>{d(!0),_("");try{console.log("Starting Google sign-in process...");const E=(await wC(es,p)).user;console.log("Google sign-in successful for:",E.email,"UID:",E.uid),t(E)}catch(v){console.error("Google sign-in error:",v),_(y(v.code))}finally{d(!1)}},N=async v=>{v.preventDefault(),d(!0),_("");try{const I=(await QE(es,s,o)).user;console.log("Email sign-in successful for:",I.email),t(I)}catch(E){console.error("Email sign-in error:",E),_(y(E.code))}finally{d(!1)}},b=async v=>{if(v.preventDefault(),d(!0),_(""),o!==c){_("Passwords do not match"),d(!1);return}if(o.length<6){_("Password must be at least 6 characters long"),d(!1);return}try{const I=(await YE(es,s,o)).user;console.log("Email sign-up successful for:",I.email),await JE(I),t(I)}catch(E){console.error("Email sign-up error:",E),_(y(E.code))}finally{d(!1)}},C=async v=>{if(v.preventDefault(),!s){_("Please enter your email address");return}d(!0),_("");try{await qE(es,s),w("Password reset email sent! Check your inbox.")}catch(E){console.error("Password reset error:",E),_(y(E.code))}finally{d(!1)}},y=v=>{switch(v){case"auth/user-not-found":return"No account found with this email address";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password is too weak. Use at least 6 characters";case"auth/invalid-email":return"Invalid email address";case"auth/popup-closed-by-user":return"Google sign-in was cancelled";case"auth/popup-blocked":return"Google sign-in popup was blocked. Please allow popups for this site";case"auth/network-request-failed":return"Network error. Please check your connection";default:return"Authentication failed. Please try again"}};return P?l.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-white",children:"Reset Password"}),l.jsx("p",{className:"mt-2 text-gray-400",children:"Enter your email to receive a reset link"})]}),l.jsxs("form",{onSubmit:C,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),l.jsx("input",{id:"email",type:"email",value:s,onChange:v=>i(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),h&&l.jsx("div",{className:"text-red-400 text-sm",children:h}),x&&l.jsx("div",{className:"text-green-400 text-sm",children:x}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>{g(!1),_(""),w("")},className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Back to Login"}),l.jsx("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 border border-transparent rounded-md text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:f?"Sending...":"Send Reset Link"})]})]})]})}):l.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QuitCard Arena"}),l.jsx("p",{className:"text-gray-400",children:"Your journey to quit starts here"})]}),l.jsx("div",{children:l.jsxs("button",{onClick:S,disabled:f,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-600 rounded-md text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[l.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),f?"Signing in...":"Continue with Google"]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-600"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Or continue with email"})})]}),l.jsxs("div",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{r("signin"),m()},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="signin"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sign In"}),l.jsx("button",{onClick:()=>{r("signup"),m()},className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="signup"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sign Up"})]}),n==="signin"&&l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signin-email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),l.jsx("input",{id:"signin-email",type:"email",value:s,onChange:v=>i(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signin-password",className:"block text-sm font-medium text-gray-300",children:"Password"}),l.jsx("input",{id:"signin-password",type:"password",value:o,onChange:v=>a(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password"})]}),l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"Forgot your password?"})}),h&&l.jsx("div",{className:"text-red-400 text-sm",children:h}),l.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f?"Signing in...":"Sign In"})]}),n==="signup"&&l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),l.jsx("input",{id:"signup-email",type:"email",value:s,onChange:v=>i(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-300",children:"Password"}),l.jsx("input",{id:"signup-password",type:"password",value:o,onChange:v=>a(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Create a password (min 6 characters)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-300",children:"Confirm Password"}),l.jsx("input",{id:"confirm-password",type:"password",value:c,onChange:v=>u(v.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your password"})]}),h&&l.jsx("div",{className:"text-red-400 text-sm",children:h}),x&&l.jsx("div",{className:"text-green-400 text-sm",children:x}),l.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f?"Creating account...":"Create Account"})]})]})})};var eP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nP=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...c},u)=>k.createElement("svg",{ref:u,...eP,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${tP(t)}`,...c},[...e.map(([f,d])=>k.createElement(f,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var $e=nP;const rP=$e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),sP=$e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Iv=$e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),kv=$e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),iP=$e("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),oP=$e("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Oo=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Tv=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qi=$e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),aP=$e("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Pv=$e("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),lP=$e("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),Rv=$e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Av=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),jv=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Qa=(t,e="adventurer")=>{const n="https://api.dicebear.com/7.x",r={seed:t||Math.random().toString(36).substring(7),backgroundColor:["b6e3f4","c0aede","ffdfbf","ffd5dc"],radius:50,size:200},s=new URLSearchParams(r).toString();return`${n}/${e}/svg?${s}`},Mo=t=>{const e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],n=e[t.charCodeAt(0)%e.length],r=t.substring(0,2).toUpperCase();return`data:image/svg+xml,${encodeURIComponent(`
    <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="200" fill="${n}"/>
      <text x="100" y="120" font-family="Arial, sans-serif" font-size="80" font-weight="bold" text-anchor="middle" fill="white">${r}</text>
    </svg>
  `)}`},cP=({onComplete:t})=>{const[e,n]=k.useState(1),[r,s]=k.useState({heroName:"",archetype:"",avatar:null,avatarSeed:Math.random().toString(36).substring(7),triggers:[],dailyPatterns:[],copingStrategies:[],vapePodsPerWeek:0,nicotineStrength:"",quitAttempts:"",confidence:5}),[i,o]=k.useState(!1),[a,c]=k.useState(!1),[u,f]=k.useState(null),[d,h]=k.useState(null),_=[{id:"DETERMINED",name:"The Determined",description:"Unstoppable willpower and determination",color:"bg-red-500",icon:qi},{id:"SOCIAL_FIGHTER",name:"The Social Fighter",description:"Thrives on community support",color:"bg-blue-500",icon:jv},{id:"HEALTH_WARRIOR",name:"The Health Warrior",description:"Focused on physical and mental wellness",color:"bg-green-500",icon:kv},{id:"MONEY_SAVER",name:"The Money Saver",description:"Motivated by financial freedom",color:"bg-yellow-500",icon:Iv}],x=["Stress/anxiety","Social situations","Boredom","After meals","Drinking alcohol","Work breaks","Driving"],w=["Morning routine","Work breaks","After meals","Evening wind-down","Social events","Throughout the day"],P=["Breathing exercises","Nicotine replacement therapy","Exercise/physical activity","Distraction techniques","Nothing - this is new to me"],g=()=>{console.log("Calculating stats with userData:",r);let y=40;r.vapePodsPerWeek<=1?y+=5:r.vapePodsPerWeek<=3?y+=15:r.vapePodsPerWeek<=5?y+=25:r.vapePodsPerWeek<=7?y+=35:y+=40;const v=r.nicotineStrength||"",E=parseInt(v.replace("mg",""))||0;E<=5?y+=0:E<=11?y+=10:E<=20?y+=20:y+=25,r.dailyPatterns.includes("Throughout the day")?y+=20:r.dailyPatterns.length>2?y+=10:y+=0,y=Math.min(y,100);let I=25;r.confidence>=9?I+=35:r.confidence>=7?I+=25:r.confidence>=4?I+=15:I+=0,r.quitAttempts==="first"?I+=15:parseInt(r.quitAttempts)<=3?I+=10:I+=5,r.copingStrategies.length>=3?I+=15:r.copingStrategies.length>=1?I+=10:I+=0,I=Math.min(I,80);let A=35;A+={DETERMINED:20,HEALTH_WARRIOR:15,SOCIAL_FIGHTER:15,MONEY_SAVER:10}[r.archetype]||0,r.confidence>=8?A+=25:r.confidence>=5?A+=15:A+=0,r.quitAttempts==="first"?A+=10:parseInt(r.quitAttempts)<=3?A+=5:A+=15,A=Math.min(A,90);let M=15;r.triggers.length<=2?M+=15:r.triggers.length<=4?M+=10:M+=5;const U=r.triggers.includes("Drinking alcohol"),z=r.triggers.includes("Social situations");return U&&z?M+=0:r.triggers.length>3?M+=5:M+=10,r.copingStrategies.length>=3?M+=25:r.copingStrategies.length>=1?M+=15:M+=0,r.dailyPatterns.includes("Throughout the day")?M+=0:r.dailyPatterns.length>2?M+=5:M+=10,M=Math.min(M,60),{addictionLevel:y,mentalStrength:I,motivation:A,triggerDefense:M}},p=y=>{const v=y.target.files[0];if(v){f(v);const E=new FileReader;E.onload=I=>h(I.target.result),E.readAsDataURL(v)}},m=async()=>{if(u){c(!0);try{const y=document.createElement("canvas"),v=y.getContext("2d"),E=new Image;E.onload=()=>{y.width=200,y.height=200,v.filter="contrast(1.2) saturate(1.3) brightness(1.1)",v.drawImage(E,0,0,200,200),v.globalCompositeOperation="overlay",v.fillStyle="rgba(255, 200, 200, 0.1)",v.fillRect(0,0,200,200);const I=y.toDataURL("image/png");s(A=>({...A,avatar:I})),c(!1)},E.src=d}catch(y){console.error("Photo processing failed:",y);const v=Mo(r.avatarSeed);s(E=>({...E,avatar:v})),c(!1)}}},S=()=>{o(!0);const y=Math.random().toString(36).substring(7);(async()=>{try{const E=Qa(y);s(I=>({...I,avatarSeed:y,avatar:E}))}catch{const I=Mo(y);s(A=>({...A,avatarSeed:y,avatar:I}))}})(),setTimeout(()=>o(!1),500)},N=()=>{if(e<10)n(e+1);else try{console.log("Completing onboarding with userData:",r);const y=g();console.log("Calculated stats:",y);const v={...r,stats:{...y,streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date};console.log("Final user data:",v),t(v)}catch(y){console.error("Error completing onboarding:",y);const E={...r,stats:{...{addictionLevel:50,mentalStrength:50,motivation:50,triggerDefense:30},streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date};console.log("Using fallback stats:",E),t(E)}},b=()=>{e>1&&n(e-1)},C=()=>{switch(e){case 1:return r.heroName.trim().length>0;case 2:return r.archetype!=="";case 3:return r.avatar!==null;case 4:return r.triggers.length>0;case 5:return r.dailyPatterns.length>0;case 6:return r.copingStrategies.length>0;case 7:return r.vapePodsPerWeek>0;case 8:return r.nicotineStrength!=="";case 9:return r.quitAttempts!=="";case 10:return r.confidence>0;default:return!1}};return k.useEffect(()=>{if(!r.avatar){const y=Qa(r.avatarSeed);s(v=>({...v,avatar:y}))}},[]),l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-2xl p-8 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsx("div",{className:"flex justify-between items-center mb-8 overflow-x-auto",children:[1,2,3,4,5,6,7,8,9,10].map(y=>l.jsxs("div",{className:"flex items-center flex-shrink-0",children:[l.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${y<=e?"bg-blue-500 text-white":"bg-slate-600 text-gray-400"}`,children:y<e?"":y}),y<10&&l.jsx("div",{className:`w-4 h-1 mx-1 ${y<e?"bg-blue-500":"bg-slate-600"}`})]},y))}),e===1&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(aP,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Welcome to QuitCard Arena"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Your journey to freedom starts here. Let's create your hero identity."}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-left text-white text-sm font-medium mb-2",children:"What's your hero name?"}),l.jsx("input",{type:"text",value:r.heroName,onChange:y=>s(v=>({...v,heroName:y.target.value})),placeholder:"e.g., FreedomSeeker, HealthGuardian",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e===2&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(qi,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Choose Your Archetype"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Select the warrior type that resonates with your journey."}),l.jsx("div",{className:"space-y-3 mb-6",children:_.map(y=>{const v=y.icon;return l.jsx("button",{onClick:()=>s(E=>({...E,archetype:y.id})),className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${r.archetype===y.id?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 ${y.color} rounded-lg flex items-center justify-center`,children:l.jsx(v,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold",children:y.name}),l.jsx("p",{className:"text-gray-400 text-sm",children:y.description})]})]})},y.id)})})]}),e===3&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Av,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Create Your Avatar"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Choose your battle card identity in the arena."}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full overflow-hidden border-4 border-slate-600 bg-slate-700",children:r.avatar?l.jsx("img",{src:r.avatar,alt:"Avatar",className:"w-full h-full object-cover",onError:()=>{s(y=>({...y,avatar:Mo(y.avatarSeed)}))}}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Oo,{className:"w-8 h-8 text-gray-400 animate-spin"})})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Upload Your Photo"}),l.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden",id:"photo-upload"}),l.jsx("label",{htmlFor:"photo-upload",className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 justify-center cursor-pointer",children:" Upload Photo"})]}),d&&l.jsx("div",{className:"mb-4",children:l.jsx("button",{onClick:m,disabled:a,className:"w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 text-white rounded-lg transition-colors flex items-center gap-2 justify-center",children:a?l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"w-4 h-4 animate-spin"}),"Converting to Anime..."]}):l.jsx(l.Fragment,{children:" Convert to Anime"})})}),l.jsx("div",{className:"text-gray-400 text-sm",children:"- OR -"}),l.jsx("button",{onClick:S,disabled:i,className:"w-full px-6 py-3 bg-slate-600 hover:bg-slate-500 disabled:bg-slate-700 text-white rounded-lg transition-colors flex items-center gap-2 justify-center",children:i?l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"w-4 h-4 animate-spin"}),"Generate Random Avatar"]}):l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"w-4 h-4"}),"Generate Random Avatar"]})}),l.jsx("button",{onClick:()=>{const y=Mo(r.avatarSeed);s(v=>({...v,avatar:y}))},className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Use Fallback Avatar"})]})]})]}),e===4&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Trigger Identification"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"What usually makes you want to vape? (Select all that apply)"}),l.jsx("div",{className:"space-y-3 mb-6",children:x.map(y=>l.jsx("button",{onClick:()=>{s(v=>({...v,triggers:v.triggers.includes(y)?v.triggers.filter(E=>E!==y):[...v.triggers,y]}))},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${r.triggers.includes(y)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${r.triggers.includes(y)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:r.triggers.includes(y)&&l.jsx("span",{className:"text-white text-sm",children:""})}),l.jsx("span",{className:"text-white font-semibold",children:y})]})},y))})]}),e===5&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Daily Routine"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"When do you vape most? (Select all that apply)"}),l.jsx("div",{className:"space-y-3 mb-6",children:w.map(y=>l.jsx("button",{onClick:()=>{s(v=>({...v,dailyPatterns:v.dailyPatterns.includes(y)?v.dailyPatterns.filter(E=>E!==y):[...v.dailyPatterns,y]}))},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${r.dailyPatterns.includes(y)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${r.dailyPatterns.includes(y)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:r.dailyPatterns.includes(y)&&l.jsx("span",{className:"text-white text-sm",children:""})}),l.jsx("span",{className:"text-white font-semibold",children:y})]})},y))})]}),e===6&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Coping Experience"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Have you tried any of these strategies before? (Select all that apply)"}),l.jsx("div",{className:"space-y-3 mb-6",children:P.map(y=>l.jsx("button",{onClick:()=>{s(v=>({...v,copingStrategies:v.copingStrategies.includes(y)?v.copingStrategies.filter(E=>E!==y):[...v.copingStrategies,y]}))},className:`w-full p-4 rounded-lg border-2 transition-all duration-300 text-left ${r.copingStrategies.includes(y)?"border-blue-500 bg-blue-500/20":"border-slate-600 bg-slate-700 hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${r.copingStrategies.includes(y)?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:r.copingStrategies.includes(y)&&l.jsx("span",{className:"text-white text-sm",children:""})}),l.jsx("span",{className:"text-white font-semibold",children:y})]})},y))})]}),e===7&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Vape Usage"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"How many vape pods do you typically use per week?"}),l.jsx("div",{className:"mb-6",children:l.jsxs("select",{value:r.vapePodsPerWeek,onChange:y=>s(v=>({...v,vapePodsPerWeek:parseFloat(y.target.value)||0})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select pods per week"}),l.jsx("option",{value:"0.5",children:"0.5 pods"}),l.jsx("option",{value:"1",children:"1 pod"}),l.jsx("option",{value:"2",children:"2 pods"}),l.jsx("option",{value:"3",children:"3 pods"}),l.jsx("option",{value:"4",children:"4 pods"}),l.jsx("option",{value:"5",children:"5 pods"}),l.jsx("option",{value:"6",children:"6 pods"}),l.jsx("option",{value:"7",children:"7 pods"}),l.jsx("option",{value:"8",children:"8+ pods"})]})})]}),e===8&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Nicotine Strength"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"What nicotine strength do you typically use?"}),l.jsx("div",{className:"mb-6",children:l.jsxs("select",{value:r.nicotineStrength,onChange:y=>s(v=>({...v,nicotineStrength:y.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select nicotine strength"}),l.jsx("option",{value:"3mg",children:"3mg"}),l.jsx("option",{value:"6mg",children:"6mg"}),l.jsx("option",{value:"12mg",children:"12mg"}),l.jsx("option",{value:"18mg",children:"18mg"}),l.jsx("option",{value:"20mg",children:"20mg"}),l.jsx("option",{value:"50mg",children:"50mg"})]})})]}),e===9&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Previous Attempts"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"How many times have you tried to quit before?"}),l.jsx("div",{className:"mb-6",children:l.jsxs("select",{value:r.quitAttempts,onChange:y=>s(v=>({...v,quitAttempts:y.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select option"}),l.jsx("option",{value:"first",children:"This is my first attempt"}),l.jsx("option",{value:"1",children:"Once before"}),l.jsx("option",{value:"2",children:"Twice before"}),l.jsx("option",{value:"3",children:"3-5 times"}),l.jsx("option",{value:"5",children:"More than 5 times"})]})})]}),e===10&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Confidence Level"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"How confident are you this time? (1-10 scale)"}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"1"}),l.jsx("input",{type:"range",min:"1",max:"10",value:r.confidence,onChange:y=>s(v=>({...v,confidence:parseInt(y.target.value)})),className:"flex-1 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer slider"}),l.jsx("span",{className:"text-gray-400 text-sm",children:"10"})]}),l.jsxs("div",{className:"text-center mt-2",children:[l.jsx("span",{className:"text-white font-bold text-lg",children:r.confidence}),l.jsx("span",{className:"text-gray-400 text-sm ml-2",children:"/ 10"})]})]})]}),l.jsxs("div",{className:"flex justify-between",children:[e>1&&l.jsx("button",{onClick:b,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:"Back"}),l.jsxs("button",{onClick:N,disabled:!C(),className:`ml-auto px-6 py-3 rounded-lg transition-colors flex items-center gap-2 ${C()?"bg-blue-600 hover:bg-blue-700 text-white":"bg-slate-700 text-gray-400 cursor-not-allowed"}`,children:[e===10?"Start Journey":"Next",l.jsx(rP,{className:"w-4 h-4"})]})]})]})})},Sm={DETERMINED:{name:"The Determined",color:"bg-red-500",icon:qi},SOCIAL_FIGHTER:{name:"The Social Fighter",color:"bg-blue-500",icon:jv},HEALTH_WARRIOR:{name:"The Health Warrior",color:"bg-green-500",icon:kv},MONEY_SAVER:{name:"The Money Saver",color:"bg-yellow-500",icon:Iv}},uP={COMMON:{name:"Common",color:"border-gray-400",glow:"",days:0},UNCOMMON:{name:"Uncommon",color:"border-gray-300",glow:"shadow-lg",days:7},RARE:{name:"Rare",color:"border-yellow-400",glow:"shadow-yellow-400/50 shadow-lg",days:14},EPIC:{name:"Epic",color:"border-purple-400",glow:"shadow-purple-400/50 shadow-xl",days:30},LEGENDARY:{name:"Legendary",color:"border-orange-400",glow:"shadow-orange-400/50 shadow-2xl animate-pulse",days:90}},Em={WEEK_WARRIOR:{name:"Week Warrior",icon:sP,description:"7 days clean"},MONTH_MASTER:{name:"Month Master",icon:Rv,description:"30 days clean"},LEGEND:{name:"Legend",icon:Pv,description:"90 days clean"}},dP=t=>t>=90?"LEGENDARY":t>=30?"EPIC":t>=14?"RARE":t>=7?"UNCOMMON":"COMMON",hP=({isOpen:t,onClose:e,statType:n})=>{if(!t)return null;const s={addiction:{title:"Addiction",description:"Time since last vape - decreases as your body heals",impacts:["What decreases it:"," Clean time: -2 points per week (standard recovery)"," Cold turkey approach: -3 points per week (faster healing)"," Tapering approach: -1.5 points per week (gentler decline)","","What increases it:"," First relapse (after clean period): +4 points"," Second relapse (within 7 days): +6 additional points"," Third relapse and on (within 3 days): +8 additional points"," Reset: Penalty level resets after 7 clean days"]},mentalStrength:{title:"Mental Strength",description:"Your ability to resist urges and stay strong",impacts:["What increases it:"," Successful craving resistance: +1 point"," Using app during cravings every 3 times with no relapse: +1 point"," Completing breathing exercises 3 days straight: +1 point"," Staying hydrated for 3 days straight: +1 point"," Milestone bonuses: First 7 days +5 points, 30 days +10 points, 90 days +15 points","","What decreases it:"," Giving in to cravings: -3 points"," Each relapse: -3 points"]},motivation:{title:"Motivation",description:"Your drive to quit - boosted by staying engaged",impacts:["What increases it:"," Regular logging (3+ days per week): +2 points (weekly)"," Sharing achievements: +3 points per share (weekly)"," Reaching money saved milestones: +2 points","","What decreases it:"," Long periods inactive (7+ days no logging): -3 points"]},triggerDefense:{title:"Trigger Defense",description:"Protection against your personal vaping triggers",impacts:["What increases it:"," Surviving trigger situations without vaping: +3 points"," Pre-planning for known triggers: +1 point"," Updating your trigger list: +1 point","","What decreases it:"," Relapsing to known triggers: -3 points"," Entering trigger situations unprepared: -1 point"]}}[n];return s?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s.title}),l.jsx("p",{className:"text-gray-300 text-sm",children:s.description})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-white font-semibold mb-3 text-left",children:"What impacts it:"}),l.jsx("ul",{className:"space-y-2 text-left",children:s.impacts.map((i,o)=>l.jsxs("li",{className:"text-gray-300 text-sm flex items-start",children:[l.jsx("span",{className:"text-blue-400 mr-2",children:""}),i]},o))})]}),l.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-all duration-300",children:"Got it"})]})}):null},Lo=({label:t,value:e,max:n,color:r,statType:s,onInfoClick:i})=>{const o=Math.min(e,n);return l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex justify-between text-white text-xs mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{children:t}),s&&i&&l.jsx("button",{onClick:()=>i(s),className:"w-4 h-4 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center text-white text-xs font-bold transition-colors",title:`Learn about ${t}`,children:"i"})]}),l.jsxs("span",{children:[o,"/",n]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:`${r} h-2 rounded-full transition-all duration-500`,style:{width:`${o/n*100}%`}})})]})},Cm=({user:t,isNemesis:e=!1,showComparison:n=!1,nemesisUser:r=null,onInfoClick:s})=>{const[i,o]=k.useState(!1),[a,c]=k.useState(null);if(!t||!t.archetype||!t.stats)return l.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-gray-400 p-4 text-white text-center mx-auto flex items-center justify-center",children:l.jsx("div",{className:"animate-pulse",children:"Loading Card..."})});const u=Sm[t.archetype];if(!u)return console.error("Invalid archetype:",t.archetype,"Available:",Object.keys(Sm)),l.jsx("div",{className:"w-80 h-[520px] bg-slate-800 rounded-xl border-2 border-red-400 p-4 text-white text-center mx-auto flex items-center justify-center",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-red-400 mb-2",children:"Invalid Archetype"}),l.jsx("p",{className:"text-gray-300 text-sm",children:t.archetype})]})});const f=uP[dP(t.stats.streakDays)],d=u.icon,_=(m=>{const S=`specialFeatures_${m.heroName||m.id||"default"}`;let N=localStorage.getItem(S);if(N)return JSON.parse(N);const b=[];for(m.triggers&&m.triggers.length>0&&m.triggers.forEach(y=>{switch(y){case"Stress/anxiety":b.push("Stress Vaper");break;case"Social situations":b.push("Social Vaper");break;case"Boredom":b.push("Boredom Vaper");break;case"After meals":b.push("Habit Vaper");break;case"Drinking alcohol":b.push("Party Vaper");break;case"Work breaks":b.push("Break Vaper");break;case"Driving":b.push("Driving Vaper");break}}),m.dailyPatterns&&m.dailyPatterns.length>0&&m.dailyPatterns.forEach(y=>{switch(y){case"Morning routine":b.push("Morning Struggler");break;case"Evening wind-down":b.push("Late Night Lurker");break;case"Throughout the day":b.push("All-Day Addict");break}}),m.copingStrategies&&m.copingStrategies.length>0&&(m.copingStrategies.includes("Nothing - this is new to me")?b.push("First Timer"):m.copingStrategies.length>2&&b.push("Veteran Quitter"));b.length<4;){const y=["Nicotine Fighter","Health Seeker","Freedom Chaser","Willpower Warrior"],v=y[Math.floor(Math.random()*y.length)];b.includes(v)||b.push(v)}const C=b.slice(0,4);return localStorage.setItem(S,JSON.stringify(C)),C})(t),x=t.stats.addictionLevel||50,w=t.stats.mentalStrength||50,P=t.stats.motivation||50,g=t.stats.triggerDefense||30;t.stats.nemesisVictories||(Math.floor(Math.random()*8)+1,Math.floor(Math.random()*5)+1);const p=m=>{c(m),o(!0)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`relative w-80 h-[520px] rounded-xl ${f.color} border-4 ${f.glow} bg-gradient-to-br from-slate-800 to-slate-900 p-4 transform transition-all duration-300 hover:scale-105 mx-auto overflow-hidden`,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("h3",{className:"text-white font-bold text-lg leading-tight break-words px-1",children:t.heroName}),l.jsx("p",{className:"text-gray-300 text-base",children:u.name})]}),l.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full overflow-hidden bg-slate-700 flex items-center justify-center ring-2 ring-blue-400/50",children:t.avatar?l.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover",onError:()=>{console.log("Avatar failed to load, using fallback")}}):l.jsx("div",{className:`w-full h-full ${u.color} flex items-center justify-center`,children:l.jsx(d,{className:"w-12 h-12 text-white"})})}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsx(Lo,{label:"Addiction",value:x,max:100,color:"bg-red-500",statType:e?null:"addiction",onInfoClick:e?null:p}),l.jsx(Lo,{label:"Mental Strength",value:w,max:100,color:"bg-blue-500",statType:e?null:"mentalStrength",onInfoClick:e?null:p}),l.jsx(Lo,{label:"Motivation",value:P,max:100,color:"bg-green-500",statType:e?null:"motivation",onInfoClick:e?null:p}),l.jsx(Lo,{label:"Trigger Defense",value:g,max:100,color:"bg-orange-500",statType:e?null:"triggerDefense",onInfoClick:e?null:p})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"text-white text-xs font-semibold mb-2 text-center",children:"Special Features"}),l.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:_.map((m,S)=>l.jsx("div",{className:"px-2 py-1 bg-blue-600/80 text-white text-xs rounded-full font-medium",title:m,children:m},S))})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-3 space-y-2 mb-3 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex justify-between text-white text-sm",children:[l.jsx("span",{className:"text-gray-300",children:"Streak:"}),l.jsxs("span",{className:"font-bold text-green-400 flex items-center gap-1",children:[t.stats.streakDays," days",t.stats.streakDays>0&&l.jsx("span",{className:"text-xs",children:""})]})]}),l.jsxs("div",{className:"flex justify-between text-white text-sm",children:[l.jsx("span",{className:"text-gray-300",children:"Cravings Resisted:"}),l.jsxs("span",{className:"font-bold text-blue-400 flex items-center gap-1",children:[t.stats.cravingsResisted||0,l.jsx("span",{className:"text-xs",children:""})]})]})]}),t.achievements&&t.achievements.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[t.achievements.slice(0,4).map((m,S)=>{var b,C;const N=((b=Em[m])==null?void 0:b.icon)||Pv;return l.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center shadow-lg",title:(C=Em[m])==null?void 0:C.description,children:l.jsx(N,{className:"w-3 h-3 text-white"})},S)}),t.achievements.length>4&&l.jsxs("div",{className:"w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:["+",t.achievements.length-4]})]})]}),l.jsx(hP,{isOpen:i,onClose:()=>o(!1),statType:a})]})},fP=({activeTab:t,onTabChange:e})=>{const n=[{id:"arena",label:"Arena",icon:iP},{id:"craving-support",label:"Craving Support",icon:qi},{id:"profile",label:"Profile",icon:Av},{id:"buddy-chat",label:"Chat with Buddy",icon:oP},{id:"settings",label:"Explore",icon:Tv}];return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-800 border-t border-slate-700 px-4 py-2 z-40",children:l.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:n.map(r=>{const s=r.icon,i=t===r.id;return l.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center transition-colors ${i?"text-blue-400":"text-gray-400 hover:text-blue-300"}`,children:[l.jsx(s,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs",children:r.label})]},r.id)})})})},pP=({user:t,nemesis:e,onBackToLogin:n,onResetForTesting:r})=>{const[s,i]=k.useState(!1),o=p=>{const m={...p.stats},S=localStorage.getItem("quitCoachRelapseDate");if(S){const C=new Date(S),v=new Date().getTime()-C.getTime(),E=Math.floor(v/(1e3*3600*24));m.streakDays=E}else{const C=p.quitDate?new Date(p.quitDate):new Date,v=new Date().getTime()-C.getTime();m.streakDays=Math.floor(v/(1e3*3600*24))}const N=parseInt(localStorage.getItem("cravingWins")||0);m.cravingsResisted=N,new Date().toDateString();let b=0;for(let C=0;C<7;C++){const y=new Date;y.setDate(y.getDate()-C);const v=y.toDateString(),E=localStorage.getItem(`water_${v}`);if(E&&parseInt(E)>0)b++;else break}return b>=3&&(m.mentalStrength=Math.min(80,(m.mentalStrength||50)+1)),m},a=o(t),c=o(e),u=p=>{const m=p.stats.mentalStrength||50,S=p.stats.motivation||50,N=p.stats.triggerDefense||30,b=p.stats.addictionLevel||50;return m*1.5+S*1+N*1.2-b*1},f=u({...t,stats:a}),d=u({...e,stats:c}),h=f>d?"WINNING":f===d?"TIED":"LOSING",_=()=>{if(h==="WINNING")return null;const p=d-f+1,m=[],S=a.mentalStrength||50,N=a.motivation||50,b=a.triggerDefense||30,C=a.addictionLevel||50,y=c.mentalStrength||50,v=c.motivation||50;c.triggerDefense;const E=c.addictionLevel||50,I=y-S,A=v-N,D=C-E,M=[{name:"Mental Strength",multiplier:1.5,gap:I,current:S,max:100},{name:"Trigger Defense",multiplier:1.2,gap:A,current:b,max:100},{name:"Motivation",multiplier:1,gap:A,current:N,max:100},{name:"Addiction",multiplier:1,gap:D,current:C,min:0,isReduction:!0}];if(M.sort((U,z)=>U.multiplier!==z.multiplier?z.multiplier-U.multiplier:Math.abs(z.gap)-Math.abs(U.gap)),M.forEach(U=>{if(U.isReduction){const z=Math.min(U.current-U.min,50),ee=z*U.multiplier;ee>0&&m.push({stat:U.name,change:z,action:x(z),priority:ee,canWin:ee>=p,isReduction:!0,efficiency:U.multiplier,gap:U.gap})}else{const z=Math.min(U.max-U.current,50),ee=z*U.multiplier;ee>0&&m.push({stat:U.name,change:z,action:w(U.name,z),priority:ee,canWin:ee>=p,efficiency:U.multiplier,gap:U.gap})}}),m.sort((U,z)=>z.priority-U.priority),m.length>0&&!m.some(U=>U.canWin)){const U=P(m,p);U&&m.unshift(U)}return m.slice(0,3)},x=p=>p>=30?"Stay completely clean, avoid all triggers, use nicotine replacement therapy":p>=20?"Reduce nicotine intake significantly, avoid high-risk situations":p>=10?"Cut back on vaping frequency, identify and avoid main triggers":"Small reduction in nicotine intake, practice trigger avoidance",w=(p,m)=>{switch(p){case"Mental Strength":return m>=30?"Complete daily breathing exercises, stay hydrated for 3+ days, practice meditation":m>=20?"Complete breathing exercises 3 days straight, stay hydrated, use stress management":"Complete breathing exercises, stay hydrated for 3 days straight";case"Motivation":return m>=30?"Log progress daily, share achievements weekly, track money saved milestones":m>=20?"Log progress 5+ days per week, share achievements, track progress":"Regular logging (3+ days per week), share achievements, reach milestones";case"Trigger Defense":return m>=30?"Survive multiple trigger situations, pre-plan for all triggers, update trigger list":m>=20?"Survive trigger situations, pre-plan for known triggers, practice coping":"Survive trigger situations without vaping, pre-plan for known triggers";default:return"Focus on improving this stat through consistent practice"}},P=(p,m)=>{let S=0;const N=[];for(const b of p){if(S>=m)break;const C=m-S,y=Math.min(b.priority,C);y>0&&(N.push({stat:b.stat,change:Math.ceil(y/b.efficiency),contribution:y}),S+=y)}return N.length>0?{stat:"Combination Strategy",change:Math.ceil(m),action:`Focus on: ${N.map(b=>`${b.stat} (+${b.change})`).join(", ")}`,priority:S,canWin:S>=m,isCombination:!0,strategy:N}:null},g=_();return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[l.jsxs("div",{className:"flex justify-start mb-6 gap-3",children:[l.jsx("button",{onClick:n,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",children:" Back to Login"}),!1]}),l.jsx("div",{className:"text-center mb-8",children:l.jsxs("div",{className:"inline-flex items-center gap-4",children:[l.jsxs("div",{className:`inline-flex items-center px-6 py-3 rounded-full font-bold text-lg shadow-xl ${h==="WINNING"?"bg-green-600":h==="TIED"?"bg-yellow-600":"bg-red-600"} text-white`,children:[h==="WINNING"?l.jsx(Rv,{className:"w-5 h-5 mr-2"}):h==="TIED"?l.jsx(qi,{className:"w-5 h-5 mr-2"}):l.jsx("span",{className:"mr-2",children:""}),"You are ",h]}),l.jsx("button",{onClick:()=>i(!0),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg",title:"Battle Algorithm Info",children:l.jsx("span",{className:"text-lg font-bold",children:"i"})})]})}),l.jsxs("div",{className:"flex justify-center gap-12 mb-6",children:[l.jsx("div",{className:"w-80 text-center",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-sm shadow-lg ${h==="WINNING"?"bg-green-600":h==="TIED"?"bg-yellow-600":"bg-red-600"} text-white`,children:h==="WINNING"?"WINNING":h==="TIED"?"TIED":"LOSING"})}),l.jsx("div",{className:"w-24"})," ",l.jsx("div",{className:"w-80 text-center",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-sm shadow-lg ${h==="WINNING"?"bg-red-600":h==="TIED"?"bg-yellow-600":"bg-green-600"} text-white`,children:h==="WINNING"?"LOSING":h==="TIED"?"TIED":"WINNING"})})]}),l.jsxs("div",{className:"flex flex-row items-center justify-center gap-12 mb-8 w-full max-w-7xl mx-auto",children:[l.jsx("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:l.jsx(Cm,{user:{...t,stats:a},showComparison:!1,nemesisUser:e})}),l.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-red-500 to-purple-600 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:l.jsx(lP,{className:"w-12 h-12 text-white"})}),l.jsx("div",{className:"bg-red-600 px-8 py-3 rounded-full",children:l.jsx("p",{className:"text-white font-bold text-2xl",children:"VS"})})]}),l.jsx("div",{className:"flex flex-col items-center space-y-4 flex-shrink-0",children:l.jsx(Cm,{user:{...e,stats:c},isNemesis:!0,showComparison:!1,nemesisUser:t})})]}),h==="LOSING"&&g&&g.length>0&&l.jsxs("div",{className:"max-w-4xl mx-auto bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:" Quick Win Strategy"}),l.jsx("div",{className:"space-y-4",children:g.slice(0,3).map((p,m)=>l.jsx("div",{className:"bg-slate-700/50 rounded-lg p-4 border-l-4 border-blue-500",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:p.isReduction?l.jsxs(l.Fragment,{children:[" Reduce your ",p.stat," by ",p.change," points!"]}):p.isCombination?l.jsxs(l.Fragment,{children:[" Best Strategy: Improve multiple stats by ",p.change," total points!"]}):p.isMajor?l.jsxs(l.Fragment,{children:[" Major improvement needed: ",p.change," total points!"]}):l.jsxs(l.Fragment,{children:[" Increase your ",p.stat," by ",p.change," points!"]})}),l.jsxs("p",{className:"text-gray-300 text-sm",children:[" ",p.action]})]}),l.jsxs("div",{className:`font-bold text-2xl ml-4 ${p.isReduction?"text-green-400":p.isCombination?"text-purple-400":p.isMajor?"text-orange-400":"text-blue-400"}`,children:[p.isReduction?"-":"+",p.change]})]})},m))}),l.jsx("div",{className:"text-center mt-4",children:l.jsx("p",{className:"text-gray-400 text-sm",children:"Focus on the top recommendation for the fastest path to victory!"})})]})]}),s&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-600",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Battle Algorithm"}),l.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Formula:"}),l.jsx("p",{className:"text-gray-300 font-mono",children:"(Mental Strength  1.5) + (Motivation  1.0) + (Trigger Defense  1.2) - (Addiction  1.0)"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Your Score:"}),l.jsxs("p",{className:"text-green-400 font-mono",children:["(",a.mentalStrength||50,"  1.5) + (",a.motivation||50,"  1.0) + (",a.triggerDefense||30,"  1.2) - (",a.addictionLevel||50,"  1.0) = ",f.toFixed(1)]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Nemesis Score:"}),l.jsxs("p",{className:"text-red-400 font-mono",children:["(",c.mentalStrength||50,"  1.5) + (",c.motivation||50,"  1.0) + (",c.triggerDefense||30,"  1.2) - (",c.addictionLevel||50,"  1.0) = ",d.toFixed(1)]})]}),l.jsx("div",{className:"bg-slate-700/50 rounded-lg p-3",children:l.jsxs("p",{className:"text-gray-300 text-xs",children:[l.jsx("strong",{children:"Mental Strength (1.5):"})," Your resilience and coping ability",l.jsx("br",{}),l.jsx("strong",{children:"Motivation (1.0):"})," Your drive to quit",l.jsx("br",{}),l.jsx("strong",{children:"Trigger Defense (1.2):"})," Your ability to resist triggers",l.jsx("br",{}),l.jsx("strong",{children:"Addiction (1.0):"})," Your nicotine dependence level"]})})]})]})})]})},mP=({gameType:t,onClose:e})=>{const[n,r]=k.useState(0),[s,i]=k.useState(!1),o=()=>i(!s),a=()=>{const d=k.useRef(null),[h,_]=k.useState([{x:7,y:7}]),[x,w]=k.useState({x:1,y:0}),[P,g]=k.useState({x:1,y:0}),[p,m]=k.useState({x:10,y:10}),[S,N]=k.useState(!1),[b,C]=k.useState(0),[y,v]=k.useState(1),E={1:160,2:Math.round(160/1.25),3:Math.round(160/1.25/1.25)},I={1:2,2:5,3:10};return k.useEffect(()=>{const A=D=>{if(S){D.preventDefault(),_([{x:7,y:7}]),w({x:1,y:0}),g({x:1,y:0}),m({x:10,y:10}),N(!1),C(0),v(1);return}switch(D.key){case"ArrowUp":D.preventDefault(),x.y!==1&&g({x:0,y:-1});break;case"ArrowDown":D.preventDefault(),x.y!==-1&&g({x:0,y:1});break;case"ArrowLeft":D.preventDefault(),x.x!==1&&g({x:-1,y:0});break;case"ArrowRight":D.preventDefault(),x.x!==-1&&g({x:1,y:0});break}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[x,S]),k.useEffect(()=>{if(s||S)return;const A=setInterval(()=>{_(D=>{const M={x:D[0].x+x.x,y:D[0].y+x.y};if(M.x<0&&(M.x=14),M.x>=15&&(M.x=0),M.y<0&&(M.y=14),M.y>=15&&(M.y=0),D.slice(0,-1).some(j=>j.x===M.x&&j.y===M.y))return N(!0),D;const z=M.x===p.x&&M.y===p.y;let ee;return z?(C(j=>j+I[y]),m({x:Math.floor(Math.random()*15),y:Math.floor(Math.random()*15)}),ee=[M,...D]):ee=[M,...D.slice(0,-1)],(P.x!==x.x||P.y!==x.y)&&setTimeout(()=>{w(P)},0),ee})},E[y]);return()=>clearInterval(A)},[x,P,p,s,S]),k.useEffect(()=>{const A=d.current;if(!A)return;const D=A.getContext("2d"),M=20,U=15;D.fillStyle="#1f2937",D.fillRect(0,0,300,300),D.strokeStyle="#374151",D.lineWidth=1;for(let z=0;z<=U;z++)D.beginPath(),D.moveTo(z*M,0),D.lineTo(z*M,300),D.stroke(),D.beginPath(),D.moveTo(0,z*M),D.lineTo(300,z*M),D.stroke();h.forEach((z,ee)=>{ee===0?D.fillStyle="#fbbf24":D.fillStyle="#10b981",D.fillRect(z.x*M+1,z.y*M+1,M-2,M-2)}),D.fillStyle="#ef4444",D.fillRect(p.x*M+2,p.y*M+2,M-4,M-4)},[h,p]),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[l.jsx("span",{className:"text-white mr-2 text-sm",children:"Level:"}),[1,2,3].map(A=>l.jsxs("button",{onClick:()=>v(A),className:`
                  px-4 py-2 text-sm font-mono border-2 border-green-500 transition-all
                  ${y===A?"bg-green-500 text-black":"bg-green-900 text-green-400"}
                  hover:bg-green-600 cursor-pointer
                `,style:{minWidth:"80px"},children:[l.jsxs("div",{children:["Level ",A]}),l.jsxs("div",{className:"text-xs mt-1",children:[A===1&&"Normal",A===2&&"Fast",A===3&&"Insane"]})]},A))]}),l.jsxs("div",{className:"text-center text-yellow-400 text-xs mb-3",children:[l.jsxs("div",{children:["Speed: ",E[y],"ms | Points: ",I[y]," per food"]}),y===1&&"Good for beginners",y===2&&"For experienced players",y===3&&"Ultimate challenge"]})]}),l.jsx("canvas",{ref:d,width:"300",height:"300",className:"border-2 border-gray-300 mx-auto",style:{imageRendering:"pixelated"}}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Score: ",b," | Level: ",y]}),l.jsxs("div",{className:"flex justify-center gap-4 mb-2 text-sm",children:[l.jsxs("div",{className:"text-gray-600",children:[l.jsx("span",{className:"font-semibold",children:"Current:"}),x.x===1&&"",x.x===-1&&"",x.y===1&&"",x.y===-1&&""]}),P.x!==x.x||P.y!==x.y?l.jsxs("div",{className:"text-blue-600",children:[l.jsx("span",{className:"font-semibold",children:"Next:"}),P.x===1&&"",P.x===-1&&"",P.y===1&&"",P.y===-1&&""]}):null]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Use arrow keys to control the snake"}),S&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-red-600 font-bold mb-2",children:"Game Over!"}),l.jsx("button",{onClick:()=>{_([{x:7,y:7}]),w({x:1,y:0}),g({x:1,y:0}),m({x:10,y:10}),N(!1),C(0),v(1)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Restart Game"})]})]})]})},c=()=>{const[d,h]=k.useState(0),[_,x]=k.useState(0),[w]=k.useState(Date.now()),P=()=>{h(g=>g+1)};return k.useEffect(()=>{const g=(Date.now()-w)/1e3;g>0&&x((d/g).toFixed(1))},[d,w]),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Click as Fast as You Can!"}),l.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:["Total Clicks: ",d]}),l.jsxs("div",{className:"text-lg text-gray-700 mb-2",children:["Clicks/Second: ",_]}),l.jsx("button",{onClick:P,className:"w-48 h-48 text-2xl font-bold bg-orange-500 hover:bg-orange-600 border-none rounded-full text-white cursor-pointer transition-colors shadow-lg",children:"CLICK ME!"}),l.jsx("div",{className:"mt-4 text-sm text-gray-600",children:"Challenge: Try to reach 500 clicks!"})]})},u=()=>{const[d,h]=k.useState(Array(15).fill().map(()=>Array(8).fill(0))),[_,x]=k.useState(null),[w,P]=k.useState({x:3,y:0}),[g,p]=k.useState(0),m=[[1,1],[1,1]],S="#3B82F6";k.useEffect(()=>{_||(x({shape:m,color:S}),P({x:3,y:0}))},[_]),k.useEffect(()=>{if(s)return;const b=C=>{switch(C.key){case"ArrowLeft":P(y=>{const v={...y,x:Math.max(0,y.x-1)};return console.log("Piece moved LEFT:",{from:y.x,to:v.x}),v});break;case"ArrowRight":P(y=>{const v={...y,x:Math.min(6,y.x+1)};return console.log("Piece moved RIGHT:",{from:y.x,to:v.x}),v});break;case"ArrowDown":P(y=>{const v={...y,y:y.y+1};return console.log("Piece moved DOWN:",{from:y.y,to:v.y}),v});break}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[s]),k.useEffect(()=>{if(s||!_)return;const b=setInterval(()=>{P(C=>{const y=C.y+1;console.log("Tetris piece falling:",{prev:C,newY:y,pieceLength:m.length});let v=!1;if(y+m.length>15&&(console.log("Bottom collision detected at Y:",y),v=!0),v||m.forEach((E,I)=>{E.forEach((A,D)=>{A&&y+I<15&&C.x+D>=0&&C.x+D<8&&d[y+I]&&d[y+I][C.x+D]!==0&&(console.log("Piece collision detected at:",{x:C.x+D,y:y+I,boardValue:d[y+I][C.x+D]}),v=!0)})}),v){console.log("Placing piece on board at:",C);const E=d.map(A=>[...A]);m.forEach((A,D)=>{A.forEach((M,U)=>{M&&C.y+D<15&&C.x+U>=0&&C.x+U<8&&(E[C.y+D][C.x+U]=S)})}),h(E);let I=0;for(let A=14;A>=0;A--)E[A].every(D=>D!==0)&&(E.splice(A,1),E.unshift(Array(8).fill(0)),I++);return p(A=>A+I),r(A=>A+I*10),x(null),{x:3,y:0}}return console.log("Piece continuing to fall to Y:",y),{x:C.x,y}})},800);return()=>clearInterval(b)},[s,_,d]);const N=()=>{const b=d.map(C=>[...C]);return _&&_.shape.forEach((C,y)=>{C.forEach((v,E)=>{v&&w.y+y<15&&w.x+E>=0&&w.x+E<8&&(b[w.y+y][w.x+E]=_.color)})}),b};return l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-gray-800 p-4 rounded-lg inline-block",children:l.jsx("div",{className:"grid grid-cols-8 gap-1",children:N().map((b,C)=>b.map((y,v)=>l.jsx("div",{className:"w-6 h-6 border border-gray-600",style:{backgroundColor:y||"#374151"}},`${v}-${C}`)))})}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Lines: ",g]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Arrow keys to move piece"}),l.jsx("button",{onClick:()=>{h(Array(15).fill().map(()=>Array(8).fill(0))),x(null),P({x:3,y:0}),p(0),r(0)},className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Reset Game"})]})]})},f=()=>{try{switch(t){case"snake":return l.jsx(a,{});case"tetris":return l.jsx(u,{});case"click-counter":return l.jsx(c,{});default:return l.jsx("div",{children:"Game not found"})}}catch(d){return console.error("Error rendering game:",d),l.jsxs("div",{className:"text-center text-red-600",children:[l.jsx("p",{className:"text-lg font-bold mb-2",children:" Game Error"}),l.jsx("p",{className:"text-sm",children:"Something went wrong loading the game."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm",children:"Reload Game"})]})}};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[t==="snake"&&" Snake Game",t==="tetris"&&" Tetris Game",t==="puzzle"&&" Memory Puzzle"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:o,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",children:s?"Resume":"Pause"}),l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]})]}),l.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 min-h-[500px] flex items-center justify-center relative",children:[f(),l.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white p-2 rounded text-xs max-w-48",children:[l.jsx("p",{className:"font-bold mb-1",children:"Controls:"}),t==="snake"&&l.jsx("p",{children:"Arrow keys to move"}),t==="tetris"&&l.jsx("p",{children:"Arrow keys to move piece"}),t==="click-counter"&&l.jsx("p",{children:"Click the button rapidly!"})]}),l.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white p-2 rounded text-xs",children:[l.jsx("p",{className:"font-bold mb-1",children:"Status:"}),l.jsx("p",{children:s?" Paused":" Playing"})]})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("p",{className:"text-sm text-gray-500",children:"Games now run without time limits - play as long as you need!"})})]})})},gP=({user:t,nemesis:e,onBackToLogin:n,onResetForTesting:r})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(!1),[c,u]=k.useState(null),f=()=>{console.log("SOS sent to nemesis:",e.heroName);const _={timestamp:new Date().toISOString(),nemesis:e.heroName,status:"sent"};localStorage.setItem("lastSOS",JSON.stringify(_)),a(!0),setTimeout(()=>a(!1),5e3)},d=_=>{u(_),i(!0)},h=()=>{u(null),i(!1)};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-red-400 mb-2",children:" Distraction Games"}),l.jsx("p",{className:"text-gray-300",children:"Take your mind off cravings with simple games"})]}),l.jsxs("div",{className:"flex justify-start mb-6 gap-3",children:[l.jsx("button",{onClick:n,className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",children:" Back to Login"}),!1]}),l.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border-2 border-red-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:l.jsx("span",{className:"text-4xl",children:""})}),l.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Need Immediate Help?"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Press the SOS button to alert your nemesis and get instant support"}),l.jsx("button",{onClick:f,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-6 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:" SOS - Get Help Now"}),(()=>{const _=localStorage.getItem("lastSOS");if(_){const x=JSON.parse(_),w=Math.floor((Date.now()-new Date(x.timestamp))/(1e3*60));return l.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:l.jsxs("p",{className:"text-sm text-red-600",children:["Last SOS sent ",w," minutes ago to ",x.nemesis]})})}return null})()]})}),l.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border-2 border-orange-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-4",children:" Distract Yourself"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Play games to take your mind off the craving"}),l.jsx("button",{onClick:()=>d("snake"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-lg mb-4",children:" Play Snake"}),l.jsx("button",{onClick:()=>d("tetris"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-lg mb-4",children:" Play Tetris"}),l.jsx("button",{onClick:()=>d("click-counter"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-lg mb-4",children:" Click Counter"})]})}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border-2 border-blue-200",children:[l.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-4 text-center",children:" Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:()=>{alert(` Hydration helps reduce cravings!

Drink a full glass of water slowly.

This will help you feel full and reduce the urge to vape.`)},className:"bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold py-4 px-4 rounded-xl transition-colors",children:" Drink Water"}),l.jsx("button",{onClick:()=>{alert(` Take 3 deep breaths:

1. Inhale for 4 seconds
2. Hold for 4 seconds
3. Exhale for 4 seconds

Repeat 3 times`)},className:"bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold py-4 px-4 rounded-xl transition-colors",children:" Breathe"}),l.jsx("button",{onClick:()=>{alert(` Take a 5-minute walk:

Physical activity releases endorphins that can help reduce cravings.

Walk around your room or step outside if possible.`)},className:"bg-purple-100 hover:bg-purple-200 text-purple-700 font-semibold py-4 px-4 rounded-xl transition-colors",children:" Walk"}),l.jsx("button",{onClick:()=>{alert(` Call a supportive friend or family member:

Talking to someone can help distract you and provide emotional support during this difficult moment.`)},className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700 font-semibold py-4 px-4 rounded-xl transition-colors",children:" Call Friend"}),l.jsx("button",{onClick:()=>{alert(` Quick Meditation:

1. Close your eyes
2. Focus on your breath
3. Count to 10 slowly
4. Repeat 3 times

This helps calm your mind and reduce stress.`)},className:"bg-green-100 hover:bg-green-200 text-green-700 font-semibold py-4 px-4 rounded-xl transition-colors",children:" Meditate"}),l.jsx("button",{onClick:()=>{alert(` Read something engaging:

Pick up a book, magazine, or read an article online.

Reading helps shift your focus away from cravings and engages your mind.`)},className:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-semibold py-4 px-4 rounded-xl transition-colors",children:" Read"})]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("h3",{className:"text-xl font-bold text-green-600 mb-2",children:"Help is on the way!"}),l.jsxs("p",{className:"text-gray-600 mb-4",children:["Your nemesis ",l.jsx("strong",{children:e.heroName})," has been notified and will reach out soon."]}),l.jsx("button",{onClick:()=>a(!1),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Got it"})]})}),s&&c&&l.jsx(mP,{gameType:c,onClose:h}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border-2 border-green-200 mt-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-4 text-center",children:" Your Progress"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-lg font-bold text-green-700",children:"Craving Wins"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:localStorage.getItem("cravingWins")||0}),l.jsx("p",{className:"text-sm text-green-600",children:"Times you resisted"})]}),l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-lg font-bold text-blue-700",children:"Total Time"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(()=>{const _=parseInt(localStorage.getItem("totalGameTime")||0),x=Math.floor(_/60),w=_%60;return x>0?`${x}h ${w}m`:`${w}m`})()}),l.jsx("p",{className:"text-sm text-blue-600",children:"Distracted from cravings"})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-lg font-bold text-purple-700",children:"Best Score"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:localStorage.getItem("bestGameScore")||0}),l.jsx("p",{className:"text-sm text-purple-600",children:"Highest game score"})]})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>{const _=parseInt(localStorage.getItem("cravingWins")||0);localStorage.setItem("cravingWins",_+1),alert(` Great job resisting that craving!

Your progress has been recorded.

Keep up the amazing work!`),window.location.reload()},className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" I Resisted a Craving!"})})]})]})})},yP=({user:t,onNavigate:e})=>{var nr;const[n,r]=k.useState(null),[s,i]=k.useState(!1),[o,a]=k.useState(!1),[c,u]=k.useState(!1),[f,d]=k.useState(!1),[h,_]=k.useState(!1),[x,w]=k.useState(null),[P,g]=k.useState(0),[p,m]=k.useState(null),[S,N]=k.useState(!1),[b,C]=k.useState([]);k.useEffect(()=>{const X=localStorage.getItem("quitCoachRelapseDate");X&&r(new Date(X));const we=new Date().toDateString(),ut=localStorage.getItem(`water_${we}`),Me=localStorage.getItem(`mood_${we}`),Je=localStorage.getItem(`breathing_${we}`);ut&&g(parseInt(ut)),Me&&m(JSON.parse(Me)),Je&&N(Je==="true");const Ur=localStorage.getItem("scheduledTriggers");Ur&&C(JSON.parse(Ur))},[]);const y=()=>n&&n>((t==null?void 0:t.quitDate)||new Date(0))?n:(t==null?void 0:t.quitDate)||new Date,v=()=>{const X=new Date,we=new Date(X);we.setHours(24,0,0,0);const ut=we-X,Me=Math.floor(ut/(1e3*60*60)),Je=Math.floor(ut%(1e3*60*60)/(1e3*60)),Ur=Math.floor(ut%(1e3*60)/1e3);return{hours:Me,minutes:Je,seconds:Ur}},[E,I]=k.useState(v()),[A,D]=k.useState(0),[M,U]=k.useState(0),[z,ee]=k.useState(0),[j,W]=k.useState(0);k.useEffect(()=>{const X=setInterval(()=>{I(v());const we=y(),Me=new Date-we,Je=Math.floor(Me/(1e3*60*60*24)),Ur=Math.floor(Me%(1e3*60*60*24)/(1e3*60*60)),Dv=Math.floor(Me%(1e3*60*60)/(1e3*60)),Ov=Math.floor(Me%(1e3*60)/1e3);D(Je),U(Ur),ee(Dv),W(Ov)},1e3);return()=>clearInterval(X)},[n,t==null?void 0:t.quitDate]);const B=()=>{const X=new Date;r(X),localStorage.setItem("quitCoachRelapseDate",X.toISOString())},ge=(()=>{const X=new Date,we=X.getDay(),ut=we===0?6:we-1,Me=[{name:"Mon",color:"bg-slate-700"},{name:"Tue",color:"bg-slate-700"},{name:"Wed",color:"bg-slate-700"},{name:"Thu",color:"bg-slate-700"},{name:"Fri",color:"bg-slate-700"},{name:"Sat",color:"bg-slate-700"},{name:"Sun",color:"bg-slate-700"}];for(let Je=0;Je<=ut;Je++)Me[Je].color="bg-green-500";return n&&n.toDateString()===X.toDateString()&&(Me[ut].color="bg-red-500"),Me})(),Fr=X=>{g(X);const we=new Date().toDateString();localStorage.setItem(`water_${we}`,X.toString()),i(!1)},qt=X=>{m(X);const we=new Date().toDateString();localStorage.setItem(`mood_${we}`,JSON.stringify(X)),u(!1)},Ls=()=>{N(!0);const X=new Date().toDateString();localStorage.setItem(`breathing_${X}`,"true"),a(!1)},Yt=(X,we,ut)=>{const Me={day:X,triggerType:we,time:ut,id:Date.now()},Je=[...b,Me];C(Je),localStorage.setItem("scheduledTriggers",JSON.stringify(Je)),d(!1)};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 pb-20",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 pt-16",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:t!=null&&t.avatar?l.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):l.jsx("span",{className:"text-white font-bold text-lg",children:t!=null&&t.heroName?t.heroName.charAt(0).toUpperCase():"H"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-lg",children:"Hello,"}),l.jsx("p",{className:"text-white text-2xl font-bold",children:(t==null?void 0:t.heroName)||"Hero"})]})]}),l.jsx("div",{className:"bg-yellow-500 px-3 py-1 rounded-full",children:l.jsx("span",{className:"font-bold text-slate-900",children:A})})]}),l.jsxs("div",{className:"px-4 space-y-6",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:B,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-lg",children:"RELAPSE"}),l.jsx("span",{className:"text-2xl",children:""})]}),l.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Reset progress and start over"})]})}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-white text-xl font-bold",children:"My week"}),l.jsxs("div",{className:"bg-green-500 px-3 py-1 rounded-full flex items-center gap-1",children:[l.jsx("span",{className:"text-white text-sm",children:""}),l.jsx("span",{className:"text-white font-bold",children:"0"})]})]}),l.jsx("div",{className:"flex justify-between items-center mb-4",children:ge.map((X,we)=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`w-8 h-8 rounded-full mb-1 ${X.color}`}),l.jsx("p",{className:"text-gray-400 text-xs",children:X.name})]},X.name))})]}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Remaining time for Today"}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-white text-3xl font-bold",children:[E.hours.toString().padStart(2,"0"),":",E.minutes.toString().padStart(2,"0"),":",E.seconds.toString().padStart(2,"0")]}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Countdown to midnight"})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"My progress"}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-yellow-400 text-lg",children:""}),l.jsx("span",{className:"text-gray-300",children:"Clean for"})]}),l.jsxs("div",{className:"flex items-baseline gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-3xl font-bold",children:A.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"days"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-3xl font-bold",children:M.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"hours"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-3xl font-bold",children:z.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"minutes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white text-2xl font-bold animate-pulse",children:j.toString().padStart(2,"0")}),l.jsx("div",{className:"text-gray-400 text-sm",children:"seconds"})]})]}),n&&l.jsx("div",{className:"mt-3 text-center",children:l.jsxs("p",{className:"text-red-400 text-sm",children:["Last relapse: ",n.toLocaleDateString()," at ",n.toLocaleTimeString()]})})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Habit Tracking"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>i(!0),className:"w-full bg-gradient-to-r from-blue-500/20 to-blue-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Stay hydrated"}),l.jsx("p",{className:"text-gray-300 text-sm",children:P>0?`${P} glasses today`:"Tap to log water intake"})]}),l.jsx("div",{className:"text-blue-400 text-2xl",children:""})]})}),l.jsx("button",{onClick:()=>a(!0),className:"w-full bg-gradient-to-r from-purple-500/20 to-purple-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Complete breathing exercise"}),l.jsx("p",{className:"text-gray-300 text-sm",children:S?"Completed! Stay calm!":"Tap to start 4-cycle breathing"})]}),l.jsx("div",{className:"text-purple-400 text-2xl",children:""})]})}),l.jsx("button",{onClick:()=>u(!0),className:"w-full bg-gradient-to-r from-green-500/20 to-green-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Mood tracking"}),l.jsx("p",{className:"text-gray-300 text-sm",children:p?`You feel ${p.name.toLowerCase()}`:"How do you feel today?"})]}),l.jsx("div",{className:"text-green-400 text-2xl",children:""})]})})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"This Week's Battle Plan"}),l.jsx("button",{onClick:()=>d(!0),className:"w-full bg-gradient-to-r from-orange-500/20 to-orange-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Trigger defense planning"}),l.jsx("p",{className:"text-gray-300 text-sm",children:b.length>0?`${b.length} triggers planned`:"Plan your trigger defense strategy"})]}),l.jsx("div",{className:"text-orange-400 text-2xl",children:""})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Benefits Monitor"}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-yellow-400",children:"$"}),l.jsx("span",{className:"text-gray-300 text-sm",children:"Money saved"})]}),l.jsx("div",{className:"text-white text-2xl font-bold",children:((nr=t==null?void 0:t.stats)==null?void 0:nr.moneySaved)||0}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Work in progress"})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Diary"}),l.jsx("button",{onClick:()=>_(!0),className:"w-full bg-gradient-to-r from-indigo-500/20 to-indigo-600/20 bg-slate-800/50 rounded-xl p-4 text-left hover:scale-105 transition-all duration-300",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Monthly overview"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"View your progress and daily activities"})]}),l.jsx("div",{className:"text-indigo-400 text-2xl",children:""})]})})]})]}),l.jsx(_P,{isOpen:s,onClose:()=>i(!1),onConfirm:Fr,currentWater:P}),l.jsx(vP,{isOpen:o,onClose:()=>a(!1),onComplete:Ls}),l.jsx(xP,{isOpen:c,onClose:()=>u(!1),onSelect:qt,selectedMood:p}),l.jsx(wP,{isOpen:f,onClose:()=>d(!1),onSchedule:Yt,scheduledTriggers:b}),l.jsx(SP,{isOpen:h,onClose:()=>_(!1),selectedDate:x,onDateSelect:w,dailyData:{water:P,mood:p,breathing:S,relapseDate:n}})]})},_P=({isOpen:t,onClose:e,onConfirm:n,currentWater:r})=>{const[s,i]=k.useState(r);return t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Water Intake"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"How many glasses of water today?"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("input",{type:"number",min:"0",max:"20",value:s,onChange:o=>i(parseInt(o.target.value)||0),className:"w-full bg-slate-700 text-white text-center text-2xl font-bold py-4 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",placeholder:"0"}),l.jsx("p",{className:"text-gray-400 text-sm text-center mt-2",children:"0-20 glasses"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:e,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:()=>n(s),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Confirm"})]})]})}):null},vP=({isOpen:t,onClose:e,onComplete:n})=>{const[r,s]=k.useState(1),[i,o]=k.useState("exhale"),[a,c]=k.useState(5),[u,f]=k.useState(!1);k.useEffect(()=>{if(!t||!u)return;const x=setInterval(()=>{c(w=>{if(w<=1){if(i==="exhale")o("inhale"),c(4);else if(i==="inhale")o("hold"),c(7);else if(i==="hold")if(r<4)s(P=>P+1),o("exhale"),c(5);else return f(!1),n(),0;return w}return w-1})},1e3);return()=>clearInterval(x)},[t,u,i,r,n]);const d=()=>{f(!0),s(1),o("exhale"),c(5)};if(!t)return null;const h=()=>{switch(i){case"exhale":return"Exhale, empty lungs";case"inhale":return"Inhale quietly through nose";case"hold":return"Hold your breath";default:return""}},_=()=>{switch(i){case"exhale":return"w-32 h-32";case"inhale":return"w-48 h-48";case"hold":return"w-40 h-40";default:return"w-40 h-40"}};return l.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"text-center text-white",children:u?l.jsxs(l.Fragment,{children:[l.jsxs("h3",{className:"text-2xl font-bold mb-4",children:["Cycle ",r,"/4"]}),l.jsx("p",{className:"text-xl text-gray-300 mb-8",children:h()}),l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("div",{className:`${_()} rounded-full border-4 border-blue-400 flex items-center justify-center transition-all duration-1000 ${i==="hold"?"animate-pulse":""}`,children:l.jsx("span",{className:"text-4xl font-bold",children:a})})}),l.jsx("button",{onClick:e,className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Stop"})]}):l.jsxs("div",{className:"mb-8",children:[l.jsx("h3",{className:"text-3xl font-bold mb-4",children:" Breathing Exercise"}),l.jsx("p",{className:"text-xl text-gray-300 mb-6",children:"4-cycle breathing pattern"}),l.jsx("button",{onClick:d,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl text-xl transition-colors",children:"Start Exercise"})]})})})},xP=({isOpen:t,onClose:e,onSelect:n,selectedMood:r})=>{const s=[{name:"Anger",icon:"",color:"bg-red-500"},{name:"Disgust",icon:"",color:"bg-orange-500"},{name:"Enjoyment",icon:"",color:"bg-yellow-500"},{name:"Calm",icon:"",color:"bg-blue-500"},{name:"Fear",icon:"",color:"bg-purple-500"},{name:"Sadness",icon:"",color:"bg-indigo-500"},{name:"Indifferent",icon:"",color:"bg-gray-500"}];return t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" How do you feel?"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Select your current mood"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:s.map(i=>l.jsxs("button",{onClick:()=>n(i),className:`p-4 rounded-xl text-center transition-all duration-300 hover:scale-105 ${(r==null?void 0:r.name)===i.name?"ring-2 ring-blue-400":"bg-slate-700 hover:bg-slate-600"}`,children:[l.jsx("div",{className:`w-12 h-12 ${i.color} rounded-full flex items-center justify-center text-2xl mx-auto mb-2`,children:i.icon}),l.jsx("p",{className:"text-white font-semibold",children:i.name})]},i.name))}),l.jsx("button",{onClick:e,className:"w-full bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})}):null},wP=({isOpen:t,onClose:e,onSchedule:n,scheduledTriggers:r})=>{const[s,i]=k.useState(""),[o,a]=k.useState(""),[c,u]=k.useState("12:00"),f=["Social event","Drinks","High-stress event","Social pressure"],d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Trigger Defense Planning"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Schedule your trigger defense strategy"})]}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Day of the week"}),l.jsxs("select",{value:s,onChange:h=>i(h.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"Select a day"}),d.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Trigger type"}),l.jsxs("select",{value:o,onChange:h=>a(h.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"Select trigger type"}),f.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"Time"}),l.jsx("input",{type:"time",value:c,onChange:h=>u(h.target.value),className:"w-full bg-slate-700 text-white p-3 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:e,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:()=>{s&&o&&c&&n(s,o,c)},disabled:!s||!o||!c,className:"flex-1 bg-orange-600 hover:bg-orange-700 disabled:bg-slate-600 text-white font-bold py-3 rounded-lg transition-colors disabled:cursor-not-allowed",children:"Schedule"})]})]})}):null},SP=({isOpen:t,onClose:e,selectedDate:n,onDateSelect:r,dailyData:s})=>t?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Daily Summary"}),l.jsx("p",{className:"text-gray-300 text-sm",children:"Your activities and progress"})]}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:" Water Intake"}),l.jsxs("p",{className:"text-gray-300",children:[s.water," glasses"]})]}),l.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:" Mood"}),l.jsx("p",{className:"text-gray-300",children:s.mood?s.mood.name:"Not logged"})]}),l.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:" Breathing Exercise"}),l.jsx("p",{className:"text-gray-300",children:s.breathing?" Completed":" Not completed"})]}),s.relapseDate&&l.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4 border border-red-500",children:[l.jsx("h4",{className:"text-red-300 font-semibold mb-2",children:" Relapse"}),l.jsxs("p",{className:"text-red-300",children:[s.relapseDate.toLocaleDateString()," at ",s.relapseDate.toLocaleTimeString()]})]})]}),l.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Close"})]})}):null,EP=({onResetApp:t})=>l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 pb-20",children:l.jsxs("div",{className:"max-w-md mx-auto px-4 pt-16",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx(Tv,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Settings"}),l.jsx("p",{className:"text-gray-300",children:"Manage your app preferences"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsx("h3",{className:"text-white font-semibold mb-2",children:"App Data"}),l.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Reset your progress and start over"}),l.jsx("button",{onClick:t,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg transition-colors",children:"Reset App & Start Over"})]}),l.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4",children:[l.jsx("h3",{className:"text-white font-semibold mb-2",children:"About"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"QuitCard Arena v1.0.0"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Your journey to freedom starts here"})]})]})]})}),CP=({user:t,nemesis:e})=>{const[n,r]=k.useState([{id:1,sender:"buddy",text:"Hey! How's your quit journey going?",timestamp:new Date(Date.now()-6e4).toLocaleTimeString()},{id:2,sender:"user",text:"Going strong! Day 3 now.",timestamp:new Date(Date.now()-3e4).toLocaleTimeString()}]),[s,i]=k.useState(""),[o,a]=k.useState(!1),[c,u]=k.useState(null),[f,d]=k.useState(!1),h=()=>{if(s.trim().length===0)return;const w=s.trim().slice(0,20),P={id:Date.now(),sender:"user",text:w,timestamp:new Date().toLocaleTimeString()};r(g=>[...g,P]),i(""),a(!0),setTimeout(()=>{const g=["Keep it up! ","You're doing great!","Stay strong today!","One day at a time!","I believe in you!","You've got this!","Every day counts!","Stay focused! "],p=g[Math.floor(Math.random()*g.length)],m={id:Date.now()+1,sender:"buddy",text:p,timestamp:new Date().toLocaleTimeString()};r(S=>[...S,m]),a(!1)},1500)},_=w=>{w.key==="Enter"&&h()},x=async()=>{d(!0),u(null);try{const{calculateCompatibility:w,findBuddyMatch:P,createBuddyPair:g}=await Sn(()=>import("./buddyMatching-6fde8c0d.js"),[]),{mockUsers:p}=await Sn(()=>import("./mockUsers-0595251c.js"),[]);console.log(" Starting Buddy Matching Algorithm Test...");const m=p.length;console.log(`Found ${m} mock users`);const S=p[0],N=p[1],b=w(S,N);console.log(`Compatibility between ${S.heroName} and ${N.heroName}: ${b} points`);const C=p[0],y=p.filter(D=>D.id!==C.id),v=P(C,y);let E="No suitable match found",I=0;if(v){E=v.heroName,I=w(C,v),console.log(`Best match for ${C.heroName}: ${v.heroName} (Score: ${I})`);const D=g(C,v);console.log("Buddy pair created:",D)}else console.log("No suitable match found for test user");const A={userCount:m,user1Name:S.heroName,user2Name:N.heroName,compatibilityScore:b,testUserName:C.heroName,matchResult:E,matchScore:I,timestamp:new Date().toLocaleTimeString()};u(A),console.log(" Buddy Matching Algorithm Test completed successfully!"),console.log("Check console for detailed logs")}catch(w){console.error(" Error testing buddy matching algorithm:",w),u({error:!0,message:w.message,timestamp:new Date().toLocaleTimeString()})}finally{d(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 pb-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:" Chat with Buddy"}),l.jsx("p",{className:"text-gray-300",children:"Stay connected with your quit buddy for support"})]}),l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:[n.map(w=>l.jsx("div",{className:`flex ${w.sender==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-2xl ${w.sender==="user"?"bg-blue-600 text-white":"bg-slate-700 text-gray-200"}`,children:[l.jsx("div",{className:"text-sm",children:w.text}),l.jsx("div",{className:"text-xs opacity-70 mt-1",children:w.timestamp})]})},w.id)),o&&l.jsx("div",{className:"flex justify-start",children:l.jsx("div",{className:"bg-slate-700 text-gray-200 px-4 py-2 rounded-2xl",children:l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("span",{className:"text-sm",children:"Buddy is typing"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:s,onChange:w=>i(w.target.value),onKeyPress:_,placeholder:"Type your message (max 20 chars)...",maxLength:20,className:"flex-1 bg-slate-700 text-white px-4 py-3 rounded-xl border border-slate-600 focus:border-blue-500 focus:outline-none"}),l.jsx("button",{onClick:h,disabled:s.trim().length===0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white px-6 py-3 rounded-xl transition-colors disabled:cursor-not-allowed",children:"Send"})]}),l.jsx("div",{className:"text-right mt-2",children:l.jsxs("span",{className:`text-xs ${s.length>=18?"text-yellow-400":"text-gray-400"}`,children:[s.length,"/20"]})})]}),l.jsx("div",{className:"mt-6 bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:e.heroName.charAt(0)}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:e.heroName}),l.jsx("p",{className:"text-gray-300",children:"Your Quit Buddy"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Always here to support you"})]})]})}),l.jsxs("div",{className:"mt-6 bg-slate-800 rounded-2xl p-6 shadow-2xl border border-slate-700",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Test Buddy Matching Algorithm"}),l.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Verify the matching service works correctly"}),l.jsx("button",{onClick:x,disabled:f,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-slate-600 text-white px-6 py-3 rounded-xl transition-colors disabled:cursor-not-allowed font-semibold",children:f?"Testing...":"Test Algorithm"})]}),c&&l.jsxs("div",{className:"mt-4 p-4 bg-slate-700 rounded-xl border border-slate-600",children:[l.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Testing Results:"}),c.error?l.jsxs("div",{className:"text-red-400",children:[l.jsx("p",{className:"font-semibold",children:" Test Failed:"}),l.jsx("p",{className:"text-sm",children:c.message}),l.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Timestamp: ",c.timestamp]})]}):l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsx("p",{className:"text-green-400",children:l.jsxs("span",{className:"font-semibold",children:[" Found ",c.userCount," mock users"]})}),l.jsx("p",{className:"text-blue-400",children:l.jsxs("span",{className:"font-semibold",children:["Compatibility score between ",c.user1Name," and ",c.user2Name,": ",c.compatibilityScore," points"]})}),l.jsxs("p",{className:"text-yellow-400",children:[l.jsxs("span",{className:"font-semibold",children:["Best match for ",c.testUserName,": ",c.matchResult]}),c.matchScore>0&&` (Score: ${c.matchScore})`]}),l.jsxs("p",{className:"text-gray-400 text-xs mt-3",children:[l.jsx("span",{className:"font-semibold",children:"Check console for detailed logs"}),l.jsx("br",{}),"Timestamp: ",c.timestamp]})]})]})]})]})})},bP=()=>{const[t,e]=k.useState("arena"),[n,r]=k.useState("auth"),[s,i]=k.useState(null),[o,a]=k.useState(null),[c,u]=k.useState(!1),[f,d]=k.useState(null),[h,_]=k.useState(!0);k.useEffect(()=>{const v=I=>{if(I.message&&I.message.includes("content_script")){console.warn("Browser extension error (ignored):",I.message);return}if(I.message&&(I.message.includes("FrameDoesNotExistError")||I.message.includes("background.js"))){console.warn("Background frame error (ignored):",I.message);return}console.error("Global error caught:",I)},E=I=>{if(I.reason&&I.reason.message&&I.reason.message.includes("content_script")){console.warn("Browser extension promise rejection (ignored):",I.reason.message);return}if(I.reason&&I.reason.message&&(I.reason.message.includes("FrameDoesNotExistError")||I.reason.message.includes("background.js"))){console.warn("Background frame promise rejection (ignored):",I.reason.message);return}console.error("Unhandled promise rejection:",I.reason)};return window.addEventListener("error",v),window.addEventListener("unhandledrejection",E),()=>{window.removeEventListener("error",v),window.removeEventListener("unhandledrejection",E)}},[]),k.useEffect(()=>{const v=async(E=0)=>{try{const{ref:I,set:A,get:D,child:M}=await Sn(()=>import("./index.esm-3075dbde.js"),[]),U=I(rr),z=M(U,"healthchecks/vite_dev");await A(z,{lastRun:Date.now()});const ee=await D(z);console.log(" Firebase RTDB connected. Healthcheck exists:",ee.exists())}catch(I){if(console.error("Firebase connectivity test failed:",(I==null?void 0:I.message)||I),E<3){const A=Math.pow(2,E)*1e3;console.log(`Retrying Firebase connection in ${A}ms... (attempt ${E+1}/3)`),setTimeout(()=>v(E+1),A)}else console.error("Firebase connection failed after 3 retries. Check your internet connection and Firebase configuration.")}};v()},[]),k.useEffect(()=>{let v=!0;const E=eC(es,async A=>{if(v){console.log("Auth state changed:",A?`User: ${A.uid}`:"No user"),_(!0);try{if(A){d(A);const{ref:D,get:M}=await Sn(()=>import("./index.esm-3075dbde.js"),[]);try{const U=D(rr,`users/${A.uid}`),z=await M(U);if(z.exists()){const ee=z.val();console.log("Existing user data found:",ee),ee.onboardingCompleted?(a(ee),u(!0),r("arena")):(a(ee),u(!1),r("onboarding"))}else r("onboarding")}catch(U){console.error("Error fetching user data:",U),r("onboarding")}}else console.log("No Firebase user authenticated"),d(null),a(null),u(!1),r("auth")}catch(D){console.error("Unexpected error in auth state listener:",D),r("auth")}finally{v&&_(!1)}}}),I=setTimeout(()=>{console.warn("Auth loading timeout - forcing to auth screen"),_(!1),r("auth")},5e3);return()=>{v=!1,E(),clearTimeout(I)}},[]);const x=async v=>{console.log("Authentication successful, checking for existing user data...",{uid:v==null?void 0:v.uid,email:v==null?void 0:v.email});try{const{ref:E,get:I}=await Sn(()=>import("./index.esm-3075dbde.js"),[]);console.log("Checking database for existing user data...");const A=E(rr,`users/${v.uid}`),D=await I(A);if(D.exists()){const M=D.val();console.log("Existing user data found - going to Arena"),a(M);const U=!!M.onboardingCompleted;u(U),r("arena")}else console.log("No user data found - starting onboarding"),r("onboarding")}catch(E){console.error("Database check failed:",E),r("onboarding")}},w=async()=>{try{await tC(es),a(null),u(!1),r("auth"),localStorage.removeItem("quitCoachUser")}catch(v){console.error("Error signing out:",v)}},P={heroName:"HealthGuardian Emma",stats:{streakDays:Math.floor(Math.random()*5)+1,addictionLevel:50,willpower:80,motivation:90,cravingResistance:85,triggerDefense:75,moneySaved:Math.floor(Math.random()*30)+10,experiencePoints:Math.floor(Math.random()*100)+20},achievements:[],archetype:"HEALTH_WARRIOR",avatar:Qa("nemesis-emma","adventurer")},g=async v=>{console.log("Onboarding completed with user data:",v);try{if(!v||!v.heroName||!v.stats)throw new Error("Invalid user data received from onboarding");if(!f)throw new Error("No authenticated user found");const E={...v,uid:f.uid,email:f.email,displayName:f.displayName||v.heroName,photoURL:f.photoURL,onboardingCompleted:!0,updatedAt:Date.now()};console.log("Saving user data to Firebase:",E);const{ref:I,set:A}=await Sn(()=>import("./index.esm-3075dbde.js"),[]),D=I(rr,`users/${f.uid}`);await A(D,E),console.log("Firebase save successful, updating app state..."),a(E),u(!0),r("arena"),console.log("Onboarding completed successfully:",{user:E,hasCompletedOnboarding:!0,currentView:"arena"})}catch(E){console.error("Error in handleOnboardingComplete:",E);const I={heroName:(v==null?void 0:v.heroName)||"Hero",archetype:(v==null?void 0:v.archetype)||"The Determined",avatar:(v==null?void 0:v.avatar)||Qa("fallback"),stats:{addictionLevel:50,mentalStrength:50,motivation:50,triggerDefense:30,streakDays:0,moneySaved:0,experiencePoints:0},achievements:[],quitDate:new Date,uid:f==null?void 0:f.uid,email:f==null?void 0:f.email,onboardingCompleted:!0};if(console.log("Using fallback user data due to error:",I),f)try{console.log("Attempting to save fallback data to Firebase...");const{ref:A,set:D}=await Sn(()=>import("./index.esm-3075dbde.js"),[]),M=A(rr,`users/${f.uid}`);await D(M,I),console.log("Fallback data saved to Firebase successfully")}catch(A){console.error("Failed to save fallback data to Firebase:",A)}a(I),u(!0),r("arena"),console.log("App state set with fallback data")}},p=()=>{a(null),u(!1),r("onboarding"),e("arena"),i(null),localStorage.removeItem("quitCoachUser")},m=()=>{w()},S=async()=>{if(!f){console.error("No authenticated user to reset");return}try{console.log("Resetting ALL user data for testing...");const{ref:v,set:E}=await Sn(()=>import("./index.esm-3075dbde.js"),[]),I=v(rr,`users/${f.uid}`);await E(I,null);const A=v(rr,"users");await E(A,null),console.log("All user data cleared from database"),a(null),u(!1),r("onboarding"),console.log("Account reset successful - ready for fresh onboarding")}catch(v){console.error("Error resetting account for testing:",v)}},N=v=>{console.log("Tab changed to:",v),e(v),r(v)},b=v=>{r(v==="mood-selector"?"mood-selector":"profile")},C=v=>{i(v),r("profile")},y=()=>{r("profile")};return h?l.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-white",children:"Loading..."}),l.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Checking authentication status..."}),l.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"This should take only a few seconds"})]})}):n==="auth"?l.jsx(ZT,{onAuthSuccess:x}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[!1,n==="onboarding"&&l.jsxs("div",{children:[console.log("Rendering OnboardingFlow"),l.jsx(cP,{onComplete:g})]}),c&&o?l.jsxs(l.Fragment,{children:[console.log("Main app rendering with user:",o,"view:",n),n==="arena"&&l.jsxs("div",{children:[console.log("Rendering ArenaView with user:",o),(()=>{try{return l.jsx(pP,{user:o,nemesis:P,onBackToLogin:m,onResetForTesting:S})}catch(v){return console.error("Error rendering ArenaView:",v),l.jsxs("div",{className:"text-white text-center p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Error Loading Arena"}),l.jsx("p",{className:"text-gray-300 mb-4",children:v.message}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:"Reload App"})]})}})()]}),n==="craving-support"&&l.jsxs("div",{children:[console.log("Rendering CravingSupportView with user:",o),l.jsx(gP,{user:o,nemesis:P,onBackToLogin:m,onResetForTesting:S})]}),n==="profile"&&l.jsxs("div",{children:[console.log("Rendering ProfileView with user:",o),l.jsx(yP,{user:o,onNavigate:b})]}),n==="mood-selector"&&l.jsx(MoodSelector,{onMoodSelect:C,onBack:y}),n==="buddy-chat"&&l.jsx(CP,{user:o,nemesis:P}),n==="settings"&&l.jsx(EP,{onResetApp:p}),l.jsx(fP,{activeTab:t,onTabChange:N})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen text-white",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),l.jsx("p",{className:"text-gray-300",children:c?"User data missing":"Onboarding not completed"}),l.jsxs("p",{className:"text-gray-300",children:["Current view: ",n]}),l.jsxs("p",{className:"text-gray-300",children:["User data: ",o?JSON.stringify(o,null,2):"None"]}),l.jsx("button",{onClick:()=>{console.log("Debug button clicked"),console.log("Current state:",{hasCompletedOnboarding:c,user:o,currentView:n}),console.log("User data:",o)},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Debug State"})]})})]})};Ic.createRoot(document.getElementById("root")).render(l.jsx(Xv.StrictMode,{children:l.jsx(bP,{})}));export{AP as $,OP as A,MP as B,LP as C,kr as D,IP as E,dk as F,HP as G,GP as H,KP as I,qP as J,kP as K,QP as L,uk as M,NP as N,ck as O,TP as P,Ot as Q,Dt as R,sR as S,Rk as T,nR as U,X_ as V,PP as W,RP as X,zP as Y,BP as Z,aR as _,Nk as a,ct as b,yh as c,Ut as d,Cs as e,oR as f,kk as g,iR as h,tR as i,UP as j,WP as k,YP as l,XP as m,JP as n,jP as o,Ik as p,ZP as q,nv as r,U0 as s,eR as t,rR as u,Mh as v,$P as w,VP as x,FP as y,DP as z};
